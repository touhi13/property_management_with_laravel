!function(e){"use strict";function n(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||!1}function l(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}var u;e.support.fullscreen="requestFullscreen"in(u=document.documentElement)||"mozRequestFullScreen"in u&&document.mozFullScreenEnabled||"webkitRequestFullScreen"in u||"msRequestFullscreen"in u,e.fn.fullScreen=function(u){if(!e.support.fullscreen||1!==this.length)return this;if(n())return l(),this;var c,t,r=e.extend({background:"#111",callback:e.noop(),fullscreenClass:"fullScreen"},u),s=this,o=e("<div>",{css:{"overflow-y":"auto",background:r.background,width:"100%",height:"100%"}}).insertBefore(s).append(s);return s.addClass(r.fullscreenClass),(c=o.get(0)).requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullScreen?c.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):c.msRequestFullscreen&&c.msRequestFullscreen(),o.click(function(e){e.target==this&&l()}).addClass("fullscreen-container"),s.cancel=function(){return l(),s},t=function(n){n||(e(document).off("fullscreenchange mozfullscreenchange webkitfullscreenchange keyup MSFullscreenChange"),s.removeClass(r.fullscreenClass).insertBefore(o),o.remove()),r.callback&&r.callback(n,key)},e(document).on("keyup",function(e){27==e.keyCode&&t(n(),key)}),s},e.fn.cancelFullScreen=function(){return l(),this},e.fn.fullScreenStatus=function(){return n()}}(jQuery);
