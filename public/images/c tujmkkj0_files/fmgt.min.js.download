!function(){var e=void 0;!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.ZdGTag=t()}}(function(){var e;return function(){function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}return e}()({1:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){(function(e,t,i,n,r){var o=function(){function e(){}return e.configMap={LB_MOUSEOVER_WIDTH:300,LB_MOUSEOVER_HEIGHT:250,PARALLEL_TAG_GENERATOR_LIMIT:25,VASTURL_PATH:"asw/fns.vast",ADSERVER_URL:"z2.zedo.com/",ADSERVER_SECURE_URL:"saxp.zedo.com/",ADREQ_PATH:"asw/fmg.json",EVENTID_JSON:"localhost:8080/out/events.json",GECKO_FILEPATH:"c14.zedo.com/gecko/core/v6.19/fmgt.min.js",GECKO_SECURE_FILEPATH:"ss3.zedo.com/gecko/core/v6.19/fmgt.min.js",HEADERBIDDER_REQUEST_URL:"z2.zedo.com/asw/hb.json?h=",HEADERBIDDER_SECURE_REQUEST_URL:"saxp.zedo.com/asw/hb.json?h=",DOMAIN:"zedo",LOG_LEVEL:"fatal",DIM_SUFFIX:"px",LOG_PASS_PHRASE:"zlogger",DEFAULT_BANDWIDTH:96,LOG_SERVER_LEVEL:"error",LOG_SERVER_THRESHOLD:.5,LOG_SERVER_URL_SECURE:"https://tt3.zedo.com/ads2/p/l?a=2694918;c=2500000815;x=3840;n=2500;e=i;i=0;s=11;met=[MET];et=[ET];z=[CACHEBUSTING]",LOG_SERVER_URL_NONSECURE:"http://m8.zedo.com/log/p.gif?a=2694917;c=2500000814;x=3840;n=2500;e=i;i=0;s=11;met=[MET];et=[ET];z=[CACHEBUSTING]",IMAGE_PATH_10KB:"simg.zedo.com/speed-test/10k.gif",SECURE_IMAGE_PATH_10KB:"ss3.zedo.com/utils/zplayer/wrapper/v7.2/HTML/app/assets/images/10k.gif",BROADBAND_DETECTION_TIMEOUT:5e3,VIEWABILITY_POLLING_INTERVAL:500,VIEWABILITY_DEBUG:!1,ID_PREFIX:"zdt_",VIDEO_URL:"localhost:8080:8080/out/video.js",COOKIESETTINGS_PAGE_NONSECURE_URL:"http://c14.zedo.com/gecko/CookieSettingDetector.html",COOKIESETTINGS_PAGE_SECURE_URL:"https://ss3.zedo.com/gecko/CookieSettingDetector.html",VIDEO_PLAYER_URL:"http://c14.zedo.com/utils/zplayer/wrapper/v9.0/wrapper.js",VIDEO_PLAYER_SECURE_URL:"https://ss3.zedo.com/utils/zplayer/wrapper/v9.0/wrapper.js",VIDEO_LOADER_INTERVAL:10,SWIPEUP_CLOSE_BTN:"http://c14.zedo.com/jsc/images/close-button-round-overlap.png",SWIPEUP_UP_ARROW:"http://c14.zedo.com/jsc/images/up-double-arrows.png",SWIPEUP_DOWN_ARROW:"http://c14.zedo.com/jsc/images/down-double-arrows.png",SWIPEUP_LOADING_LINE:"http://c14.zedo.com/jsc/images/loading-line-blue.gif",TAG_LEVEL_TRACKERPATH_NONSECURE:"http://m1.zedo.com/log/p.gif?n=",TAG_LEVEL_TRACKERPATH_SECURE:"https://tt3.zedo.com/log/p.gif?n=",AD_LEVEL_TRACKERPATH_NONSECURE:"http://l5.zedo.com/log/p.gif?6=",AD_LEVEL_TRACKERPATH_SECURE:"https://tt3.zedo.com/log/p.gif?6=",DEBUG_TOKEN_VALIDITY:7,GRACEFULBACKTRACK_NUMBEROFCHECKS:100,GRACEFULBACKTRACK_STARTINGTIME:50,POLITESWIPEUP_CLOSEBTN_WIDTH:32,POLITESWIPEUP_CLOSEBTN_HEIGHT:32,POLITESWIPEUP_MAXWIDTH:450,POLITESWIPEUP_MINWIDTH:250,POLYFILL_SECUREFILEPATH:"ss3.zedo.com/gecko/core/lib/promise-7.0.4.min.js",POLYFILL_FILEPATH:"c14.zedo.com/gecko/core/lib/promise-7.0.4.min.js",NETWORKIDS_SECURE_FILEPATH:"ss3.zedo.com/gecko/tag/networkIds.js",NETWORKIDS_FILEPATH:"c14.zedo.com/gecko/tag/networkIds.js",AMP_PROTOCOL:"https://",GEO_COOKIE_URL:"http://xp1.zedo.com/asw/cr.js?cns=FFgb&jvs=ZGeoDetails&z=",GEO_COOKIE_SECURE_URL:"https://saxp.zedo.com/asw/cr.js?cns=FFgb&jvs=ZGeoDetails&z=",INBANNER_CLOSE_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Close-Btn.png",INBANNER_MUTE_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Mute-Btn.png",INBANNER_UNMUTE_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Sound-Btn.png",INBANNER_FULLSCREEN_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Full-Screen-Btn.png",INARTICLE_ROLLOVER_SOUND_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Sound-Text.png",INARTICLE_CLICK_TO_FULLSCREEN_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Fullscreen-Text.png",INARTICLE_CLICK_TO_EXIT_FULLSCREEN_TEXT_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Exit-Btn.png",INBANNER_SECURE_CLOSE_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Close-Btn.png",INBANNER_SECURE_MUTE_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Mute-Btn.png",INBANNER_SECURE_UNMUTE_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Sound-Btn.png",INBANNER_SECURE_FULLSCREEN_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Full-Screen-Btn.png",INARTICLE_CLOSE_BTN_LB:"http://c14.zedo.com/jsc/images/zplayer/closeIcon-LB.png",INARTICLE_FULLSCRN_BTN_LB:"http://c14.zedo.com/jsc/images/zplayer/fullScreenIcon-LB.png",INARTICLE_SECURE_FULLSCRN_BTN_LB:"https://ss3.zedo.com/jsc/images/zplayer/fullScreenIcon-LB.png",INARTICLE_SECURE_CLOSE_BTN_LB:"https://ss3.zedo.com/jsc/images/zplayer/closeIcon-LB.png",INARTICLE_FULLSCRN_CLOSE_BTN_LB:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Close-Btn-fullscreen.png",INARTICLE_adlabel_BTN:"http://c14.zedo.com/jsc/images/zplayer/inarticle-AdInfo.png",INARTICLE_SECURE_adlabel_BTN:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-AdInfo.png",INARTICLE_SECURE_FULLSCRN_CLOSE_BTN_LB:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Close-Btn-fullscreen.png",INARTICLE_REPLAY_BTN:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Replay-Btn.png",INARTICLE_SECURE_REPLAY_BTN:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Replay-Btn.png",BLANKMP4URL_SECURE:"https://ss3.zedo.com/jsc/video/zplayer/blank.mp4",BLANKMP4URL:"http://c14.zedo.com/jsc/video/zplayer/blank.mp4",INARTICLE_SECURE_PLAY_BTN:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Play-Btn.png",INARTICLE_PLAY_BTN:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Play-Btn.png",INARTICLE_SECURE_MOBILE_LB_BG:"https://ss3.zedo.com/jsc/images/dropdown/drowdownBg.png",INARTICLE_MOBILE_LB_BG:"http://c14.zedo.com/jsc/images/dropdown/drowdownBg.png",INARTICLE_SECURE_ROLLOVER_SOUND_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Sound-Text.png",INARTICLE_SECURE_CLICK_TO_FULLSCREEN_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Fullscreen-Text.png",INARTICLE_SECURE_CLICK_TO_EXIT_FULLSCREEN_TEXT_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Exit-Btn.png",INARTICLE_CLICK_TO_WATCH_TEXT_BUTTON_URL:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Watch-Text-Btn-rbg.png",INARTICLE_SECURE_CLICK_TO_WATCH_TEXT_BUTTON_URL:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Watch-Text-Btn-rbg.png",CURTAINRAISER_CLOSE_BTN:"http://c14.zedo.com/jsc/images/CR-closeBtn.png",CURTAINRAISER_SECURE_CLOSE_BTN:"https://ss3.zedo.com/jsc/images/CR-closeBtn.png",SECURE_PAUSE_ICON:"https://ss3.zedo.com/jsc/images/zplayer/inarticle-Pause-Btn.png",PAUSE_ICON:"http://c14.zedo.com/jsc/images/zplayer/inarticle-Pause-Btn.png",INVIEW_CLOSE_BUTTON:"http://c14.zedo.com/jsc/images/inview-closeBtn.png",INVIEW_SECURE_CLOSE_BUTTON:"https://ss3.zedo.com/jsc/images/inview-closeBtn.png",INVIEW_SLIDER_TITLE_IMG:"http://c14.zedo.com/jsc/images/inview-sliderTitle.png",INVIEW_SECURE_SLIDER_TITLE_IMG:"https://ss3.zedo.com/jsc/images/inview-sliderTitle.png",INVIEW_ZINC_FEEDBACK_ICON:"http://c14.zedo.com/jsc/images/inview-zincFeedbackIcon.png",INVIEW_SECURE_ZINC_FEEDBACK_ICON:"https://ss3.zedo.com/jsc/images/inview-zincFeedbackIcon.png",INVIEW_SLIDER_BG:"http://c14.zedo.com/jsc/images/inview-sliderBg.png",INVIEW_SECURE_SLIDER_BG:"https://ss3.zedo.com/jsc/images/inview-sliderBg.png",INVIEW_INFO_URL:"http://www.zincx.com/",INVIEW_FEEDBACK_URL:"http://www.zincx.com/zincSliderFeedback/index.html",WNE_CLOSE_BTN:"http://c14.zedo.com/jsc/images/closeBtn-WE.png",WNE_SECURE_CLOSE_BTN:"https://ss3.zedo.com/jsc/images/closeBtn-WE.png",IS_BETA:"false",VPAID_ADREQ_PATH:"asw/fmv.json",VPAIDSBR_ADREQ_PATH:"asw/fms.json"},e.getProperty=function(t){return e.configMap[t]},e}();r("undefined"!=typeof o?o:window.Config)}).call(i,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/build/local/src/config/Config.js","/build/local/src/config")},{_process:8,buffer:4,timers:9}],2:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){(function(e,t,i,n,r){function o(){function e(e){try{if(window.top==window)return e.OnPage;for(var t=window,i=0;t.parent!=t&&1e3>i;){if(t.parent.document.domain!=t.document.domain)return e.CrossDomainIframe;t=t.parent}return e.SameDomainIframe}catch(n){}return e.CrossDomainIframe}this.DEBUG=!1,this.asset=null,this.positionInterval,this.userAgent=window.testOvvConfig&&window.testOvvConfig.userAgent?window.testOvvConfig.userAgent:navigator.userAgent,this.servingScenarioEnum={OnPage:1,SameDomainIframe:2,CrossDomainIframe:3},this.servingScenario=e(this.servingScenarioEnum),this.IN_IFRAME=this.servingScenario!=this.servingScenarioEnum.OnPage,this.IN_XD_IFRAME=this.servingScenario==this.servingScenarioEnum.CrossDomainIframe,this.geometrySupported=!this.IN_XD_IFRAME;var t=new s(this.userAgent);this.browser=t.getBrowser(),this.browserIDEnum=t.getBrowserIDEnum();var i=1e3;this.interval=i,this.releaseVersion="OVVRELEASEVERSION",this.buildVersion="OVVBUILDVERSION";var n={},r=[],o=1e3,a=[];this.addAsset=function(e){n.hasOwnProperty(e.getId())||(n[e.getId()]=e,this.asset=e)},this.removeAsset=function(e){delete n[e.getId()]},this.getAssetById=function(e){return n[e]},this.getAds=function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},this.subscribe=function(e,t,i,n){if(n)for(key in r[t])r[t][key]&&d(r[t][key].eventName,e)&&c(function(){i(t,r[t][key])});for(key in e)a[e[key]+t]||(a[e[key]+t]=[]),a[e[key]+t].push({Func:i})},this.publish=function(e,t,i){var n={eventName:e,eventTime:l(),ovvArgs:i};if(r[t]||(r[t]=[]),r[t].length<o&&r[t].push(n),e&&t&&a[e+t]instanceof Array)for(var s=0;s<a[e+t].length;s++){var d=a[e+t][s];d&&d.Func&&"function"==typeof d.Func&&c(function(){d.Func(t,n)})}},this.getAllReceivedEvents=function(e){return r[e]};var l=function(){"use strict";return Date.now?Date.now():(new Date).getTime()},d=function(e,t){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},c=function(e){try{var t=e();return void 0===t||t}catch(i){return!1}}}function a(){this.clientHeight=-1,this.clientWidth=-1,this.error="",this.focus=null,this.fps=-1,this.id="",this.beaconsSupported=null,this.geometrySupported=null,this.geometryViewabilityState="",this.beaconViewabilityState="",this.cssViewabilityState="",this.domViewabilityState="",this.technique="",this.beacons=new Array,this.inIframe=null,this.objBottom=-1,this.objLeft=-1,this.objRight=-1,this.objTop=-1,this.percentViewable=-1,this.percentObscured=0,this.viewabilityState=""}function s(e){function t(e,t){var i=function(){for(var t={ID:0,name:"",version:""},i=e,o=0;o<r.length;o++)if(null!=i.match(new RegExp(r[o].brRegex))){if(t.ID=r[o].id,t.name=r[o].name,null==r[o].verRegex)break;var a=i.match(new RegExp(r[o].verRegex+"[0-9]*"));if(null!=a){var s=a[0].match(new RegExp(r[o].verRegex));t.version=a[0].replace(s[0],"")}var l=i.match(new RegExp(n+"[0-9\\.]*"));null!=l&&(t.os=l[0]);break}return t},n="(Windows NT )",r=[{id:4,name:"Opera",brRegex:"OPR|Opera",verRegex:"(OPR/|Version/)"},{id:1,name:"MSIE",brRegex:"MSIE|Trident/7.*rv:11|rv:11.*Trident/7",verRegex:"(MSIE |rv:)"},{id:2,name:"Firefox",brRegex:"Firefox",verRegex:"Firefox/"},{id:3,name:"Chrome",brRegex:"Chrome",verRegex:"Chrome/"},{id:5,name:"Safari",brRegex:"Safari|(OS |OS X )[0-9].*AppleWebKit",verRegex:"Version/"}];return i()}var i={MSIE:1,Firefox:2,Chrome:3,Opera:4,safari:5},n=t(e);this.getBrowser=function(){return n},this.getBrowserIDEnum=function(){return i}}function l(){var e=new s($zovvObj.userAgent),t=e.getBrowser(),i=e.getBrowserIDEnum();this.supportsBeacons=function(){var e=6.3,n=t.ID==i.MSIE,r=t.version>=11,o=t.os?t.os.split(" "):[0],a=o[o.length-1],s=a>=e;return!n||r&&s}}function d(e,t){var i,n,r=13,o=Math.sqrt(2),s=0,d=1,c=2,u=3,p=4,h=5,f=6,g=7,m=8,y=9,b=10,v=11,P=12,w=13,S=500,C=e,A=0,I=$zovvObj.DEBUG?20:1,T=t.geometryViewabilityCalculator,B=function(){return null},k=function(){return null},E=new l;this.focus=!0;var L="hidden",D=function(e,t,i){L in e?e.addEventListener("visibilitychange",i):(L="mozHidden")in e?e.addEventListener("mozvisibilitychange",i):(L="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",i):(L="msHidden")in e?e.addEventListener("msvisibilitychange",i):"onfocusin"in e?e.onfocusin=e.onfocusout=i:(t.addEventListener("focus",i),t.addEventListener("blur",i),t.addEventListener("pagehide",i),t.addEventListener("pageshow",i))},O=function(e){var t="",i="visible",n="hidden",r={focus:i,focusin:i,pageshow:i,blur:n,focusout:n,pagehide:n};e=e||window.event,t=e.type in r?r[e.type]:document.visibilityState,"hidden"==t?this.focus=!1:this.focus=!0};D(document,window,O.bind(this)),this.checkViewability=function(){var e=new a;if(e.id=C,e.inIframe=$zovvObj.IN_IFRAME,e.geometrySupported=$zovvObj.geometrySupported,e.focus=this.focus,!n)return e.error="Player not found!",e;if(R(e,n)===!0){if(!$zovvObj.DEBUG)return e;e.cssViewabilityState=a.UNVIEWABLE}if(N(e,n)===!0){if(!$zovvObj.DEBUG)return e;e.domViewabilityState=a.UNVIEWABLE}if(!E.supportsBeacons()&&e.geometrySupported===!1&&(e.viewabilityState=a.UNMEASURABLE,!$zovvObj.DEBUG))return e;if(e.geometrySupported){if(e.technique=a.GEOMETRY,x(e,n),e.viewabilityState=e.percentViewable>=1&&e.focus?a.VIEWABLE:a.UNVIEWABLE,!$zovvObj.DEBUG)return e;e.geometryViewabilityState=e.viewabilityState}var t=W(0),i=z(0);if(t&&t.isViewable&&i){var r=F(i)&&t.isViewable();e.beaconsSupported=!r}else e.beaconsSupported=!1;if(M())if(e.beaconsSupported){e.technique=a.BEACON;var o=U(e);null===o?(e.viewabilityState=a.UNMEASURABLE,$zovvObj.DEBUG&&(e.beaconViewabilityState=a.UNMEASURABLE)):(e.viewabilityState=o?a.VIEWABLE:a.UNVIEWABLE,$zovvObj.DEBUG&&(e.beaconViewabilityState=o?a.VIEWABLE:a.UNVIEWABLE))}else e.viewabilityState=a.UNMEASURABLE;else e.technique=a.BEACON,e.viewabilityState=a.NOT_READY;if($zovvObj.DEBUG)if(e.technique="",null===e.geometryViewabilityState&&null===e.beaconViewabilityState)e.viewabilityState=a.UNMEASURABLE;else{var s=e.beaconViewabilityState===a.VIEWABLE,l=e.cssViewabilityState===a.VIEWABLE,d=e.domViewabilityState===a.VIEWABLE,c=e.geometryViewabilityState===a.VIEWABLE;e.viewabilityState=l||d||s||c?a.VIEWABLE:a.UNVIEWABLE}return e},this.beaconStarted=function(t){$zovvObj.DEBUG&&W(t).debug&&W(t).debug(),0!==t&&(A++,M()&&n["onJsReady"+e]())},this.dispose=function(){for(var e=1;r>=e;e++){var t=z(e);t&&(delete A[e],t.parentElement.removeChild(t))}clearInterval(window.$zovvObj.positionInterval),window.$zovvObj.removeAsset(this)},this.getId=function(){return C},this.getPlayer=function(){return n};var R=function(e,t){var i=window.getComputedStyle(t,null),n=i.getPropertyValue("visibility"),r=i.getPropertyValue("display");return("hidden"==n||"none"==r)&&(e.technique=a.CSS_INVISIBILITY,e.viewabilityState=a.UNVIEWABLE,!0)},N=function(e,t){var i=t.getBoundingClientRect(),n=1,r=i.left+n,o=i.right-n,s=i.top+n,l=i.bottom-n,d=Math.floor(i.left+i.width/2),c=Math.floor(i.top+i.height/2),u=[{x:r,y:s},{x:d,y:s},{x:o,y:s},{x:r,y:c},{x:d,y:c},{x:o,y:c},{x:r,y:l},{x:d,y:l},{x:o,y:l}];for(var p in u)if(u[p]&&u[p].x>=0&&u[p].y>=0&&(elem=document.elementFromPoint(u[p].x,u[p].y),null!=elem&&elem!=t&&!t.contains(elem)&&(overlappingArea=_(i,elem.getBoundingClientRect()),overlappingArea>0&&(e.percentObscured=100*_(i,elem.getBoundingClientRect()),e.percentObscured>50))))return e.percentViewable=100-e.percentObscured,e.technique=a.DOM_OBSCURING,e.viewabilityState=a.UNVIEWABLE,!0;return!1},_=function(e,t){var i=e.width*e.height,n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),r=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n*r/i},x=function(e,t){e.percentObscured=e.percentObscured||0;var i=T.getViewabilityState(t,window);return i.error||(e.clientWidth=i.clientWidth,e.clientHeight=i.clientHeight,e.percentViewable=i.percentViewable-e.percentObscured,e.objTop=i.objTop,e.objBottom=i.objBottom,e.objLeft=i.objLeft,e.objRight=i.objRight),i},U=function(e){if(!M())return null;var t=0,i=0,o=0,a=0;e.beacons=new Array(r);var s=n.getClientRects?n.getClientRects()[0]:{top:-1,bottom:-1,left:-1,right:-1};e.objTop=s.top,e.objBottom=s.bottom,e.objLeft=s.left,e.objRight=s.right;for(var l=0;r>=l;l++)if(0!==l){var S=W(l),C=z(l),A=S.isViewable(),I=F(C);if(e.beacons[l]=A&&I,A)switch(t++,l){case c:case u:case p:case h:i++;break;case f:case g:case m:case y:o++;break;case b:case v:case P:case w:a++}}if(t===r)return!0;var T=e.beacons;return T[d]===!1?(a>=3||o>=3||i>=3)&&null:T[d]===!0&&(T[c]===!0&&T[u]===!0||T[c]===!0&&T[p]===!0||T[u]===!0&&T[h]===!0||T[p]===!0&&T[h]===!0)||(T[d]===!0&&4==o||!((!T[c]||!T[h]||T[f]&&T[b]&&T[d]&&T[w]&&T[y])&&(!T[p]||!T[u]||T[m]&&T[P]&&T[d]&&T[v]&&T[g]))&&null)},M=function(){return!!n&&A===r},H=function(e){var t="LRU_FWS_NOCAEB",i=t.split("").reverse().join("");if(""!=e&&e!=i){for(var n=0;r>=n;n++){var o=document.createElement("DIV");o.id="OVVBeaconContainer_"+n+"_"+C,o.style.position="absolute",o.style.zIndex=$zovvObj.DEBUG?99999:-99999;var a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+I+'" height="'+I+'"><param name="movie" value="'+e+'" /><param name="quality" value="low" /><param name="flashvars" value="id='+C+"&index="+n+'" /><param name="bgcolor" value="#ffffff" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><!--[if !IE]>--><object id="OVVBeacon_'+n+"_"+C+'" type="application/x-shockwave-flash" data="'+e+'" width="'+I+'" height="'+I+'"><param name="quality" value="low" /><param name="flashvars" value="id='+C+"&index="+n+'" /><param name="bgcolor" value="#ff0000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><!--<![endif]--></object>';o.innerHTML=a,document.body.insertBefore(o,document.body.firstChild)}V.bind(this)(),this.positionInterval=setInterval(V.bind(this),S)}},V=function(){if(M()){var e=n.getClientRects()[0];if(!i||!e||i.left!==e.left||i.right!==e.right||i.top!==e.top||i.bottom!==e.bottom){i=e;for(var t=e.right-e.left,a=e.bottom-e.top,l=t/(1+o),S=a/(1+o),C=t/o,A=a/o,T=0;r>=T;T++){var B=e.left+document.body.scrollLeft,k=e.top+document.body.scrollTop;switch(T){case s:B=-1e5,k=-1e5;break;case d:B+=(t-I)/2,k+=(a-I)/2;break;case c:break;case u:B+=t-I;break;case p:k+=a-I;break;case h:B+=t-I,k+=a-I;break;case f:B+=(t-C)/2,k+=(a-A)/2;break;case g:B+=(t-C)/2+C,k+=(a-A)/2;break;case m:B+=(t-C)/2,k+=(a-A)/2+A;break;case y:B+=(t-C)/2+C,k+=(a-A)/2+A;break;case b:B+=(t-l)/2,k+=(a-S)/2;break;case v:B+=(t-l)/2+l,k+=(a-S)/2;break;case P:B+=(t-l)/2,k+=(a-S)/2+S;break;case w:B+=(t-l)/2+l,k+=(a-S)/2+S}T>=f&&(B-=I/2,k-=I/2);var E=z(T);E.style.left=B+"px",E.style.top=k+"px"}}}},F=function(e){if(!e)return!1;var t=Math.max(document.body.clientWidth,window.innerWidth),i=Math.max(document.body.clientHeight,window.innerHeight),n=e.getClientRects()[0];return n.top<i&&n.bottom>0&&n.left<t&&n.right>0},W=function(e){return B(e)}.memoize(),G=function(e){return document.getElementById("OVVBeacon_"+e+"_"+C)},j=function(e){var t=document.getElementById("OVVFrame_"+C+"_"+e),i=null;return t&&(i=t.contentWindow),i},z=function(e){return k(e)}.memoize(),Y=function(e){return document.getElementById("OVVBeaconContainer_"+e+"_"+C)},q=function(e){return document.getElementById("OVVFrame_"+C+"_"+e)},X=function(){var e=document.getElementById(C);return e};n=X(),0==$zovvObj.geometrySupported||$zovvObj.DEBUG?$zovvObj.browser.ID===$zovvObj.browserIDEnum.Firefox?(B=j,k=q):(B=G,k=Y,H.bind(this)("BEACON_SWF_URL")):n&&n["onJsReady"+e]&&setTimeout(function(){n["onJsReady"+e]()},5)}function c(){this.getViewabilityState=function(n,r){var o,a=e();if(a.area==1/0)return{error:"Failed to determine viewport"};var s=n.getBoundingClientRect(),l=s.width*s.height;if(a.area/l<.5)o=Math.floor(100*a.area/l),d=a;else{var d=t(window.top),c=i(n,r);c.bottom>d.height&&(c.height-=c.bottom-d.height),c.top<0&&(c.height+=c.top),c.left<0&&(c.width+=c.left),c.right>d.width&&(c.width-=c.right-d.width),o=Math.floor(100*(c.width*c.height)/l)}return{clientWidth:d.width,clientHeight:d.height,objTop:s.top,objBottom:s.bottom,objLeft:s.left,objRight:s.right,percentViewable:o}};var e=function(){for(var e=t(window),i=e.area,n=window;n!=window.top;)n=n.parent,viewPortSize=t(n),viewPortSize.area<i&&(i=viewPortSize.area,e=viewPortSize);return e},t=function(e){var t={width:1/0,height:1/0,area:1/0};return!isNaN(e.document.body.clientWidth)&&e.document.body.clientWidth>0&&(t.width=e.document.body.clientWidth),!isNaN(e.document.body.clientHeight)&&e.document.body.clientHeight>0&&(t.height=e.document.body.clientHeight),e.document.documentElement&&e.document.documentElement.clientWidth&&!isNaN(e.document.documentElement.clientWidth)&&(t.width=e.document.documentElement.clientWidth),e.document.documentElement&&e.document.documentElement.clientHeight&&!isNaN(e.document.documentElement.clientHeight)&&(t.height=e.document.documentElement.clientHeight),e.innerWidth&&!isNaN(e.innerWidth)&&(t.width=Math.min(t.width,e.innerWidth)),e.innerHeight&&!isNaN(e.innerHeight)&&(t.height=Math.min(t.height,e.innerHeight)),t.area=t.height*t.width,t},i=function(e,t){var r=t,o=t.parent,a={width:0,height:0,left:0,right:0,top:0,bottom:0};if(e){var s=n(e,t);if(s.width=s.right-s.left,s.height=s.bottom-s.top,a=s,r!=o){var l=i(r.frameElement,o);l.bottom<a.bottom&&(l.bottom<a.top&&(a.top=l.bottom),a.bottom=l.bottom),l.right<a.right&&(l.right<a.left&&(a.left=l.right),a.right=l.right),a.width=a.right-a.left,a.height=a.bottom-a.top}}return a},n=function(e,t){var i=t,r=t.parent,o={left:0,right:0,top:0,bottom:0};if(e){var a=e.getBoundingClientRect();i!=r&&(o=n(i.frameElement,r)),o={left:a.left+o.left,right:a.right+o.left,top:a.top+o.top,bottom:a.bottom+o.top}}return o}}function u(e){var t=new d(e,{geometryViewabilityCalculator:new c});return t}function p(){}function h(e,t){this.ovvAssetObject=t,this.onAdViewableImpressionCB=function(){},this.onTwentyPercentViewableCB=function(){},this.onFourtyPercentViewableCB=function(){},this.onSixtyPercentViewableCB=function(){},this.onEightyPercentViewableCB=function(){},this.onHundredPercentViewableCB=function(){},this.onViewableStateChangeCB=function(e,t){},this.onUnmesurableCB=function(){},this.config={IntervalForPullingViewablityMs:100,debugMode:!1},this.setConfig(e),this.pullViewabilityTimer={},this.analyerObj=new f,this.lastCallback=0,this.lastViabilityState="",this.lastIabViewableState="",this.isIabViewableFired=!1,this.isUserIntract=!1,this.calculateViewabilityWith=50,this.viewableSince=m.getFutureDate(),this.IABLARGEADSIZEPIXEL=242500,this.config.debugMode&&b.initViewability(),this.isViewable=function(){return this.lastViabilityState===g.VIEWABLE}}function f(){}function g(){}function m(){}function y(){}function b(){}a.UNMEASURABLE="unmeasurable",a.VIEWABLE="viewable",a.UNVIEWABLE="unviewable",a.NOT_READY="not_ready",a.BEACON="beacon",a.GEOMETRY="geometry",a.CSS_INVISIBILITY="css_invisibility",a.DOM_OBSCURING="dom_obscuring",Function.prototype.memoized=function(e){return this._cacheValue=this._cacheValue||{},void 0!==this._cacheValue[e]?this._cacheValue[e]:this._cacheValue[e]=this.apply(this,arguments)},Function.prototype.memoize=function(){var e=this;return function(){return e.memoized.apply(e,arguments)}};var v=new o;window.$zovvObj=window.$zovvObj||v;for(var P in v)$zovvObj.hasOwnProperty(P)||($zovvObj[P]=v[P]);window.$zovvObj.addAsset(new d("OVVID",{geometryViewabilityCalculator:new c})),p.getViewabilityMonitor=function(e,t,i){try{var n=u(e.id),r=n.checkViewability();if(""==r.viewabilityState||r.viewabilityState==g.UNMEASURABLE||r.viewabilityState==g.NOT_READY)i("Can't measure viewability");else{var o=new h(e,n);t(o),o.startViewability()}}catch(a){e.debugMode&&console.error(a),i("Error due to construct object")}},h.prototype={startViewability:function(){var e=this,t=function(){m.log("debug","startAnalysing ",e.config.debugMode);var t=e.ovvAssetObject.checkViewability(),i=e.createStateObject(t);b.updatePercentViewable(e.config.debugMode,i.viewablePercentage,i.viewabilityState);var n=function(){e.lastCallback=y.ZERO_PERCENTAAGE.Name},r=function(){e.lastCallback=y.TWENTY_PERCENTAGE.Name,m.asyncCallback(e.onTwentyPercentViewableCB,[])},o=function(){e.lastCallback=y.FORTY_PERCENTAGE.Name,m.asyncCallback(e.onFourtyPercentViewableCB,[])},a=function(){e.lastCallback=y.SIXTY_PERCENTAGE.Name,m.asyncCallback(e.onSixtyPercentViewableCB,[])},s=function(){e.lastCallback=y.EIGHTY_PERCENTAGE.Name,m.asyncCallback(e.onEightyPercentViewableCB,[])},l=function(){e.lastCallback=y.HUNDRED_PERCENTAGE.Name,m.asyncCallback(e.onHundredPercentViewableCB,[])},d=function(t){e.lastViabilityState=t,m.asyncCallback(e.onViewableStateChangeCB,[t])},c=function(){e.lastCallback=g.UNMEASURABLE,m.asyncCallback(e.onUnmesurableCB,[])};e.analyerObj.analyzeViewability(i,e.lastCallback,n,r,o,a,s,l,d,e.lastViabilityState,c,e.config),e.calculateViewabilityWith=e.getIabViewabilityCriteria(i.height,i.width);var u=function(t,i,n){e.isIabViewableFired=!0,b.appendLog("AdViewableImpression",e.config.debugMode),m.asyncCallback(e.onAdViewableImpressionCB,[t,i,n])},p=function(t){e.lastIabViewableState=t,e.lastIabViewableState==g.VIEWABLE?e.viewableSince=m.getCurrentTime():e.lastIabViewableState==g.UNVIEWABLE&&(e.viewableSince=m.getFutureDate())};e.analyerObj.analyzeIabViewability(i,e.isIabViewableFired,u,e.isUserIntract,e.calculateViewabilityWith,e.viewableSince,e.lastIabViewableState,p,m.getCurrentTime(),e.config)};t(),this.pullViewabilityTimer=setInterval(t,this.config.IntervalForPullingViewablityMs)},createStateObject:function(e){return{viewablePercentage:Math.round(e.percentViewable),viewabilityState:e.viewabilityState,height:m.getElementHeight(this.config.id),width:m.getElementWidth(this.config.id),focus:e.focus}},getIabViewabilityCriteria:function(e,t){var i=e*t;return i<this.IABLARGEADSIZEPIXEL?50:30},onAdViewableImpression:function(e){this.onAdViewableImpressionCB=e},onTwentyPercentViewable:function(e){this.onTwentyPercentViewableCB=e},onFourtyPercentViewable:function(e){this.onFourtyPercentViewableCB=e},onSixtyPercentViewable:function(e){this.onSixtyPercentViewableCB=e},onEightyPercentViewable:function(e){this.onEightyPercentViewableCB=e},onHundredPercentViewable:function(e){this.onHundredPercentViewableCB=e},onViewableStateChange:function(e){this.onViewableStateChangeCB=e},onUnmesurable:function(e){this.onUnmesurableCB=e},userIntraction:function(){this.isUserIntract=!0},getViewability:function(){var e=this.createStateObject(this.ovvAssetObject.checkViewability());return e},stopViewabilityMonitor:function(){clearInterval(this.pullViewabilityTimer)},setConfig:function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this.config[t]=e[t])}},f.prototype={analyzeViewability:function(e,t,i,n,r,o,a,s,l,d,c,u){var p,h,f,b,v,P,w,S=!1;if(m.log("debug"," viewablePercentage "+e.viewablePercentage+" lastCallback "+t,u.debugMode),isNaN(e.viewablePercentage)&&t!=g.UNMEASURABLE&&e.viewabilityState==g.UNMEASURABLE)return c(),!1;w=(e.viewablePercentage==y.ZERO_PERCENTAAGE.Min||e.viewablePercentage<y.ZERO_PERCENTAAGE.Min)&&e.focus,w&&(S=y.ZERO_PERCENTAAGE.Name),p=e.viewablePercentage>=y.TWENTY_PERCENTAGE.Min&&e.viewablePercentage<=y.TWENTY_PERCENTAGE.Max&&e.focus,p&&(S=y.TWENTY_PERCENTAGE.Name),h=e.viewablePercentage>=y.FORTY_PERCENTAGE.Min&&e.viewablePercentage<=y.FORTY_PERCENTAGE.Max&&e.focus,h&&(S=y.FORTY_PERCENTAGE.Name),f=e.viewablePercentage>=y.SIXTY_PERCENTAGE.Min&&e.viewablePercentage<=y.SIXTY_PERCENTAGE.Max&&e.focus,f&&(S=y.SIXTY_PERCENTAGE.Name),b=e.viewablePercentage>=y.EIGHTY_PERCENTAGE.Min&&e.viewablePercentage<=y.EIGHTY_PERCENTAGE.Max&&e.focus,b&&(S=y.EIGHTY_PERCENTAGE.Name),v=e.viewablePercentage>=y.HUNDRED_PERCENTAGE.Min&&e.viewablePercentage<=y.HUNDRED_PERCENTAGE.Max&&e.focus,v&&(S=y.HUNDRED_PERCENTAGE.Name);var C=function(e){switch(I){case 0:i();break;case 20:n();break;case 40:r();break;case 60:o();break;case 80:a();break;case 100:s()}};if(S>t){var A=S;if(S=t,t=A,S!==!1)for(var I=S+y.FREQUENCY;t>=I;I+=y.FREQUENCY)C(I)}else if(t>S&&S!==!1)for(var I=t-y.FREQUENCY;I>=S;I-=y.FREQUENCY)C(I);P=e.viewablePercentage>y.ONSTATECHANGE_PERCENTAGE.Min&&e.viewablePercentage<=y.ONSTATECHANGE_PERCENTAGE.Max&&e.focus,P&&d!=g.VIEWABLE?l(g.VIEWABLE):P||d==g.UNVIEWABLE||l(g.UNVIEWABLE)},analyzeIabViewability:function(e,t,i,n,r,o,a,s,l,d){if(!t){e.viewablePercentage>=r?a!=g.VIEWABLE&&s(g.VIEWABLE):a!=g.UNVIEWABLE&&s(g.UNVIEWABLE);var c=l.getTime()-o.getTime();m.log("debug"," currentTime - "+l+" viewableSince - "+o,d.debugMode),m.log("debug"," diff "+c,d.debugMode),(c>=1e3||n)&&i(n,e.height,e.width)}}},g.VIEWABLE="viewable",g.UNVIEWABLE="unviewable",g.UNMEASURABLE="unmeasurable",g.NOT_READY="not_ready",m.getCurrentTime=function(){return new Date},m.getFutureDate=function(){var e=new Date;return e.setFullYear(4e3),e},m.log=function(e,t,i){if(i)switch(e.toLowerCase()){case"warn":console.warn(t);break;case"info":console.info(t);break;case"error":console.error(t);break;case"trace":console.trace(t);break;case"bizlogic":"undefined"!=typeof console.bizlogic&&console.bizlogic(t);break;default:console.log(t)}},m.asyncCallback=function(e,t){setTimeout(function(){e.apply(this,t)},0)},m.getElementHeight=function(e){return document.getElementById(e).clientHeight},m.getElementWidth=function(e){return document.getElementById(e).clientWidth},y.FREQUENCY=20,y.ZERO_PERCENTAAGE={Min:0,Max:0,Name:0},y.TWENTY_PERCENTAGE={Min:20,Max:39,Name:20},y.FORTY_PERCENTAGE={Min:40,Max:59,Name:40},y.SIXTY_PERCENTAGE={Min:60,Max:79,Name:60},y.EIGHTY_PERCENTAGE={Min:80,Max:98,Name:80},y.HUNDRED_PERCENTAGE={Min:99,Max:100,Name:100},y.UNMEASURABLE_PERCENTAGE={Min:-1,Max:-1,Name:"Unmeasurable"},y.ONSTATECHANGE_PERCENTAGE={Min:1,Max:100,Name:"ViewableStateChange"},b.domainPath="http://cz.iozo.com/",b.initViewability=function(){if(null==document.getElementById("chip")){this.loadCSS();var e='<div id="viewability-main-container"><div id="viewability-wrapper"><div id="viewability-header"><img id="viewability-logo" src="'+b.domainPath+'jsc/images/viewability/logo.png"><span class="viewability-title">VIEWABILITY INFO</span></div>';e+='<div id="viewability-content"><div class="prop-row"><span class="prop-name">Viewability</span><span id="viewability" class="prop-value">Viewable</span></div>',e+='<div class="prop-row"><span class="prop-name">Viewable %</span><span class="prop-value" id="percentViewable">100%</span></div></div></div></div>';var t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t)}},b.appendLog=function(e,t){if(t){var i=document.createElement("div");i.setAttribute("class","prop-row"),i.innerHTML="<span class='prop-name'>"+e+"</span><span class='prop-value'><span class='tick'></span></span>",document.getElementById("viewability-content").appendChild(i)}},b.updatePercentViewable=function(e,t,i){e&&(document.getElementById("percentViewable").innerHTML=t,document.getElementById("viewability").innerHTML=i,i==g.VIEWABLE?document.getElementById("viewability").style.color="green":(document.getElementById("viewability").style.color="#FF0000",document.getElementById("percentViewable").innerHTML=""))},b.loadCSS=function(){var e='#viewability-main-container{position:fixed;display:block;width:292px;height:auto;top:5px;right:5px;border:1px solid #AAA;padding:5px;box-shadow: 0px 0px 8px #888888;background-color: white;font-family: "Roboto", sans-serif;font-size: 15px;}';
e+="#viewability-main-container #viewability-wrapper{width:100%;height:auto;border: 1px solid #E8E8E8;}#viewability-wrapper #viewability-header{height:16px;background-color:#32aed7;padding:10px;}",e+="#viewability-header #viewability-logo{position: relative;top: -5px;}#viewability-header .viewability-title{color:#fff;text-transform:uppercase;float:right;font-size:14px;vertical-align:middle;}",e+="#viewability-content .prop-row{margin-left:5px;margin-right:5px;padding: 7px 5px;border-bottom:1px solid #E8E8E8;line-height:24px;}",e+="#viewability-content .prop-row:last-child{border-bottom: none;}.prop-row .prop-value{float:right;}",e+='.prop-value .tick{background: url("'+b.domainPath+'jsc/images/viewability/tick.png") no-repeat;width: 24px;height: 24px;display: inline-block;}',head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),style.type="text/css",style.styleSheet?style.styleSheet.cssText=e:style.appendChild(document.createTextNode(e)),head.appendChild(style)},r("undefined"!=typeof p?p:window.ZViewability)}).call(i,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/node_modules/ZedoViewabilityMonitorLibrary/zViewability.min.js","/node_modules/ZedoViewabilityMonitorLibrary")},{_process:8,buffer:4,timers:9}],3:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";function p(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var n=i===t?0:4-i%4;return[i,n]}function h(e){var t=p(e),i=t[0],n=t[1];return 3*(i+n)/4-n}function f(e,t,i){return 3*(t+i)/4-i}function g(e){for(var t,i=p(e),n=i[0],r=i[1],o=new w(f(e,n,r)),a=0,s=r>0?n-4:n,l=0;l<s;l+=4)t=P[e.charCodeAt(l)]<<18|P[e.charCodeAt(l+1)]<<12|P[e.charCodeAt(l+2)]<<6|P[e.charCodeAt(l+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;return 2===r&&(t=P[e.charCodeAt(l)]<<2|P[e.charCodeAt(l+1)]>>4,o[a++]=255&t),1===r&&(t=P[e.charCodeAt(l)]<<10|P[e.charCodeAt(l+1)]<<4|P[e.charCodeAt(l+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o}function m(e){return v[e>>18&63]+v[e>>12&63]+v[e>>6&63]+v[63&e]}function y(e,t,i){for(var n,r=[],o=t;o<i;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(m(n));return r.join("")}function b(e){for(var t,i=e.length,n=i%3,r=[],o=16383,a=0,s=i-n;a<s;a+=o)r.push(y(e,a,a+o>s?s:a+o));return 1===n?(t=e[i-1],r.push(v[t>>2]+v[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],r.push(v[t>>10]+v[t>>4&63]+v[t<<2&63]+"=")),r.join("")}i.byteLength=h,i.toByteArray=g,i.fromByteArray=b;for(var v=[],P=[],w="undefined"!=typeof Uint8Array?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,A=S.length;C<A;++C)v[C]=S[C],P[S.charCodeAt(C)]=C;P["-".charCodeAt(0)]=62,P["_".charCodeAt(0)]=63}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/node_modules/base64-js/index.js","/node_modules/base64-js")},{_process:8,buffer:4,timers:9}],4:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";function h(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function f(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(e,t){if(f()<t)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=r.prototype):(null===e&&(e=new r(t)),e.length=t),e}function r(e,t,i){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return v(this,e)}return m(this,e,t,i)}function m(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?S(e,t,i,n):"string"==typeof t?P(e,t,i):C(e,t)}function y(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function b(e,t,i,n){return y(t),t<=0?g(e,t):void 0!==i?"string"==typeof n?g(e,t).fill(i,n):g(e,t).fill(i):g(e,t)}function v(e,t){if(y(t),e=g(e,t<0?0:0|A(t)),!r.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function P(e,t,i){if("string"==typeof i&&""!==i||(i="utf8"),!r.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|T(t,i);e=g(e,n);var o=e.write(t,i);return o!==n&&(e=e.slice(0,o)),e}function w(e,t){var i=t.length<0?0:0|A(t.length);e=g(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function S(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),r.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=r.prototype):e=w(e,t),e}function C(e,t){if(r.isBuffer(t)){var i=0|A(t.length);return e=g(e,i),0===e.length?e:(t.copy(e,0,0,i),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||oe(t.length)?g(e,0):w(e,t);if("Buffer"===t.type&&le(t.data))return w(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function A(e){if(e>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|e}function I(e){return+e!=e&&(e=0),r.alloc(+e)}function T(e,t){if(r.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return ee(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return ne(e).length;default:if(n)return ee(e).length;t=(""+t).toLowerCase(),n=!0}}function B(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return W(this,t,i);case"utf8":case"utf-8":return M(this,t,i);case"ascii":return V(this,t,i);case"latin1":case"binary":return F(this,t,i);case"base64":return U(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function k(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function E(e,t,i,n,o){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof t&&(t=r.from(t,n)),r.isBuffer(t))return 0===t.length?-1:L(e,t,i,n,o);if("number"==typeof t)return t=255&t,r.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):L(e,[t],i,n,o);throw new TypeError("val must be string, number or Buffer")}function L(e,t,i,n,r){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,i/=2}var d;if(r){var c=-1;for(d=i;d<s;d++)if(o(e,d)===o(t,c===-1?0:d-c)){if(c===-1&&(c=d),d-c+1===l)return c*a}else c!==-1&&(d-=d-c),c=-1}else for(i+l>s&&(i=s-l),d=i;d>=0;d--){for(var u=!0,p=0;p<l;p++)if(o(e,d+p)!==o(t,p)){u=!1;break}if(u)return d}return-1}function D(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[i+a]=s}return a}function O(e,t,i,n){return re(ee(t,e.length-i),e,i,n)}function R(e,t,i,n){return re(te(t),e,i,n)}function N(e,t,i,n){return R(e,t,i,n)}function _(e,t,i,n){return re(ne(t),e,i,n)}function x(e,t,i,n){return re(ie(t,e.length-i),e,i,n)}function U(e,t,i){return 0===t&&i===e.length?ae.fromByteArray(e):ae.fromByteArray(e.slice(t,i))}function M(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var o=e[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=i){var l,d,c,u;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[r+1],128===(192&l)&&(u=(31&o)<<6|63&l,u>127&&(a=u));break;case 3:l=e[r+1],d=e[r+2],128===(192&l)&&128===(192&d)&&(u=(15&o)<<12|(63&l)<<6|63&d,u>2047&&(u<55296||u>57343)&&(a=u));break;case 4:l=e[r+1],d=e[r+2],c=e[r+3],128===(192&l)&&128===(192&d)&&128===(192&c)&&(u=(15&o)<<18|(63&l)<<12|(63&d)<<6|63&c,u>65535&&u<1114112&&(a=u))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),r+=s}return H(n)}function H(e){var t=e.length;if(t<=de)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=de));return i}function V(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function F(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function W(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=t;o<i;++o)r+=$(e[o]);return r}function G(e,t,i){for(var n=e.slice(t,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function j(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,i,n,o,a){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function Y(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-i,2);r<o;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function q(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-i,4);r<o;++r)e[i+r]=t>>>8*(n?r:3-r)&255}function X(e,t,i,n,r,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function K(e,t,i,n,r){return r||X(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),se.write(e,t,i,n,23,4),i+4}function Z(e,t,i,n,r){return r||X(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),se.write(e,t,i,n,52,8),i+8}function J(e){if(e=Q(e).replace(ce,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function ee(e,t){t=t||1/0;for(var i,n=e.length,r=null,o=[],a=0;a<n;++a){if(i=e.charCodeAt(a),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&o.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function te(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function ie(e,t){for(var i,n,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=e.charCodeAt(a),n=i>>8,r=i%256,o.push(r),o.push(n);return o}function ne(e){return ae.toByteArray(J(e))}function re(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function oe(e){return e!==e}var ae=e("base64-js"),se=e("ieee754"),le=e("isarray");i.Buffer=r,i.SlowBuffer=I,i.INSPECT_MAX_BYTES=50,r.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:h(),i.kMaxLength=f(),r.poolSize=8192,r._augment=function(e){return e.__proto__=r.prototype,e},r.from=function(e,t,i){return m(null,e,t,i)},r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})),r.alloc=function(e,t,i){return b(null,e,t,i)},r.allocUnsafe=function(e){return v(null,e)},r.allocUnsafeSlow=function(e){return v(null,e)},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,o=0,a=Math.min(i,n);o<a;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!le(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=r.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var a=e[i];if(!r.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},r.byteLength=T,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},r.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):B.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e,t,i,n,o){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,s=i-t,l=Math.min(a,s),d=this.slice(n,o),c=e.slice(t,i),u=0;u<l;++u)if(d[u]!==c[u]){a=d[u],s=c[u];break}return a<s?-1:s<a?1:0},r.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},r.prototype.indexOf=function(e,t,i){return E(this,e,t,i,!0)},r.prototype.lastIndexOf=function(e,t,i){return E(this,e,t,i,!1)},r.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return D(this,e,t,i);case"utf8":case"utf-8":return O(this,e,t,i);case"ascii":return R(this,e,t,i);case"latin1":case"binary":return N(this,e,t,i);case"base64":return _(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var de=4096;r.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n;if(r.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=r.prototype;else{var o=t-e;n=new r(o,(void 0));for(var a=0;a<o;++a)n[a]=this[a+e]}return n},r.prototype.readUIntLE=function(e,t,i){e=0|e,t=0|t,i||j(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return n},r.prototype.readUIntBE=function(e,t,i){e=0|e,t=0|t,i||j(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},r.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,i){e=0|e,t=0|t,i||j(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*t)),n},r.prototype.readIntBE=function(e,t,i){e=0|e,t=0|t,i||j(e,t,this.length);for(var n=t,r=1,o=this[e+--n];n>0&&(r*=256);)o+=this[e+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},r.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},r.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),se.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),se.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),se.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),se.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=0|t,i=0|i,!n){var r=Math.pow(2,8*i)-1;z(this,e,t,i,r,0)}var o=1,a=0;for(this[t]=255&e;++a<i&&(o*=256);)this[t+a]=e/o&255;return t+i},r.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=0|t,i=0|i,!n){var r=Math.pow(2,8*i)-1;z(this,e,t,i,r,0)}var o=i-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+i},r.prototype.writeUInt8=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Y(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Y(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):q(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=0|t,!n){var r=Math.pow(2,8*i-1);z(this,e,t,i,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<i&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+i},r.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=0|t,!n){var r=Math.pow(2,8*i-1);z(this,e,t,i,r-1,-r)}var o=i-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+i},r.prototype.writeInt8=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Y(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Y(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):q(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,i){return e=+e,t=0|t,i||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,i){return K(this,e,t,!0,i)},r.prototype.writeFloatBE=function(e,t,i){return K(this,e,t,!1,i)},r.prototype.writeDoubleLE=function(e,t,i){return Z(this,e,t,!0,i)},r.prototype.writeDoubleBE=function(e,t,i){return Z(this,e,t,!1,i)},r.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o,a=n-i;if(this===e&&i<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+i];else if(a<1e3||!r.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},r.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e=255&e);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var s=r.isBuffer(e)?e:ee(new r(e,n).toString()),l=s.length;for(a=0;a<i-t;++a)this[a+t]=s[a%l]}return this};var ce=/[^+\/0-9A-Za-z-_]/g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/node_modules/buffer/index.js","/node_modules/buffer")},{_process:8,"base64-js":3,buffer:4,ieee754:6,isarray:7,timers:9}],5:[function(t,i,n){(function(r,o,a,s,l,d,c,u,p,h,f){!function(t,r){"object"==typeof n&&"undefined"!=typeof i?i.exports=r():"function"==typeof e&&e.amd?e(r):t.ES6Promise=r()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function n(e){K=e}function a(e){Z=e}function s(){return function(){return r.nextTick(p)}}function l(){return function(){X(p)}}function d(){var e=0,t=new $(p),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=p,function(){return e.port2.postMessage(0)}}function u(){var e=setTimeout;return function(){return e(p,1)}}function p(){for(var e=0;e<q;e+=2){var t=ie[e],i=ie[e+1];t(i),ie[e]=void 0,ie[e+1]=void 0}q=0}function h(){try{var e=t,i=e("vertx");return X=i.runOnLoop||i.runOnContext,l()}catch(n){return u()}}function f(e,t){var i=arguments,n=this,r=new this.constructor(m);void 0===r[re]&&_(r);var o=n._state;return o?!function(){var e=i[o-1];Z(function(){return O(o,r,e,n._result)})}():k(n,r,e,t),r}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(m);return A(i,e),i}function m(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(t){return le.error=t,le}}function P(e,t,i,n){try{e.call(t,i,n)}catch(r){return r}}function w(e,t,i){Z(function(e){var n=!1,r=P(i,t,function(i){n||(n=!0,t!==i?A(e,i):T(e,i))},function(t){n||(n=!0,B(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&r&&(n=!0,B(e,r))},e)}function S(e,t){t._state===ae?T(e,t._result):t._state===se?B(e,t._result):k(t,void 0,function(t){return A(e,t)},function(t){return B(e,t)})}function C(e,t,n){t.constructor===e.constructor&&n===f&&t.constructor.resolve===g?S(e,t):n===le?B(e,le.error):void 0===n?T(e,t):i(n)?w(e,t,n):T(e,t)}function A(t,i){t===i?B(t,y()):e(i)?C(t,i,v(i)):T(t,i)}function I(e){e._onerror&&e._onerror(e._result),E(e)}function T(e,t){e._state===oe&&(e._result=t,e._state=ae,0!==e._subscribers.length&&Z(E,e))}function B(e,t){e._state===oe&&(e._state=se,e._result=t,Z(I,e))}function k(e,t,i,n){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+ae]=i,r[o+se]=n,0===o&&e._state&&Z(E,e)}function E(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+i],n?O(i,n,r,o):r(o);e._subscribers.length=0}}function L(){this.error=null}function D(e,t){try{return e(t)}catch(i){return de.error=i,de}}function O(e,t,n,r){var o=i(n),a=void 0,s=void 0,l=void 0,d=void 0;if(o){if(a=D(n,r),a===de?(d=!0,s=a.error,a=null):l=!0,t===a)return void B(t,b())}else a=r,l=!0;t._state!==oe||(o&&l?A(t,a):d?B(t,s):e===ae?T(t,a):e===se&&B(t,a))}function R(e,t){try{t(function(t){A(e,t)},function(t){B(e,t)})}catch(i){B(e,i)}}function N(){return ce++}function _(e){e[re]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function x(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[re]||_(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):B(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function M(e){return new x(this,e).promise}function H(e){var t=this;return new t(Y(e)?function(i,n){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(i,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function V(e){var t=this,i=new t(m);return B(i,e),i}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function W(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this[re]=N(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&F(),this instanceof G?R(this,e):W())}function j(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=e.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}e.Promise=G}var z=void 0;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=z,q=0,X=void 0,K=void 0,Z=function(e,t){ie[q]=e,ie[q+1]=t,q+=2,2===q&&(K?K(p):ne())},J="undefined"!=typeof window?window:void 0,Q=J||{},$=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=new Array(1e3),ne=void 0;ne=ee?s():$?d():te?c():void 0===J&&"function"==typeof t?h():u();var re=Math.random().toString(36).substring(16),oe=void 0,ae=1,se=2,le=new L,de=new L,ce=0;return x.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===oe&&i<e;i++)this._eachEntry(t[i],i)},x.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===g){var r=v(e);if(r===f&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(i===G){var o=new i(m);C(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},x.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===oe&&(this._remaining--,e===se?B(n,i):this._result[t]=i),0===this._remaining&&T(n,this._result)},x.prototype._willSettleAt=function(e,t){var i=this;k(e,void 0,function(e){return i._settledAt(ae,t,e)},function(e){return i._settledAt(se,t,e)})},G.all=M,G.race=H,G.resolve=g,G.reject=V,G._setScheduler=n,G._setAsap=a,G._asap=Z,G.prototype={constructor:G,then:f,"catch":function(e){return this.then(null,e)}},j(),G.polyfill=j,G.Promise=G,G})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate,t("timers").clearImmediate,"/node_modules/es6-promise/dist/es6-promise.js","/node_modules/es6-promise/dist")},{_process:8,buffer:4,timers:9}],6:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){i.read=function(e,t,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,d=l>>1,c=-7,u=i?r-1:0,p=i?-1:1,h=e[t+u];for(u+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+u],u+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+u],u+=p,c-=8);if(0===o)o=1-d;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,n),o-=d}return(h?-1:1)*a*Math.pow(2,o-n)},i.write=function(e,t,i,n,r,o){var a,s,l,d=8*o-r-1,c=(1<<d)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+u>=1?p/l:p*Math.pow(2,1-u),t*l>=2&&(a++,l/=2),a+u>=c?(s=0,a=c):a+u>=1?(s=(t*l-1)*Math.pow(2,r),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;e[i+h]=255&s,h+=f,s/=256,r-=8);for(a=a<<r|s,d+=r;d>0;e[i+h]=255&a,h+=f,a/=256,d-=8);e[i+h-f]|=128*g}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/node_modules/ieee754/index.js","/node_modules/ieee754")},{_process:8,buffer:4,timers:9}],7:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){var p={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==p.call(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/node_modules/isarray/index.js","/node_modules/isarray");
},{_process:8,buffer:4,timers:9}],8:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){function p(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function f(e){if(P===setTimeout)return setTimeout(e,0);if((P===p||!P)&&setTimeout)return P=setTimeout,setTimeout(e,0);try{return P(e,0)}catch(t){try{return P.call(null,e,0)}catch(t){return P.call(this,e,0)}}}function g(e){if(w===clearTimeout)return clearTimeout(e);if((w===h||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(e);try{return w(e)}catch(t){try{return w.call(null,e)}catch(t){return w.call(this,e)}}}function m(){A&&S&&(A=!1,S.length?C=S.concat(C):I=-1,C.length&&y())}function y(){if(!A){var e=f(m);A=!0;for(var t=C.length;t;){for(S=C,C=[];++I<t;)S&&S[I].run();I=-1,t=C.length}S=null,A=!1,g(e)}}function b(e,t){this.fun=e,this.array=t}function v(){}var P,w,e=t.exports={};!function(){try{P="function"==typeof setTimeout?setTimeout:p}catch(e){P=p}try{w="function"==typeof clearTimeout?clearTimeout:h}catch(e){w=h}}();var S,C=[],A=!1,I=-1;e.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];C.push(new b(e,t)),1!==C.length||A||f(y)},b.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=v,e.addListener=v,e.once=v,e.off=v,e.removeListener=v,e.removeAllListeners=v,e.emit=v,e.prependListener=v,e.prependOnceListener=v,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/node_modules/process/browser.js","/node_modules/process")},{_process:8,buffer:4,timers:9}],9:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){function h(e,t){this._id=e,this._clearFn=t}var f=e("process/browser.js").nextTick,g=Function.prototype.apply,m=Array.prototype.slice,y={},b=0;i.setTimeout=function(){return new h(g.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new h(g.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e.close()},h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i.setImmediate="function"==typeof d?d:function(e){var t=b++,n=!(arguments.length<2)&&m.call(arguments,1);return y[t]=!0,f(function(){y[t]&&(n?e.apply(null,n):e.call(null),i.clearImmediate(t))}),t},i.clearImmediate="function"==typeof c?c:function(e){delete y[e]}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/node_modules/timers-browserify/main.js","/node_modules/timers-browserify")},{_process:8,buffer:4,"process/browser.js":8,timers:9}],"E:\\geckotoday\\gecko\\node_modules\\typescript-headerbidding\\out\\zfbid.min.js":[function(t,i,n){(function(r,o,a,s,l,d,c,u,p,h,f){!function(t){if("object"==typeof n&&"undefined"!=typeof i)i.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,r.ZFBid=t()}}(function(){return function(){function e(i,n,r){function o(s,l){if(!n[s]){if(!i[s]){var d="function"==typeof t&&t;if(!l&&d)return d(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};i[s][0].call(u.exports,function(e){var t=i[s][1][e];return o(t?t:e)},u,u.exports,e,i,n,r)}return n[s].exports}for(var a="function"==typeof t&&t,s=0;s<r.length;s++)o(r[s]);return o}return e}()({1:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){(function(e,t,i,n,r){var o=function(){function e(){}return e.configMap={PREBID_ZD_GCK_PBJS_SECURE:"https://ss3.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs.js",PREBID_ZD_GCK_PBJS_NONSECURE:"http://c14.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs.js",PREBID_ZD_GCK_PBJS1_SECURE:"https://ss3.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs1.js",PREBID_ZD_GCK_PBJS1_NONSECURE:"http://c14.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs1.js",PREBID_ZD_GCK_PBJS2_SECURE:"https://ss3.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs2.js",PREBID_ZD_GCK_PBJS2_NONSECURE:"http://c14.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs2.js",PREBID_ZD_GCK_PBJS3_SECURE:"https://ss3.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs3.js",PREBID_ZD_GCK_PBJS3_NONSECURE:"http://c14.zedo.com/gecko/lib/prebid/v1.14.0/prebid_zd_gck_pbjs3.js"},e.getProperty=function(t){return e.configMap[t]},e}();r("undefined"!=typeof o?o:window.Config)}).call(i,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/build\\local\\src\\config\\Config.js","/build\\local\\src\\config")},{_process:6,buffer:3}],2:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d){"use strict";function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function u(e){return 3*e.length/4-c(e)}function p(e){var t,i,n,r,o,a=e.length;r=c(e),o=new b(3*a/4-r),i=r>0?a-4:a;var s=0;for(t=0;t<i;t+=4)n=y[e.charCodeAt(t)]<<18|y[e.charCodeAt(t+1)]<<12|y[e.charCodeAt(t+2)]<<6|y[e.charCodeAt(t+3)],o[s++]=n>>16&255,o[s++]=n>>8&255,o[s++]=255&n;return 2===r?(n=y[e.charCodeAt(t)]<<2|y[e.charCodeAt(t+1)]>>4,o[s++]=255&n):1===r&&(n=y[e.charCodeAt(t)]<<10|y[e.charCodeAt(t+1)]<<4|y[e.charCodeAt(t+2)]>>2,o[s++]=n>>8&255,o[s++]=255&n),o}function h(e){return m[e>>18&63]+m[e>>12&63]+m[e>>6&63]+m[63&e]}function f(e,t,i){for(var n,r=[],o=t;o<i;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(h(n));return r.join("")}function g(e){for(var t,i=e.length,n=i%3,r="",o=[],a=16383,s=0,l=i-n;s<l;s+=a)o.push(f(e,s,s+a>l?l:s+a));return 1===n?(t=e[i-1],r+=m[t>>2],r+=m[t<<4&63],r+="=="):2===n&&(t=(e[i-2]<<8)+e[i-1],r+=m[t>>10],r+=m[t>>4&63],r+=m[t<<2&63],r+="="),o.push(r),o.join("")}i.byteLength=u,i.toByteArray=p,i.fromByteArray=g;for(var m=[],y=[],b="undefined"!=typeof Uint8Array?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=0,w=v.length;P<w;++P)m[P]=v[P],y[v.charCodeAt(P)]=P;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules\\base64-js\\index.js","/node_modules\\base64-js")},{_process:6,buffer:3}],3:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c){"use strict";function u(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function p(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function h(e,t){if(p()<t)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=r.prototype):(null===e&&(e=new r(t)),e.length=t),e}function r(e,t,i){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return y(this,e)}return f(this,e,t,i)}function f(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?P(e,t,i,n):"string"==typeof t?b(e,t,i):w(e,t)}function g(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function m(e,t,i,n){return g(t),t<=0?h(e,t):void 0!==i?"string"==typeof n?h(e,t).fill(i,n):h(e,t).fill(i):h(e,t)}function y(e,t){if(g(t),e=h(e,t<0?0:0|S(t)),!r.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function b(e,t,i){if("string"==typeof i&&""!==i||(i="utf8"),!r.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|A(t,i);e=h(e,n);var o=e.write(t,i);return o!==n&&(e=e.slice(0,o)),e}function v(e,t){var i=t.length<0?0:0|S(t.length);e=h(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function P(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),r.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=r.prototype):e=v(e,t),e}function w(e,t){if(r.isBuffer(t)){var i=0|S(t.length);return e=h(e,i),0===e.length?e:(t.copy(e,0,0,i),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||ne(t.length)?h(e,0):v(e,t);if("Buffer"===t.type&&ae(t.data))return v(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function S(e){if(e>=p())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p().toString(16)+" bytes");return 0|e}function C(e){return+e!=e&&(e=0),r.alloc(+e)}function A(e,t){if(r.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return te(e).length;default:if(n)return Q(e).length;t=(""+t).toLowerCase(),n=!0}}function I(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return V(this,t,i);case"utf8":case"utf-8":return x(this,t,i);case"ascii":return M(this,t,i);case"latin1":case"binary":return H(this,t,i);case"base64":return _(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function T(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function B(e,t,i,n,o){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0){if(!o)return-1;i=0}if("string"==typeof t&&(t=r.from(t,n)),r.isBuffer(t))return 0===t.length?-1:k(e,t,i,n,o);if("number"==typeof t)return t=255&t,r.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):k(e,[t],i,n,o);throw new TypeError("val must be string, number or Buffer")}function k(e,t,i,n,r){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,i/=2}var d;if(r){var c=-1;for(d=i;d<s;d++)if(o(e,d)===o(t,c===-1?0:d-c)){if(c===-1&&(c=d),d-c+1===l)return c*a}else c!==-1&&(d-=d-c),c=-1}else for(i+l>s&&(i=s-l),d=i;d>=0;d--){for(var u=!0,p=0;p<l;p++)if(o(e,d+p)!==o(t,p)){u=!1;break}if(u)return d}return-1}function E(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[i+a]=s}return a}function L(e,t,i,n){return ie(Q(t,e.length-i),e,i,n)}function D(e,t,i,n){return ie($(t),e,i,n)}function O(e,t,i,n){return D(e,t,i,n)}function R(e,t,i,n){return ie(te(t),e,i,n)}function N(e,t,i,n){return ie(ee(t,e.length-i),e,i,n)}function _(e,t,i){return 0===t&&i===e.length?re.fromByteArray(e):re.fromByteArray(e.slice(t,i))}function x(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var o=e[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=i){var l,d,c,u;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[r+1],128===(192&l)&&(u=(31&o)<<6|63&l,u>127&&(a=u));break;case 3:l=e[r+1],d=e[r+2],128===(192&l)&&128===(192&d)&&(u=(15&o)<<12|(63&l)<<6|63&d,u>2047&&(u<55296||u>57343)&&(a=u));break;case 4:l=e[r+1],d=e[r+2],c=e[r+3],128===(192&l)&&128===(192&d)&&128===(192&c)&&(u=(15&o)<<18|(63&l)<<12|(63&d)<<6|63&c,u>65535&&u<1114112&&(a=u))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),r+=s}return U(n)}function U(e){var t=e.length;if(t<=se)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=se));return i}function M(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function H(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function V(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=t;o<i;++o)r+=J(e[o]);return r}function F(e,t,i){for(var n=e.slice(t,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function W(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function G(e,t,i,n,o,a){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function j(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-i,2);r<o;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function z(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-i,4);r<o;++r)e[i+r]=t>>>8*(n?r:3-r)&255}function Y(e,t,i,n,r,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function q(e,t,i,n,r){return r||Y(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38),oe.write(e,t,i,n,23,4),i+4}function X(e,t,i,n,r){return r||Y(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308),oe.write(e,t,i,n,52,8),i+8}function K(e){if(e=Z(e).replace(le,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function Q(e,t){t=t||1/0;for(var i,n=e.length,r=null,o=[],a=0;a<n;++a){if(i=e.charCodeAt(a),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&o.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function $(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function ee(e,t){for(var i,n,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=e.charCodeAt(a),n=i>>8,r=i%256,o.push(r),o.push(n);return o}function te(e){return re.toByteArray(K(e))}function ie(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function ne(e){return e!==e}var re=e("base64-js"),oe=e("ieee754"),ae=e("isarray");i.Buffer=r,i.SlowBuffer=C,i.INSPECT_MAX_BYTES=50,r.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:u(),i.kMaxLength=p(),r.poolSize=8192,r._augment=function(e){return e.__proto__=r.prototype,e},r.from=function(e,t,i){return f(null,e,t,i)},r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})),r.alloc=function(e,t,i){return m(null,e,t,i)},r.allocUnsafe=function(e){return y(null,e)},r.allocUnsafeSlow=function(e){return y(null,e)},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,o=0,a=Math.min(i,n);o<a;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!ae(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=r.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var a=e[i];if(!r.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},r.byteLength=A,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)T(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},r.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):I.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e,t,i,n,o){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,s=i-t,l=Math.min(a,s),d=this.slice(n,o),c=e.slice(t,i),u=0;u<l;++u)if(d[u]!==c[u]){a=d[u],s=c[u];break}return a<s?-1:s<a?1:0},r.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},r.prototype.indexOf=function(e,t,i){return B(this,e,t,i,!0)},r.prototype.lastIndexOf=function(e,t,i){return B(this,e,t,i,!1)},r.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,e,t,i);case"utf8":case"utf-8":return L(this,e,t,i);case"ascii":return D(this,e,t,i);case"latin1":case"binary":return O(this,e,t,i);case"base64":return R(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var se=4096;r.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n;if(r.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=r.prototype;else{var o=t-e;n=new r(o,(void 0));for(var a=0;a<o;++a)n[a]=this[a+e]}return n},r.prototype.readUIntLE=function(e,t,i){e=0|e,t=0|t,i||W(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return n},r.prototype.readUIntBE=function(e,t,i){e=0|e,t=0|t,i||W(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},r.prototype.readUInt8=function(e,t){return t||W(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||W(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||W(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||W(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||W(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,i){e=0|e,t=0|t,i||W(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*t)),n},r.prototype.readIntBE=function(e,t,i){e=0|e,t=0|t,i||W(e,t,this.length);for(var n=t,r=1,o=this[e+--n];n>0&&(r*=256);)o+=this[e+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},r.prototype.readInt8=function(e,t){return t||W(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},r.prototype.readInt16LE=function(e,t){t||W(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(e,t){t||W(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(e,t){return t||W(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||W(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||W(e,4,this.length),oe.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||W(e,4,this.length),oe.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||W(e,8,this.length),oe.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||W(e,8,this.length),oe.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=0|t,i=0|i,!n){var r=Math.pow(2,8*i)-1;G(this,e,t,i,r,0)}var o=1,a=0;for(this[t]=255&e;++a<i&&(o*=256);)this[t+a]=e/o&255;return t+i},r.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=0|t,i=0|i,!n){var r=Math.pow(2,8*i)-1;G(this,e,t,i,r,0)}var o=i-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+i},r.prototype.writeUInt8=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):z(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=0|t,!n){var r=Math.pow(2,8*i-1);G(this,e,t,i,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<i&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+i},r.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=0|t,!n){var r=Math.pow(2,8*i-1);G(this,e,t,i,r-1,-r)}var o=i-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+i},r.prototype.writeInt8=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):z(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,i){return e=+e,t=0|t,i||G(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,i){return q(this,e,t,!0,i)},r.prototype.writeFloatBE=function(e,t,i){return q(this,e,t,!1,i)},r.prototype.writeDoubleLE=function(e,t,i){return X(this,e,t,!0,i)},r.prototype.writeDoubleBE=function(e,t,i){return X(this,e,t,!1,i)},r.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o,a=n-i;if(this===e&&i<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+i];else if(a<1e3||!r.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},r.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e=255&e);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var s=r.isBuffer(e)?e:Q(new r(e,n).toString()),l=s.length;for(a=0;a<i-t;++a)this[a+t]=s[a%l]}return this};var le=/[^+\/0-9A-Za-z-_]/g}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules\\buffer\\index.js","/node_modules\\buffer")},{_process:6,"base64-js":2,buffer:3,ieee754:4,isarray:5}],4:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d){i.read=function(e,t,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,d=l>>1,c=-7,u=i?r-1:0,p=i?-1:1,h=e[t+u];for(u+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+u],u+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+u],u+=p,c-=8);if(0===o)o=1-d;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,n),o-=d}return(h?-1:1)*a*Math.pow(2,o-n)},i.write=function(e,t,i,n,r,o){var a,s,l,d=8*o-r-1,c=(1<<d)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+u>=1?p/l:p*Math.pow(2,1-u),t*l>=2&&(a++,l/=2),a+u>=c?(s=0,a=c):a+u>=1?(s=(t*l-1)*Math.pow(2,r),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;e[i+h]=255&s,h+=f,s/=256,r-=8);for(a=a<<r|s,d+=r;d>0;e[i+h]=255&a,h+=f,a/=256,d-=8);e[i+h-f]|=128*g}}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules\\ieee754\\index.js","/node_modules\\ieee754")},{_process:6,buffer:3}],5:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){var c={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==c.call(e)}}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules\\isarray\\index.js","/node_modules\\isarray")},{_process:6,buffer:3}],6:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){function c(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function p(e){if(b===setTimeout)return setTimeout(e,0);if((b===c||!b)&&setTimeout)return b=setTimeout,setTimeout(e,0);try{return b(e,0)}catch(t){try{return b.call(null,e,0)}catch(t){return b.call(this,e,0)}}}function h(e){if(v===clearTimeout)return clearTimeout(e);if((v===u||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(e);try{return v(e)}catch(t){try{return v.call(null,e)}catch(t){return v.call(this,e)}}}function f(){S&&P&&(S=!1,P.length?w=P.concat(w):C=-1,w.length&&g())}function g(){if(!S){var e=p(f);S=!0;for(var t=w.length;t;){for(P=w,w=[];++C<t;)P&&P[C].run();C=-1,t=w.length}P=null,S=!1,h(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}var b,v,e=t.exports={};!function(){try{b="function"==typeof setTimeout?setTimeout:c}catch(e){b=c}try{v="function"==typeof clearTimeout?clearTimeout:u}catch(e){v=u}}();var P,w=[],S=!1,C=-1;e.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];w.push(new m(e,t)),1!==w.length||S||p(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=y,e.addListener=y,e.once=y,e.off=y,e.removeListener=y,e.removeAllListeners=y,e.emit=y,e.prependListener=y,e.prependOnceListener=y,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules\\process\\browser.js","/node_modules\\process")},{_process:6,buffer:3}],7:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){"use strict";var c=function(){function e(){}return e.getTimestamp=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()},e.isDebugOn=function(){var e=window.location.href.match(/[?&]pbjs_debug=([^&#]+)/);return!(!e||"true"!==e[1])},e.ajaxCall=function(t,i,n){var r=new XMLHttpRequest;r.onreadystatechange=e.createCallback(i,r,n),r.open("GET",t,!0),r.send()},e.convertToJson=function(e){var t=e;if(e)try{t=JSON.parse(e)}catch(i){if("string"==typeof e){for(var n=e.replace(/\s/g,"").replace(/\'/g,'"'),r="",o=["{","}","[","]",",",":"],a=0,s=n.length;a<s;a++){
var l=n[a],d=n[a+1]?n[a+1]:"",c=o.indexOf(l)>-1,u=o.indexOf(d)>-1;if(!c||'"'!==d&&"'"!==d)if('"'!==l&&"'"!==l)r+=c&&""!==d&&!u?l+'"':!c&&""!==d&&u?l+'"':l;else{var p=n.indexOf('"',a+1);r+=n.substring(a-1,p+1),a=p}}t=JSON.parse(r)}}return t},e.createCallback=function(e,t,i){return function(){4===t.readyState&&200===t.status?i(e,t.responseText,""):i(e,"",t.statusText)}},e}();t.exports=c}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\Util.ts","/src")},{_process:6,buffer:3}],8:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){"use strict";var c=function(){function e(e,t){this.enableAnalytics=e,this.hBEventsLogger=t,this.timeout=!1}return e.prototype.isEnableAnalytics=function(){return this.enableAnalytics},e.prototype.timeoutNow=function(){this.timeout=!0},e.prototype.setBidRequest=function(e,t,i){if(null!=this.hBEventsLogger){var n=(new Date).getTime()-this.hBEventsLogger.getTagStartTime();this.hBEventsLogger.fireBidRequestEvent(e,t,i,n)}},e.prototype.setBidSuccess=function(e,t,i,n,r){null!=this.hBEventsLogger&&(this.timeout?this.setBidTimeout(e,t,i,n,r):i>0?this.hBEventsLogger.fireBidEvent(e,t,i,n,r):this.hBEventsLogger.fireNoBidEvent(e,t,i,n,r))},e.prototype.setBidTimeout=function(e,t,i,n,r){null!=this.hBEventsLogger&&this.hBEventsLogger.fireBidTimeoutEvent(e,t,i,n,r)},e.prototype.setBidWon=function(e,t,i,n,r){null!=this.hBEventsLogger&&this.hBEventsLogger.fireAuctionWinEvent(e,t,i,n,r)},e}();t.exports=c}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\analytics\\BidAnalytics.ts","/src\\analytics")},{_process:6,buffer:3}],9:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){"use strict";var c=function(){function e(e,t){this.isDebugOn=e,this.callbackOnComplete=t,this.isReqComplete=!1}return e.prototype.setRequestComplete=function(e){this.isReqComplete=e},e.prototype.isRequestComplete=function(){return this.isReqComplete},e}();t.exports=c}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\bidders\\Bidder.ts","/src\\bidders")},{_process:6,buffer:3}],10:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){"use strict";var c;!function(e){e[e.OpenX=0]="OpenX",e[e.Prebid=1]="Prebid",e[e.RubiconVideo=2]="RubiconVideo"}(c||(c={})),t.exports=c}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\bidders\\BidderName.ts","/src\\bidders")},{_process:6,buffer:3}],11:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d){"use strict";var c;!function(e){e[e.display=0]="display",e[e.video=1]="video"}(c||(c={})),t.exports=c}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\bidders\\MediaType.ts","/src\\bidders")},{_process:6,buffer:3}],12:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c){"use strict";var u=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},p=e("./Bidder"),h=e("./BidderName"),f=e("./MediaType"),g=e("../Util"),m=e("../zfbid"),y="OX_zedo_",b=function(e){function t(t,i,n,r){var o=e.call(this,t,i)||this;return o.propertiesManager=n,o.bidAnalytics=r,o.name="openx",o.bidResponses={},o.clientTimedOut=!1,o.randomNumber=Math.floor(1e3*Math.random()+1),o.OX_dfp_options={callback:function(){o.endBidTime=(new Date).getTime(),o.parseResponse(),o.callbackOnComplete(o)}},o.OX_dfp_ads=[],o.placements={},o}return u(t,e),t.prototype.getName=function(){return h.OpenX},t.prototype.addBid=function(e,t,i,n,r,o,a){this.OX_dfp_ads[this.OX_dfp_ads.length]=[t,[i+"x"+n],r],this.placements[e]={id:r,partnerName:o,width:i.toString(),height:n.toString(),floorprice:a}},t.prototype.timeOutBidder=function(){this.clientTimedOut=!0},t.prototype.registerBids=function(){var e=window;e.OX_dfp_ads=this.OX_dfp_ads,e.OX_dfp_options=this.OX_dfp_options},t.prototype.invokeBeforeRegister=function(){},t.prototype.getRandomNumber=function(){var e=window,t=e[y+this.randomNumber];return t&&(this.randomNumber=Math.floor(1e3*Math.random()+1),this.getRandomNumber()),this.randomNumber},t.prototype.invokeAfterRegister=function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"===document.location.protocol;this.startBidTime=(new Date).getTime(),e.src=(t?"https:":"http:")+"//zedo-d.openx.net/w/1.0/jstag?nc=123456-zedo_2&oxns=zedo_"+this.getRandomNumber();var i=document.getElementsByTagName("script")[0];i.parentNode&&i.parentNode.insertBefore(e,i);for(var n in this.placements)this.placements.hasOwnProperty(n)&&this.bidAnalytics.setBidRequest("OpenX",this.placements[n].partnerName,n)},t.prototype.parseResponse=function(){var e=window,t=e[y+this.randomNumber];if(t)for(var i in this.placements)if(this.placements.hasOwnProperty(i)){var n=0,r="",o="",a="",s="",l="",d=parseInt(this.placements[i].id),c=t.dfp_bidder.getPrice(d);if(a=this.placements[i].partnerName,c&&c.length>0&&"0"!==c){var u=c.split(",");u.length>1&&u[1].indexOf("pmp")>-1&&(r=u[2],this.isDebugOn&&console.log(g.getTimestamp()+" Id : "+d+" ----- Price map : "+n)),n=Number(u[0])/100;var p=r.length>0?this.propertiesManager.getOpenXPmpShare():this.propertiesManager.getOpenXShare(),h=n*p/100;n=n>h?n-h:n,this.isDebugOn&&console.log("openx price :  "+n+", placement : "+d),o=this.placements[i].id,s=this.placements[i].width,l=this.placements[i].height,a=this.placements[i].partnerName,this.clientTimedOut?this.bidAnalytics.setBidTimeout("OpenX",a,n,i,this.endBidTime-this.startBidTime):this.bidAnalytics.setBidSuccess("OpenX",a,n,i,this.endBidTime-this.startBidTime)}else n=0,this.clientTimedOut?this.bidAnalytics.setBidTimeout("OpenX",a,0,i,this.endBidTime-this.startBidTime):this.bidAnalytics.setBidSuccess("OpenX",a,0,i,this.endBidTime-this.startBidTime);this.bidResponses[i]=new m.BidResponse("OpenX",this.getName(),o,n,"","",a,f.display,r,"",this.endBidTime-this.startBidTime,s,l)}},t.prototype.getResponse=function(e){return this.bidResponses[e]?this.bidResponses[e]:new m.BidResponse("OpenX",this.getName(),"",0,"","",name,f.display,"","",this.endBidTime-this.startBidTime,"","")},t.prototype.getAllResponses=function(e){var t=[];return this.bidResponses[e]?t.push(this.bidResponses[e]):t.push(new m.BidResponse("OpenX",this.getName(),"",0,"","",name,f.display,"","",this.endBidTime-this.startBidTime,"","")),t},t.prototype.renderAd=function(e,t){var i=window,n=i[y+this.randomNumber],r=n.dfp_bidder.getPriceMap();this.isDebugOn&&console.log(g.getTimestamp()+" Rendering openx"),e.write(r[parseInt(t.AdCode)].ad),e.close()},t}(p);t.exports=b}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\bidders\\OpenX.ts","/src\\bidders")},{"../Util":7,"../zfbid":"ZFBid","./Bidder":9,"./BidderName":10,"./MediaType":11,_process:6,buffer:3}],13:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c){"use strict";var u=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},p=e("./Bidder"),h=e("./BidderName"),f=e("../Util"),g=e("../zfbid"),m=e("./MediaType"),y=e("../config/ConfigHolder"),b={SECURE:"https",NON_SECURE:"http"},v="filepaths",P=function(e){function t(t,i,n,r,o){var a=e.call(this,t,n)||this;a.timeout=i,a.bidAnalytics=r,a.slotid=o,a.loadTremorAliasFix=!1,a.clientTimedOut=!1,a.bidPlacementCodeMap={},a.bidderResponseDoneMap={},a.pbVersion=(c={},c.zd_gck_pbjs=(u={},u[b.SECURE]=y.getPrebidUrlSecure(),u[b.NON_SECURE]=y.getPrebidUrlNonSecure(),u),c.zd_gck_pbjs1=(p={},p[b.SECURE]=y.getPrebidUrlSecure1(),p[b.NON_SECURE]=y.getPrebidUrlNonSecure1(),p),c.zd_gck_pbjs2=(h={},h[b.SECURE]=y.getPrebidUrlSecure2(),h[b.NON_SECURE]=y.getPrebidUrlNonSecure2(),h),c.zd_gck_pbjs3=(f={},f[b.SECURE]=y.getPrebidUrlSecure3(),f[b.NON_SECURE]=y.getPrebidUrlNonSecure3(),f),c);var s=window;a.zdpbjs={},a.slotID=o;try{var l=a.getpbVersion(s);s[l.key]?s[l.key]&&s[l.key].slotid===o&&(s[l.key]={slotid:o},a.zdpbjs=s[l.key]):(s[l.key]={slotid:o},a.zdpbjs=s[l.key]),a.zdpbjs[v]=l[v],a.zdpbjs.que=a.zdpbjs.que||[]}catch(d){console.error(d)}return a.brealTimeFlag=!1,a.bids={},a;var c,u,p,h,f}return u(t,e),t.prototype.getpbVersion=function(e){var t={key:"zd_gck_pbjs",filepaths:(r={},r[b.SECURE]=y.getPrebidUrlSecure(),r[b.NON_SECURE]=y.getPrebidUrlNonSecure(),r)};try{for(var i in this.pbVersion){if(this.pbVersion.hasOwnProperty(i)&&!e[[i][0]])return t.key=i,t[v]=this.pbVersion[i],t;if(e[[i][0]]&&e[[i][0]].slotid===this.slotID)return t.key=i,t[v]=this.pbVersion[i],t}}catch(n){return t}return t;var r},t.prototype.getName=function(){return h.Prebid},t.prototype.getBid=function(e,t,i,n){var r=this.bids[e];return r||(r=new w(e,t,i,n),this.bids[e]=r),r},t.prototype.addAolBidder=function(e,t,i,n,r,o,a,s,l,d,c){this.addBids(e,t,a,s,l,{bidder:t,params:{network:i,placement:n,sizeId:r,alias:o},partnerName:a,floorprice:Number(c)},d)},t.prototype.addBrealTimeBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{placementId:i},partnerName:n,floorprice:Number(s)},a),this.brealTimeFlag=!0},t.prototype.addEmxDigitalBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{placementId:i},partnerName:n,floorprice:Number(s)},a),this.emxdigitalFlag=!0},t.prototype.addEmx_DigitalBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{tagid:i},partnerName:n,floorprice:Number(s)},a),this.emxdigitalFlag=!0},t.prototype.addPulsePointBidder=function(e,t,i,n,r,o,a,s,l,d,c){this.addBids(e,t,a,s,l,{bidder:t,params:{cf:i,cp:n,ct:r},partnerName:a,floorprice:Number(c)},d)},t.prototype.addAppnexusBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{placementId:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addRubiconBidder=function(e,t,i,n,r,o,a,s,l,d){this.addBids(e,t,o,a,s,{bidder:t,params:{accountId:i,siteId:n,zoneId:r},partnerName:o,floorprice:Number(d)},l)},t.prototype.addSovrnBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{tagid:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addCriteoApacBidder=function(e,t,i,n,r,o,a,s,l,d,c){this.addBids(e,t,a,s,l,{bidder:t,params:{nid:i,cookieName:n,varName:r,zoneMap:o},partnerName:a,floorprice:Number(c)},d)},t.prototype.addCriteoBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{zoneId:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addTremorBidder=function(e,t,i,n,r,o,a,s,l,d,c,u){d||(d="q63xp"),this.loadTremorAliasFix=!1,this.addBids(e,t,o,a,s,{bidder:t,params:{adCode:i,srcPageUrl:n,mediaId:r,supplyCode:d},partnerName:o,vAdPos:l,floorprice:Number(u)},c)},t.prototype.addTremorPrerollBidder=function(e,t,i,n,r,o,a,s,l,d,c,u){this.tremorPrerollFlag=!0,this.loadTremorAliasFix=!0,this.addBids(e,t,o,a,s,{bidder:t,params:{adCode:i,srcPageUrl:n,mediaId:r,supplyCode:d},partnerName:o,vAdPos:l,floorprice:Number(u)},c)},t.prototype.addInnityBidder=function(e,t,i,n,r,o,a,s,l){this.addBids(e,t,r,o,a,{bidder:t,params:{pub:i,zone:n},partnerName:r,floorprice:Number(l)},s)},t.prototype.addGumgumBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{inSlot:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addPubmaticBidder=function(e,t,i,n,r,o,a,s,l){this.addBids(e,t,r,o,a,{bidder:t,params:{publisherId:i,adSlot:n},partnerName:r,floorprice:Number(l)},s)},t.prototype.addC1XBidder=function(e,t,i,n,r,o,a,s,l,d,c){this.addBids(e,t,a,s,l,{bidder:t,params:{pixelId:i,siteId:n,endpoint:r,floorPriceMap:o},partnerName:a,floorprice:Number(c)},d)},t.prototype.addSmartAdServerBidder=function(e,t,i,n,r,o,a,s,l,d,c,u,p,h){this.addBids(e,t,d,c,u,{bidder:t,params:{domain:i,siteId:n,pageId:r,formatId:o,currency:a,bidfloor:s,target:l},partnerName:d,floorprice:Number(h)},p)},t.prototype.addAdyoulikeBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{placement:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addQuantcastBidder=function(e,t,i,n,r,o,a,s,l,d){this.addBids(e,t,o,a,s,{bidder:t,params:{publisherId:i,battr:n,bidFloor:r},partnerName:o,floorprice:Number(d)},l)},t.prototype.addOptimaticBidder=function(e,t,i,n,r,o,a,s,l){this.addBids(e,t,r,o,a,{bidder:t,params:{placement:i,bidfloor:n},partnerName:r,floorprice:Number(l)},s)},t.prototype.add33acrossBidder=function(e,t,i,n,r,o,a,s,l){this.addBids(e,t,r,o,a,{bidder:t,params:{siteId:i,productId:n},partnerName:r,floorprice:Number(l)},s)},t.prototype.addRhythmoneBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{placementId:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addZedoBidder=function(e,t,i,n,r,o,a,s,l){this.addBids(e,t,r,o,a,{bidder:t,params:{channelCode:i,dimId:n},partnerName:r,floorprice:Number(l)},s)},t.prototype.addAdtelligentBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{aid:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addAndbeyondBidder=function(e,t,i,n,r,o,a,s,l){this.addBids(e,t,r,o,a,{bidder:t,params:{zoneId:i,host:n},partnerName:r,floorprice:Number(l)},s)},t.prototype.addOpenxBidder=function(e,t,i,n,r,o,a,s,l){this.addBids(e,t,r,o,a,{bidder:t,params:{unit:i,delDomain:n},partnerName:r,floorprice:Number(l)},s)},t.prototype.addYieldNexusBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{spid:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addConversantBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{site_id:i},partnerName:n,floorprice:Number(s)},a)},t.prototype.addIxBidder=function(e,t,i,n,r,o,a,s){this.addBids(e,t,n,r,o,{bidder:t,params:{siteId:i,size:[r,o]},partnerName:n,floorprice:Number(s)},a)},t.prototype.addTelariaBidder=function(e,t,i,n,r,o,a,s,l,d){this.addBids(e,t,o,a,s,{bidder:t,params:{supplyCode:i,adCode:n,videoId:r},partnerName:o,floorprice:Number(d)},l)},t.prototype.addBids=function(e,t,i,n,r,o,a){var s=this.getBid(e,n,r,a);s.addBids(o)},t.prototype.timeOutBidder=function(){},t.prototype.invokeBeforeRegister=function(){var e="";for(var t in this.bids)if(this.bids.hasOwnProperty(t))for(var i in this.bids[t].Bids)this.bids[t].Bids.hasOwnProperty(i)&&(e+=this.bids[t].Bids[i].bidder+"_");this.loadTremorAliasFix&&(e+="tremor_"),this.zdpbjs.biddersName=e,this.isDebugOn&&console.log(f.getTimestamp()+" Made call to prebid.js");try{var n=document,r=n.createElement("script"),o=!1,a=new Date,s=a.getMonth()+1+""+a.getDate()+a.getHours()+a.getMinutes()+a.getSeconds();s="";var l="http:"===location.protocol?this.zdpbjs[v][b.NON_SECURE]+"?"+s:this.zdpbjs[v][b.SECURE]+"?"+s,d=r;r.type="text/javascript",r.src=l,r.id="zd_prebid",r.async=!0,r.onload=d.onreadystatechange=function(){var e=this.readyState;o||e&&"complete"!==e&&"loaded"!==e||(o=!0,this.isDebugOn&&console.log(f.getTimestamp()+" ZINC Log: Prebid.js Loaded"))};var c=document.getElementsByTagName("head")[0];c.insertBefore(r,c.firstChild)}catch(u){}},t.prototype.registerBids=function(e){var t=this,i=[],n={};for(var r in this.bids)this.bids.hasOwnProperty(r)&&(n=this.bids[r].MediaType&&"video"===this.bids[r].MediaType?{video:{context:"outstream",playerSize:this.bids[r].Sizes}}:{banner:{sizes:[this.bids[r].Sizes]}},i.push({code:this.bids[r].SlotId,mediaTypes:n,bids:this.bids[r].Bids,renderer:{}}));this.zdpbjs.que.push(function(){t.zdpbjs.setConfig({bidderTimeout:t.timeout-200,userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:["33across","pubmatic","emxdigital","openx","emx_digital"],filter:"include"}}},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"}}),t.zdpbjs.addAdUnits(i),t.tremorPrerollFlag&&t.zdpbjs.aliasBidder("tremor","tremorPreroll"),t.zdpbjs.onEvent("bidResponse",function(e){var i=e.adUnitCode+"-"+e.bidderCode;e.bidderCode&&t.bidPlacementCodeMap[i]&&e.cpm>=t.bidPlacementCodeMap[i].floorprice?(t.bidderResponseDoneMap[i]=!0,t.clientTimedOut?t.bidAnalytics.setBidTimeout("Prebid",t.bidPlacementCodeMap[i].bidder,e.cpm,e.adUnitCode,e.timeToRespond):t.bidAnalytics.setBidSuccess("Prebid",t.bidPlacementCodeMap[i].bidder,e.cpm,e.adUnitCode,e.timeToRespond)):t.clientTimedOut?t.bidAnalytics.setBidTimeout("Prebid",e.bidderCode,0,e.adUnitCode,e.timeToRespond):t.bidAnalytics.setBidSuccess("Prebid",e.bidderCode,0,e.adUnitCode,e.timeToRespond)}),t.zdpbjs.onEvent("bidRequested",function(e){for(var i in e.bids)if(e.bids.hasOwnProperty(i))if(e.bidderCode){var n=e.bids[i].adUnitCode+"-"+e.bidderCode;t.bidPlacementCodeMap[n]={bidder:e.bids[i].partnerName,floorprice:e.bids[i].floorprice},t.bidAnalytics.setBidRequest("Prebid",e.bids[i].partnerName,e.bids[i].adUnitCode)}else t.bidAnalytics.setBidRequest("Prebid",e.bidderCode,e.bids[i].adUnitCode)}),t.zdpbjs.onEvent("bidTimeout",function(e){e&&e.length>0&&console.log(" timeout  : ",e[0])}),t.zdpbjs.onEvent("adRenderFailed",function(e){console.log(" adRenderFailed  : ",e[0])}),t.zdpbjs.onEvent("bidderDone",function(e){for(var i in e.bids)if(e.bids.hasOwnProperty(i)&&e.bidderCode){var n=e.bids[i].adUnitCode+"-"+e.bidderCode;t.bidderResponseDoneMap[n]||t.bidAnalytics.setBidSuccess("Prebid",e.bids[i].partnerName,0,e.bids[i].adUnitCode,0)}}),t.zdpbjs.requestBids({bidsBackHandler:function(e){t.callbackOnComplete(t)}}),t.zdpbjs.bidderSettings={standard:{adserverTargeting:[{key:"hb_bidder",val:function(e){return e.bidderCode}},{key:"hb_adid",val:function(e){return e.adId}},{key:"hb_cpm",val:function(e){return e.cpm}},{key:"hb_tt",val:function(e){return e.timeToRespond}},{key:"hb_mediaType",val:function(e){return e.mediaType}},{key:"hb_vastXml",val:function(e){return e.vastXml}},{key:"hb_vastUrl",val:function(e){return e.vastUrl}}]},aol:{bidCpmAdjustment:function(t){return o(t,e.getAolShare())}},brealtime:{bidCpmAdjustment:function(t){return o(t,e.getBrealTimeShare())}},emxdigital:{bidCpmAdjustment:function(t){return o(t,e.getEmxDigitalShare())}},pulsepoint:{bidCpmAdjustment:function(t){return o(t,e.getPulsePointShare())}},appnexus:{bidCpmAdjustment:function(t){return o(t,e.getAppnexusShare())}},rubicon:{bidCpmAdjustment:function(t){return o(t,e.getRubiconShare())}},sovrn:{bidCpmAdjustment:function(t){return o(t,e.getSovrnShare())}},criteoApac:{bidCpmAdjustment:function(t){return o(t,e.getCriteoApacShare())}},criteo:{bidCpmAdjustment:function(t){return o(t,e.getCriteoShare())}},tremor:{bidCpmAdjustment:function(t){return o(t,e.getTremorShare())}},tremorPreroll:{bidCpmAdjustment:function(t){return o(t,e.getTremorPrerollShare())}},innity:{bidCpmAdjustment:function(t){return o(t,e.getInnityShare())}},gumgum:{bidCpmAdjustment:function(t){return o(t,e.getGumgumShare())}},pubmatic:{bidCpmAdjustment:function(t){return o(t,e.getPubmaticShare())}},c1x:{bidCpmAdjustment:function(t){return o(t,e.getC1XShare())}},smartadserver:{bidCpmAdjustment:function(t){return o(t,e.getSmartAdServerShare())}},adyoulike:{bidCpmAdjustment:function(t){return o(t,e.getAdyoulikeShare())}},quantcast:{bidCpmAdjustment:function(t){return o(t,e.getQuantcastShare())}},optimatic:{bidCpmAdjustment:function(t){return o(t,e.getOptimaticShare())}},"33across":{bidCpmAdjustment:function(t){return o(t,e.get33acrossShare())}},rhythmone:{bidCpmAdjustment:function(t){return o(t,e.getRhythmoneShare())}},zedo:{bidCpmAdjustment:function(t){return o(t,e.getZedoShare())}},adtelligent:{bidCpmAdjustment:function(t){return o(t,e.getAdtelligentShare())}},andbeyond:{bidCpmAdjustment:function(t){return o(t,e.getAndbeyondShare())}},openx:{bidCpmAdjustment:function(t){return o(t,e.getOpenxVideoShare())}},emx_digital:{bidCpmAdjustment:function(t){return o(t,e.getEmx_DigitalShare())}},yieldnexus:{bidCpmAdjustment:function(t){return o(t,e.getYieldNexusShare())}},conversant:{bidCpmAdjustment:function(t){return o(t,e.getConversantShare())}},ix:{bidCpmAdjustment:function(t){return o(t,e.getIxShare())}},telaria:{bidCpmAdjustment:function(t){return o(t,e.getTelariaShare())}}}});var o=function(e,t){if(t){var i=e*t/100;return e>i?e-i:e}return e}},t.prototype.invokeAfterRegister=function(){},t.prototype.getResponse=function(e){var t=0,i="",n="",r=0,o="",a="",s=m.display,l="",d="",c="";if("undefined"!=typeof this.zdpbjs.libLoaded)for(var u in this.bids){if(u===e){var p=this.zdpbjs.getAdserverTargetingForAdUnitCode(e);this.isDebugOn&&console.log&&(console.log(f.getTimestamp()+" Dumping all bid objects to console:"),this.zdpbjs.getBidResponses(e),console.log(f.getTimestamp()+" Prebid Response with : "),console.log(p)),"undefined"!=typeof p&&"undefined"!=typeof p.hb_cpm&&p.hb_cpm>t&&(t=p.hb_cpm,i=p.hb_bidder,n=p.hb_adid,r=p.hb_tt,d=this.bids[u].Sizes[0].toString(),c=this.bids[u].Sizes[0].toString(),s=p.hb_mediaType?p.hb_mediaType:m.display,a=p.hb_vastXml?p.hb_vastXml:"",o=p.hb_vastUrl?p.hb_vastUrl:"")}for(var h in this.bids[u].Bids)this.bids[u].Bids[h].bidder===i&&(i=this.bids[u].Bids[h].partnerName,this.bids[u].Bids[h].vAdPos&&(l=this.bids[u].Bids[h].vAdPos))}return new g.BidResponse("Prebid",this.getName(),n,t,a,o,i,s,"",l,r,d,c)},t.prototype.getAllResponses=function(e){var t="",i="",n={},r=[];if("undefined"!=typeof this.zdpbjs.libLoaded)for(var o in this.bids)if(o===e){var a=this.zdpbjs.getBidResponsesForAdUnitCode(e);if(this.isDebugOn&&console.log){console.log(f.getTimestamp()+" Dumping all bid objects to console:");var s=this.zdpbjs.getBidResponses(e);console.log(s),console.log(f.getTimestamp()+" Prebid Response with : "),console.log(a)}for(var l in a.bids)a.bids.hasOwnProperty(l)&&a.bids[l].adserverTargeting.hb_cpm>0&&(n[a.bids[l].adserverTargeting.hb_bidder]={price:a.bids[l].adserverTargeting.hb_cpm,bidderName:a.bids[l].adserverTargeting.hb_bidder,code:a.bids[l].adserverTargeting.hb_adid,tt:a.bids[l].adserverTargeting.hb_tt,mediaType:a.bids[l].adserverTargeting.hb_mediaType?a.bids[l].adserverTargeting.hb_mediaType:m.display,vastXml:a.bids[l].adserverTargeting.hb_vastXml?a.bids[l].adserverTargeting.hb_vastXml:"",vastUrl:a.bids[l].adserverTargeting.hb_vastUrl?a.bids[l].adserverTargeting.hb_vastUrl:"",width:this.bids[o].Sizes[0].toString(),height:this.bids[o].Sizes[1].toString()});for(var d in this.bids[o].Bids)n[this.bids[o].Bids[d].bidder]&&n[this.bids[o].Bids[d].bidder].price>=this.bids[o].Bids[d].floorprice&&(t=this.bids[o].Bids[d].partnerName,this.bids[o].Bids[d].vAdPos&&(i=this.bids[o].Bids[d].vAdPos),r.push(new g.BidResponse("Prebid",this.getName(),n[this.bids[o].Bids[d].bidder].code,n[this.bids[o].Bids[d].bidder].price,n[this.bids[o].Bids[d].bidder].vastXml,n[this.bids[o].Bids[d].bidder].vastUrl,t,n[this.bids[o].Bids[d].bidder].mediaType,"",i,n[this.bids[o].Bids[d].bidder].tt,n[this.bids[o].Bids[d].bidder].width,n[this.bids[o].Bids[d].bidder].height)))}return r},t.prototype.renderAd=function(e,t){this.isDebugOn&&console.log(f.getTimestamp()+" Rendering prebid"),this.zdpbjs.renderAd(e,t.AdCode)},t}(p),w=function(){function e(e,t,i,n){this.slotId=e,this.sizes=[t,i],this.bids=[],this.mediaType=n}return e.prototype.addBids=function(e){this.bids.push(e)},Object.defineProperty(e.prototype,"SlotId",{get:function(){return this.slotId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Sizes",{get:function(){return this.sizes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Bids",{get:function(){return this.bids},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MediaType",{get:function(){return this.mediaType},enumerable:!0,configurable:!0}),e}();t.exports=P}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\bidders\\Prebid.ts","/src\\bidders")},{"../Util":7,"../config/ConfigHolder":15,"../zfbid":"ZFBid","./Bidder":9,"./BidderName":10,"./MediaType":11,_process:6,buffer:3}],14:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c){"use strict";var u=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},p=e("./Bidder"),h=e("./BidderName"),f=e("../Util"),g=e("../zfbid"),m=e("./MediaType"),y=function(e){function t(t,i,n,r){var o=e.call(this,t,i)||this;return o.propertiesManager=n,o.bidAnalytics=r,o.rubiconVideoLoaded=!1,o.cmd=[],o.clientTimedOut=!1,o.rubiconPrerollName="rubiconvideoPreroll",o.rubiconPmpName="rubiconvideoPmp",o.bidResponses={},o.allbidResponses={},o.callback=function(){o.endBidTime=(new Date).getTime(),o.parseResponse(),o.callbackOnComplete(o)},o.init=function(){for(var e in o.cmd)if(o.cmd.hasOwnProperty(e)){var t=o.cmd[e];t()}},window,o.bids={},o}return u(t,e),t.prototype.getName=function(){return h.RubiconVideo},t.prototype.addBid=function(e,t,i,n,r,o,a,s,l,d,c,u){var p=this.bids[t];p||(this.bids[t]=[]);var h=new b(e,t,i,n,r,o,a,s,l,d,c,u);this.bids[t].push(h)},t.prototype.registerBids=function(){var e=this,t=window;t.rubicontag_11406?this.registerRubicon():this.cmd.push(function(){e.registerRubicon()})},t.prototype.registerRubicon=function(){var e=window,t=e.rubicontag_11406;for(var i in this.bids)if(this.bids.hasOwnProperty(i)){var n=this.bids[i],r=function(e){if(n.hasOwnProperty(e)){var r={id:o.getId(i,e),name:"video_"+o.getId(i,e),siteId:n[e].SiteId,zoneId:n[e].ZoneId,sizes:[n[e].SizeId],playerWidth:n[e].Width,playerHeight:n[e].Height,type:"video"};n[e].AeParams&&(r.aeParams=n[e].AeParams),t.cmd.push(function(){t.defineSlot(r)})}},o=this;for(var a in n)r(a)}t.setSyncParams({syncEnabled:!0,syncDelay:5e3}),t.run(this.callback);for(var i in this.bids)if(this.bids.hasOwnProperty(i)){var n=this.bids[i];for(var a in n)n.hasOwnProperty(a)&&this.bidAnalytics.setBidRequest("RB Fastlane",n[a].PartnerName,n[a].SlotId)}},t.prototype.timeOutBidder=function(){this.clientTimedOut=!0},t.prototype.invokeBeforeRegister=function(){var e=this;!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,e.startBidTime=(new Date).getTime(),t.onload=function(){e.rubiconVideoLoaded=!0,e.init()},t.src=("https:"===document.location.protocol?"https:":"http:")+"//ads.rubiconproject.com/header/11406.js?ns=11406";var i=document.getElementsByTagName("script")[0];i.parentNode?i.parentNode.appendChild(t):document.body.appendChild(t)}()},t.prototype.invokeAfterRegister=function(){},t.prototype.getId=function(e,t){return e+"_"+t},t.prototype.parseResponse=function(){var e=window,t=e.rubicontag_11406;for(var i in this.bids)try{if(this.bids.hasOwnProperty(i)){var n=0,r=0,o="",a="",s="",l="",d="",c=this.bids[i],u="",p="";for(var h in c)if(c.hasOwnProperty(h)){var y=t.getSlot(this.getId(i,h));if(y){var b=y.getRawResponses(),v=b[0];v&&""!==v.cpm&&""!==v.creative_depot_url?(this.isDebugOn&&(console.log(f.getTimestamp()+" Rubicon Video Response with : "),console.log(v)),v.cpm>n&&(s=c[h].PartnerName,n=v.cpm,o=v.creative_depot_url,a=c[h].VAdPos,l=c[h].BidName,d=c[h].SlotId,u=c[h].Width.toString(),p=c[h].Height.toString(),r=c[h].BidName===this.rubiconPrerollName?this.propertiesManager.getRubiconVideoPrerollShare():c[h].BidName===this.rubiconPmpName?this.propertiesManager.getRubiconVideoPmpShare():this.propertiesManager.getRubiconVideoShare()),this.clientTimedOut?this.bidAnalytics.setBidTimeout("RB Fastlane",c[h].PartnerName,v.cpm,c[h].SlotId,this.endBidTime-this.startBidTime):this.bidAnalytics.setBidSuccess("RB Fastlane",c[h].PartnerName,v.cpm,c[h].SlotId,this.endBidTime-this.startBidTime)):this.clientTimedOut?this.bidAnalytics.setBidTimeout("RB Fastlane",c[h].PartnerName,0,c[h].SlotId,this.endBidTime-this.startBidTime):this.bidAnalytics.setBidSuccess("RB Fastlane",c[h].PartnerName,0,c[h].SlotId,this.endBidTime-this.startBidTime)}else this.isDebugOn&&console.log("Failed to get a bid response for slot:"+i),this.clientTimedOut?this.bidAnalytics.setBidTimeout("RB Fastlane",c[h].PartnerName,0,c[h].SlotId,this.endBidTime-this.startBidTime):this.bidAnalytics.setBidSuccess("RB Fastlane",c[h].PartnerName,0,c[h].SlotId,this.endBidTime-this.startBidTime)}if(n>0&&r>0){var P=n*r/100;n=n>P?n-P:n}this.bidResponses[i]=new g.BidResponse("RB Fastlane",this.getName(),d,n,"",o,s,m.video,"",a,this.endBidTime-this.startBidTime,u,p)}}catch(w){console.log("Exception in getResponse code of rubiconvideo"+w)}},t.prototype.getResponse=function(e){return this.bidResponses[e]?this.bidResponses[e]:new g.BidResponse("RB Fastlane",this.getName(),"",0,"","","",m.video,"","",this.endBidTime-this.startBidTime,"","")},t.prototype.getAllResponses=function(e){var t=[];if(this.allbidResponses[e])for(var i in this.allbidResponses[e])this.allbidResponses[e].hasOwnProperty(i)&&t.push(this.allbidResponses[e][i]);else t.push(new g.BidResponse("RB Fastlane",this.getName(),"",0,"","","",m.video,"","",this.endBidTime-this.startBidTime,"",""));return t},t.prototype.renderAd=function(e,t){this.isDebugOn&&console.log("Failed. RenderAd called on RubiconVideo. The player should render")},t}(p),b=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u){this.bidName=e,this.slotId=t,this.width=i,this.height=n,this.partnerName=r,this.accountId=o,this.zoneId=a,this.siteId=s,this.sizeId=l,this.aeParams=d,this.vAdPos=c,this.floorprice=u}return Object.defineProperty(e.prototype,"BidName",{get:function(){return this.bidName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SlotId",{get:function(){return this.slotId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Width",{get:function(){return this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PartnerName",{get:function(){return this.partnerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ZoneId",{get:function(){return this.zoneId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SiteId",{get:function(){return this.siteId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SizeId",{get:function(){return this.sizeId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VAdPos",{get:function(){return this.vAdPos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AeParams",{get:function(){return this.aeParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FloorPrice",{get:function(){return Number(this.floorprice)},enumerable:!0,configurable:!0}),e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\bidders\\RubiconVideo.ts","/src\\bidders")},{"../Util":7,"../zfbid":"ZFBid","./Bidder":9,"./BidderName":10,"./MediaType":11,_process:6,buffer:3}],15:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c){"use strict";var u=e("Config"),p=function(){function e(){}return e.getPrebidUrlSecure=function(){return u.getProperty("PREBID_ZD_GCK_PBJS_SECURE")},e.getPrebidUrlNonSecure=function(){return u.getProperty("PREBID_ZD_GCK_PBJS_NONSECURE")},e.getPrebidUrlSecure1=function(){return u.getProperty("PREBID_ZD_GCK_PBJS1_SECURE")},e.getPrebidUrlNonSecure1=function(){return u.getProperty("PREBID_ZD_GCK_PBJS1_NONSECURE")},e.getPrebidUrlSecure2=function(){return u.getProperty("PREBID_ZD_GCK_PBJS2_SECURE")},e.getPrebidUrlNonSecure2=function(){return u.getProperty("PREBID_ZD_GCK_PBJS2_NONSECURE")},e.getPrebidUrlSecure3=function(){return u.getProperty("PREBID_ZD_GCK_PBJS3_SECURE")},e.getPrebidUrlNonSecure3=function(){return u.getProperty("PREBID_ZD_GCK_PBJS3_NONSECURE")},e}();t.exports=p;
}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\config\\ConfigHolder.ts","/src\\config")},{Config:1,_process:6,buffer:3}],ZFBid:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c){"use strict";var u=e("./bidders/OpenX"),p=e("./bidders/Prebid"),h=e("./bidders/RubiconVideo"),f=e("./Util"),g=e("./bidders/BidderName"),m=e("./analytics/BidAnalytics"),y=function(){function e(e,t,i,n,r,o){var a=this;this.callbackFunc=i,this.enableAnalytics=n,this.pgUrl=r,this.hBEventsLogger=o,this.responses={},this.allresponses={},this.bidRequestComplete=function(e){a.bidders.headerBidComplete(e,a.isDebug),a.bidders.areBiddersReady()&&a.initAdserver()},this.initAdserver=function(){if(!a.isAdserverSet){a.isAdserverSet=!0;var e=a.bidders.getBidders();clearTimeout(a.timer),a.bidAnalytics.timeoutNow();try{for(var t=0,i=a.slotIds;t<i.length;t++){var n=i[t],r=0,o=void 0;for(var s in e)if(e.hasOwnProperty(s)){var l=e[s];if(l.isRequestComplete){var d=l.getResponse(n);r<d.Price&&(r=d.Price,o=d)}else l.timeOutBidder()}o&&r>0&&(a.responses[n]=o,a.hBEventsLogger&&a.bidAnalytics.setBidWon(o.BidderPlatform,o.BidderName,o.Price,n,(new Date).getTime()-a.hBEventsLogger.getTagStartTime())),a.isDebug&&(console.log("Response for "+n+" is"),console.log(o))}}catch(c){console.log("=====Header Bidder initAdserver failed =====",c)}a.callbackFunc({responses:a.responses,allresponses:a.allresponses})}},this.isDebug=f.isDebugOn(),this.bidders=new b,this.isAdserverSet=!1,this.timeout=e?e:400,this.slotIds=[],this.propertiesManager=new P(t,this.isDebug),this.bidAnalytics=new m(this.enableAnalytics,o)}return e.prototype.addBids=function(e,t,i,n,r){for(var o=0,a=this.slotIds;o<a.length;o++){var s=a[o];if(s===e)return}this.slotIds.push(e);for(var l=0;l<n.length;l++){var d=n[l],c=void 0;switch("undefined"==typeof d.Floorprice&&(d.Floorprice=0),d.name){case"openx":var u=this.getOpenXBid();u.addBid(e,d.cf,t,i,d.placement,d.partnerName,d.Floorprice);break;case"openxvideo":c=this.getPrebid(e),c.addOpenxBidder(e,"openx",d.unit,d.delDomain,d.partnerName,t,i,r,d.Floorprice);break;case"rubiconvideo":case"rubiconvideoPreroll":case"rubiconvideoPmp":var p=this.getRubiconVideo();p.addBid(d.name,e,t,i,d.partnerName,d.accountId,d.zoneId,d.siteId,d.sizeId,d.aeParams,d.vAdPos,d.Floorprice);break;case"aol":c=this.getPrebid(e),c.addAolBidder(e,d.name,d.network,d.placement,d.sizeId,d.alias,d.partnerName,t,i,r,d.Floorprice);break;case"brealtime":c=this.getPrebid(e),c.addBrealTimeBidder(e,d.name,d.placementId,d.partnerName,t,i,r,d.Floorprice);break;case"emxdigital":c=this.getPrebid(e),c.addEmxDigitalBidder(e,d.name,d.placementId,d.partnerName,t,i,r,d.Floorprice);break;case"emx_digital":c=this.getPrebid(e),c.addEmx_DigitalBidder(e,d.name,d.tagid,d.partnerName,t,i,r,d.Floorprice);break;case"pulsepoint":c=this.getPrebid(e),c.addPulsePointBidder(e,d.name,d.cf,d.cp,d.ct,d.placement,d.partnerName,t,i,r,d.Floorprice);break;case"appnexus":c=this.getPrebid(e),c.addAppnexusBidder(e,d.name,d.placementId,d.partnerName,t,i,r,d.Floorprice);break;case"rubicon":c=this.getPrebid(e),c.addRubiconBidder(e,d.name,d.accountId,d.siteId,d.zoneId,d.partnerName,t,i,r,d.Floorprice);break;case"sovrn":c=this.getPrebid(e),c.addSovrnBidder(e,d.name,d.tagid,d.partnerName,t,i,r,d.Floorprice);break;case"criteoApac":c=this.getPrebid(e),c.addCriteoApacBidder(e,d.name,d.nid,d.cookieName,d.varName,this.propertiesManager.getCriteoApacZoneMap(),d.partnerName,t,i,r,d.Floorprice);break;case"tremor":c=this.getPrebid(e),c.addTremorBidder(e,d.name,d.adCode,this.pgUrl,d.mediaId,d.partnerName,t,i,d.vAdPos,d.subDomain,r,d.Floorprice);break;case"tremorPreroll":c=this.getPrebid(e),c.addTremorPrerollBidder(e,d.name,d.adCode,this.pgUrl,d.mediaId,d.partnerName,t,i,d.vAdPos,d.subDomain,r,d.Floorprice);break;case"innity":c=this.getPrebid(e),c.addInnityBidder(e,d.name,d.pub,d.zone,d.partnerName,t,i,r,d.Floorprice);case"criteo":c=this.getPrebid(e),c.addCriteoBidder(e,d.name,d.zoneId,d.partnerName,t,i,r,d.Floorprice);break;case"gumgum":c=this.getPrebid(e),c.addGumgumBidder(e,d.name,d.inSlot,d.partnerName,t,i,r,d.Floorprice);break;case"pubmatic":c=this.getPrebid(e),c.addPubmaticBidder(e,d.name,d.publisherId,d.adSlot,d.partnerName,t,i,r,d.Floorprice);break;case"c1x":c=this.getPrebid(e),c.addC1XBidder(e,d.name,d.pixelId,d.siteId,d.endpoint,d.floorPriceMap,d.partnerName,t,i,r,d.Floorprice);break;case"smart":case"smartadserver":c=this.getPrebid(e);var h="smartadserver";d.domain="http"+("https:"===document.location.protocol?"s://prg.smartadserver.com":"://prg.smartadserver.com"),c.addSmartAdServerBidder(e,h,d.domain,d.siteId,d.pageId,d.formatId,d.currency,d.bidfloor,d.target,d.partnerName,t,i,r,d.Floorprice);break;case"adyoulike":c=this.getPrebid(e),c.addAdyoulikeBidder(e,d.name,d.placement,d.partnerName,t,i,r,d.Floorprice);break;case"quantcast":c=this.getPrebid(e),c.addQuantcastBidder(e,d.name,d.publisherId,d.battr,d.bidFloor,d.partnerName,t,i,r,d.Floorprice);break;case"optimatic":c=this.getPrebid(e),c.addOptimaticBidder(e,d.name,d.placement,d.bidfloor,d.partnerName,t,i,r,d.Floorprice);break;case"33across":c=this.getPrebid(e),c.add33acrossBidder(e,d.name,d.siteId,d.productId,d.partnerName,t,i,r,d.Floorprice);break;case"rhythmone":c=this.getPrebid(e),c.addRhythmoneBidder(e,d.name,d.placementId,d.partnerName,t,i,r,d.Floorprice);break;case"zedo":c=this.getPrebid(e),c.addZedoBidder(e,d.name,d.channelCode,d.dimId,d.partnerName,t,i,r,d.Floorprice);break;case"adtelligent":c=this.getPrebid(e),c.addAdtelligentBidder(e,d.name,d.aid,d.partnerName,t,i,r,d.Floorprice);break;case"andbeyond":c=this.getPrebid(e),c.addAndbeyondBidder(e,d.name,d.zoneId,d.host,d.partnerName,t,i,r,d.Floorprice);break;case"yieldnexus":c=this.getPrebid(e),c.addYieldNexusBidder(e,d.name,d.spid,d.partnerName,t,i,r,d.Floorprice);break;case"conversant":c=this.getPrebid(e),c.addConversantBidder(e,d.name,d.site_id,d.partnerName,t,i,r,d.Floorprice);break;case"ix":c=this.getPrebid(e),c.addIxBidder(e,d.name,d.siteId,d.partnerName,t,i,r,d.Floorprice);break;case"telaria":c=this.getPrebid(e),c.addTelariaBidder(e,d.name,d.supplyCode,d.adCode,d.videoId,d.partnerName,t,i,r,d.Floorprice);break;default:this.isDebug&&console.log("Failed to match bidder: "+d.name)}}},e.prototype.start=function(){var e=this.bidders.getBidders();for(var t in e)e.hasOwnProperty(t)&&e[t].invokeBeforeRegister();for(var t in e)e.hasOwnProperty(t)&&e[t].registerBids(this.propertiesManager);for(var t in e)e.hasOwnProperty(t)&&e[t].invokeAfterRegister();this.timeoutBids()},e.prototype.getOpenXBid=function(){var e,t=this.bidders.getBidder(g.OpenX);return t?e=t:(e=new u(this.isDebug,this.bidRequestComplete,this.propertiesManager,this.bidAnalytics),this.bidders.registerBidder(e,this.isDebug)),e},e.prototype.getPrebid=function(e){var t,i=this.bidders.getBidder(g.Prebid);return i?t=i:(t=new p(this.isDebug,this.timeout,this.bidRequestComplete,this.bidAnalytics,e),this.bidders.registerBidder(t,this.isDebug)),t},e.prototype.getRubiconVideo=function(){var e,t=this.bidders.getBidder(g.RubiconVideo);return t?e=t:(e=new h(this.isDebug,this.bidRequestComplete,this.propertiesManager,this.bidAnalytics),this.bidders.registerBidder(e,this.isDebug)),e},e.prototype.renderAd=function(e,t){var i=this.responses[t];if(i){var n=this.bidders.getBidder(i.BidType);this.isDebug&&console.log(f.getTimestamp()+(" Entered Render Ad for "+i.BidderName)),n.renderAd(e,i)}else this.isDebug&&console.log(f.getTimestamp()+" Bid response not found ")},e.prototype.renderSelectedBidderAd=function(e,t,i){var n=this.allresponses[t];if(n){var r=this.bidders.getBidder(n[i].BidType);this.isDebug&&console.log(f.getTimestamp()+(" Entered Render Ad for "+n[i].BidderName)),r.renderAd(e,n[i])}else this.isDebug&&console.log(f.getTimestamp()+" Bid response not found ")},e.prototype.getResponse=function(e){return this.responses[e]},e.prototype.getAllResponses=function(e){var t=this.allresponses[e],i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(t[n]);return i},e.prototype.timeoutBids=function(){var e=this;this.timer=setTimeout(function(){clearTimeout(e.timer),e.isDebug&&console.log(f.getTimestamp()+" Timeout occured"),e.initAdserver()},this.timeout)},e}();i.ZHeaderBidder=y;var b=function(){function e(){var e=this;this.bidderList={},this.registerBidder=function(t,i){i&&console.log(f.getTimestamp()+" Registering Bidder with ZEDO - "+g[t.getName()]),e.bidderList[t.getName()]=t},this.headerBidComplete=function(t,i){i&&console.log(f.getTimestamp()+" Loaded Bidder - "+g[t.getName()]),e.bidderList[t.getName()].setRequestComplete(!0)}}return e.prototype.getBidder=function(e){return this.bidderList[e]},e.prototype.getBidders=function(){return this.bidderList},e.prototype.areBiddersReady=function(){for(var e in this.bidderList)if(this.bidderList.hasOwnProperty(e)){var t=this.bidderList[e];if(!t.isRequestComplete())return!1}return!0},e}();i.Bidders=b;var v=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p){this.bidderPlatform=e,this.bidType=t,this.adcode=i,this.price=n,this.vastXml=r,this.vastUrl=o,this.bidderName=a,this.mediaType=s,this.pmpDealId=l,this.videoAdPos=d,this.timeTaken=c,this.width=u,this.height=p}return Object.defineProperty(e.prototype,"BidderPlatform",{get:function(){return this.bidderPlatform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BidType",{get:function(){return this.bidType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MediaType",{get:function(){return this.mediaType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdCode",{get:function(){return this.adcode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Price",{get:function(){return this.price},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VastXml",{get:function(){return this.vastXml},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VastUrl",{get:function(){return this.vastUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BidderName",{get:function(){return this.bidderName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PmpDealId",{get:function(){return this.pmpDealId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VideoAdPos",{get:function(){return this.videoAdPos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TimeTaken",{get:function(){return this.timeTaken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Width",{get:function(){return this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.height},enumerable:!0,configurable:!0}),e}();i.BidResponse=v;var P=function(){function e(e,t){this.isDebug=t,this.aolShare=0,this.brealtimeShare=0,this.pulsePointShare=0,this.appnexusShare=0,this.rubiconShare=0,this.rubiconVideoShare=0,this.rubiconVideoPrerollShare=0,this.rubiconVideoPmpShare=0,this.openXShare=0,this.openXPmpShare=0,this.openXVideoShare=0,this.sovrnShare=0,this.criteoApacShare=0,this.criteoShare=0,this.tremorShare=0,this.tremorPrerollShare=0,this.innityShare=0,this.gumgumShare=0,this.pubmaticShare=0,this.c1xShare=0,this.smartAdServerShare=0,this.criteoApacZoneMap={},this.adyoulikeShare=0,this.quantcastShare=0,this.optimaticShare=0,this._33across=0,this.rhythmoneShare=0,this.emxdigitalShare=0,this.zedoShare=0,this.adtelligentShare=0,this.andbeyondShare=0,this.emx_digitalShare=0,this.yieldnexusShare=0,this.conversantShare=0,this.ixShare=0,this.telariaShare=0;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];try{n=f.convertToJson(n)}catch(r){this.isDebug&&console.log("Failed to convert rev share to json: "+r)}n.properties&&("aol"===n.name&&(this.aolShare=this.getNumberProperty(n.properties,"share")),"brealtime"===n.name&&(this.brealtimeShare=this.getNumberProperty(n.properties,"share")),"emxdigital"===n.name&&(this.emxdigitalShare=this.getNumberProperty(n.properties,"share")),"pulsepoint"===n.name&&(this.pulsePointShare=this.getNumberProperty(n.properties,"share")),"appnexus"===n.name&&(this.appnexusShare=this.getNumberProperty(n.properties,"share")),"rubicon"===n.name&&(this.rubiconShare=this.getNumberProperty(n.properties,"share")),"rubiconvideo"===n.name&&(this.rubiconVideoShare=this.getNumberProperty(n.properties,"share")),"rubiconvideoPreroll"===n.name&&(this.rubiconVideoPrerollShare=this.getNumberProperty(n.properties,"share")),"rubiconvideoPmp"===n.name&&(this.rubiconVideoPmpShare=this.getNumberProperty(n.properties,"share")),"openx"===n.name&&(this.openXShare=this.getNumberProperty(n.properties,"share"),this.openXPmpShare=this.getNumberProperty(n.properties,"pmpshare")),"openxvideo"===n.name&&(this.openXVideoShare=this.getNumberProperty(n.properties,"share")),"sovrn"===n.name&&(this.sovrnShare=this.getNumberProperty(n.properties,"share")),"criteoApac"===n.name&&(this.criteoApacShare=this.getNumberProperty(n.properties,"share"),this.criteoApacZoneMap=this.getJsonProperty(n.properties,"zonemap")),"criteo"===n.name&&(this.criteoShare=this.getNumberProperty(n.properties,"share")),"tremor"===n.name&&(this.tremorShare=this.getNumberProperty(n.properties,"share")),"tremorPreroll"===n.name&&(this.tremorPrerollShare=this.getNumberProperty(n.properties,"share")),"innity"===n.name&&(this.innityShare=this.getNumberProperty(n.properties,"share")),"gumgum"===n.name&&(this.gumgumShare=this.getNumberProperty(n.properties,"share")),"pubmatic"===n.name&&(this.pubmaticShare=this.getNumberProperty(n.properties,"share")),"c1x"===n.name&&(this.c1xShare=this.getNumberProperty(n.properties,"share")),"smartadserver"!==n.name&&"smart"!==n.name||(this.smartAdServerShare=this.getNumberProperty(n.properties,"share")),"adyoulike"===n.name&&(this.adyoulikeShare=this.getNumberProperty(n.properties,"share")),"quantcast"===n.name&&(this.quantcastShare=this.getNumberProperty(n.properties,"share")),"optimatic"===n.name&&(this.optimaticShare=this.getNumberProperty(n.properties,"share")),"33across"===n.name&&(this._33across=this.getNumberProperty(n.properties,"share")),"rhythmone"===n.name&&(this.rhythmoneShare=this.getNumberProperty(n.properties,"share")),"zedo"===n.name&&(this.zedoShare=this.getNumberProperty(n.properties,"share")),"adtelligent"===n.name&&(this.adtelligentShare=this.getNumberProperty(n.properties,"share")),"andbeyond"===n.name&&(this.andbeyondShare=this.getNumberProperty(n.properties,"share")),"emx_digital"===n.name&&(this.emx_digitalShare=this.getNumberProperty(n.properties,"share")),"yieldnexus"===n.name&&(this.yieldnexusShare=this.getNumberProperty(n.properties,"share")),"conversant"===n.name&&(this.conversantShare=this.getNumberProperty(n.properties,"share")),"ix"===n.name&&(this.ixShare=this.getNumberProperty(n.properties,"share")),"telaria"===n.name&&(this.telariaShare=this.getNumberProperty(n.properties,"share")))}}return e.prototype.getNumberProperty=function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&e[i].name===t)return e[i].value;return 0},e.prototype.getJsonProperty=function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&e[i].name===t)return e[i].value;return{}},e.prototype.getAolShare=function(){return this.aolShare},e.prototype.getBrealTimeShare=function(){return this.brealtimeShare},e.prototype.getEmxDigitalShare=function(){return this.emxdigitalShare},e.prototype.getPulsePointShare=function(){return this.pulsePointShare},e.prototype.getAppnexusShare=function(){return this.appnexusShare},e.prototype.getRubiconShare=function(){return this.rubiconShare},e.prototype.getRubiconVideoShare=function(){return this.rubiconVideoShare},e.prototype.getRubiconVideoPrerollShare=function(){return this.rubiconVideoPrerollShare},e.prototype.getRubiconVideoPmpShare=function(){return this.rubiconVideoPmpShare},e.prototype.getOpenXShare=function(){return this.openXShare},e.prototype.getOpenXPmpShare=function(){return this.openXPmpShare},e.prototype.getOpenxVideoShare=function(){return this.openXVideoShare},e.prototype.getSovrnShare=function(){return this.sovrnShare},e.prototype.getCriteoApacShare=function(){return this.criteoApacShare},e.prototype.getCriteoApacZoneMap=function(){return this.criteoApacZoneMap},e.prototype.getCriteoShare=function(){return this.criteoShare},e.prototype.getTremorShare=function(){return this.tremorShare},e.prototype.getTremorPrerollShare=function(){return this.tremorPrerollShare},e.prototype.getInnityShare=function(){return this.innityShare},e.prototype.getGumgumShare=function(){return this.gumgumShare},e.prototype.getPubmaticShare=function(){return this.pubmaticShare},e.prototype.getC1XShare=function(){return this.c1xShare},e.prototype.getSmartAdServerShare=function(){return this.smartAdServerShare},e.prototype.getAdyoulikeShare=function(){return this.adyoulikeShare},e.prototype.getQuantcastShare=function(){return this.quantcastShare},e.prototype.getOptimaticShare=function(){return this.optimaticShare},e.prototype.get33acrossShare=function(){return this._33across},e.prototype.getRhythmoneShare=function(){return this.rhythmoneShare},e.prototype.getZedoShare=function(){return this.zedoShare},e.prototype.getAdtelligentShare=function(){return this.adtelligentShare},e.prototype.getAndbeyondShare=function(){return this.andbeyondShare},e.prototype.getEmx_DigitalShare=function(){return this.emx_digitalShare},e.prototype.getYieldNexusShare=function(){return this.yieldnexusShare},e.prototype.getConversantShare=function(){return this.conversantShare},e.prototype.getIxShare=function(){return this.ixShare},e.prototype.getTelariaShare=function(){return this.telariaShare},e}();i.PropertiesManager=P}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/src\\zfbid.ts","/src")},{"./Util":7,"./analytics/BidAnalytics":8,"./bidders/BidderName":10,"./bidders/OpenX":12,"./bidders/Prebid":13,"./bidders/RubiconVideo":14,_process:6,buffer:3}]},{},["ZFBid"])("ZFBid")})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate,t("timers").clearImmediate,"/node_modules/typescript-headerbidding/out/zfbid.min.js","/node_modules/typescript-headerbidding/out")},{_process:8,buffer:4,timers:9}],10:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./model/request/PayLoad"),f=e("../logging/LogManager"),g=e("../adserving/model/response/builder/AdResponseBuilder"),m=e("./model/response/TrackingDetails"),y=e("../utility/Utility"),b=e("../eventtracker/EventConstants"),v=e("./model/response/CreativeDetails"),P={GUARANTEED:"guaranteed",NONGUARANTEED:"nonGuaranteed"},w=function(){function e(e,t,i,n,r,o){this.adserverClientToIdMap=e,this.tagProperties=t,this.pageProperties=i,this.masterCapability=n,this.httpClient=r,this.config=o,this.geckoLogger=f.getLogger("AdServer")}return e.prototype.loadAds=function(){var e=this,t=this.buildPayLoadJSONString(this.adserverClientToIdMap,this.tagProperties,this.pageProperties,this.masterCapability),i=encodeURIComponent(t),n=this.constructEndPoint(i);this.geckoLogger.logDebug("Constructed the endpoint = "+n),this.httpClient.invokeRequest(n,this.geckoLogger).then(function(t){e.geckoLogger.logDebug("Successfully received response from server= "+t),e.parseAndRenderResponse(t)})["catch"](function(t){e.geckoLogger.logError("Failed to make calls to AdServer, "+t.message)})},e.prototype.buildPayLoadJSONString=function(e,t,i,n){this.geckoLogger.logDebug("Build payload JSON String");var r=[];this.geckoLogger.logDebug("Getting ad server placement");for(var o=0,a=this.adserverClientToIdMap.getValues();o<a.length;o++){var s=a[o];r.push(s.getAdServingPlacement())}this.geckoLogger.logDebug("Constructing page properties");var l=new h(this.tagProperties,this.pageProperties,r,this.masterCapability);return JSON.stringify(l)},e.prototype.parseAndRenderResponse=function(e){var t=encodeURI(e),i=JSON.parse(decodeURI(t));if(!y.isValidObject(i)||!y.isValidObject(i.ad))return void this.geckoLogger.logError("Failed to parse the response = "+e);for(var n=0;n<i.ad.length;n++){var r=y.isObject(i.ad[n])?i.ad[n]:JSON.parse(i.ad[n]),o=y.isObject(r)?r:JSON.parse(r),a=this.adserverClientToIdMap.get(o.slotId);if(void 0!==a)try{var s=this.getCreativeDetails(o,i.respVersion),l=new g(o.slotId,s);this.geckoLogger.logInfo("Calling Placement Manager for slot "+a.getId());try{a.handleAdResponse(l.build())}catch(d){this.geckoLogger.logError("Failed to build response with slotDetails = "+o),void 0!==d&&this.geckoLogger.logError(d.message)}}catch(d){this.geckoLogger.logError("Failed to build response to getCreativeDetails with slotDetails = "+o),void 0!==d&&this.geckoLogger.logError(d.message)}else this.geckoLogger.logError("Failed to find client for slotId= "+o.slotId)}},e.prototype.getTrackingData=function(e){var t=[""],i=[""],n=[""],r=[],o=[""],a={},s=[];e&&(e.eventTrackers&&(t=e.eventTrackers[b.viewabilityImpression]?[e.eventTrackers[b.viewabilityImpression]]:[]),i=e.impressionTrackers,n=e.clickTrackers,r=e.rvtTrackers,o=e.errorTrackers,a=e.eventTrackers,s=s);var l=new m(i,n,r,o,t,a,s);return l},e.prototype.getCreativeDetails=function(e,t){var i,n=[],r=P.GUARANTEED;if(y.isNullOrUndefined(t)&&"v2.0"===t&&e.creatives.constructor===Array){this.geckoLogger.logInfo("Found new adserver response "+t);for(var o=0;o<e.creatives.length;o++){var a=e.creatives[o];y.isNullOrUndefined(a.buyType)&&(r=a.buyType),a.renderer?i=a.renderer.name:(i=null,r=P.GUARANTEED);var s=new v(a.adId,a.network,a.servedPub,a.servedChan,a.creativeDetails.type,a.creativeDetails.adContent,this.getTrackingData(a.trackingData),i,r,a.height,a.width,a.partnerName),l=a.renderer&&a.renderer.behaviour?a.renderer.behaviour:{};s.withBehaviour(l),y.isNullOrUndefined(a.seeder)&&y.isNullOrUndefined(a.seeder.network)&&(s.withSeederNetwork(a.seeder.network),s.withSeederPublisher(a.seeder.servedPub),s.withSeederChannel(a.seeder.servedChan),s.withSeederDim(a.seeder.servedDim),s.withSeederWidth(a.seeder.servedWidth),s.withSeederHeight(a.seeder.servedHeight)),y.isNullOrUndefined(a.isFoc)&&s.withIsFOC(!!a.isFoc),y.isNullOrUndefined(a.isCollapse)&&s.withIsCollapse(!!a.isCollapse),y.isNullOrUndefined(a.props)&&s.withProps(a.props),y.isNullOrUndefined(a.tmy)&&s.withTmy(a.tmy),n.push(s)}}else{this.geckoLogger.logInfo("Found older adserver response, converting response to new"),e.creative.renderer?i=e.creative.renderer.name:(i=null,r=P.GUARANTEED);var d=new v(e.creative.adId,e.creative.network,e.creative.servedPub,e.creative.servedChan,e.creativeDetails.type,e.creativeDetails.adContent,this.getTrackingData(e.trackingData),i,r,e.creative.height,e.creative.width,e.creative.partnerName),l=e.creative.renderer&&e.creative.renderer.behaviour?e.creative.renderer.behaviour:{};d.withBehaviour(l),y.isNullOrUndefined(e.creative.seeder)&&y.isNullOrUndefined(e.creative.seeder.network)&&(d.withSeederNetwork(e.creative.seeder.network),d.withSeederPublisher(e.creative.seeder.servedPub),d.withSeederChannel(e.creative.seeder.servedChan),d.withSeederDim(e.creative.seeder.servedDim),d.withSeederWidth(e.creative.seeder.servedWidth),d.withSeederHeight(e.creative.seeder.servedHeight)),y.isNullOrUndefined(e.creative.isFoc)&&d.withIsFOC(!!e.creative.isFoc),y.isNullOrUndefined(e.creative.isCollapse)&&d.withIsCollapse(!!e.creative.isCollapse),y.isNullOrUndefined(e.creative.props)&&d.withProps(e.creative.props),y.isNullOrUndefined(e.creative.tmy)&&d.withTmy(e.creative.tmy),n.push(d)}return n},e.prototype.constructEndPoint=function(e){return""+this.config.AdServerURL+this.config.AdRequestPath+"?g="+e},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/AdServer.ts","/src/adserving")},{"../adserving/model/response/builder/AdResponseBuilder":22,"../eventtracker/EventConstants":42,"../logging/LogManager":58,"../utility/Utility":275,"./model/request/PayLoad":15,"./model/response/CreativeDetails":19,"./model/response/TrackingDetails":21,_process:8,buffer:4,timers:9}],11:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t){this.adServerURL=e,this.adRequestPath=t}return Object.defineProperty(e.prototype,"AdServerURL",{get:function(){return this.adServerURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdRequestPath",{get:function(){return this.adRequestPath},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/AdServerConfig.ts","/src/adserving")},{_process:8,buffer:4,timers:9}],12:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,h,f,g,m,y,b,v){this.id=e,this.network=t,this.publisher=i,this.channel=n,this.dimension=r,this.width=o,this.height=a,this.renderers=s,this.keyword=l,this.customValue=d,this.multipleCustomeValues=c,this.customTargeting=u,this.thirdPartyClickURL=p,this.thirdPartyImprURL=h,this.winHBMap=f,this.maxGuranteed=g,this.maxNonGuranteed=m,this.isLegacyParallelReq=y,this.formatWidth=b,this.formatHeight=v}return e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/request/AdserverPlacement.ts","/src/adserving/model/request")},{_process:8,buffer:4,timers:9}],13:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e){this.cookieWriting=e}return e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/request/MasterCapability.ts","/src/adserving/model/request")},{_process:8,buffer:4,timers:9}],14:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t){this.pageUrl=e,this.referrer=t}return Object.defineProperty(e.prototype,"PageUrl",{get:function(){return this.pageUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Referrer",{get:function(){return this.referrer},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/request/PageProperties.ts","/src/adserving/model/request")},{_process:8,buffer:4,timers:9}],15:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n){this.tagProp=e,this.pageProp=t,this.placements=i,this.masterCapability=n}return e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/request/PayLoad.ts","/src/adserving/model/request")},{_process:8,buffer:4,timers:9}],16:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i){this.name=e,this.capability=t,this.behaviour=i}return e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/request/Renderer.ts","/src/adserving/model/request")},{_process:8,buffer:4,timers:9}],17:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i){this.tmy=e,this.geo=t,this.charset=i}return e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/request/TagProperties.ts","/src/adserving/model/request")},{_process:8,buffer:4,timers:9}],18:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../AdserverPlacement"),f=e("../Renderer"),g=e("../TagProperties"),m=e("../PageProperties"),y=e("../../../../utility/Utility"),b=function(){function e(){}return e}();!function(e){var t=function(){function e(e,t,i,n,r,o,a){this.id=e,this.network=t,this.publisher=i,this.channel=n,this.dimension=r,this.width=o,this.height=a,this.renderer=[],this.formatHeight="[FHEIGHT]",this.formatWidth="[FWIDTH]"}return e.prototype.withKeyword=function(e){return this.keyword=e,this},e.prototype.withCustomValue=function(e){return this.customValue=e,this},e.prototype.withCustomTargeting=function(e){return this.customTargeting=e,this},e.prototype.withwinHBMap=function(e){return this.winHBMap=e,this},e.prototype.withMultipleCustomeValues=function(e){return this.multipleCustomeValues=e,this},e.prototype.withThirdPartyClickURL=function(e){return this.thirdPartyClickURL=e,this},e.prototype.withThirdPartyImprURL=function(e){return this.thirdPartyImprURL=e,this},e.prototype.withMaxGuranteed=function(e){return this.maxGuranteed=e,this},e.prototype.withMaxNonGuranteed=function(e){return this.maxNonGuranteed=e,this},e.prototype.withIsLegacyParallelReq=function(e){return this.isLegacyReq=e,this},e.prototype.addRenderer=function(e,t,i){return this.renderer.push(new f(e,t,i)),this},e.prototype.build=function(){if(!y.isNullOrUndefined(this.id))throw new Error("Invalid PlacementId: '"+this.id+"' passed.");if(!y.isNullOrUndefined(this.network))throw new Error("Invalid Network: '"+this.network+"' passed.");if(!y.isNullOrUndefined(this.publisher))throw new Error("Invalid Publisher: '"+this.publisher+"' passed.");if(!y.isNullOrUndefined(this.channel))throw new Error("Invalid Channel: '"+this.channel+"' passed.");if(!y.isNullOrUndefined(this.dimension))throw new Error("Invalid Dimension: '"+this.dimension+"' passed.");if(isNaN(Number(this.width)))throw new Error("Invalid Width: '"+this.width+"' passed.");if(isNaN(Number(this.height)))throw new Error("Invalid Height: '"+this.height+"' passed.");if(y.isInvalidOREmpty(this.renderer))throw new Error("Atleast one Renederer needs to be set.");return new h(this.id,this.network,this.publisher,this.channel,this.dimension,this.width,this.height,this.renderer,this.keyword,this.customValue,this.multipleCustomeValues,this.customTargeting,this.thirdPartyClickURL,this.thirdPartyImprURL,this.winHBMap,this.maxGuranteed,this.maxNonGuranteed,this.isLegacyReq,this.formatWidth,this.formatHeight)},e}();e.PlacementBuilder=t;var i=function(){function e(){}return e.prototype.withTmy=function(e){return this.tmy=e,this},e.prototype.withGeo=function(e){return this.geo=e,this},e.prototype.withCharset=function(e){return this.charset=e,this},e.prototype.build=function(){return new g(this.tmy,this.geo,this.charset)},e}();e.TagPropetiesBuilder=i;var n=function(){function e(){}return e.prototype.withPageUrl=function(e){return this.pageUrl=e,this},e.prototype.withRefererUrl=function(e){return this.refererUrl=e,this},e.prototype.build=function(){return new m(this.pageUrl,this.refererUrl)},e}();e.PagePropertiesBuilder=n}(b||(b={})),
t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/request/builder/AdServerRequestBuilder.ts","/src/adserving/model/request/builder")},{"../../../../utility/Utility":275,"../AdserverPlacement":12,"../PageProperties":14,"../Renderer":16,"../TagProperties":17,_process:8,buffer:4,timers:9}],19:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u){this.adId=e,this.network=t,this.servedPub=i,this.servedChan=n,this.creativeType=r,this.adContent=o,this.trackingDetails=a,this.rendererName=s,this.buyType=l,this.height=d,this.width=c,this.partnerName=u}return Object.defineProperty(e.prototype,"Adid",{get:function(){return this.adId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Network",{get:function(){return this.network},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Publisher",{get:function(){return this.servedPub},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Channel",{get:function(){return this.servedChan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SeederNetwork",{get:function(){return this.seederNetwork},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SeederChannel",{get:function(){return this.seederChannel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SeederPublisher",{get:function(){return this.seederPublisher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SeederDim",{get:function(){return this.seederDim},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SeederWidth",{get:function(){return this.seederWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SeederHeight",{get:function(){return this.seederHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsFoc",{get:function(){return this.isFoc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCollapse",{get:function(){return this.isCollapse},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CreativeType",{get:function(){return this.creativeType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdContent",{get:function(){return this.adContent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Tmy",{get:function(){return this.tmy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Props",{get:function(){return this.props},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TrackingDetails",{get:function(){return this.trackingDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Behaviours",{get:function(){return this.behaviour},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RendererName",{get:function(){return this.rendererName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BuyType",{get:function(){return this.buyType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Width",{get:function(){return this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PartnerName",{get:function(){return this.partnerName},enumerable:!0,configurable:!0}),e.prototype.withSeederNetwork=function(e){return this.seederNetwork=e,this},e.prototype.withSeederChannel=function(e){return this.seederChannel=e,this},e.prototype.withSeederPublisher=function(e){return this.seederPublisher=e,this},e.prototype.withSeederDim=function(e){return this.seederDim=e,this},e.prototype.withSeederWidth=function(e){return this.seederWidth=e,this},e.prototype.withSeederHeight=function(e){return this.seederHeight=e,this},e.prototype.withIsFOC=function(e){return this.isFoc=e,this},e.prototype.withIsCollapse=function(e){return this.isCollapse=e,this},e.prototype.withTmy=function(e){return this.tmy=e,this},e.prototype.withProps=function(e){return this.props=e,this},e.prototype.withBehaviour=function(e){return this.behaviour=e,this},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/response/CreativeDetails.ts","/src/adserving/model/response")},{_process:8,buffer:4,timers:9}],20:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t){this.id=e,this.creatives=t}return Object.defineProperty(e.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Creatives",{get:function(){return this.creatives},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/response/PlacementResponse.ts","/src/adserving/model/response")},{_process:8,buffer:4,timers:9}],21:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n,r,o,a){this.impressionTrackers=e,this.clickTrackers=t,this.rvtTrackers=i,this.errorTrackers=n,this.viewabilityTrackers=r,this.eventTrackers=o,this.milestones=a}return Object.defineProperty(e.prototype,"ImpressionTrackers",{get:function(){return this.impressionTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClickTrackers",{get:function(){return this.clickTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RvtTrackers",{get:function(){return this.rvtTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ErrorTrackers",{get:function(){return this.errorTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EventTrackers",{get:function(){return this.eventTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewabilityTrackers",{get:function(){return this.viewabilityTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MilestonesResponse",{get:function(){return this.milestones},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/response/TrackingDetails.ts","/src/adserving/model/response")},{_process:8,buffer:4,timers:9}],22:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../PlacementResponse"),f=e("../../../../utility/Utility"),g=function(){function e(e,t){this.id=e,this.creatives=t}return e.prototype.build=function(){if(!f.isNullOrUndefined(this.id))throw new Error("Invalid PlacementId: '"+this.id+"' passed.");return new h(this.id,this.creatives)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/adserving/model/response/builder/AdResponseBuilder.ts","/src/adserving/model/response/builder")},{"../../../../utility/Utility":275,"../PlacementResponse":20,_process:8,buffer:4,timers:9}],23:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("Config"),f=e("../utility/Utility"),g=function(){function e(){}return e.getAdServerUrl=function(){return e.isSecure?h.getProperty("ADSERVER_SECURE_URL"):h.getProperty("ADSERVER_URL")},e.getPlayButtonUrl=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_PLAY_BTN"):h.getProperty("INARTICLE_PLAY_BTN")},e.geMobileLbBgUrl=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_MOBILE_LB_BG"):h.getProperty("INARTICLE_MOBILE_LB_BG")},e.getAdServerHBResponsePath=function(){return e.isSecure?h.getProperty("HEADERBIDDER_SECURE_REQUEST_URL"):h.getProperty("HEADERBIDDER_REQUEST_URL")},e.getAdServerVastUrl=function(){var t="";return t=e.getAdServerUrl()+h.getProperty("VASTURL_PATH")},e.getParallelTagCallsGeneratorLimit=function(){return parseInt(h.getProperty("PARALLEL_TAG_GENERATOR_LIMIT"),10)},e.getSecureAdServerUrl=function(){return h.getProperty("ADSERVER_SECURE_URL")},e.getAdRequestPath=function(){return h.getProperty("ADREQ_PATH")},e.getVpaidAdRequestPath=function(){return h.getProperty("VPAID_ADREQ_PATH")},e.getVpaidSbrAdRequestPath=function(){return h.getProperty("VPAIDSBR_ADREQ_PATH")},e.getDomain=function(){return h.getProperty("DOMAIN")},e.getLogLevel=function(){return h.getProperty("LOG_LEVEL")},e.getLogPassPhrase=function(){return h.getProperty("LOG_PASS_PHRASE")},e.getDefaultBandwidth=function(){return h.getProperty("DEFAULT_BANDWIDTH")},e.getLogServerLevel=function(){return h.getProperty("LOG_SERVER_LEVEL")},e.getLogServerThreshold=function(){return h.getProperty("LOG_SERVER_THRESHOLD")},e.getLogServerUrl=function(){return e.isSecure?h.getProperty("LOG_SERVER_URL_SECURE"):h.getProperty("LOG_SERVER_URL_NONSECURE")},e.get10KBImagePath=function(){return e.isSecure?h.getProperty("SECURE_IMAGE_PATH_10KB"):h.getProperty("IMAGE_PATH_10KB")},e.getImagePath10KB=function(){return h.getProperty("IMAGE_PATH_10KB")},e.getSecureImagePath10KB=function(){return h.getProperty("SECURE_IMAGE_PATH_10KB")},e.getBroadBandDetectionTimeOut=function(){return h.getProperty("BROADBAND_DETECTION_TIMEOUT")},e.getViewabilityPollingInterval=function(){return h.getProperty("VIEWABILITY_POLLING_INTERVAL")},e.getViewabilityDebug=function(){return h.getProperty("VIEWABILITY_DEBUG")},e.getIdPrefix=function(){return h.getProperty("ID_PREFIX")},e.getCookieSettingPageURL=function(){return e.isSecure?h.getProperty("COOKIESETTINGS_PAGE_SECURE_URL"):h.getProperty("COOKIESETTINGS_PAGE_NONSECURE_URL")},e.getVideoLoaderInterval=function(){return h.getProperty("VIDEO_LOADER_INTERVAL")},e.getVideoPlayerURL=function(){return h.getProperty("VIDEO_PLAYER_URL")},e.getVideoPlayerSecureURL=function(){return h.getProperty("VIDEO_PLAYER_SECURE_URL")},e.getSwipeUpCloseBtn=function(){return h.getProperty("SWIPEUP_CLOSE_BTN")},e.getWNECloseBtn=function(){return e.isSecure?h.getProperty("WNE_CLOSE_BTN"):h.getProperty("WNE_SECURE_CLOSE_BTN")},e.getSwipeUpUpArrow=function(){return h.getProperty("SWIPEUP_UP_ARROW")},e.getSwipeUpDownArrow=function(){return h.getProperty("SWIPEUP_DOWN_ARROW")},e.getSwipeUpLoadLine=function(){return h.getProperty("SWIPEUP_LOADING_LINE")},e.getTagLevelTrackerPathSecure=function(){return h.getProperty("TAG_LEVEL_TRACKERPATH_SECURE")},e.getTagLevelTrackerPathNonSecure=function(){return h.getProperty("TAG_LEVEL_TRACKERPATH_NONSECURE")},e.getTagLevelTrackerPath=function(){return e.isSecure?e.getTagLevelTrackerPathSecure():e.getTagLevelTrackerPathNonSecure()},e.getAdLevelTrackerPathSecure=function(){return h.getProperty("AD_LEVEL_TRACKERPATH_SECURE")},e.getAdLevelTrackerPathNonSecure=function(){return h.getProperty("AD_LEVEL_TRACKERPATH_NONSECURE")},e.getAdLevelTrackerPath=function(){return e.isSecure?e.getAdLevelTrackerPathSecure():e.getAdLevelTrackerPathNonSecure()},e.getDebugTokenValidity=function(){return h.getProperty("DEBUG_TOKEN_VALIDITY")},e.getGracefulBacktrackNumberOfChecks=function(){return h.getProperty("GRACEFULBACKTRACK_NUMBEROFCHECKS")},e.getGracefulBacktrackStartingTime=function(){return h.getProperty("GRACEFULBACKTRACK_STARTINGTIME")},e.getEventIdJSON=function(){return h.getProperty("EVENTID_JSON")},e.getPreRequestUrl=function(){return h.getProperty("PRE_REQ_INFO_URL")},e.getPreRequestPath=function(){return h.getProperty("PRE_REQ_INFO_PATH")},e.getHeaderBidUrl=function(){return h.getProperty("HEADER_BID_URL")},e.getHeaderBidPath=function(){return h.getProperty("HEADER_BID_PATH")},e.getDimSuffix=function(){return h.getProperty("DIM_SUFFIX")},e.getPoliteSwipeUpCloseBtnWidth=function(){return h.getProperty("POLITESWIPEUP_CLOSEBTN_WIDTH")},e.getPoliteSwipeUpCloseBtnHeight=function(){return h.getProperty("POLITESWIPEUP_CLOSEBTN_HEIGHT")},e.getPoliteSwipeUpMaxWidth=function(){return h.getProperty("POLITESWIPEUP_MAXWIDTH")},e.getPoliteSwipeUpMinWidth=function(){return h.getProperty("POLITESWIPEUP_MINWIDTH")},e.getAMPPRotocol=function(){return h.getProperty("AMP_PROTOCOL")},e.getGeoCookieNonSecureUrl=function(){return h.getProperty("GEO_COOKIE_URL")},e.getGeoCookieSecureUrl=function(){return h.getProperty("GEO_COOKIE_SECURE_URL")},e.getInbannerCloseBtneUrl=function(){return e.isSecure?h.getProperty("INBANNER_SECURE_CLOSE_BUTTON_URL"):h.getProperty("INBANNER_CLOSE_BUTTON_URL")},e.getInbannerMuteBtneUrl=function(){return e.isSecure?h.getProperty("INBANNER_SECURE_MUTE_BUTTON_URL"):h.getProperty("INBANNER_MUTE_BUTTON_URL")},e.getInbannerUnmuteBtneUrl=function(){return e.isSecure?h.getProperty("INBANNER_SECURE_UNMUTE_BUTTON_URL"):h.getProperty("INBANNER_UNMUTE_BUTTON_URL")},e.getInbannerFullscreenBtneUrl=function(){return e.isSecure?h.getProperty("INBANNER_SECURE_FULLSCREEN_BUTTON_URL"):h.getProperty("INBANNER_FULLSCREEN_BUTTON_URL")},e.getInarticleCloseBtnLB=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_CLOSE_BTN_LB"):h.getProperty("INARTICLE_CLOSE_BTN_LB")},e.getInarticleFullScrnBtnLB=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_FULLSCRN_BTN_LB"):h.getProperty("INARTICLE_FULLSCRN_BTN_LB")},e.getInarticleAdLabelBtn=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_adlabel_BTN"):h.getProperty("INARTICLE_adlabel_BTN")},e.getInaticleRolloverToSoundBtnUrl=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_ROLLOVER_SOUND_BUTTON_URL"):h.getProperty("INARTICLE_ROLLOVER_SOUND_BUTTON_URL")},e.getInaticleClickToFullscreenBtnUrl=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_CLICK_TO_FULLSCREEN_BUTTON_URL"):h.getProperty("INARTICLE_CLICK_TO_FULLSCREEN_BUTTON_URL")},e.getInaticleFullScrnCloseBtnLB=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_FULLSCRN_CLOSE_BTN_LB"):h.getProperty("INARTICLE_FULLSCRN_CLOSE_BTN_LB")},e.getClickToExitFullScreenTextButtonUrl=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_CLICK_TO_EXIT_FULLSCREEN_TEXT_BUTTON_URL"):h.getProperty("INARTICLE_CLICK_TO_EXIT_FULLSCREEN_TEXT_BUTTON_URL")},e.getClickToWatchTextButtonUrl=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_CLICK_TO_WATCH_TEXT_BUTTON_URL"):h.getProperty("INARTICLE_CLICK_TO_WATCH_TEXT_BUTTON_URL")},e.getInarticleReplayBtn=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_REPLAY_BTN"):h.getProperty("INARTICLE_REPLAY_BTN")},e.getInarticleFullScrnCloseBtnLB=function(){return e.isSecure?h.getProperty("INARTICLE_SECURE_FULLSCRN_CLOSE_BTN_LB"):h.getProperty("INARTICLE_FULLSCRN_CLOSE_BTN_LB")},e.getPauseIcon=function(){return e.isSecure?h.getProperty("SECURE_PAUSE_ICON"):h.getProperty("PAUSE_ICON")},e.getBlankMP4=function(){return e.isSecure?h.getProperty("BLANKMP4URL_SECURE"):h.getProperty("BLANKMP4URL")},e.getLBMouseoverWidth=function(){return parseInt(h.getProperty("LB_MOUSEOVER_WIDTH"),10)},e.getLBMouseoverHeight=function(){return parseInt(h.getProperty("LB_MOUSEOVER_HEIGHT"),10)},e.getCurtainRaiserCloseBtnUrl=function(){return e.isSecure?h.getProperty("CURTAINRAISER_SECURE_CLOSE_BTN"):h.getProperty("CURTAINRAISER_CLOSE_BTN")},e.getInViewCloseBtnUrl=function(){return e.isSecure?h.getProperty("INVIEW_SECURE_CLOSE_BUTTON"):h.getProperty("INVIEW_CLOSE_BUTTON")},e.getInViewSliderTitleImgUrl=function(){return e.isSecure?h.getProperty("INVIEW_SECURE_SLIDER_TITLE_IMG"):h.getProperty("INVIEW_SLIDER_TITLE_IMG")},e.getInViewZincFeedbackIconUrl=function(){return e.isSecure?h.getProperty("INVIEW_SECURE_ZINC_FEEDBACK_ICON"):h.getProperty("INVIEW_ZINC_FEEDBACK_ICON")},e.getInViewSliderBackgroundImgUrl=function(){return e.isSecure?h.getProperty("INVIEW_SECURE_SLIDER_BG"):h.getProperty("INVIEW_SLIDER_BG")},e.getInViewInfoUrl=function(){return e.isSecure?"":h.getProperty("INVIEW_INFO_URL")},e.getInViewFeedbackUrl=function(){return e.isSecure?"":h.getProperty("INVIEW_FEEDBACK_URL")},e.getIsBeta=function(){return h.getProperty("IS_BETA")},e}();g.isSecure=f.getTopWindowProtocol(),t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/config/ConfigHolder.ts","/src/config")},{"../utility/Utility":275,Config:1,_process:8,buffer:4,timers:9}],24:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../utility/Utility"),f=function(){function e(){}return e.getBestDimForDisplay=function(t,i,n){if(h.isInvalidOREmpty(t)||!h.isNullOrUndefined(i)||!h.isNullOrUndefined(n))return null;t.sort(e.compareWidth),t.sort(e.compareHeightWhenWidthEqual);for(var r,o=t[t.length-1],a=0,s=t;a<s.length;a++)if(r=s[a],r.Width<=i&&r.Height<=n)return r;for(var l=0,d=t;l<d.length;l++)if(r=d[l],r.Width<=i)return r;t.reverse(),t.sort(e.compareHeight);for(var c=0,u=t;c<u.length;c++)if(r=u[c],r.Height<=n)return r;return o},e.compareHeightWhenWidthEqual=function(e,t){return e.Height>t.Height&&e.Width===t.Width?-1:e.Height<t.Height&&e.Width===t.Width?1:0},e.compareWidth=function(e,t){return e.Width>t.Width?-1:e.Width<t.Width?1:0},e.compareHeight=function(e,t){return e.Height>t.Height?-1:e.Height<t.Height?1:0},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/core/DimensionHelper.ts","/src/core")},{"../utility/Utility":275,_process:8,buffer:4,timers:9}],25:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../logging/LogManager"),g=e("../config/ConfigHolder"),m=e("../utility/Utility"),y=e("../placement/PlacementManager"),b=e("../adserving/model/request/builder/AdServerRequestBuilder"),v=e("../detector/PageProperties"),P=e("../adserving/model/request/TagProperties"),w=e("../adserving/model/request/MasterCapability"),S=e("../detector/capability/CapabilityDetector"),C=e("../adserving/AdServer"),A=e("../adserving/AdServerConfig"),I=e("../utility/HTTPClient"),T=e("../renderer/RendererMasterList"),B=e("../utility/GeckoMap"),k=e("../headerbidding/HBController"),E=e("../eventtracker/EventConstants"),L=e("../eventtracker/DebugEventTracker"),D=e("../utility/DOM"),O=e("../detector/PagePropertyProvider"),R=e("../detector/viewability/ViewabilityDetector"),N=e("../eventtracker/DebugToken"),_=e("../utility/DefferedPromise"),x=e("../detector/AutoPlayDetector"),U=e("../utility/BrowserUtils"),M=e("../detector/OsType"),H={DESKTOP:"Desktop",MOBILE:"Mobile"},V=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,h){this.superId=e,this.network=t,this.placements=i,this.tmy=n,this.geo=r,this.charset=o,this.isAMP=a,this.preReqManager=s,this.eventTrackerFactory=l,this.userDebugToken=d,this.isGeckoLoggerOn=c,this.geoDetails=u,this.adReqtype=p,this.isHBEnabled=h,this.placementManagers=[],this.placementManagerToIdMap=new B,this.isTokenValid=!1,this.touchStartPromise=new _,this.firstScrollPromise=new _,this.alreadyScrolledPromise=new _,this.divReadyCallback=new _,this.shouldStopGeckoReload=!1,this.pgPropProvider=new O.PagePropertyProvider(window,document,a),this.debugToken=new N,this.isTokenValid=this.debugToken.isTokenValid(d),this.initLogger(e,this.isTokenValid),this.geckoLogger=f.getLogger("Gecko Controller."),this.autoPlayerDetector=new x}return e.prototype.loadAds=function(){var e=this;try{this.geckoLogger.logInfo("Started Loading Ads.");var t=[],i=0,n=(this.isAMP?g.getAMPPRotocol():this.getProtocol(window)+"//",new R(this.isAMP)),r=window.scrollY||window.pageYOffset;r>0&&this.alreadyScrolledPromise.resolve();var o=void 0;if(U.getResponseDetails().deviceCategory)o=U.getResponseDetails().deviceCategory.toString();else{var a=U.getOS();o=a===M.UNKNOWN?H.DESKTOP:H.MOBILE}for(var s=function(r){if(r.PlatFormType.length>0&&r.PlatFormType.indexOf(o)<0)return l.geckoLogger.logInfo("PlatFormType and deviceCategory mismatch for placement "+r.Id+" platform ::"+r.PlatFormType+" deviceCategory "+o),"continue";var a=m.isFriendlyIframe(window)?m.getTopWindowPageUrl():decodeURIComponent(v.compareAndGetPageUrl(l.pgPropProvider)),s=m.isFriendlyIframe(window)?m.getTopWindowReferrerUrl():v.getPageRef(l.pgPropProvider);l.eventTrackerFactory.initialize(l.network,r.Channel,r.Dimension.DimId,r.Publisher,l.geo,a,s,l.isTokenValid);var d=l.eventTrackerFactory.getEventTracker(m.getCurrentTime(),l.network,r.Channel),c=g.getIsBeta(),u="|||||"+(!!c&&c),p=new L(d,l.network,r.Channel),h=new _;if(h.getPromise().then(function(){p.sendBeacon("exit","")}),m.createBrowserExitPromise(window).then(function(){h.resolve()})["catch"](function(t){e.geckoLogger.logError("Failed to initialize browser exit tracking: "+t)}),l.isBlockedByGeo(r.ExcludedGeo,l.geoDetails))return l.geckoLogger.logInfo(r.Id+" placement blocked by geo."),i++,"continue";d.emit(E.TAG_CALL,void 0,void 0,!1,u);var f=void 0;f=l.isAMP?T.getAMPList(r,d,n):T.get(r,d,n,l.touchStartPromise,l.firstScrollPromise,l.alreadyScrolledPromise,l.autoPlayerDetector,-1);var b=function(t){e.shouldStopGeckoReload=t},P=new y(r,f,l.preReqManager.getPlacementHBDetails(r.Channel),l.eventTrackerFactory,n,l.divReadyCallback,b),w=l.eventTrackerFactory.createTokenEventTracker(l.network,r.Channel),S=function(){d.emit(E.TOUCH_START),e.geckoLogger.logDebug("tag call fired"),D.Util.removeWindowEvent(window,"touchstart",S),e.touchStartPromise.resolve()};D.Util.addWindowEvent(window,"touchstart",S);var C=function(){D.Util.removeWindowEvent(window,"scroll",C),d.emit(E.FIRST_SCROLL),w.fireUserDebugTokenTrackers(),e.firstScrollPromise.resolve()};D.Util.addWindowEvent(window,"scroll",C),l.placementManagerToIdMap.set(r.Id,P),t.push(P.onRendered()),P.onAdOpportunity().getPromise().then(function(){d.emit(E.MONETIZATION_OPPORTUNITY)}),P.onMissedOpportunity().getPromise().then(function(){d.emit(E.MONETIZATION_MISSED)}),P.onReloadCallback().subscribe(function(){e.reloadAds(r.Id)})},l=this,d=0,c=this.placements;d<c.length;d++){var u=c[d];s(u)}this.geckoLogger.logDebug("PlacementManager to PlacementId Map created."),0===t.length?this.geckoLogger.logError("Failed to render ads on placement."):(this.callAdserver(this.placementManagerToIdMap,i),h.Promise.all(t).then(function(){e.geckoLogger.logInfo("Done rendering all placements.")})["catch"](function(){e.geckoLogger.logError("Failed to render ads on placement.")}))}catch(p){m.isNullOrUndefined(p)&&m.isNullOrUndefined(p.message)?this.geckoLogger.logError("Failed to loadAds "+p.message):this.geckoLogger.logError("Failed to loadAds")}},e.prototype.placementReady=function(e){for(var t=0,i=this.placementManagerToIdMap.getValues();t<i.length;t++){var n=i[t];n.getId()===e&&this.divReadyCallback.resolve()}},e.prototype.reloadPlacementDivReady=function(e,t){for(var i=0,n=this.placementManagerToIdMap.getValues();i<n.length;i++){var r=n[i];r.getId()===e&&t.resolve()}},e.prototype.isBlockedByGeo=function(e,t){var i=!1;if(e&&t)for(var n=0,r=e.length;n<r;n++){var o=e[n].country,a=e[n].state,s=e[n].metro;if("undefined"!==o&&parseInt(o,10)===t.country&&"undefined"!==a&&parseInt(a,10)===t.state&&"undefined"!==s&&parseInt(s,10)===t.metro){i=!0;break}if("undefined"!==o&&parseInt(o,10)===t.country&&"undefined"!==a&&parseInt(a,10)===t.state&&"undefined"==typeof s){i=!0;break}if("undefined"!==o&&parseInt(o,10)===t.country&&"undefined"==typeof a&&"undefined"==typeof s){i=!0;break}}return i},e.prototype.callAdserver=function(e,t){var i,n=this,r=this.isAMP?g.getAMPPRotocol():this.getProtocol(window)+"//";if(t===this.placements.length)return void this.geckoLogger.logInfo("All placements blocked by geo.");var o=m.isFriendlyIframe(window)?encodeURIComponent(m.getTopWindowPageUrl()):v.compareAndGetPageUrl(this.pgPropProvider),a=m.isFriendlyIframe(window)?encodeURIComponent(m.getTopWindowReferrerUrl()):v.getPageRef(this.pgPropProvider),s=(new b.PagePropertiesBuilder).withPageUrl(o).withRefererUrl(a).build();this.geckoLogger.logDebug("PageProperties created.");var l=new P(this.tmy,this.geo,this.charset);this.geckoLogger.logDebug("TagProperties created.");var d=r+g.getImagePath10KB();"https://"===r&&(d=r+g.getSecureImagePath10KB());var c=new S.Detector(d,parseInt(g.getBroadBandDetectionTimeOut(),10));this.geckoLogger.logDebug("Capability Detector Initialized");var u=new w(c.isCookieSupport());this.geckoLogger.logDebug("Master Capability created.");var p=new C(e,l,s,u,new I.HTTPClient(this.charset),this.constructAdServerConfig(r));this.geckoLogger.logDebug("AdServer created."),this.geckoLogger.logDebug("Loading Ads.");for(var h=new B,f=0,y=e.getValues();f<y.length;f++){var A=y[f];h.set(A.getId(),this.eventTrackerFactory.getEventTracker(m.getCurrentTime(),A.getNetwork(),A.getChannel()))}if(!this.isAMP&&this.isHBEnabled){var T=new k(e,this.preReqManager.Props,this.preReqManager.Timeout,(!1),s.PageUrl,h);try{i=T.callBids(),i.then(function(){n.geckoLogger.logDebug("HeaderBid Complete."),p.loadAds()})["catch"](function(e){n.geckoLogger.logError("HeaderBid Failed. Continuing to adserver call. "+e),p.loadAds()})}catch(E){this.geckoLogger.logError("HeaderBid Failed. Continuing to adserver call 2."),p.loadAds()}}else p.loadAds()},e.prototype.reloadAds=function(e){var t=this,i=0,n=(new _,this.placementManagerToIdMap.get(e)),r=n?n.getPlacementElementpromise():void 0;if(!this.shouldStopGeckoReload&&n&&r&&n.canReload()){n.getAdCount()-n.getAdShownCount();r.resolve(),r.getPromise().then(function(r){if(n&&n.canReload()){var o=new B;o.set(e,n),n.setReloaded(),t.callAdserver(o,i)}})}},e.prototype.reloadAll=function(){this.loadAds()},e.prototype.getProtocol=function(e){return e.location&&e.location.protocol&&"about:"!==e.location.protocol?e.location.protocol:this.getProtocol(e.parent)},e.prototype.constructAdServerConfig=function(e){var t=e+g.getAdServerUrl();try{"https://"===e&&(t=e+g.getSecureAdServerUrl())}catch(i){}return this.adReqPath="SBR"===this.adReqtype?g.getVpaidSbrAdRequestPath():"VPAID"===this.adReqtype?g.getVpaidAdRequestPath():g.getAdRequestPath(),new A(t,this.adReqPath)},e.prototype.initLogger=function(t,i){var n=(window,{appName:"Gecko",superId:t,level:f.comparePassPhrase(m.getNameParameter("zlogger",this.pgPropProvider.getLocation().search))?f.getLevel("debug"):f.getLevel(g.getLogLevel()),serverLevel:f.getLevel(g.getLogServerLevel()),serverThreshold:"1",maxMessages:500,isEnabled:!!this.isGeckoLoggerOn||(f.comparePassPhrase(m.getNameParameter("zlogger",this.pgPropProvider.getLocation().search))||i||e.getLogEnabledByThreshold()),network:this.network,publisherURL:m.getTopWindowPageUrl(),inPagelogging:f.comparePassPhrase(m.getNameParameter("zlogger",this.pgPropProvider.getLocation().search))&&U.isMobile(window)});f.init(n)},e.getLogEnabledByThreshold=function(){try{return Math.random()<parseFloat(g.getLogServerThreshold())}catch(e){return!1}},e}();t.exports=V}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/core/GeckoController.ts","/src/core")},{"../adserving/AdServer":10,"../adserving/AdServerConfig":11,"../adserving/model/request/MasterCapability":13,"../adserving/model/request/TagProperties":17,"../adserving/model/request/builder/AdServerRequestBuilder":18,"../config/ConfigHolder":23,"../detector/AutoPlayDetector":27,"../detector/OsType":31,"../detector/PageProperties":32,"../detector/PagePropertyProvider":33,"../detector/capability/CapabilityDetector":35,"../detector/viewability/ViewabilityDetector":39,"../eventtracker/DebugEventTracker":40,"../eventtracker/DebugToken":41,"../eventtracker/EventConstants":42,"../headerbidding/HBController":51,"../logging/LogManager":58,"../placement/PlacementManager":64,"../renderer/RendererMasterList":72,"../utility/BrowserUtils":264,"../utility/DOM":266,"../utility/DefferedPromise":267,"../utility/GeckoMap":268,"../utility/HTTPClient":269,"../utility/Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],26:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i){this.dimId=e,this.width=t,this.height=i}return Object.defineProperty(e.prototype,"DimId",{get:function(){return this.dimId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Width",{get:function(){return this.width},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/core/TagDimension.ts","/src/core")},{_process:8,buffer:4,timers:9}],27:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../utility/DefferedPromise"),f=function(){function e(){this.autoPlayPromise=new h,this.autoPlayPromise.resolve(!0)}return e.prototype.isAutoPlayPromise=function(){return this.autoPlayPromise},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/AutoPlayDetector.ts","/src/detector")},{"../utility/DefferedPromise":267,_process:8,buffer:4,timers:9}],28:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){}return e.getScreenHeight=function(){return screen.height},e.getScreenWidth=function(){return screen.width},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/BrowserProperties.ts","/src/detector")},{_process:8,buffer:4,timers:9}],29:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.Chrome=0]="Chrome",e[e.UCBrowser=1]="UCBrowser",e[e.Firefox=2]="Firefox",e[e.IE=3]="IE",e[e.IEMobile=4]="IEMobile",e[e.Opera=5]="Opera",e[e.Safari=6]="Safari",e[e.MobileSafari=7]="MobileSafari",e[e.UNKNOWN=8]="UNKNOWN"}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/BrowserType.ts","/src/detector")},{_process:8,buffer:4,timers:9}],30:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../utility/SubscribableCallback"),f=e("../logging/LogManager"),g=e("../utility/DefferedPromise"),m=e("../utility/BrowserUtils"),y=e("./BrowserType"),b=e("../utility/DOM"),v=e("../config/ConfigHolder"),P=e("../detector/OsType"),w="vpt",S="apt",C=function(){function e(e,t,i,n,r,o,a){var s=this;this.window=e,this.document=t,this.parentElement=i,this.network=n,this.channel=r,this.adFormat=o,this.impressionPromise=a,this.touchSubscribableCallback=new h,this.playingHandler=function(){s.dummyVideo.removeEventListener("playing",s.playingHandler,!0),s.parentElement.removeChild(s.dummyVideo),
s.onPlayingPromise.resolve()},this.touchEventHandler=function(e){var t;m.getOS()!==P.IOS&&s.touchSubscribableCallback.notify(t)},this.geckoLogger=f.getLogger("MobilePlayableInteractionDetector")}return e.createVideoElement=function(e,t){var i=e.createElement("video");i.muted=!0,i.setAttribute("webkit-playsinline","true"),i.setAttribute("playsinline","true");var n=Math.floor(9001*Math.random())+1e3;i.id=(t?t:"zgvideo"+n)+"_ptdebug",i.style.display="none";var r=e.createElement("source");return r.src=v.getBlankMP4(),r.type="video/mp4",i.appendChild(r),i},e.prototype.setupVideoElement=function(){this.dummyVideo=e.createVideoElement(this.document,this.parentElement.id),this.onPlayingPromise=new g,this.dummyVideo.addEventListener("playing",this.playingHandler,!0),this.parentElement.appendChild(this.dummyVideo)},e.constructAI=function(e,t,i,n,r,o){var a=o?',"a":"'+o+'"':"",s=encodeURIComponent('{"f":"'+e+'","n":"'+t+'","c":"'+i+'","k":"'+n+'","v":"'+r+'"'+a+"}");return s},e.toggleTouchListeners=function(e,t,i){var n=m.getBrowser(),r=n===y.Chrome?"touchend":"touchstart";e?b.Util.addWindowEvent(t,r,i):b.Util.removeWindowEvent(t,r,i)},e.prototype.videoPlayableCallback=function(){var t=this;this.geckoLogger.logInfo("Start tracking video playable touches");var i=new h,n=0;return this.setupVideoElement(),e.toggleTouchListeners(!0,this.window,this.touchEventHandler),this.touchSubscribableCallback.subscribe(function(){t.dummyVideo.play(),t.onPlayingPromise.getPromise().then(function(){t.setupVideoElement(),n++;var r=e.constructAI(t.adFormat,t.network,t.channel,w,n);i.notify(r)})}),i},e.prototype.setAdId=function(t){e.adID=t},e.prototype.adPlayableCallback=function(){var t=this;this.geckoLogger.logInfo("Start tracking ad playable touches");var i=new h;return this.touchSubscribableCallback.subscribe(function(){t.onPlayingPromise.getPromise().then(function(){e.aptCount++;var n=e.constructAI(t.adFormat,t.network,t.channel,S,e.aptCount,e.adID);i.notify(n),t.impressionPromise.getPromise().then(function(){t.stopTrackingPlayableTouches()})})}),i},e.prototype.stopTrackingPlayableTouches=function(){this.geckoLogger.logInfo("Stop tracking playable touches"),e.toggleTouchListeners(!1,this.window,this.touchEventHandler),this.dummyVideo.removeEventListener("playing",this.playingHandler,!0),this.parentElement.removeChild(this.dummyVideo)},e}();C.aptCount=0,C.adID="",t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/MobilePlayableInteractionDetector.ts","/src/detector")},{"../config/ConfigHolder":23,"../detector/OsType":31,"../logging/LogManager":58,"../utility/BrowserUtils":264,"../utility/DOM":266,"../utility/DefferedPromise":267,"../utility/SubscribableCallback":274,"./BrowserType":29,_process:8,buffer:4,timers:9}],31:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.Android=0]="Android",e[e.IOS=1]="IOS",e[e.WindowsPhone=2]="WindowsPhone",e[e.UNKNOWN=3]="UNKNOWN"}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/OsType.ts","/src/detector")},{_process:8,buffer:4,timers:9}],32:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){}return e.getPageRef=function(e){var t="";try{t="undefined"==typeof e.getReferrer()?"":encodeURIComponent(e.getReferrer().split("?")[0])}catch(i){}return t},e.compareAndGetPageUrl=function(t,i){var n="";try{void 0!==i&&""!==i?(n=decodeURIComponent(i),n=n.split("?")[0]):n=e.getPageUrl(t);var r=e.getTopParentStackUrl(t);if(void 0!==r&&r.length>0){var o=e.getDomain(n),a=e.getDomain(r);o!==a&&(n=r.split("?")[0])}}catch(s){}return encodeURIComponent(n)},e.getTPU=function(t,i){var n,r;if("undefined"!=typeof i&&null!=i&&""!==i){n=e.getDomain(decodeURIComponent(i));var o=e.getTopParentStackUrl(t);return void 0!==o&&o.length>0?(r=e.getDomain(o),n===r?1:2):3}return 0},e.getPageUrl=function(t){var i="",n=e.getFriendlyIframeDepth();try{if(n>1){var r=e.getFriendlyIframeTopWin(n);i=e.inIframe(r)?"undefined"==typeof t.getReferrer()?"":t.getReferrer().split("?")[0]:"undefined"==typeof t.getLocation().href?"":t.getLocation().href.split("?")[0]}else i="undefined"==typeof t.getLocation().href?"":t.getLocation().href.split("?")[0]}catch(o){}return i},e.getDomain=function(e){var t="";try{e&&e.length>0&&(t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0])}catch(i){}return t},e.getFriendlyIframeDepth=function(){var e=0,t=window;e++;do try{t=t.parent,e++}catch(i){}while(t!==window.top&&e<20);return e},e.getFriendlyIframeTopWin=function(t){for(var i=window,n=0;e.inFriendlyIframe(i)&&n<t;)try{i=window.parent,n++}catch(r){}try{return i}catch(r){return window}},e.inIframe=function(e){return e.frameElement&&"IFRAME"===e.frameElement.tagName},e.inFriendlyIframe=function(t){return!!e.isParentAccessible(t)&&e.inIframe(t)},e.isParentAccessible=function(e){try{return!(!e.document.location||!e.parent.document.location)}catch(t){return!1}},e.getTopParentStackUrl=function(e){var t;try{var i=e.getLocation(),n=i.ancestorOrigins;if(!n)return;return t=n[n.length-1]||void 0}catch(r){}},e.getStackUrlDepth=function(e,t){var i=0;try{var n=e.getLocation(),r=n.ancestorOrigins;r&&t.length>0&&(i=r.length-1)}catch(o){}return i},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/PageProperties.ts","/src/detector")},{_process:8,buffer:4,timers:9}],33:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i){this.win=e,this.doc=t,this.isAmp=i,this.isAmp?this.provider=new h:this.provider=new f}return e.prototype.getLocation=function(){return this.provider.getLocation(this.win)},e.prototype.getReferrer=function(){return this.provider.getReferrer(this.win,this.doc)},e}();i.PagePropertyProvider=p;var h=function(){function e(){}return e.prototype.getLocation=function(e){var t=e;return t.context?t.context.location:t.location},e.prototype.getReferrer=function(e,t){var i=e;return i.context?i.context.referrer:t.referrer},e}(),f=function(){function e(){}return e.prototype.getLocation=function(e){return e.location},e.prototype.getReferrer=function(e,t){return t.referrer},e}()}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/PagePropertyProvider.ts","/src/detector")},{_process:8,buffer:4,timers:9}],34:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=function(){function e(){}return e.detectBandWidth=function(e){return new h.Promise(function(t,i){var n,r=new Image;r.addEventListener("load",function(){var e=1039,i=(new Date).getTime(),r=(i-n)/1e3,o=8*e,a=parseInt((o/r).toFixed(2),10),s=parseInt((a/1024).toFixed(2),10);t(s)}),r.addEventListener("error",function(){i(Error("Broadband detection failed"))}),n=(new Date).getTime(),r.src=e})},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/capability/BroadbandDetector.ts","/src/detector/capability")},{_process:8,buffer:4,"es6-promise":5,timers:9}],35:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("./FlashDetector"),g=e("./BroadbandDetector"),m=e("../../utility/ZCache"),y=e("./CookieSettingDetector");!function(e){var t=function(){function e(){}return e.prototype.provide=function(){var e=!!navigator.cookieEnabled;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=document.cookie.indexOf("testcookie")!==-1),e},e}();e.CookieProvider=t;var i=function(){function e(){}return e.prototype.provide=function(){var e=new f;return e.hasFlash()},e}();e.FlashProvider=i;var n=function(){function e(e){this.downloadSpeedURL=e}return e.prototype.provide=function(){return g.detectBandWidth(this.downloadSpeedURL)},e}();e.BroadBandProvider=n;var r=function(){function e(){this.promise=y.isTPCookieSettingAvailable()}return e.prototype.provide=function(){return this.promise},e}();e.TPIframeCookieProvider=r;var o=function(){function e(e,o){this.cookieDetection=new m.LazyLoadingCache(new t),this.flashDetection=new m.LazyLoadingCache(new i),this.broadbandDetection=new m.ProcrastinatingLazyLoadingCache(new n(e),o),this.cookieSettingDetection=new m.ProcrastinatingCache(new r,o)}return e.prototype.isCookieSupport=function(){return this.cookieDetection.getValue()},e.prototype.isFlash=function(){return this.flashDetection.getValue()},e.prototype.getBandwidthSpeed=function(){return this.broadbandDetection.getValue()},e.prototype.isThirdPartyCookieSettingAllowed=function(){return this.cookieSettingDetection.getValue()},e}();e.Detector=o}(h||(h={})),t.exports=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/capability/CapabilityDetector.ts","/src/detector/capability")},{"../../utility/ZCache":276,"./BroadbandDetector":34,"./CookieSettingDetector":36,"./FlashDetector":37,_process:8,buffer:4,timers:9}],36:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../config/ConfigHolder"),g=e("../../utility/BrowserUtils"),m=function(){function e(){}return e.isTPCookieSettingAvailable=function(){return new h.Promise(function(t,i){var n=void 0;document.onreadystatechange=function(){if("interactive"===document.readyState){n=g.createNonFriendlyIFrame("zdCkDetnIframe",f.getCookieSettingPageURL(),document.body);var r=document.getElementById("zdCkDetnIframe");r&&(r.style.display="none",window.addEventListener("message",function(i){e.isMessageForMe(i.data)&&(t(e.isCookieSet(i.data)),e.deleteIframe(n))},!1),n.onerror=function(){i(),e.deleteIframe(n)})}}})},e.deleteIframe=function(e){void 0!==e&&e.parentElement&&e.parentElement.removeChild(e)},e.isCookieSet=function(e){var t=e.split("~");return"true"===t[1]},e.isMessageForMe=function(e){if("string"==typeof e){var t=e.split("~");return"ZedoCookieDetector"===t[0]}return!1},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/capability/CookieSettingDetector.ts","/src/detector/capability")},{"../../config/ConfigHolder":23,"../../utility/BrowserUtils":264,_process:8,buffer:4,"es6-promise":5,timers:9}],37:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){this.zdHasFlash=!1,this.zzDtctRules=[{name:"ShockwaveFlash.ShockwaveFlash.7"},{name:"ShockwaveFlash.ShockwaveFlash.6"},{name:"ShockwaveFlash.ShockwaveFlash"}];var e=window;if(navigator.plugins&&navigator.plugins.length>0){var t="application/x-shockwave-flash",i=navigator.mimeTypes;i&&i[t]&&i[t].enabledPlugin&&i[t].enabledPlugin.description&&(this.zdHasFlash=!0)}else if(navigator.appVersion.indexOf("Mac")===-1&&e.execScript)for(var n=-1,r=0;r<this.zzDtctRules.length&&n===-1;r++)try{var o=this.zzgetXObj(this.zzDtctRules[r].name);if("undefined"!=typeof o.zzactiveXObj&&!o.zzactiveXError)return void(this.zdHasFlash=!0)}catch(a){this.zdHasFlash=!1}}return e.prototype.zzgetXObj=function(e){var t;try{t={zzactiveXObj:new ActiveXObject(e)}}catch(i){t={zzactiveXError:!0}}return t},e.prototype.hasFlash=function(){return this.zdHasFlash},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/capability/FlashDetector.ts","/src/detector/capability")},{_process:8,buffer:4,timers:9}],38:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){window}return e.prototype.onTwentyPercentViewable=function(e){},e.prototype.onFourtyPercentViewable=function(e){},e.prototype.onSixtyPercentViewable=function(e){},e.prototype.onEightyPercentViewable=function(e){},e.prototype.onHundredPercentViewable=function(e){},e.prototype.onViewableStateChange=function(e){},e.prototype.onUnmesurable=function(e){},e.prototype.onAdViewableImpression=function(e){},e.prototype.userIntraction=function(){},e.prototype.stopViewabilityMonitor=function(){},e.prototype.isViewable=function(){return!0},e.prototype.getViewability=function(){return{viewablePercentage:0,viewabilityState:"",height:0,width:0,focus:!1}},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/viewability/AMPViewability.ts","/src/detector/viewability")},{_process:8,buffer:4,timers:9}],39:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("ZViewability"),f=e("es6-promise"),g=e("./AMPViewability"),m=e("../../utility/Utility"),y=e("../../utility/DefferedPromise"),b=function(){function e(e,t,i,n){this.inViewPercent=e,this.inViewTimeMilliseconds=t,this.vMonitor=i,this.viewablityMs=n}return e.prototype.start=function(){var e=this;if(!this.interval)return new f.Promise(function(t,i){try{var n=m.getCurrentTime(),r=m.getCurrentTime(),o=0,a=0;e.interval=setInterval(function(){a=e.vMonitor.getViewability().viewablePercentage,n=a>=e.inViewPercent?n:r,r=m.getCurrentTime(),a>=e.inViewPercent&&(o=r-n,o>=e.inViewTimeMilliseconds&&(t(),e.stop()))},e.viewablityMs)}catch(s){e.interval&&clearInterval(e.interval),i(s)}})},e.prototype.stop=function(){this.interval&&(clearInterval(this.interval),this.interval=void 0)},e}(),v=function(){function e(e){this.isAmp=e,this.isAmp&&(this.viewabiltyPromise=new f.Promise(function(e,t){e(new g)}))}return e.prototype.getViewabilityMonitor=function(e){return this.isAmp?this.viewabiltyPromise:new f.Promise(function(t,i){h.getViewabilityMonitor(e,function(e){t(e)},function(e){i(e)})})},e.setViewabilityCallback=function(e,t,i){switch(e){case 20:t.onTwentyPercentViewable(i);break;case 40:t.onFourtyPercentViewable(i);break;case 60:t.onSixtyPercentViewable(i);break;case 80:t.onEightyPercentViewable(i);break;case 100:t.onHundredPercentViewable(i)}},e.prototype.getTimePercentViewabilityPromise=function(t,i,n){var r=new y;return this.getViewabilityMonitor(t).then(function(o){function a(){var e=c.start();e&&e.then(function(){o.stopViewabilityMonitor(),r.resolve()})["catch"](function(e){r.reject(e),o.stopViewabilityMonitor(),c.stop()})}var s=100,l=20,d=20,c=(o.getViewability().viewablePercentage,new b(i,n,o,t.IntervalForPullingViewablityMs));if(i<l)a();else for(var u=l;u<=s;u+=d)u+d>i?e.setViewabilityCallback(u,o,a):e.setViewabilityCallback(u,o,function(){c.stop()})})["catch"](function(e){r.reject(e)}),r.getPromise()},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/detector/viewability/ViewabilityDetector.ts","/src/detector/viewability")},{"../../utility/DefferedPromise":267,"../../utility/Utility":275,"./AMPViewability":38,ZViewability:2,_process:8,buffer:4,"es6-promise":5,timers:9}],40:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./EventConstants"),f=e("../logging/LogManager"),g=function(){function e(e,t,i){this.eventtracker=e,this.network=t,this.channel=i,this.geckoLogger=f.getLogger("Debug event tracker.")}return e.constructAi=function(e,t,i,n,r){var o=r?',"a":"'+r+'"':"";return encodeURIComponent('{"f":"CR","n":"'+e+'","c":"'+t+'","k":"'+i+'","v":"'+n+'"'+o+"}")},e.prototype.sendBeacon=function(t,i,n){var r=this;this.geckoLogger.logDebug("send Beacon"),this.eventtracker.getMarcoProcessor().setAI(e.constructAi(this.network,this.channel,t,i,n)),this.eventtracker.emit(h.CHANNEL_DEBUG).then(function(){r.eventtracker.getMarcoProcessor().setAI("")})},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/DebugEventTracker.ts","/src/eventtracker")},{"../logging/LogManager":58,"./EventConstants":42,_process:8,buffer:4,timers:9}],41:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../config/ConfigHolder"),f="SXGWLZPDOKFIVUHJYTQBNMACERxswgzldpkoifuvjhtybqmncare",g="QWASZX12",m=function(){function e(){this.tokenValidity=parseInt(h.getDebugTokenValidity(),10)}return e.prototype.decode=function(e){for(var t=decodeURIComponent(e),i="",n="",r=t.length-1;r>=0;r--)n=t.charAt(r),i+=n>="a"&&n<="z"||n>="A"&&n<="Z"?String.fromCharCode(65+f.indexOf(n)%26):n;var o=i.split("|"),a={timestamp:o[0],key:o[1]};return a},e.prototype.getTokenExpiry=function(e){return new Date(e.getTime()+24*this.tokenValidity*60*60*1e3)},e.prototype.isTokenValid=function(e){if("undefined"!==e||null!==e||""!==e){var t=this.decode(e),i=new Date,n=new Date(parseInt(t.timestamp,10)),r=this.getTokenExpiry(n);return i<=r&&i>=n&&t.key===g}return!1},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/DebugToken.ts","/src/eventtracker")},{"../config/ConfigHolder":23,_process:8,buffer:4,timers:9}],42:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.TAG_CALL="TAGCALL",e.TOUCH_START="1STTOUCH",e.FIRST_SCROLL="1STSCROLL",e.viewabilityImpression="VIMPR",e.USER_ON_PAGE="UONPAGE",e.MISSED_OPPORTUNITY="MISSOPPER",e.ADD_OPPORTUNITY="ADOPP",e.ADD_OPPORTUNITY2="ADOPP2",e.PARALLEL_REQUESTS="PREQ",e.LB_IMPRESSION="LBI",e.OPPORTUNITY_FILLED="OPPORFILL",e.OPPORTUNITY_2FILLED="OPPOR2FILL",e.NO_DEMAND="NODMD",e.USER_CLOSE_BROWSER="PGEXIT",e.CONTENT_VIDEO_PLAYED="CVIEW",e.MONETIZATION_OPPORTUNITY="MOPP",e.MONETIZATION_MISSED="MMOPP",e.CHANNEL_DEBUG="CHANDEBUG",e.BLOCKED="BLOCK",e.HB_REQ="HB_REQ",e.HB_BID="HB_BID",e.HB_NOBID="HB_NOBID",e.HB_WIN="HB_WIN",e.HB_TIMEOUT="HB_TIMEOUT"}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/EventConstants.ts","/src/eventtracker")},{_process:8,buffer:4,timers:9}],43:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../utility/Utility"),f=e("../utility/DefferedPromise"),g=e("./EventConstants"),m=e("../logging/LogManager"),y=function(){function e(e,t,i,n,r,o,a,s,l){this.baseTime=e,this.events=t,this.macroProcessor=i,this.stageName=n,this.milestone=r,this.networkEventMap=o,this.eventDefinationToEventMap=a,this.eventDeinitionIDMap=s,this.istokenValid=l,this.eventsDisabled=!1,this.lastStageTime=e,this.lastStageName=n,this.geckoLogger=m.getLogger("Event Tracker.")}return e.prototype.emit=function(e,t,i,n,r){var o=this,a=this.events[e],s=new f;try{var l=!!n&&n||!this.isEventDisabled()||e===g.CHANNEL_DEBUG;if("undefined"!=typeof a&&l){if(e!==g.CHANNEL_DEBUG||e===g.CHANNEL_DEBUG&&this.istokenValid){var d=h.getCurrentTime(),c=d-this.baseTime;this.milestone.addMilestone(e,d);var u=this.milestone.getMilestone(e,d);if(this.macroProcessor.setMET(u),t){var p=this.networkEventMap[t.nID];p&&this.macroProcessor.setAdditionalTrackerMacros(t,p[this.eventDefinationToEventMap[e]])}r&&this.macroProcessor.setAI(r);var m=this.macroProcessor.replaceMacros(a,c,this.stageValue,i,this.eventDeinitionIDMap[e]);h.fireImagePixels(m).then(function(){r&&o.macroProcessor.setAI(""),s.resolve()})["catch"](function(){s.reject()})}}else s.reject()}catch(y){s.reject()}return s.getPromise()},e.prototype.getMarcoProcessor=function(){return this.macroProcessor},e.prototype.setStage=function(e){this.stageValue=h.getCurrentTime()-this.lastStageTime,this.lastStageTime=h.getCurrentTime(),this.lastStageName=e},e.prototype.setTracker=function(e,t){this.events[e]=t},e.prototype.setEventsDisabled=function(e){this.eventsDisabled=e},e.prototype.isEventDisabled=function(){return this.eventsDisabled},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/EventTracker.ts","/src/eventtracker")},{"../logging/LogManager":58,"../utility/DefferedPromise":267,"../utility/Utility":275,"./EventConstants":42,_process:8,buffer:4,timers:9}],44:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./EventTracker"),f=e("./MacroProcessor"),g=e("../logging/LogManager"),m=e("./EventConstants"),y=e("../utility/Utility"),b=e("./TokenEventTracker"),v=e("./Milestone"),P=e("./GeoDetails"),w=e("./TrackerTemplates"),S=e("./MacroProcessor"),C=function(){function e(e,t,i,n,r){this.eventDefinitionMap=e,this.eventMap=t,this.userDebugToken=i,this.milestone=n,this.parsedGeoDetails=r,this.eventTrackers={}}return e.prototype.initialize=function(e,t,i,n,r,o,a,s){if(y.isEmptyString(r))this.parsedGeoDetails&&(this.geoDetails=new P(this.parsedGeoDetails.geo,this.parsedGeoDetails.country,this.parsedGeoDetails.state,this.parsedGeoDetails.metro));else{var l=this.getGeoCodes(r);this.geoDetails=new P(l.geoValue,l.country,l.state,l.metro)}this.istokenValid=s,this.geckoLogger=g.getLogger("EventTrackerFactory"),this.trackerTemplate=new w.TrackerTemplate(e,t,i,n,o,a),this.parsedEventMap=this.parseAndConstructEventsMap(e)},e.prototype.getEventTracker=function(e,t,i){return"undefined"==typeof this.eventTrackers[t]&&(this.eventTrackers[t]={}),"undefined"==typeof this.eventTrackers[t][i]&&(this.eventTrackers[t][i]=this.createEventTracker(e)),this.eventTrackers[t][i]},e.prototype.createEventTracker=function(e){return new h(e,this.parsedEventMap,new f.MacroProcessor(this.geoDetails),"TAG_CALL",new v.Milestone(this.milestone),this.eventMap,S.ConstantsMap.getEventDefinitionToEventMap(),this.eventDefinitionMap,this.istokenValid)},e.prototype.createTokenEventTracker=function(e,t){return new b(this.eventTrackers[e][t],this.parsedEventMap,this.userDebugToken)},e.prototype.parseAndConstructEventsMap=function(e){var t=this.eventDefinitionMap,i=S.ConstantsMap.getEventDefinitionToEventMap(),n={};for(var r in t)if(t.hasOwnProperty(r)&&r&&t[r]&&r!==m.CONTENT_VIDEO_PLAYED){var o=this.eventMap[e],a=null;o&&(a=o[i[r]]);var s=this.trackerTemplate.getTracker(r).getUrl(a,r);s&&(n[r]||(n[r]=[]),n[r].push(s))}try{var s=this.trackerTemplate.getContentVideoPlayedUrl(this.eventMap[826][m.CONTENT_VIDEO_PLAYED]);s&&(n[m.CONTENT_VIDEO_PLAYED]||(n[m.CONTENT_VIDEO_PLAYED]=[]),n[m.CONTENT_VIDEO_PLAYED].push(s))}catch(l){this.geckoLogger.logDebug("Exception in generating content view tracker")}return n},e.prototype.getGeoCodes=function(e){var t=0,i=0,n=0,r=0,o=e.match(/\d+/g);return"undefined"!=typeof e&&""!==e&&null!==o&&(t=parseInt(o[0],10),i=255&t,n=t>>8&255,r=t>>16&4095),{geoValue:t,country:parseInt(i,10),state:parseInt(n,10),metro:parseInt(r,10)}},e}();t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/EventTrackerFactory.ts","/src/eventtracker")},{"../logging/LogManager":58,"../utility/Utility":275,"./EventConstants":42,"./EventTracker":43,"./GeoDetails":45,"./MacroProcessor":46,"./Milestone":47,"./TokenEventTracker":49,"./TrackerTemplates":50,_process:8,buffer:4,timers:9}],45:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n){this.geo=e,this.country=t,this.state=i,this.metro=n}return Object.defineProperty(e.prototype,"Geo",{get:function(){return this.geo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Country",{get:function(){return this.country},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Metro",{get:function(){return this.metro},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/GeoDetails.ts","/src/eventtracker")},{_process:8,buffer:4,timers:9}],46:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../utility/Utility"),f=e("./EventConstants"),g="ERRORCODE",m="ET",y="ZEventTrac",b="ST",v="CACHEBUSTING",P="MET",w="GEO",S="COUNTRY",C="STATE",A="METRO",I="ADNID",T="ADCID",B="ADPUBID",k="ADDIMID",E="ADID",L="EVENTID",D="AI",O="EID",R=function(){function e(e){this.geoDetails=e,this.macroVariable={},e&&(this.macroVariable[w]=e.Geo,this.macroVariable[S]=e.Country,this.macroVariable[C]=e.State,this.macroVariable[A]=e.Metro),"undefined"==typeof e&&(this.macroVariable[S]=0,this.macroVariable[C]=0,this.macroVariable[A]=0)}return e.prototype.setZDebugEvent=function(e){this.macroVariable[y]=e},e.prototype.setErrorCode=function(e){this.macroVariable[g]=e},e.prototype.setAI=function(e){this.macroVariable[D]=e},e.prototype.setCacheBusting=function(){this.macroVariable[v]=Math.round(1e10*Math.random())},e.prototype.replaceMacros=function(e,t,i,n,r){var o=[],a=!0;t&&(this.macroVariable[m]=t),i&&(this.macroVariable[b]=i),r&&(this.macroVariable[O]=r),h.isNullOrUndefined(n)&&(a=!!n&&n);for(var s=0,l=e.length;s<l;s++)this.setCacheBusting(),"undefined"!=typeof e[s]&&o.push(this.macroReplacer(e[s],a));return o},e.prototype.macroReplacer=function(e,t){var i=e;for(var n in this.macroVariable)if(this.macroVariable.hasOwnProperty(n)&&n){var r=this.macroVariable[n],o="["+n+"]",a="%%"+n+"%%";i=i.replace(o,r),i=i.replace(a,r)}if(t){var s=i.indexOf("?")===-1?"?":"&";i+=s+""+Math.round(1e10*Math.random())}return i},e.prototype.setMET=function(e){this.macroVariable[P]=e},e.prototype.setAdditionalTrackerMacros=function(e,t){this.macroVariable[I]=e.nID,this.macroVariable[T]=e.chID,this.macroVariable[B]=e.pubID,this.macroVariable[k]=256*e.dimID,this.macroVariable[E]=e.adId,this.macroVariable[L]=t},e}();i.MacroProcessor=R;var N=function(){function e(){}return e.getEventDefinitionToEventMap=function(){var e={};e[f.TAG_CALL]="t",e[f.TOUCH_START]="ts",e[f.FIRST_SCROLL]="s",e[f.viewabilityImpression]=f.viewabilityImpression,e[f.MISSED_OPPORTUNITY]="m",e[f.ADD_OPPORTUNITY]="a",e[f.PARALLEL_REQUESTS]="pr",e[f.LB_IMPRESSION]="l",e[f.OPPORTUNITY_FILLED]="o",e[f.NO_DEMAND]="nd",e[f.USER_CLOSE_BROWSER]="uc",e[f.MONETIZATION_OPPORTUNITY]="ma",e[f.MONETIZATION_MISSED]="mm",e[f.CONTENT_VIDEO_PLAYED]="cv",e[f.CHANNEL_DEBUG]="cd",e[f.BLOCKED]="b";for(var t=5,i=5;i<=120;i+=t)i>55&&(t=10),e[f.USER_ON_PAGE+i]="u"+i;return e},e}();i.ConstantsMap=N}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/MacroProcessor.ts","/src/eventtracker")},{"../utility/Utility":275,"./EventConstants":42,_process:8,buffer:4,timers:9}],47:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";i.s="TOUCH_START",i.t="TAG_CALL";var p=function(){function e(e){this.milestonesResponse=e,this.eventNameAndIdMap={},this.eventNameAndCurrentTimeMap={},this.mObj={},this.eventNameAndIdMap=this.prepareMilestone(e)}return e.prototype.prepareMilestone=function(e){var t={};return e&&e.milestones&&e.milestones.map(function(e){t[e.name]=e.key}),t},e.prototype.getMilestone=function(e,t){return this.calculateMilestones(e,t)},e.prototype.addMilestone=function(e,t){void 0!==this.eventNameAndIdMap[e]&&(this.eventNameAndCurrentTimeMap[e]=t)},e.prototype.calculateMilestones=function(e,t){var i=[];for(var n in this.eventNameAndCurrentTimeMap)if(this.eventNameAndCurrentTimeMap.hasOwnProperty(n)&&n!==e){var r={},o=this.eventNameAndCurrentTimeMap[n],a=this.eventNameAndIdMap[n],s=t-o;r[a]=s,i.push(r)}return JSON.stringify(i)},e}();i.Milestone=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/Milestone.ts","/src/eventtracker")},{_process:8,buffer:4,timers:9}],48:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../utility/Utility"),g=e("../utility/BrowserUtils"),m="SYSTEM_RVT",y="URL",b="SCRIPT",v=function(){function e(e){this.rvt=e,this.trackerMap={},this.trackerMap[m]=[],this.trackerMap[y]=[],this.trackerMap[b]=[],e&&this.parseRVTTracker()}return e.prototype.parseRVTTracker=function(){for(var e=0;e<this.rvt.length;e++)this.rvt[e].name===m?this.trackerMap[m].push(this.rvt[e].value):this.rvt[e].name===y?this.trackerMap[y].push(this.rvt[e].value):this.rvt[e].name===b&&this.trackerMap[b].push(this.rvt[e].value)},e.prototype.fireRVTTrackersForUrl=function(){return f.fireImagePixels(this.trackerMap[y])},e.prototype.fireSystemRVTTracker=function(e,t,i,n){var r=this,o=new h.Promise(function(o,a){try{if(r.trackerMap[m].length>0){var s=g.createFriendlyIFrame(e,t,i,n);if(s.srcdoc)s.srcdoc="<html><body><script>"+r.trackerMap[m][0]+"</script></body></html>";else{var l=s.contentDocument||s.contentWindow.document;l.open("text/html","replace"),l.write("<html><body><script>"+r.trackerMap[m][0]+"</script></body></html>"),l.close()}}o()}catch(d){a(d)}});return o},e.prototype.fireSystemScriptTracker=function(e,t,i,n){var r=this,o=new h.Promise(function(o,a){try{if(r.trackerMap[b].length>0){var s=g.createFriendlyIFrame(e,t,i,n),l=s.contentDocument||s.contentWindow.document;l.write("<script>"+r.trackerMap[b][0]+"</script>"),l.close()}o()}catch(d){a(d)}});return o},e.prototype.getRVTScript=function(){return this.trackerMap[b][0]},e}();i.RVTTrackers=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/RVTTrackers.ts","/src/eventtracker")},{"../utility/BrowserUtils":264,"../utility/Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],49:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../logging/LogManager"),f=e("./DebugToken"),g=e("es6-promise"),m=e("../utility/DefferedPromise"),y=e("./EventConstants"),b=function(){
function e(e,t,i){var n=this;this.eventTracker=e,this.eventsMap=t,this.geckoLogger=h.getLogger("TokenEventTracker"),this.isTokenValid=!1,this.intervals=[],this.secondsTick=0,this.trackerDeferedPromise=new m,this.runTimer=function(){n.intervals.indexOf(n.secondsTick)>=0&&(n.eventTracker.emit(y.USER_ON_PAGE+n.secondsTick),n.geckoLogger.logDebug("User debug event "+(y.USER_ON_PAGE+n.secondsTick)+" fired at "+new Date)),n.secondsTick++,n.secondsTick>n.maxTimeout?(clearTimeout(n.timeout),n.trackerDeferedPromise.resolve()):n.timeout=setTimeout(function(){n.runTimer()},1e3)},this.debugToken=new f,this.isTokenValid=this.debugToken.isTokenValid(i),this.getIntervals(),this.maxTimeout=this.intervals[this.intervals.length-1]}return e.prototype.getIntervals=function(){for(var e in this.eventsMap)if(this.eventsMap.hasOwnProperty(e)&&e&&0===e.indexOf(y.USER_ON_PAGE)&&this.eventsMap[e]){var t=e.match(/\d+/);null!==t&&this.intervals.push(parseInt(t[0],10))}},e.prototype.fireUserDebugTokenTrackers=function(){var e=this;return new g.Promise(function(t,i){return e.isTokenValid?(e.runTimer(),e.trackerDeferedPromise.getPromise()):void i()})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/TokenEventTracker.ts","/src/eventtracker")},{"../logging/LogManager":58,"../utility/DefferedPromise":267,"./DebugToken":41,"./EventConstants":42,_process:8,buffer:4,"es6-promise":5,timers:9}],50:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("../config/ConfigHolder"),g=e("./EventConstants");i.adLevelParams="[ADNID];c=[ADCID];s=[ADPUBID];x=[ADDIMID];a=[ADID];met=[MET];6=[EVENTID]",i.geoParams=";g=[COUNTRY];m=[METRO];w=[STATE]";var m=function(){function e(e,t,i,n,r,o){this.pageUrl=r,this.trackerTemplateMap={};var a=1e6*Number(e)+Number(t),s=256*i,l=";pu="+encodeURIComponent(r),d=";ru="+encodeURIComponent(o);this.trackerTemplateMap[g.USER_ON_PAGE]=new v(e,a,n,s,l,d),this.trackerTemplateMap[g.USER_CLOSE_BROWSER]=new P(e,a,n,s,l,d),this.trackerTemplateMap[g.ADD_OPPORTUNITY]=new A(e,a,n,s,l,d),this.trackerTemplateMap[g.ADD_OPPORTUNITY2]=new A(e,a,n,s,l,d),this.trackerTemplateMap[g.OPPORTUNITY_FILLED]=new I(e,a,n,s,l,d,"opprtunityfilled"),this.trackerTemplateMap[g.OPPORTUNITY_2FILLED]=new I(e,a,n,s,l,d,"opprtunityfilled2"),this.trackerTemplateMap[g.LB_IMPRESSION]=new T(e,a,n,s,l,d),this.trackerTemplateMap["default"]=new b(e,a,n,s,l,d),this.trackerTemplateMap[g.CHANNEL_DEBUG]=new w(e,a,n,s,l,d),this.trackerTemplateMap[g.HB_REQ]=new S(e,a,n,s,l,d),this.trackerTemplateMap[g.HB_BID]=new S(e,a,n,s,l,d),this.trackerTemplateMap[g.HB_NOBID]=new S(e,a,n,s,l,d),this.trackerTemplateMap[g.HB_TIMEOUT]=new S(e,a,n,s,l,d),this.trackerTemplateMap[g.HB_WIN]=new S(e,a,n,s,l,d),this.trackerTemplateMap[g.TAG_CALL]=new C(e,a,n,s,l,d)}return e.prototype.getTracker=function(e){var t=this.trackerTemplateMap[e];return t||(t=e.indexOf(g.USER_ON_PAGE)>=0?this.trackerTemplateMap[g.USER_ON_PAGE]:this.trackerTemplateMap["default"]),t},e.prototype.getContentVideoPlayedUrl=function(e){var t=f.getTagLevelTrackerPath()+i.adLevelParams+i.geoParams,n="[ADDIMID]";return t=t.replace(n,"24833"),t+";et=[ST];aet=[ET];pu="+this.pageUrl+";eid=[EID];key=contentview;e=e;z="+Math.random()},e}();i.TrackerTemplate=m;var y=function(){function e(e,t,i,n,r,o){this.network=e,this.channelCode=t,this.publisher=i,this.xID=n,this.pageUrl=r,this.refererURL=o}return e}();i.BaseTracker=y;var b=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e,t){return f.getTagLevelTrackerPath()+this.network+";c="+this.channelCode+";s="+this.publisher+";x="+this.xID+(e?";6="+e:"")+";met=[MET];eid=[EID]"+i.geoParams+this.pageUrl+";e=e;z="+Math.random()},t}(y);i.DefaultTracker=b;var v=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e,t){var n=t.replace(g.USER_ON_PAGE,"uop");return f.getTagLevelTrackerPath()+this.network+";c="+this.channelCode+";s="+this.publisher+";x="+this.xID+(e?";6="+e:"")+";met=[MET];eid=[EID]"+i.geoParams+this.pageUrl+";key="+n+";e=e;z="+Math.random()},t}(y);i.UOPTokenTrackerUrl=v;var P=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e,t){return f.getTagLevelTrackerPath()+this.network+";c="+this.channelCode+";s="+this.publisher+";x="+this.xID+(e?";6="+e:"")+";met=[MET];eid=[EID]"+i.geoParams+this.pageUrl+";key="+g.USER_CLOSE_BROWSER+";etTime=[ST];e=e;z="+Math.random()},t}(y);i.UCBTokenTrackerUrl=P;var w=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e){return f.getTagLevelTrackerPath()+this.network+";c="+this.channelCode+";s="+this.publisher+";x="+this.xID+(e?";6="+e:"")+";met=[MET];et=[ET];eid=[EID];ai=[AI]"+i.geoParams+this.pageUrl+";e=e;z="+Math.random()},t}(y);i.ChannelDebugTrackerUrl=w;var S=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e){return f.getTagLevelTrackerPath()+this.network+";c="+this.channelCode+";s="+this.publisher+";x="+this.xID+(e?";6="+e:"")+";met=[MET];et=[ET];eid=[EID];ai=[AI]"+i.geoParams+this.pageUrl+";e=e;z="+Math.random()},t}(y);i.HbEventsTrackerUrl=S;var C=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e){return f.getTagLevelTrackerPath()+this.network+";c="+this.channelCode+";s="+this.publisher+";x="+this.xID+(e?";6="+e:"")+";met=[MET];eid=[EID];ai=[AI]"+i.geoParams+this.pageUrl+";e=e;z="+Math.random()},t}(y);i.TagCallUrl=C;var A=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e){return f.getTagLevelTrackerPath()+this.network+";c="+this.channelCode+";s="+this.publisher+";x="+this.xID+(e?";6="+e:"")+";met=[MET];et=[ET];eid=[EID]"+i.geoParams+this.pageUrl+";e=e;z="+Math.random()},t}(y);i.AdOpportunityTrackerUrl=A;var I=function(e){function t(t,i,n,r,o,a,s){var l=e.call(this,t,i,n,r,o,a)||this;return l.network=t,l.channelCode=i,l.publisher=n,l.xID=r,l.pageUrl=o,l.refererURL=a,l.key=s,l}return h(t,e),t.prototype.getUrl=function(e,t){var n=f.getTagLevelTrackerPath()+i.adLevelParams+i.geoParams;return n+";et=[ST];aet=[ET]"+i.geoParams+this.pageUrl+";eid=[EID];key="+this.key+";e=e;z="+Math.random()},t}(y);i.OpportunityFilledTrackerUrl=I;var T=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.getUrl=function(e,t){var n=f.getAdLevelTrackerPath()+e+";n="+i.adLevelParams+i.geoParams+this.pageUrl+this.refererURL+";eid=[EID];e=e;z="+Math.random();return n},t}(y);i.LBTrackerUrl=T}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/eventtracker/TrackerTemplates.ts","/src/eventtracker")},{"../config/ConfigHolder":23,"./EventConstants":42,_process:8,buffer:4,timers:9}],51:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("ZHeaderBidder"),f=e("es6-promise"),g=e("../logging/LogManager"),m=e("./HbEvents"),y=function(){function e(e,t,i,n,r,o){var a=this;this.hBPlacements=e,this.geckoLogger=g.getLogger("HBController"),this.bidsDonePromise=new f.Promise(function(e,t){a.signalBidDone=e,a.signalBidRejected=t}),this.handleBids=function(e){for(var t=!1,i=0,n=a.hBPlacements.getValues();i<n.length;i++){var r=n[i];"object"==typeof r&&Object.keys(r).length>0&&r.resetWinningBids()}if(e.responses)for(var o=0,s=a.hBPlacements.getValues();o<s.length;o++){var r=s[o],l=r.getHeaderBidDetails();if(l)for(var d in l)l[d]&&e.responses[l[d].HBId]&&(r.handleBidResponse(l[d].HBId,e.responses[l[d].HBId]),t=!0);r.findBestBidResponse(a.hdrs)}t?a.signalBidDone():a.signalBidRejected()},this.hbEvents=new m(e,o),this.hdrs=new h.ZHeaderBidder(i,t,this.handleBids,n,r,this.hbEvents)}return e.prototype.callBids=function(){if("undefined"!=typeof h.ZHeaderBidder){window;try{for(var e=!1,t=0,i=this.hBPlacements.getValues();t<i.length;t++){var n=i[t];if("object"==typeof n&&Object.keys(n).length>0){var r=n.getHeaderBidDetails();if(r)for(var o in r)r[o]&&r.hasOwnProperty(o)&&(e=!0,this.hdrs.addBids(r[o].HBId,r[o].Width,r[o].Height,r[o].Bids,r[o].MediaType))}}e?this.hdrs.start():(this.geckoLogger.logInfo("No bids found"),this.handleBids({responses:void 0,allresponses:void 0}))}catch(a){this.geckoLogger.logInfo(" Error while calling header bidding : "+a),this.handleBids({responses:void 0,allresponses:void 0})}}else this.geckoLogger.logInfo("ZHeaderBidder not found"),this.handleBids({responses:void 0,allresponses:void 0});return this.bidsDonePromise},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/headerbidding/HBController.ts","/src/headerbidding")},{"../logging/LogManager":58,"./HbEvents":54,ZHeaderBidder:"E:\\geckotoday\\gecko\\node_modules\\typescript-headerbidding\\out\\zfbid.min.js",_process:8,buffer:4,"es6-promise":5,timers:9}],52:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./HeaderBidDetails"),f=e("../prerequestinfo/model/PlacementBidInfo"),g=e("../renderer/inarticle/InArticleRenderer"),m=e("../renderer/vpaid/VPaidRenderer"),y=e("../renderer/inarticle/model/Behaviours"),b=e("./HBWinningPlacementHelper"),v=function(){function e(e,t,i,n){if(this.bidResponses=[],this.allbidResponses=[],i){var r=this.filterBids(i,this.getVideoAdPositions(e)),o=this.getMediaType(e);this.placementnetwork=n,this.headerBidDetails=[];for(var a in r)if(r.hasOwnProperty(a)&&r[a]){var s=t+"-"+r[a].Width+"-"+r[a].Height;this.headerBidDetails.push(new h(t,s,r[a].Bids,r[a].Width,r[a].Height,o))}}}return e.prototype.getHeaderBidDetails=function(){return this.headerBidDetails},e.prototype.resetWinningBids=function(){this.allbidResponses=[],this.bidResponses=[],this.winningBidResponse=void 0},e.prototype.handleBidResponse=function(e,t){this.bidResponses.push({id:e,response:t})},e.prototype.handleAllBidResponses=function(e,t){this.allbidResponses.push({id:e,response:t})},e.prototype.findBestBidResponse=function(e){var t="0";if(this.bidResponses.length>0)for(var i in this.bidResponses)this.bidResponses.hasOwnProperty(i)&&this.bidResponses[i].response.Price>0&&(this.winningBidResponse?this.bidResponses[i].response.Price>this.winningBidResponse.response.Price&&(this.winningBidResponse=this.bidResponses[i],t=this.bidResponses[i].id):(this.winningBidResponse=this.bidResponses[i],t=this.bidResponses[i].id));this.hbHelper=new b(t,e,this.allbidResponses)},e.prototype.setBestBidResponse=function(e){},e.prototype.getHBHelper=function(){return this.hbHelper},e.prototype.getCustomTargeting=function(e){var t="";if(this.winningBidResponse&&(this.winningBidResponse.response.AdCode||this.winningBidResponse.response.VastUrl||this.winningBidResponse.response.VastXml)){var i="";this.winningBidResponse.response.VideoAdPos&&(i="preroll"===this.winningBidResponse.response.VideoAdPos||"midroll"===this.winningBidResponse.response.VideoAdPos?"^pb_stream:1":"^pb_stream:0"),t=e+"^pb_bp:"+this.winningBidResponse.response.Price+"^pb_bidder:"+this.winningBidResponse.response.BidderName+i,this.winningBidResponse.response.PmpDealId&&this.winningBidResponse.response.PmpDealId.length>0&&(t+="^pmp:"+this.winningBidResponse.response.PmpDealId)}else t=e+"^pb_bidder:none";return t},e.prototype.getAllHBResponses=function(){var e=[];if(this.allbidResponses.length>0)for(var t in this.allbidResponses)if(this.allbidResponses.hasOwnProperty(t))for(var i in this.allbidResponses[t].response)this.allbidResponses[t].response.hasOwnProperty(i)&&this.allbidResponses[t].response[i].Price>0&&e.push({bidderName:i,width:this.allbidResponses[t].response[i].Width,height:this.allbidResponses[t].response[i].Height,price:this.allbidResponses[t].response[i].Price.toString()});return e},e.prototype.getVideoAdPositions=function(e){for(var t={},i=0,n=e;i<n.length;i++){var r=n[i];if(r&&(g.NAME===r.getName()||m.NAME===r.getName())){var o=r.getBehaviourForHB(),a=o[y.VIDEO_AD_POSITION];if(a)for(var s in a)a.hasOwnProperty(s)&&a[s]&&(t[a[s]]=1)}}return t},e.prototype.getMediaType=function(e){for(var t="display",i=0,n=e;i<n.length;i++){var r=n[i];!r||g.NAME!==r.getName()&&m.NAME!==r.getName()||(t="video")}return t},e.prototype.filterBids=function(e,t){var i=[],n=[];for(var r in e)if(e.hasOwnProperty(r)&&e[r].Bids){var o=e[r].Bids;n=[];for(var a in o)o.hasOwnProperty(a)&&(o[a].vAdPos?t[o[a].vAdPos]&&n.push(o[a]):n.push(o[a]));i.push(new f(e[r].Width,e[r].Height,n))}return i},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/headerbidding/HBPlacementManager.ts","/src/headerbidding")},{"../prerequestinfo/model/PlacementBidInfo":68,"../renderer/inarticle/InArticleRenderer":114,"../renderer/inarticle/model/Behaviours":120,"../renderer/vpaid/VPaidRenderer":233,"./HBWinningPlacementHelper":53,"./HeaderBidDetails":55,_process:8,buffer:4,timers:9}],53:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i){this.winningSlot=e,this.bidder=t,this.allwinningSlot=i}return e.prototype.renderAd=function(e,t){this.bidder.renderAd(e,t)},e.prototype.renderSelectedBidderAd=function(e,t,i){this.bidder.renderSelectedBidderAd(e,t,i)},e.prototype.getResponse=function(e){return this.bidder.getResponse(e)},e.prototype.getWinningSlotId=function(){return this.winningSlot},e.prototype.getWinningMultiHbSlotId=function(e){var t="0";if(this.allwinningSlot.length>0)for(var i in this.allwinningSlot)if(this.allwinningSlot.hasOwnProperty(i))for(var n in this.allwinningSlot[i].response)this.allwinningSlot[i].response.hasOwnProperty(n)&&this.allwinningSlot[i].response[n].BidderName===e&&(t=this.allwinningSlot[i].id);return t},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/headerbidding/HBWinningPlacementHelper.ts","/src/headerbidding")},{_process:8,buffer:4,timers:9}],54:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../eventtracker/EventConstants"),f="^",g=function(){function e(e,t){this.eventTrackers=t,this.startTime=(new Date).getTime()}return e.prototype.fireBidRequestEvent=function(e,t,i,n){var r=this.eventTrackers.get(this.getPlacementId(i));r&&!function(){var o=r;o.getMarcoProcessor().setAI(encodeURIComponent(e+f+t+f+i+f+f+n)),o.emit(h.HB_REQ,void 0,void 0,!0).then(function(){o.getMarcoProcessor().setAI("")})}()},e.prototype.fireBidEvent=function(e,t,i,n,r){var o=this.eventTrackers.get(this.getPlacementId(n));o&&!function(){var a=o;a.getMarcoProcessor().setAI(encodeURIComponent(e+f+t+f+n+f+i+f+r)),a.emit(h.HB_BID,void 0,void 0,!0).then(function(){a.getMarcoProcessor().setAI("")})}()},e.prototype.fireNoBidEvent=function(e,t,i,n,r){var o=this.eventTrackers.get(this.getPlacementId(n));o&&!function(){var a=o;a.getMarcoProcessor().setAI(encodeURIComponent(e+f+t+f+n+f+i+f+r)),a.emit(h.HB_NOBID,void 0,void 0,!0).then(function(){a.getMarcoProcessor().setAI("")})}()},e.prototype.fireBidTimeoutEvent=function(e,t,i,n,r){var o=this.eventTrackers.get(this.getPlacementId(n));o&&!function(){var a=o;a.getMarcoProcessor().setAI(encodeURIComponent(e+f+t+f+n+f+i+f+r)),a.emit(h.HB_TIMEOUT,void 0,void 0,!0).then(function(){a.getMarcoProcessor().setAI("")})}()},e.prototype.fireAuctionWinEvent=function(e,t,i,n,r){var o=this.eventTrackers.get(this.getPlacementId(n));o&&!function(){var a=o;a.getMarcoProcessor().setAI(encodeURIComponent(e+f+t+f+n+f+i+f+r)),a.emit(h.HB_WIN,void 0,void 0,!0).then(function(){a.getMarcoProcessor().setAI("")})}()},e.prototype.getTagStartTime=function(){return this.startTime},e.prototype.getPlacementId=function(e){var t=e.split("-");if(3===t.length)return t[0];for(var i=t[0],n=1;n<t.length-2;n++)i=i+"-"+t[n];return i},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/headerbidding/HbEvents.ts","/src/headerbidding")},{"../eventtracker/EventConstants":42,_process:8,buffer:4,timers:9}],55:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n,r,o){this.placementId=e,this.hbId=t,this.bids=i,this.width=n,this.height=r,this.mediaType=o}return Object.defineProperty(e.prototype,"PlacementId",{get:function(){return this.placementId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HBId",{get:function(){return this.hbId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Bids",{get:function(){return this.bids},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Width",{get:function(){return this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MediaType",{get:function(){return this.mediaType},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/headerbidding/HeaderBidDetails.ts","/src/headerbidding")},{_process:8,buffer:4,timers:9}],56:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n,r,o,a){this._zdLogger=e,this._adId=t,this._adType=i,this._network=n,this._channel=r,this._publisherURL=o,this.logContext=a}return e.prototype.appendOrPrepend=function(e){return"Id:"+this._adId+" AdType:"+this._adType+" Network:"+this._network+" Channel:"+this._channel+" Publisher URL:"+this._publisherURL+" :  "+this.logContext+" :  "+e},e.prototype.logDebug=function(e){this._zdLogger.logDebug(this.appendOrPrepend(e))},e.prototype.logInfo=function(e){this._zdLogger.logInfo(this.appendOrPrepend(e))},e.prototype.logError=function(e){this._zdLogger.logError(this.appendOrPrepend(e))},e.prototype.logFatal=function(e){this._zdLogger.logFatal(this.appendOrPrepend(e))},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/logging/AdLogger.ts","/src/logging")},{_process:8,buffer:4,timers:9}],57:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./AdLogger"),f=e("./RootLogger"),g=e("../utility/CSS"),m=function(){function e(e,t,i,n,r,o,a,s){this.onclickhandler=function(e){var t=e.srcElement;if(t){t.classList.toggle("active");var i=t.nextElementSibling;i&&i.style&&("block"===i.style.display?i.style.display="none":i.style.display="block")}},"undefined"!=typeof n&&"undefined"!=typeof r&&"undefined"!=typeof o&&"undefined"!=typeof a&&"undefined"!=typeof s?(this.rootLoggerInstance=new h(e,n,r,o,a,s,t),this.createStructure(n)):i&&(this.rootLoggerInstance=new f(e,i,t),this.createStructure(i)),this.applyCSS()}return e.prototype.logDebug=function(e){this.rootLoggerInstance.logDebug(e),this.attachLogsToBottomOfPage(e)},e.prototype.logInfo=function(e){this.rootLoggerInstance.logInfo(e),this.attachLogsToBottomOfPage(e)},e.prototype.logError=function(e){this.rootLoggerInstance.logError(e),this.attachLogsToBottomOfPage(e)},e.prototype.logFatal=function(e){this.rootLoggerInstance.logFatal(e),this.attachLogsToBottomOfPage(e)},e.prototype.getCurrentTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e.prototype.attachLogsToBottomOfPage=function(e){var t=document.createElement("p");t.innerHTML=this.getCurrentTime()+"   "+e,this.inPageDiv&&this.inPageDiv.appendChild(t)},e.prototype.createStructure=function(e){var t=this;if(document.getElementById("inPagediv_"+e))null!==document.getElementById("inPagediv_"+e)&&(this.inPageDiv=document.getElementById("inPagediv_"+e));else{this.inPageDiv=document.createElement("div"),this.inPageDiv.id="inPagediv_"+e,this.inPageDiv.className="panel",document.body.appendChild(this.inPageDiv);var i=document.createElement("button");i.className="zd-acc",i.innerHTML=e,i.addEventListener("click",function(e){t.onclickhandler(e)},!1),this.inPageDiv=document.getElementById("inPagediv_"+e),this.inPageDiv&&this.inPageDiv.parentElement&&this.inPageDiv.parentElement.insertBefore(i,this.inPageDiv)}},e.prototype.applyCSS=function(){var e='.zd-acc{\n               background-color: #eee;\n               color: #444;cursor:\n                pointer;padding: 18px;\n                width: 100%;\n                border: none;\n                text-align: left;\n                outline:none;\n                font-size: 15px;\n                }\n                div.panel {\n                padding: 0 18px;\n                display: none;\n                background-color: white;\n            }\n            div.panel p{\n              font-size:10px;\n              line-height:23px; \n              font-family:Arial,sans-serif;\n            }\n            .zd-acc:after{\n                content: "\\002B";\n                color: #777;\n                font-weight: bold;\n                float: right;\n                margin-left: 5px;\n            }\n            .zd-acc.active:after {\n                content: "\\2212";\n            }';document.getElementById("inPageCss")||g.Util.addCSSRule(e,"inPageCss",document,window)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/logging/InPageLogger.ts","/src/logging")},{"../utility/CSS":265,"./AdLogger":56,"./RootLogger":59,_process:8,buffer:4,timers:9}],58:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./RootLogger"),f=e("./AdLogger"),g=e("./InPageLogger"),m=e("./jsnlog/JsnLogger"),y=e("../config/ConfigHolder"),b=function(){function e(){}return e.init=function(t){e.loggerConfig=t,e.loggerOptions={level:t.level,serverlevel:t.serverLevel,serverthreshold:t.serverThreshold,maxMessages:t.maxMessages,enabled:t.isEnabled,network:t.network,publisherURL:t.publisherURL,inPagelogging:t.inPagelogging}},e.getLogger=function(t){var i=new m(e.loggerConfig.appName,e.loggerOptions);return e.loggerConfig.inPagelogging?e.rootLoggerInstance=new g(i,t,e.loggerConfig.superId):e.rootLoggerInstance=new h(i,e.loggerConfig.superId,t),e.rootLoggerInstance},e.getAdLogger=function(t,i,n,r,o,a){var s,l=e.adLoggerMap[a];try{var d=new m(e.loggerConfig.appName,e.loggerOptions);s=e.loggerConfig.inPagelogging?new g(d,a,"",t,i,n,r,o):new f(d,t,i,n,r,o,a),e.adLoggerMap[t]=s}catch(c){s=l}return s},e.isEnabled=function(){return e.loggerConfig.isEnabled},e.getLevel=function(e){return"debug"===e.toLowerCase()?m.getDebugLevel():"info"===e.toLowerCase()?m.getInfoLevel():"error"===e.toLowerCase()?m.getErrorLevel():"fatal"===e.toLowerCase()?m.getFatalLevel():m.getInfoLevel()},e.comparePassPhrase=function(e){return void 0===e&&(e=""),e===y.getLogPassPhrase()},e}();b.loggerOptions={},b.adLoggerMap={},t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/logging/LogManager.ts","/src/logging")},{"../config/ConfigHolder":23,"./AdLogger":56,"./InPageLogger":57,"./RootLogger":59,"./jsnlog/JsnLogger":61,_process:8,buffer:4,timers:9}],59:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i){this._zdLogger=e,this.superId=t,this.logContext=i}return e.prototype.appendOrPrepend=function(e){return"Id:"+this.superId+" : "+this.logContext+" :  "+e},e.prototype.logDebug=function(e){this._zdLogger.logDebug(this.appendOrPrepend(e))},e.prototype.logInfo=function(e){this._zdLogger.logInfo(this.appendOrPrepend(e))},e.prototype.logError=function(e){this._zdLogger.logError(this.appendOrPrepend(e))},e.prototype.logFatal=function(e){this._zdLogger.logFatal(this.appendOrPrepend(e))},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/logging/RootLogger.ts","/src/logging")},{_process:8,buffer:4,timers:9}],60:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./jsnlog"),g=e("../../config/ConfigHolder"),m=function(e){function t(i){var n=e.call(this,i,t.prototype.sendLogItems)||this;return n.enabled=!1,n}return h(t,e),t.prototype.setOptions=function(t){return e.prototype.setOptions.call(this,t),this.enableAppender(t.serverthreshold),this},t.prototype.enableAppender=function(e){this.enabled=Math.random()<e},t.prototype.sendLogItems=function(e){try{var t={lg:e};if(this.enabled){var i=g.getLogServerUrl()+";ai="+encodeURIComponent(JSON.stringify(t)),n=new Image;n.src=i}}catch(r){console.log("Error in sending data")}},t}(f.JL.Appender);t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/logging/jsnlog/JsnLogPixelAppender.ts","/src/logging/jsnlog")},{"../../config/ConfigHolder":23,"./jsnlog":62,_process:8,buffer:4,timers:9}],61:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./jsnlog"),f=e("./JsnLogPixelAppender"),g=function(){function e(t,i){this.options=i,this.jlLogger=h.JL(t),this.jlLogger.setOptions(i),this.setOptions(i);var n=h.JL.createConsoleAppender("consoleAppender"),r=new f("pixelAppender");"undefined"!=typeof i.serverlevel&&null!=i.serverlevel||(i.serverlevel=e.getErrorLevel()),"undefined"!=typeof i.serverthreshold&&null!=i.serverthreshold||(i.serverthreshold=.1),r.setOptions({level:i.serverlevel,serverthreshold:i.serverthreshold}),this.jlLogger.setOptions({appenders:[n,r]})}return e.prototype.appendOrPrepend=function(e){return"Network:"+this.options.network+" Publisher URL:"+this.options.publisherURL+" :  "+e},e.prototype.logDebug=function(e){this.jlLogger.debug(this.appendOrPrepend(e))},e.prototype.logInfo=function(e){this.jlLogger.info(this.appendOrPrepend(e))},e.prototype.logError=function(e){this.jlLogger.error(this.appendOrPrepend(e))},e.prototype.logFatal=function(e){this.jlLogger.fatal(this.appendOrPrepend(e))},e.getTraceLevel=function(){return h.JL.getTraceLevel()},e.getDebugLevel=function(){return h.JL.getDebugLevel()},e.getInfoLevel=function(){return h.JL.getInfoLevel()},e.getWarnLevel=function(){return h.JL.getWarnLevel()},e.getErrorLevel=function(){return h.JL.getErrorLevel()},e.getFatalLevel=function(){return h.JL.getFatalLevel()},e.prototype.setOptions=function(e){h.JL.enabled=e.enabled,e.maxMessages&&(h.JL.maxMessages=e.maxMessages)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/logging/jsnlog/JsnLogger.ts","/src/logging/jsnlog")},{"./JsnLogPixelAppender":60,"./jsnlog":62,_process:8,buffer:4,timers:9}],62:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){function p(e){if(!e)return p.__;Array.prototype.reduce||(Array.prototype.reduce=function(e,t){for(var i=t,n=0;n<this.length;n++)i=e(i,this[n],n,this);return i});var t="",i=("."+e).split(".").reduce(function(e,i,n,r){t?t+="."+i:t=i;var o=e["__"+t];return void 0===o&&(p.Logger.prototype=e,o=new p.Logger(t),e["__"+t]=o),o},p.__);return i}var p,h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};!function(e){function t(e,t,i){if(void 0!==t[e])return null===t[e]?void delete i[e]:void(i[e]=t[e])}function i(t){if(null!=e.enabled&&!e.enabled)return!1;if(null!=e.maxMessages&&e.maxMessages<1)return!1;try{if(t.userAgentRegex&&!new RegExp(t.userAgentRegex).test(navigator.userAgent))return!1}catch(i){}try{if(t.ipRegex&&e.clientIP&&!new RegExp(t.ipRegex).test(e.clientIP))return!1}catch(i){}return!0}function n(e,t){try{if(e.disallow&&new RegExp(e.disallow).test(t))return!1}catch(i){}return!0}function r(e){return"function"==typeof e?e instanceof RegExp?e.toString():e():e}function o(e){var t,i=r(e);switch(typeof i){case"string":return new v(i,null,i);case"number":return t=i.toString(),new v(t,null,t);case"boolean":return t=i.toString(),new v(t,null,t);case"undefined":return new v("undefined",null,"undefined");case"object":return i instanceof RegExp||i instanceof String||i instanceof Number||i instanceof Boolean?(t=i.toString(),new v(t,null,t)):new v(null,i,JSON.stringify(i));default:return new v("unknown",null,"unknown")}}function a(e){return t("enabled",e,this),t("maxMessages",e,this),t("defaultAjaxUrl",e,this),t("clientIP",e,this),t("requestId",e,this),t("defaultBeforeSend",e,this),this}function s(){return-2147483648}function l(){return 1e3}function d(){return 2e3}function c(){return 3e3}function u(){return 4e3}function p(){return 5e3}function f(){return 6e3}function g(){return 2147483647}function m(e){return e<=1e3?"trace":e<=2e3?"debug":e<=3e3?"info":e<=4e3?"warn":e<=5e3?"error":"fatal"}function y(e){return new C(e)}function b(e){return new A(e)}e.requestId="";var v=function(){function e(e,t,i){this.msg=e,this.meta=t,this.finalString=i}return e}();e.setOptions=a,e.getAllLevel=s,e.getTraceLevel=l,e.getDebugLevel=d,e.getInfoLevel=c,e.getWarnLevel=u,e.getErrorLevel=p,e.getFatalLevel=f,e.getOffLevel=g;var P=function(){function e(e,t){this.inner=t,this.name="JL.Exception",this.message=o(e).finalString}return e}();e.Exception=P,P.prototype=new Error;var w=function(){function e(e,t,i,n){this.l=e,this.m=t,this.n=i,this.t=n}return e}();e.LogItem=w;var S=function(){function r(t,i){this.appenderName=t,this.sendLogItems=i,this.level=e.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.buffer=[],this.batchBuffer=[]}return r.prototype.setOptions=function(e){return t("level",e,this),t("ipRegex",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("sendWithBufferLevel",e,this),t("storeInBufferLevel",e,this),t("bufferSize",e,this),t("batchSize",e,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this},r.prototype.log=function(e,t,r,o,a,s,l){
var d;if(i(this)&&n(this,s)&&!(a<this.storeInBufferLevel))return d=new w(a,s,l,(new Date).getTime()),a<this.level?void(this.bufferSize>0&&(this.buffer.push(d),this.buffer.length>this.bufferSize&&this.buffer.shift())):(a<this.sendWithBufferLevel?this.batchBuffer.push(d):(this.buffer.length&&(this.batchBuffer=this.batchBuffer.concat(this.buffer),this.buffer.length=0),this.batchBuffer.push(d)),this.batchBuffer.length>=this.batchSize?void this.sendBatch():void 0)},r.prototype.sendBatch=function(){0!=this.batchBuffer.length&&(null!=e.maxMessages&&e.maxMessages<1||(null!=e.maxMessages&&(e.maxMessages-=this.batchBuffer.length),this.sendLogItems(this.batchBuffer),this.batchBuffer.length=0))},r}();e.Appender=S;var C=function(i){function n(e){i.call(this,e,n.prototype.sendLogItemsAjax)}return h(n,i),n.prototype.setOptions=function(e){return t("url",e,this),t("beforeSend",e,this),i.prototype.setOptions.call(this,e),this},n.prototype.sendLogItemsAjax=function(t){try{var i="/jsnlog.logger";null!=e.defaultAjaxUrl&&(i=e.defaultAjaxUrl),this.url&&(i=this.url);var n=this.getXhr(i),r={r:e.requestId,lg:t};"function"==typeof this.beforeSend?this.beforeSend.call(this,n,r):"function"==typeof e.defaultBeforeSend&&e.defaultBeforeSend.call(this,n,r);var o=JSON.stringify(r);n.send(o)}catch(a){}},n.prototype.getXhr=function(t){var i=new XMLHttpRequest;if(!("withCredentials"in i)&&"undefined"!=typeof XDomainRequest){var n=new XDomainRequest;return n.open("POST",t),n}return i.open("POST",t),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("JSNLog-RequestId",e.requestId),i},n}(S);e.AjaxAppender=C;var A=function(t){function i(e){t.call(this,e,i.prototype.sendLogItemsConsole)}return h(i,t),i.prototype.clog=function(e){console.log(e)},i.prototype.cerror=function(e){console.error?console.error(e):this.clog(e)},i.prototype.cwarn=function(e){console.warn?console.warn(e):this.clog(e)},i.prototype.cinfo=function(e){console.info?console.info(e):this.clog(e)},i.prototype.cdebug=function(e){console.debug?console.debug(e):this.cinfo(e)},i.prototype.sendLogItemsConsole=function(t){try{if(!console)return;var i;for(i=0;i<t.length;++i){var n=t[i],r=n.n+": "+n.m;"undefined"==typeof window&&(r=new Date(n.t)+" | "+r),n.l<=e.getDebugLevel()?this.cdebug(r):n.l<=e.getInfoLevel()?this.cinfo(r):n.l<=e.getWarnLevel()?this.cwarn(r):this.cerror(r)}}catch(o){}},i}(S);e.ConsoleAppender=A;var I=function(){function e(e){this.loggerName=e,this.seenRegexes=[]}return e.prototype.setOptions=function(e){return t("level",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("ipRegex",e,this),t("appenders",e,this),t("onceOnly",e,this),this.seenRegexes=[],this},e.prototype.buildExceptionObject=function(e){var t={};return e.stack?t.stack=e.stack:t.e=e,e.message&&(t.message=e.message),e.name&&(t.name=e.name),e.data&&(t.data=e.data),e.inner&&(t.inner=this.buildExceptionObject(e.inner)),t},e.prototype.log=function(e,t,a){var s,l,d=0;if(!this.appenders)return this;if(e>=this.level&&i(this)&&(a?(l=this.buildExceptionObject(a),l.logData=r(t)):l=t,s=o(l),n(this,s.finalString))){if(this.onceOnly)for(d=this.onceOnly.length-1;d>=0;){if(new RegExp(this.onceOnly[d]).test(s.finalString)){if(this.seenRegexes[d])return this;this.seenRegexes[d]=!0}d--}for(s.meta=s.meta||{},s.meta.loggerName=this.loggerName,d=this.appenders.length-1;d>=0;)this.appenders[d].log(m(e),s.msg,s.meta,function(){},e,s.finalString,this.loggerName),d--}return this},e.prototype.trace=function(e){return this.log(l(),e)},e.prototype.debug=function(e){return this.log(d(),e)},e.prototype.info=function(e){return this.log(c(),e)},e.prototype.warn=function(e){return this.log(u(),e)},e.prototype.error=function(e){return this.log(p(),e)},e.prototype.fatal=function(e){return this.log(f(),e)},e.prototype.fatalException=function(e,t){return this.log(f(),e,t)},e}();e.Logger=I,e.createAjaxAppender=y,e.createConsoleAppender=b;var T=new C("");"undefined"==typeof window&&(T=new A("")),e.__=new e.Logger(""),e.__.setOptions({level:e.getDebugLevel(),appenders:[T]})}(p||(p={})),"undefined"!=typeof i&&(i.JL=p);var f;"function"==typeof f&&f.amd&&f("jsnlog",[],function(){return p}),"function"==typeof __jsnlog_configure&&__jsnlog_configure(p)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/logging/jsnlog/jsnlog.js","/src/logging/jsnlog")},{_process:8,buffer:4,timers:9}],63:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../placement/model/Placement"),f=e("../core/TagDimension"),g=e("../core/DimensionHelper"),m=e("../detector/BrowserProperties"),y=e("../utility/Utility"),b=e("../renderer/inarticle/InArticleRenderer"),v=e("../renderer/watchnengage/WatchnEngageRender"),P=e("../renderer/DisplayAdRenderer"),w=e("../renderer/curtainraiser/CurtainRaiserRenderer"),S=e("../renderer/inview/InviewFacade"),C=e("../renderer/inview/InviewDisplayFacade"),A=e("../renderer/politeswipeup/PSwipeUpRenderer"),I=24,T=1,B=function(){function e(e,t,i,n,r,o,a,s,l){void 0===a&&(a="0"),void 0===s&&(s="0"),this.thisParent=e,this.id=t,this.network=i,this.dimId=n,this.width=r,this.height=o,this.channel=a,this.publisher=s,this.clientIP=l,this.thirdPartyClickURL="",this.thirdPartyImprURL="",this.includedRenderer={},this.excludedReneder=[],this.dimensions=[],this.maxGuranteed=2,this.isLegacyParallelRequest="1",this.platformType=[],this.reloadCount=0,this.dimensions.push(new f(n,r,o))}return e.prototype.withKeyword=function(e){return this.keyword=e,this},e.prototype.withCustomValue=function(e){return this.customValue=e,this},e.prototype.withMultipleCustomeValues=function(e){return this.multipleCustomeValues=e,this},e.prototype.withThirdPartyClickURL=function(e){return this.thirdPartyClickURL=y.isUndefined(e)?"":e,this},e.prototype.withThirdPartyImprURL=function(e){return this.thirdPartyImprURL=y.isUndefined(e)?"":e,this},e.prototype.withMaxGuranteed=function(e){return this.maxGuranteed=e,this},e.prototype.withMaxNonGuranteed=function(e){return this.maxNonGuranteed=e,this},e.prototype.withReloadCount=function(e){return this.reloadCount=e,this},e.prototype.includeRenderer=function(e,t){return e!==b.NAME&&e!==v.NAME||(this.maxNonGuranteedForInarticle=I,this.maxNonGuranteed=I,this.maxGuranteed=T),e!==w.NAME&&e!==S.NAME&&e!==C.NAME&&e!==P.NAME&&e!==A.NAME||(this.isLegacyParallelRequest="0",this.maxGuranteed=0),this.includedRenderer[e]={name:e,behaviour:t},this},e.prototype.excludeRenderer=function(e){return this.excludedReneder.push(e),this},e.prototype.excludeGeo=function(e){return this.excludedGeo=e,this},e.prototype.withAdditionalDimension=function(e,t,i){return this.dimensions.push(new f(e,t,i)),this},e.prototype.withNoDemandCallback=function(e){return this.noDemandCallback=e,this},e.prototype.withAdCompleteCallback=function(e){return this.adCompleteCallback=e,this},e.prototype.withImpressionCallback=function(e){return this.impressionCallback=e,this},e.prototype.withImpressionTimeout=function(e){return this.impressionTimeout=e,this},e.prototype.withAdReadyCallback=function(e){return this.adReadyCallback=e,this},e.prototype.withRendererCallback=function(e){return this.rendererCallback=e,this},e.prototype.withIsLegacyParallelRequest=function(e){return this.isLegacyParallelRequest=e,this},e.prototype.withPlatform=function(e){return this.platformType=e,this},e.prototype.withCreativeSizes=function(e){return this.creativeSizes=e,this},e.prototype.stopReloadCallback=function(e){return this.stopreloadCallback=e,this},e.prototype.withReloadTimer=function(e){return this.reloadTimeout=e,this},e.prototype.done=function(){return this.thisParent},e.prototype.build=function(){if(!y.isNullOrUndefined(this.id))throw new Error('Invalid PlacementId: "'+this.id+'" passed.');if(!y.isNullOrUndefined(this.network))throw new Error('Invalid Network: "'+this.network+'" passed.');if(!y.isNullOrUndefined(this.publisher))throw new Error('Invalid Publisher: "'+this.publisher+'" passed.');if(!y.isNullOrUndefined(this.channel))throw new Error('Invalid Channel: "'+this.channel+'" passed.');if(y.isInvalidOREmpty(this.dimensions))throw new Error("No dimension found.");var e=g.getBestDimForDisplay(this.dimensions,m.getScreenWidth(),m.getScreenHeight());if(null==e)throw new Error("Invalid Tag dimension passed.");return this.noDemandCallback||(this.noDemandCallback=function(){}),this.adCompleteCallback||(this.adCompleteCallback=function(){}),this.impressionCallback||(this.impressionCallback=function(){}),new h(this.id,this.network,this.channel,this.publisher,e,this.includedRenderer,this.excludedReneder,this.keyword,this.customValue,this.multipleCustomeValues,this.thirdPartyClickURL,this.thirdPartyImprURL,this.winHBMap,this.noDemandCallback,this.maxGuranteed,this.maxNonGuranteed,this.impressionCallback,this.rendererCallback,this.isLegacyParallelRequest,this.adReadyCallback,this.impressionTimeout,this.platformType,this.clientIP,this.creativeSizes,this.adCompleteCallback,this.excludedGeo,this.stopreloadCallback,this.reloadCount,this.reloadTimeout)},e}();t.exports=B}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/placement/PlacementBuilder.ts","/src/placement")},{"../core/DimensionHelper":24,"../core/TagDimension":26,"../detector/BrowserProperties":28,"../placement/model/Placement":65,"../renderer/DisplayAdRenderer":70,"../renderer/curtainraiser/CurtainRaiserRenderer":81,"../renderer/inarticle/InArticleRenderer":114,"../renderer/inview/InviewDisplayFacade":195,"../renderer/inview/InviewFacade":197,"../renderer/politeswipeup/PSwipeUpRenderer":223,"../renderer/watchnengage/WatchnEngageRender":253,"../utility/Utility":275,_process:8,buffer:4,timers:9}],64:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../adserving/model/request/builder/AdServerRequestBuilder"),g=e("../utility/BrowserUtils"),m=e("../renderer/Tracker"),y=e("../logging/LogManager"),b=e("../config/ConfigHolder"),v=e("../headerbidding/HBPlacementManager"),P=e("../utility/Utility"),w=e("../eventtracker/RVTTrackers"),S=e("../renderer/RendererMasterList"),C=e("../utility/DefferedPromise"),A=e("../utility/AnyPromise"),I=e("../utility/SubscribableCallback"),T=function(){function e(e,t,i,n,r,o,a){var s=this;this.placement=e,this.renderers=t,this.eventTrackerFactory=n,this.vbDetector=r,this.divReadyCallback=o,this.shouldStopReloadCallback=a,this.geckoLogger=y.getLogger("Placement Manager"),this.rendered=new h.Promise(function(e,t){s.signalRendered=e,s.signalRejected=t}),this.adReqPayLoad={},this.adOpportunityPromise=new C,this.missedOpportunityPromise=new C,this.reloadCallback=new I,this.reloadAble=!0,this.adCount=1,this.adShownCount=0,this.reloaded=!1,this.hBPlacementManager=new v(t,e.Id,i,e.Network),e.ImpressionTimeout&&(this.impressionSetTimeout=setTimeout(function(){s.geckoLogger.logInfo("Timing out after "+e.ImpressionTimeout),s.cancelRenderers()},e.ImpressionTimeout))}return e.prototype.getAdServingPlacement=function(){var e=new f.PlacementBuilder(this.placement.Id,this.placement.Network,this.placement.Publisher,this.placement.Channel,String(this.placement.Dimension.DimId),String(this.placement.Dimension.Width),String(this.placement.Dimension.Height));e.withKeyword(this.placement.Keyword),e.withCustomTargeting(this.hBPlacementManager.getCustomTargeting(this.placement.CustomValue)),e.withMultipleCustomeValues(this.placement.MultipleCustomeValues),P.isValidUrl(this.placement.ThirdPartyClickURL)&&e.withThirdPartyClickURL(this.placement.ThirdPartyClickURL),P.isValidUrl(this.placement.ThirdPartyImprURL)&&e.withThirdPartyImprURL(this.placement.ThirdPartyImprURL),e.withMaxGuranteed(this.placement.MaxGuranteed),e.withMaxNonGuranteed(this.placement.MaxNonGuranteed),e.withIsLegacyParallelReq(this.placement.IsLegacyParallelReq);var t=this.placement.IncludedRenderer;return e=this.addRenderers(e,t,this.placement.ExcludedRenderer),e.build()},e.prototype.getHeaderBidDetails=function(){return this.hBPlacementManager.getHeaderBidDetails()},e.prototype.resetWinningBids=function(){return this.hBPlacementManager.resetWinningBids()},e.prototype.handleBidResponse=function(e,t){this.hBPlacementManager.handleBidResponse(e,t)},e.prototype.handleAllBidResponses=function(e,t){this.hBPlacementManager.handleAllBidResponses(e,t)},e.prototype.findBestBidResponse=function(e){this.hBPlacementManager.findBestBidResponse(e)},e.prototype.setBestBidResponse=function(e){this.hBPlacementManager.setBestBidResponse(e)},e.prototype.setReloaded=function(){this.reloaded=!0},e.prototype.addRenderers=function(e,t,i){for(var n=this,r=[],o=0,a=this.renderers;o<a.length;o++){var s=a[o];if(t[s.getName()]){var l=s.getBehaviourForRequest();e.addRenderer(s.getAdserverName(),s.getCapability(),l),this.adReqPayLoad[s.getAdserverName()]=l,r.push(s)}else if(s.isOnByDefault()&&this.isNotExcluded(i,s)){var l=s.getBehaviourForRequest();e.addRenderer(s.getAdserverName(),s.getCapability(),l),this.adReqPayLoad[s.getAdserverName()]=l,r.push(s)}}return h.Promise.all(r.map(function(e){return e.getMissedOpportunityPromise().getPromise()})).then(function(){n.missedOpportunityPromise.resolve()}),A.anyone(r.map(function(e){return e.getAdOpportunityPromise().getPromise()})).then(function(){n.adOpportunityPromise.resolve()})["catch"](function(e){console.log(e)}),e},e.prototype.isNotExcluded=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i];if(t.getName()===r)return!1}return!0},e.prototype.getAdCount=function(){return this.adCount},e.prototype.getAdShownCount=function(){return this.adShownCount},e.prototype.canReload=function(){return this.reloadAble},e.prototype.getId=function(){return this.placement.Id},e.prototype.getNetwork=function(){return this.placement.Network},e.prototype.getChannel=function(){return this.placement.Channel},e.prototype.handleAdResponse=function(e){var t=this;try{this.divReadyCallback.getPromise().then(function(){t.renderAd(e)})["catch"](function(e){t.geckoLogger.logError(e)})}catch(i){this.geckoLogger.logError(i)}},e.prototype.findRenderer=function(e){for(var t=0,i=this.renderers;t<i.length;t++){var n=i[t];if(e===n.getAdserverName())return n}return null},e.prototype.findRendererForFoc=function(){var e=S.getFocHandlerList();for(var t in e)if(e.hasOwnProperty(t))for(var i=0,n=this.renderers;i<n.length;i++){var r=n[i];if(e[t]===r.getName())return r}return null},e.prototype.getRenderByName=function(e,t){return t?this.findRendererForFoc():this.findRenderer(e)},e.prototype.renderAd=function(e){var t=this,i=document.getElementById(b.getIdPrefix()+this.placement.Id),n=g.createFriendlyIFrame(b.getIdPrefix()+this.placement.Id,i,0,0);n.style.display="none",this.onRendered().then(function(){if(n){var e=n.contentDocument||n.contentWindow.document;e.body.style.margin="0px",e.body.style.padding="0px",e.close()}});for(var r={},o=e.Creatives,a=[],s=0;s<o.length;s++){var l=o[s],d=void 0;d="undefined"==typeof l.RendererName||null===l.RendererName?"":l.RendererName;var c=void 0;if(c=this.getRenderByName(d,l.IsFoc),c&&(d=c.getAdserverName()),P.isNullOrUndefined(r[d])?a=r[d]:(r[d]=[],a=[]),null!==c){var u=c.transform(l.AdContent,l.TrackingDetails.EventTrackers),p={};this.adReqPayLoad[d]&&(p=this.adReqPayLoad[d]);var f={};"undefined"!=typeof l.Behaviours&&null!==l.Behaviours&&(f=l.Behaviours),p=c.getBehaviourForRenderer(p,f),a.push(this.prepareAndGetAdData(l,n,u,p)),r[d]=a}else this.geckoLogger.logError("Renderer with name = "+l.RendererName+" not found, failed to reneder Ad on PlacementId = "+this.getId()),this.signalRejected(),this.cancelImpressionTimer(),this.placement.NoDemandCallback()}var m=function(e){if(r.hasOwnProperty(e)&&e){var i=void 0;if(i=y.getRenderByName(e,r[e][0].isFoc)){y.selectedRnderer=i;var n=i.getReloadCallback().subscribe(function(){t.reloadCallback.notify(),n()}),o=y.reloaded?i.reloadAd(r[e],y.hBPlacementManager.getHBHelper(),y.vbDetector):i.showAd(r[e],y.hBPlacementManager.getHBHelper(),y.vbDetector);o.adRendered.then(function(){t.geckoLogger.logDebug("Successfully renedered Ad on PlacementId = "+t.getId()),t.signalRendered()})["catch"](function(e){t.geckoLogger.logError("Failed to reneder Ad on PlacementId = "+t.getId()+", Error message = "+e.message),t.signalRejected()}),o.impression.then(function(){t.cancelImpressionTimer(),t.placement.ImpressionSubscribable.notify()});var a=new C;i.getAdStoppedPromise().getPromise().then(function(e){e&&(t.adCount=e.adCount,t.adShownCount=e.adShownCount,t.reloadAble=e.adCount>e.adShownCount),a.resolve()}),h.Promise.race([a.getPromise(),i.getNoDemandPromise().getPromise()]).then(function(){t.geckoLogger.logDebug("NoDemandCallback called "),t.placement.NoDemandCallback()}),i.getAdStoppedPromise().getPromise().then(function(){t.placement.AdCompleteCallback()});var s=void 0;if(S.isRenderer2(i.getName())){var l=i;s=l,s.getReloadPromise().getPromise().then(function(e){t.placement.StopReloadCallback(e)})}return i.getIAUnitClosedPromise().getPromise().then(function(e){e&&t.shouldStopReloadCallback(e)}),i.getNoDemandPromise().getPromise().then(function(){t.cancelImpressionTimer()}),i.getAdReadyPromise().getPromise().then(function(){t.placement.AdReadyCallback()}),"break"}y.geckoLogger.logError("Renderer with name = "+e+" not found, failed to reneder Ad on PlacementId = "+y.getId()),y.signalRejected(),y.cancelImpressionTimer(),y.placement.NoDemandCallback()}},y=this;for(var v in r){var w=m(v);if("break"===w)break}},e.prototype.cancelImpressionTimer=function(){this.impressionSetTimeout&&clearTimeout(this.impressionSetTimeout)},e.prototype.cancelRenderers=function(){for(var e=0,t=this.renderers;e<t.length;e++){var i=t[e];i.cancel()}},e.prototype.getPlacementElementpromise=function(){if(this.selectedRnderer)return this.selectedRnderer.getPlacementElement()},e.prototype.prepareAndGetAdData=function(e,t,i,n){var r={adId:e.Adid,placmentId:this.placement.Id,domDestination:t,tracking:new m(this.placement.Channel,this.placement.Network,e.Adid,e.TrackingDetails.ImpressionTrackers,e.TrackingDetails.ClickTrackers,e.TrackingDetails.ViewabilityTrackers,this.eventTrackerFactory),height:e.Height,width:e.Width,dimsuffix:b.getDimSuffix(),creativeType:e.CreativeType,network:this.placement.Network,publisher:this.placement.Publisher,channel:this.placement.Channel,dimension:this.placement.Dimension.DimId,rvtTracker:new w.RVTTrackers(e.TrackingDetails.RvtTrackers),isFoc:e.IsFoc,isCollapse:e.IsCollapse,thirdPartyClickURL:this.placement.ThirdPartyClickURL,thirdPartyImprURL:this.placement.ThirdPartyImprURL,content:i,behaviour:n,buyType:e.BuyType,seederWidth:e.SeederWidth,seederHeight:e.SeederHeight,placementWidth:this.placement.Dimension.Width,placementHeight:this.placement.Dimension.Height,maxNonGuranteed:this.placement.MaxNonGuranteed,clientIP:this.placement.ClientIP,partnerName:e.PartnerName};return r},e.prototype.onRendered=function(){return this.rendered},e.prototype.onAdOpportunity=function(){return this.adOpportunityPromise},e.prototype.onMissedOpportunity=function(){return this.missedOpportunityPromise},e.prototype.onReloadCallback=function(){return this.reloadCallback},e}();t.exports=T}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/placement/PlacementManager.ts","/src/placement")},{"../adserving/model/request/builder/AdServerRequestBuilder":18,"../config/ConfigHolder":23,"../eventtracker/RVTTrackers":48,"../headerbidding/HBPlacementManager":52,"../logging/LogManager":58,"../renderer/RendererMasterList":72,"../renderer/Tracker":73,"../utility/AnyPromise":262,"../utility/BrowserUtils":264,"../utility/DefferedPromise":267,"../utility/SubscribableCallback":274,"../utility/Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],65:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("../../utility/SubscribableCallback"),g=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,h,g,m,y,b,v,P,w,S,C,A,I,T,B,k,E){this.id=e,this.network=t,this.channel=i,this.publisher=n,this.dimension=r,this.includedRenderer=o,this.excludedRenderer=a,this.keyword=s,this.customValue=l,this.multipleCustomeValues=d,this.thirdPartyClickURL=c,this.thirdPartyImprURL=u,this.winHBMap=p,this.noDemandCallback=h,this.maxGuranteed=g,this.maxNonGuranteed=m,this.rendererCallback=b,this.isLegacyParallelReq=v,this.adReadyCallback=P,this.impressionTimeout=w,this.platFormType=S,this.clientIP=C,this.creativeSizes=A,this.adCompleteCallback=I,this.excludedGeo=T,this.stopreloadCallback=B,this.reloadCount=k,this.reloadTimer=E,this.impressionSubscribableCallback=new f,this.impressionSubscribableCallback.subscribe(function(){y()})}return Object.defineProperty(e.prototype,"Network",{get:function(){return this.network},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Channel",{get:function(){return this.channel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dimension",{get:function(){return this.dimension},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Publisher",{get:function(){return this.publisher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IncludedRenderer",{get:function(){return this.includedRenderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExcludedRenderer",{get:function(){return this.excludedRenderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Keyword",{get:function(){return h.isUndefined(this.keyword)?"":this.keyword},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CustomValue",{get:function(){return h.isUndefined(this.customValue)?"":this.customValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MultipleCustomeValues",{get:function(){return h.isUndefined(this.multipleCustomeValues)?"":this.multipleCustomeValues},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ThirdPartyClickURL",{get:function(){return this.thirdPartyClickURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ThirdPartyImprURL",{get:function(){return this.thirdPartyImprURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxGuranteed",{get:function(){return this.maxGuranteed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxNonGuranteed",{get:function(){return this.maxNonGuranteed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoDemandCallback",{get:function(){return this.noDemandCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdCompleteCallback",{get:function(){return this.adCompleteCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdReadyCallback",{get:function(){return this.adReadyCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsLegacyParallelReq",{get:function(){return this.isLegacyParallelReq},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionSubscribable",{get:function(){return this.impressionSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionTimeout",{get:function(){return this.impressionTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RendererCallback",{get:function(){return this.rendererCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlatFormType",{get:function(){return this.platFormType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CreativeSizes",{get:function(){var e=this.creativeSizes;return e||(e=[{width:this.Dimension.Width.toString(),height:this.Dimension.Height.toString()}]),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExcludedGeo",{get:function(){return this.excludedGeo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClientIP",{get:function(){return this.clientIP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StopReloadCallback",{get:function(){return this.stopreloadCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadCount",{get:function(){return this.reloadCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadTimer",{get:function(){return this.reloadTimer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WinHBMap",{get:function(){return this.winHBMap},enumerable:!0,configurable:!0}),e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/placement/model/Placement.ts","/src/placement/model")},{"../../utility/SubscribableCallback":274,"../../utility/Utility":275,_process:8,buffer:4,timers:9}],66:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./model/PlacementBidInfo"),f=e("./model/NetworkBidInfo"),g=e("../utility/GeckoMap"),m=function(){function e(e,t,i){this.chanLevelPlacementHBMap=new g,this.networkLevelPlacementHBArr=[],this.timeout=2e3,e&&t&&("string"==typeof e.headerBid?this.filterHeaderBidDetails(JSON.parse(e.headerBid),i):this.filterHeaderBidDetails(e.headerBid,i))}return e.prototype.getPlacementHBDetails=function(e){var t=this.chanLevelPlacementHBMap.get(e);return t?t:this.networkLevelPlacementHBArr.length>0?this.networkLevelPlacementHBArr:void 0},e.prototype.getNetworkHBDetails=function(){return this.networkLevelHBDetails},Object.defineProperty(e.prototype,"Timeout",{get:function(){return this.timeout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Props",{get:function(){return this.props},enumerable:!0,configurable:!0}),e.prototype.filterHeaderBidDetails=function(e,t){try{for(var i=0;i<e.length;i++){var n=e[i];if(n.nwId.toString()===t){n.timeout&&(this.timeout=Number(n.timeout)),this.props=n.props;for(var r=0;r<n.bids.length;r++){var o=n.bids[r];o.chanId?this.addChannelDetails(o.chanId,new h(o.width,o.height,o.bidders)):this.networkLevelPlacementHBArr.push(new h(o.width,o.height,o.bidders))}this.networkLevelHBDetails=new f(n.props,n.timeout)}}}catch(a){console.log(a)}},e.prototype.addChannelDetails=function(e,t){var i=this.chanLevelPlacementHBMap.get(e);i||(i=[]),this.chanLevelPlacementHBMap.set(e,i),i.push(t)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/prerequestinfo/PreRequestInfoManager.ts","/src/prerequestinfo")},{"../utility/GeckoMap":268,"./model/NetworkBidInfo":67,"./model/PlacementBidInfo":68,_process:8,buffer:4,timers:9}],67:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t){this.props=e,this.timeout=t}return Object.defineProperty(e.prototype,"Props",{get:function(){return this.props},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BidTimeout",{get:function(){return this.timeout},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/prerequestinfo/model/NetworkBidInfo.ts","/src/prerequestinfo/model")},{_process:8,buffer:4,timers:9}],68:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i){this.width=e,this.height=t,this.bids=i,this.bidders=[];try{for(var n=0;n<i.length;n++)"string"==typeof i[n]?this.bidders.push(JSON.parse(i[n])):this.bidders.push(i[n])}catch(r){console.warn(r)}}return Object.defineProperty(e.prototype,"Width",{get:function(){return this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Bids",{get:function(){return this.bids},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/prerequestinfo/model/PlacementBidInfo.ts","/src/prerequestinfo/model")},{_process:8,buffer:4,timers:9}],69:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./DisplayAdRenderer"),f=e("./decorators/ViewabilityTrackingRendererDecorator"),g=e("./decorators/BasicTrackingRendererDecorator"),m=e("es6-promise"),y=e("./decorators/FOCRendererDecorator"),b=e("../utility/DefferedPromise"),v=function(){function e(e,t){var i=this;this.noDemandPromise=new b,this.adReadyPromise=new b,this.adOpportunityPromise=new b,this.missedOpportunityPromise=new b,this.adCompletePromise=new b,this.iaUnitClosedPromise=new b;var n=new m.Promise(function(e,t){i.signalDestReady=e});this.mySlave=new f(n,new g(new y(new h(e,this.noDemandPromise,this.adOpportunityPromise,this.missedOpportunityPromise,this.adReadyPromise,t),this.noDemandPromise,this.adReadyPromise)))}return e.prototype.cancel=function(){},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.getDisplayAdName=function(){return h.NAME},e.prototype.getVersion=function(){return this.mySlave.getVersion()},e.prototype.isSupported=function(){return this.mySlave.isSupported()},e.prototype.getName=function(){return this.mySlave.getName()},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.isOnByDefault=function(){return this.mySlave.isOnByDefault()},e.prototype.getCapability=function(){return this.mySlave.getCapability()},e.prototype.getBehaviourForHB=function(){return this.mySlave.getBehaviourForHB()},e.prototype.getBehaviourForRequest=function(){return this.mySlave.getBehaviourForRequest()},e.prototype.getBehaviourForRenderer=function(e,t){return this.mySlave.getBehaviourForRenderer(e,t)},e.prototype.getNoDemandPromise=function(){return this.mySlave.getNoDemandPromise()},e.prototype.getAdReadyPromise=function(){return this.mySlave.getAdReadyPromise()},e.prototype.getAdOpportunityPromise=function(){return this.mySlave.getAdOpportunityPromise()},e.prototype.getMissedOpportunityPromise=function(){return this.mySlave.getMissedOpportunityPromise()},e.prototype.reloadAd=function(e,t,i){return this.signalDestReady(e[0].domDestination),this.mySlave.reloadAd(e,t,i)},e.prototype.showAd=function(e,t,i){return this.signalDestReady(e[0].domDestination),this.mySlave.showAd(e,t,i)},e.prototype.transform=function(e,t){return this.mySlave.transform(e,t)},e.prototype.getPlacementElement=function(){return this.mySlave.getPlacementElement()},e.prototype.getReloadCallback=function(){return this.mySlave.getReloadCallback()},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/DisplayAdFacade.ts","/src/renderer")},{"../utility/DefferedPromise":267,"./DisplayAdRenderer":70,"./decorators/BasicTrackingRendererDecorator":96,"./decorators/FOCRendererDecorator":97,
"./decorators/ViewabilityTrackingRendererDecorator":99,_process:8,buffer:4,"es6-promise":5,timers:9}],70:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../utility/Utility"),f=e("es6-promise"),g=e("./display/BannerHelper"),m=e("./display/VideoHelper"),y=e("./display/HtmlHelper"),b=e("../utility/DefferedPromise"),v=e("./model/DisplayBehaviours"),P=e("./model/DisplayBehaviours"),w=e("./model/DisplayBehaviours"),S=e("./model/DisplayBehaviours"),C=e("./model/DisplayBehaviours"),A=e("../logging/LogManager"),I=e("./display/InlineSpaceGrabber"),T=e("../utility/SubscribableCallback"),B=.1,k=!0,E={},L=function(){function e(e,t,i,n,r,o){this.suppliedBehaviour=e,this.noDemandPromise=t,this.adOpportunityPromise=i,this.missedOpportunityPromise=n,this.adReadyPromise=r,this.placementId=o,this.bannerHelper=new g,this.videoHelper=new m,this.htmlHelper=new y,this.adCompletePromise=new b,this.placementElementPromise=new b,this.iaUnitClosedPromise=new b,this.geckoLogger=A.getLogger("DisplayAdRenderer"),this.behavior=new v.Behaviours,this.behaviorHolder=new P.BehavioursHolder,this.impressionPromise=new b,this.adRenderedPromise=new b,this.clickPromise=new b,this.reloadCallback=new T,this.adOpportunityPromise.resolve();var a=this.behaviorHolder.getBehaviours();this.preparedBehaviours=this.createBehaviourPayLoad(e,a)}return e.prototype.cancel=function(){},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.transform=function(e,t){var i=this.videoHelper.transform(e),n=this.bannerHelper.transform(e),r=this.htmlHelper.transform(e);return{bannerAd:n,videoAd:i,htmlAd:r}},e.prototype.isSupported=function(){return!0},e.prototype.reloadAd=function(e,t,i){return{adRendered:this.adReadyPromise.getPromise(),impression:this.impressionPromise.getPromise(),click:this.clickPromise.getPromise()}},e.prototype.showAd=function(e,t,i){var n=this;new f.Promise(function(e,t){n.click=e});if(e[0]&&e[0].content){var r=e[0].content;if(r){var o=this.preparedBehaviours[S.CSS_SELECTOR]&&""!==this.preparedBehaviours[S.CSS_SELECTOR][0]?this.preparedBehaviours[S.CSS_SELECTOR][0]:"";this.geckoLogger.logInfo("Grabbing placement with cssSelector: "+o);var a=this.preparedBehaviours[C.PLACEMENT_MACRO]&&""!==this.preparedBehaviours[C.PLACEMENT_MACRO][0]?this.preparedBehaviours[C.PLACEMENT_MACRO][0]:"",s=e[0].domDestination.parentElement;this.getPlacementPromise(o).then(function(i){var o=null!==i?i.id:"";if(""===o?(o=s?s.id:"",n.geckoLogger.logInfo("Placement not found. Using the default one with id: "+o)):n.geckoLogger.logInfo("Grabbed placement with id: "+o),null!==i&&i.appendChild(e[0].domDestination),r.bannerAd){n.adReadyPromise.resolve();var l=n.bannerHelper.showAd(e[0],r.bannerAd);l.impression.then(function(){n.impressionPromise.resolve()}),l.adRendered.then(function(){n.adRenderedPromise.resolve()}),l.click.then(function(){n.clickPromise.resolve()})}else if(r.htmlAd){var d=r.htmlAd;n.adReadyPromise.resolve();var l=n.htmlHelper.showAd(e[0],d,t,o,a);l.impression.then(function(){n.impressionPromise.resolve()}),l.adRendered.then(function(){n.adRenderedPromise.resolve()}),l.click.then(function(){n.clickPromise.resolve()})}else if(r.videoAd){n.adReadyPromise.resolve();var l=n.videoHelper.showAd(e[0],r.videoAd,t);l.impression.then(function(){n.impressionPromise.resolve()}),l.adRendered.then(function(){n.adRenderedPromise.resolve()}),l.click.then(function(){n.clickPromise.resolve()})}})}else this.adReadyPromise.reject(),this.noDemandPromise.resolve(),this.impressionPromise.reject(),this.adRenderedPromise.reject(),this.clickPromise.reject()}else this.impressionPromise.reject(),this.adRenderedPromise.reject(),this.clickPromise.reject();return{adRendered:this.adReadyPromise.getPromise(),impression:this.impressionPromise.getPromise(),click:this.clickPromise.getPromise()}},e.prototype.getVersion=function(){return B},e.prototype.getName=function(){return e.NAME},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.isOnByDefault=function(){return k},e.prototype.getCapability=function(){return E},e.prototype.getBehaviourForHB=function(){return{}},e.prototype.getBehaviourForRequest=function(){return this.preparedBehaviours},e.prototype.getBehaviourForRenderer=function(e,t){var i={};try{i=this.compareBehaviours(e,t,this.behaviorHolder)}catch(n){this.geckoLogger.logError(h.errorMsg(" getBehaviourForRenderer catch called ",n))}return i},e.prototype.createBehaviourPayLoad=function(e,t){var i={};try{if(h.isNullOrUndefined(e))for(var n in e)if(e.hasOwnProperty(n)&&n){if(h.isNullOrUndefined(t[n])&&!this.validatePropertyWithDefaultValues(e[n],t[n]))throw new Error("Invalid values for publisherBehaviour property "+n);h.isNullOrUndefined(e[n])&&h.inArray(e[n],w.NO_PREF)?i[n]=t[n].getAllValidValuesWithoutNoPref():h.inArray(e[n],w.NO_PREF)&&h.isNullOrUndefined(t[n])?i[n]=t[n].getDefaultValues():h.isNullOrUndefined(e[n][0])&&""!==e[n][0].trim()?i[n]=e[n]:(h.isNullOrUndefined(e[n][0])&&""===e[n][0].trim()||h.isNullOrUndefined(e[n])&&!h.isNullOrUndefined(e[n][0]))&&h.isNullOrUndefined(t[n])&&(i[n]=t[n].getDefaultValues())}for(var r in t)if(t.hasOwnProperty(r)&&r){var o=h.isNullOrUndefined(e)&&h.isNullOrUndefined(e[r])?e[r]:void 0;t[r].getDefaultValues().length>0&&void 0===o&&(i[r]=t[r].getDefaultValues())}}catch(a){throw this.geckoLogger.logError(h.errorMsg(" Invalid values by publisher ",a)),new Error("Invalid values for publisherBehaviour property "+a)}return i},e.prototype.compareBehaviours=function(e,t,i){var n={};for(var r in e)if(e.hasOwnProperty(r)&&r){var o=e[r].length>1,a=!h.isNullOrUndefined(t[r]),s=!a&&t[r].length>1,l=i.getBehaviour(r);if(h.isNullOrUndefined(l)||(n[r]=e[r]),h.isNullOrUndefined(l)){if(!this.validatePropertyWithDefaultValues(e[r],l))throw new Error("Invalid values for "+r);if(a)if(o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else{if(!h.isNullOrUndefined(e[r])||!h.isNullOrUndefined(l))throw new Error("Not possible values for "+r);n[r]=e[r]}else if(s&&o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else if(o&&1===t[r].length&&h.inArray(e[r],t[r][0]))n[r]=t[r];else{if(1!==t[r].length||1!==e[r].length||t[r][0]!==e[r][0])throw new Error("Not possible values for  "+r);n[r]=e[r]}}}return n},e.prototype.validatePropertyWithDefaultValues=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n]){if(t.getAllValidValues().length<1){i=!0;continue}if(i=h.inArray(t.getAllValidValues(),e[n]),i===!0)continue;break}return i},e.prototype.getNoDemandPromise=function(){return this.noDemandPromise},e.prototype.getAdReadyPromise=function(){return this.adReadyPromise},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getMissedOpportunityPromise=function(){return this.missedOpportunityPromise},e.prototype.getReloadCallback=function(){return this.reloadCallback},e.prototype.getPlacementElement=function(){return this.placementElementPromise},e.prototype.getPlacementPromise=function(e){var t=this;return new f.Promise(function(i,n){var r=null;if(""!==e){var o=new I(e,document);o.grabInlinePlacement(t.placementId).then(function(e){e?r=e:t.geckoLogger.logInfo("Placement for display renderer not found, using default wrapper div"),i(r)})["catch"](function(e){t.geckoLogger.logError("Error while grabbing placement for display renderer: "+e),i(r)})}else i(r)})},e}();L.NAME="display",t.exports=L}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/DisplayAdRenderer.ts","/src/renderer")},{"../logging/LogManager":58,"../utility/DefferedPromise":267,"../utility/SubscribableCallback":274,"../utility/Utility":275,"./display/BannerHelper":100,"./display/HtmlHelper":102,"./display/InlineSpaceGrabber":103,"./display/VideoHelper":105,"./model/DisplayBehaviours":211,_process:8,buffer:4,"es6-promise":5,timers:9}],71:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./DisplayAdRenderer"),f=e("./decorators/BasicTrackingRendererDecorator"),g=e("es6-promise"),m=e("./decorators/FOCRendererDecorator"),y=e("../utility/DefferedPromise"),b=e("../utility/SubscribableCallback"),v=function(){function e(e,t){var i=this;this.noDemandPromise=new y,this.adReadyPromise=new y,this.adOpportunityPromise=new y,this.missedOpportunityPromise=new y,this.adCompletePromise=new y,this.iaUnitClosedPromise=new y,this.reloadCallback=new b;new g.Promise(function(e,t){i.signalDestReady=e});this.mySlave=new f(new m(new h(e,this.noDemandPromise,this.adOpportunityPromise,this.missedOpportunityPromise,this.adReadyPromise,t),this.noDemandPromise,this.adReadyPromise))}return e.prototype.cancel=function(){},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.getReloadCallback=function(){return this.reloadCallback},e.prototype.getVersion=function(){return this.mySlave.getVersion()},e.prototype.isSupported=function(){return this.mySlave.isSupported()},e.prototype.getName=function(){return this.mySlave.getName()},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.isOnByDefault=function(){return this.mySlave.isOnByDefault()},e.prototype.getCapability=function(){return this.mySlave.getCapability()},e.prototype.getBehaviourForHB=function(){return this.mySlave.getBehaviourForHB()},e.prototype.getBehaviourForRequest=function(){return this.mySlave.getBehaviourForRequest()},e.prototype.getBehaviourForRenderer=function(e,t){return this.mySlave.getBehaviourForRenderer(e,t)},e.prototype.getNoDemandPromise=function(){return this.noDemandPromise},e.prototype.getAdReadyPromise=function(){return this.adReadyPromise},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getMissedOpportunityPromise=function(){return this.missedOpportunityPromise},e.prototype.getPlacementElement=function(){return this.mySlave.getPlacementElement()},e.prototype.reloadAd=function(e,t,i){return this.mySlave.reloadAd(e,t,i)},e.prototype.showAd=function(e,t,i){return this.signalDestReady(e[0].domDestination),this.mySlave.showAd(e,t,i)},e.prototype.transform=function(e,t){return this.mySlave.transform(e,t)},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/DisplayAmpAdFacade.ts","/src/renderer")},{"../utility/DefferedPromise":267,"../utility/SubscribableCallback":274,"./DisplayAdRenderer":70,"./decorators/BasicTrackingRendererDecorator":96,"./decorators/FOCRendererDecorator":97,_process:8,buffer:4,"es6-promise":5,timers:9}],72:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./DisplayAdFacade"),f=e("./inarticle/InArticleRenderer"),g=e("./vpaid/VPaidRenderer"),m=e("./vpaid/VPaidSBRRenderer"),y=e("./inview/InviewRenderer"),b=e("./politeswipeup/PSwipeUpFacade"),v=e("./inview/InviewFacade"),P=e("./inview/InviewDisplayFacade"),w=e("./curtainraiser/CurtainRaiserRenderer"),S=e("./curtainraiser/CurtainRaiserFacade"),C=e("./decorators/AMPRendererDecorator"),A=e("./DisplayAmpAdFacade"),I=e("../utility/Utility"),T=e("../utility/DefferedPromise"),B=e("./watchnengage/WatchnEngageRender"),k=function(){function e(){this.adCompletePromise=new T}return e.get=function(e,t,i,n,r,o,a,s){var l=e.IncludedRenderer,d=e.ExcludedRenderer,c=[];return l[P.NAME]||(l[h.getDisplayAdName()]?c.push(new h(l[h.getDisplayAdName()].behaviour,e.Id)):c.push(new h({},""))),c=this.addIfRequired(function(){return new b(l[b.getPSwipeUpFacadeName()].behaviour,t,e.Id,e.Dimension.Width,e.Dimension.Height,i,n,r,o)},c,b.getPSwipeUpFacadeName(),l,d),c=this.addIfRequired(function(){return new f(l[f.NAME].behaviour,t,e.Id,e.Dimension.DimId,e.Dimension.Width,e.Dimension.Height,e.Network,e.Channel,e.Publisher,i,a,s,e.ReloadCount,r,o)},c,f.NAME,l,d),c=this.addIfRequired(function(){return new S(l[S.getCurtainRaiserFacadeName()].behaviour,t,e.Id,e.Dimension.Width,e.Dimension.Height,e.Network,e.Channel,i,n,r,o,s,e.ReloadCount,e.ReloadTimer)},c,w.NAME,l,d),c=this.addIfRequired(function(){return new g(l[g.NAME].behaviour,t,e.Id,e.Dimension.Width,e.Dimension.Height,e.RendererCallback,g.NAME,g.ADSERVER_NAME)},c,g.NAME,l,d),c=this.addIfRequired(function(){return new m(l[m.NAME].behaviour,t,e.Id,e.Dimension.Width,e.Dimension.Height,e.RendererCallback,m.NAME,m.ADSERVER_NAME)},c,m.NAME,l,d),c=this.addIfRequired(function(){return new v(l[v.NAME].behaviour,t,e.Id,e.Dimension.Width,e.Dimension.Height,e.Network,e.Channel,i,v.NAME,v.NAME,s,e.ReloadCount,e.ReloadTimer)},c,v.NAME,l,d),c=this.addIfRequired(function(){return new P(l[P.NAME].behaviour,t,e.Id,e.Dimension.Width,e.Dimension.Height,e.Network,e.Channel,i,h.getDisplayAdName(),P.NAME,s,e.ReloadCount,e.ReloadTimer)},c,P.NAME,l,d),c=this.addIfRequired(function(){return new B(l[B.NAME].behaviour,t,e.Id,e.Dimension.Width,e.Dimension.Height)},c,B.NAME,l,d)},e.addIfRequired=function(e,t,i,n,r){if(n[i]&&!I.inArray(r,i)){var o=e();o.isSupported()&&t.push(o)}return t},e.getAMPList=function(e,t,i){var n=[];return n.push(new C(new A({},""))),n},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.getFocHandlerList=function(){return[g.NAME,m.NAME,f.NAME,b.getPSwipeUpFacadeName(),S.getCurtainRaiserFacadeName(),y.NAME,P.NAME,h.getDisplayAdName()]},e.isRenderer2=function(e){var t=[f.NAME];return t.indexOf(e)>-1},e}();t.exports=k}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/RendererMasterList.ts","/src/renderer")},{"../utility/DefferedPromise":267,"../utility/Utility":275,"./DisplayAdFacade":69,"./DisplayAmpAdFacade":71,"./curtainraiser/CurtainRaiserFacade":80,"./curtainraiser/CurtainRaiserRenderer":81,"./decorators/AMPRendererDecorator":95,"./inarticle/InArticleRenderer":114,"./inview/InviewDisplayFacade":195,"./inview/InviewFacade":197,"./inview/InviewRenderer":199,"./politeswipeup/PSwipeUpFacade":222,"./vpaid/VPaidRenderer":233,"./vpaid/VPaidSBRRenderer":234,"./watchnengage/WatchnEngageRender":253,_process:8,buffer:4,timers:9}],73:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../utility/Utility"),f="VIEWABLE",g="IMPRESSION",m="CLICK",y="MULTIIMPRESSION",b="MULTICLICK",v=function(){function e(e,t,i,n,r,o,a){this.channel=e,this.network=t,this.adid=i,this.impTrackers=n,this.clickTrackers=r,this.viewTrackers=o,this.eventTrackerFactory=a;this.eventTracker=this.eventTrackerFactory.getEventTracker(h.getCurrentTime(),t,e),this.eventTracker.setTracker(g,n),this.eventTracker.setTracker(y+"_"+this.adid,n),this.eventTracker.setTracker(m,r),this.eventTracker.setTracker(b+"_"+this.adid,r),this.eventTracker.setTracker(f,o)}return e.prototype.fireImpressionTrackers=function(){var e=this.eventTracker.emit(g);return this.impTrackers=[],e},e.prototype.fireMultiImpressionTrackers=function(){var e=this.eventTracker.emit(y+"_"+this.adid);return this.impTrackers=[],e},e.prototype.fireClickTrackers=function(){return this.eventTracker.emit(m,void 0,!1)},e.prototype.fireMultiClickTrackers=function(){return this.eventTracker.emit(b+"_"+this.adid,void 0,!1)},e.prototype.fireViewabilityTrackers=function(){var e=this.eventTracker.emit(f);return this.viewTrackers=[],e},e.prototype.getPlacementEventTracker=function(){return this.eventTracker},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/Tracker.ts","/src/renderer")},{"../utility/Utility":275,_process:8,buffer:4,timers:9}],74:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("./BehaviourHelper"),g=e("../display/BannerHelper"),m=e("../display/HtmlHelper"),y=e("es6-promise"),b=e("../model/CreativeTypeConstants"),v=e("../../utility/Utility"),P=e("./model/CurtainRaiserStyle"),w=e("../../utility/DefferedPromise"),S=e("../../utility/DOM"),C=e("../../config/ConfigHolder"),A=e("../../utility/CSS"),I=450,T=12,B=1,k=51,E=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,y,b,S,C,T){var B=this;this.doc=e,this.win=t,this.adData=i,this.placementNode=n,this.actualWidth=r,this.actualHeight=o,this.vbDetector=a,this.adInViewTrackerPercent=s,this.adInViewTrackerTimeMs=l,this.closeButtonElement=d,this.stickyHeaderHeight=c,this.enableArticleWidth=u,this.headerText=p,this.footerText=y,this.disableHeader=b,this.disableFooter=S,this.impressionSubscribableCallback=C,this.clickSubscribableCallback=T,this.geckoLogger=h.getLogger("AdcontentHolder"),this.bannerHelper=new g,this.htmlHelper=new m,this.loadPromise=new w,this.callloadPromise=new w,this.isPlaceholderAbovefold=!1,this.xscale=0,this.scaledWidth=0,this.availHeight=0,this.scaledHeight=0,this.yscale=0,this.previousScrollPosition=0,this.islandscape=!1,this.header=22,this.footer=22,this.scrollHandlerOnLoad=function(){B.availHeight=B.win.innerHeight,B.offset<0&&B.curtainRaiserAdWindow.getBoundingClientRect().top>0?(A.Util.setPrefixedStyle(B.curtainRaiserAdContainer,"transform","scale("+B.xscale+" , "+B.yscale+") "),A.Util.setPrefixedStyle(B.clonedAdData.domDestination,"transform","translate3d(0,"+B.header+"px,0)")):B.offset>0&&(A.Util.setPrefixedStyle(B.curtainRaiserAdContainer,"transform","scale("+B.xscale+" , "+B.yscale+") "),B.curtainRaiserAdContainer.style.top=B.availHeight-B.scaledHeight+"px",B.clonedAdData.domDestination.className="adiframecss");try{var e=B.win.scrollY||B.win.pageYOffset;B.scroll=f.getScrollAmountAndDirection(e,B.previousScrollPosition),B.previousScrollPosition=e,f.adjustAdPosition(B.curtainRaiserHeader,B.curtainRaiserWrapper,B.curtainRaiserAdContainer,B.curtainRaiserAdWindow,B.offset,B.availHeight,B.header,B.footer,B.xscale,B.yscale,B.scaledHeight,B.islandscape,B.scroll.amount,B.scroll.directionUp,B.availHeight,B.win.innerHeight,B.stickyHeaderHeight,B.clonedAdData.domDestination,B.actualWidth<=320&&B.actualHeight<250)}catch(t){B.geckoLogger.logError(t.message)}},this.touchstartHandler=function(){B.curtainRaiserWrapper.style.zIndex="2147483644"},this.touchendHandler=function(){B.curtainRaiserWrapper.style.zIndex=""},this.onloadHandler=function(){B.adData[0].domDestination.contentWindow.document.body.style.margin="0px",B.adData[0].domDestination.contentWindow.document.close(),B.loadPromise.resolve(),B.curtainRaiserWrapper.style.display="block";var e=B.scaledDimension.width;B.container.style.width=e+"px",B.curtainRaiserWrapper.style.width=e+"px",B.curtainRaiserWrapper.style.height=B.scaledDimension.height+"px",B.curtainRaiserWrapper.style.left="0px",e===I?(B.xscale=I/B.actualWidth,B.curtainRaiserWrapper.style.margin="0px auto"):B.enableArticleWidth?B.curtainRaiserWrapper.style.margin="0px auto":(B.curtainRaiserWrapper.style.position="relative",B.curtainRaiserWrapper.style.left=-B.curtainRaiserWrapper.getBoundingClientRect().left+"px",B.curtainRaiserWrapper.style.margin="0px",B.curtainRaiserAdContainer.style.left="0px"),B.curtainRaiserWrapper.className="curtainraiser-close-transition",B.container.className="curtainraiser-close-transition",B.win.addEventListener("scroll",B.scrollHandlerOnLoad),B.win.addEventListener("touchstart",B.touchstartHandler),B.win.addEventListener("touchend",B.touchendHandler),B.clonedAdData.domDestination.contentWindow.addEventListener("touchstart",B.touchstartHandler),B.clonedAdData.domDestination.contentWindow.addEventListener("touchend",B.touchendHandler)},this.geckoLogger=h.getAdLogger(this.adData[0].adId,this.adData[0].creativeType,this.adData[0].network,this.adData[0].channel,v.getTopWindowPageUrl(),"curtainraiser : AdcontentHolder"),this.geckoLogger.logDebug(" cloning adData, appending iframe to div"),this.clonedAdData=v.merge(this.adData[0],{}),this.creativeType=i[0].creativeType,this.clonedAdData.dimsuffix="px",this.clonedAdData.width=this.actualWidth,this.clonedAdData.height=this.actualHeight;var k=this.clonedAdData.domDestination;k&&this.createAdStructure(k),this.curtainRaiserWrapper=n,this.geckoLogger.logInfo("call to ad strcture");var E=this.getCurtainRaiserAdProperties(),L=window.scrollY||window.pageYOffset;L>0&&(this.previousScrollPosition=L),P.applyCSS(this.win,this.doc,this.adData[0],E,this.header,this.footer)}return e.prototype.onLoadPromise=function(){return this.loadPromise.getPromise()},e.prototype.startListeningNotVisible=function(){var e=this;return new y.Promise(function(t,i){v.trackIfElementIsNotVisible(e.curtainRaiserAdWindow,e.win,e.doc).then(function(){t()})["catch"](function(e){i(e)})})},e.prototype.startListeningVisible=function(){var e=this;return new y.Promise(function(t,i){v.trackIfElementIsViewable(e.curtainRaiserAdWindow,e.win,e.doc).then(function(){t()})["catch"](function(e){i(e)})})},e.prototype.getCurtainRaiserAdProperties=function(){return this.availHeight=document.documentElement.clientHeight||this.win.innerHeight,this.deviceWidth=this.enableArticleWidth?this.placementNode.parentNode.clientWidth:document.documentElement.clientWidth||this.win.innerWidth,this.scaledDimension=f.getScaledDimension(this.deviceWidth,this.actualWidth,this.actualHeight),this.xscale=this.deviceWidth/this.actualWidth,this.scaledWidth=this.scaledDimension.width,this.scaledHeight=this.scaledDimension.height,this.yscale=this.scaledHeight/this.actualHeight,this.actualWidth<=320&&this.actualHeight<250&&(this.header=T,this.footer=T,this.scaledHeight+=2*T,this.disableHeader&&(this.header=0,this.scaledHeight-=T),this.disableFooter&&(this.footer=0,this.scaledHeight-=T)),{xscale:this.xscale,yscale:this.yscale,scaledHeight:this.scaledHeight,scaledWidth:this.scaledWidth,maxHeight:this.actualHeight,maxWidth:this.actualWidth,closeTransitionDurationSec:B,stickyHeaderHeight:this.stickyHeaderHeight,enableArticleWidth:this.enableArticleWidth}},e.prototype.createAdStructure=function(e){this.geckoLogger.logInfo("in createAdStructure"),this.container=S.Util.createDivElement(this.doc,"curtainraiser_Container"+this.adData[0].placmentId),this.curtainRaiserAdWindow=S.Util.createDivElement(this.doc,"curtainRaiserAdWindow"+this.adData[0].placmentId),this.curtainRaiserAdContainer=S.Util.createDivElement(this.doc,"curtainRaiserAdContainer"+this.adData[0].placmentId),this.curtainRaiserHeader=S.Util.createSpanElement(this.doc,"curtainRaiserHeader"+this.adData[0].placmentId),this.curtainRaiserHeader.className="curtainraiser-header-footer",this.curtainRaiserFooter=S.Util.createSpanElement(this.doc,"curtainRaiserFooter"+this.adData[0].placmentId),this.curtainRaiserFooter.className="curtainraiser-header-footer",this.curtainRaiserHeader.innerHTML="undefined"!==this.headerText?this.headerText:"Ads By ZEDO",this.curtainRaiserFooter.innerHTML="undefined"!==this.footerText?this.footerText:"Scroll to Continue",this.closeButtonElement&&this.curtainRaiserHeader.appendChild(this.closeButtonElement),this.actualWidth<=320&&this.actualHeight<250&&(this.curtainRaiserFooter.className+=" curtainraiser-header-footer-mini",this.curtainRaiserHeader.className+=" curtainraiser-header-footer-mini"),this.placementNode.appendChild(this.container),this.container.appendChild(this.curtainRaiserAdWindow),this.curtainRaiserAdWindow.appendChild(this.curtainRaiserAdContainer),this.curtainRaiserAdWindow.appendChild(this.curtainRaiserHeader),this.curtainRaiserAdWindow.appendChild(this.curtainRaiserFooter),this.actualWidth<=320&&this.actualHeight<250&&(this.disableHeader&&(this.curtainRaiserHeader.style.display="none"),this.disableFooter&&(this.curtainRaiserFooter.style.display="none")),this.curtainRaiserAdContainer.appendChild(e)},e.prototype.isContainerVisibleMoreThanPercent=function(e){var t=25,i={id:this.curtainRaiserAdWindow.id,debugMode:"true"===C.getViewabilityDebug(),IntervalForPullingViewablityMs:t};return this.vbDetector.getTimePercentViewabilityPromise(i,e,t)},e.prototype.isContainerVisibleByAtleastFiftyPercent=function(){return v.isElementVisibleMoreThanPercent(this.curtainRaiserAdWindow,50)},e.prototype.collapseAd=function(){var e=this;this.geckoLogger.logInfo("Collapsing the ad unit");var t=function(i){i.target===e.curtainRaiserWrapper&&(e.curtainRaiserWrapper.classList.remove("curtainraiser-close-transition"),e.curtainRaiserWrapper.removeEventListener("transitionend",t,!0),e.win.removeEventListener("scroll",e.scrollHandlerOnLoad),setTimeout(function(){e.curtainRaiserWrapper.style.display="none"},1e3*B))};this.curtainRaiserWrapper.addEventListener("transitionend",t,!0),this.container.classList.add("hideIt"),this.curtainRaiserWrapper.classList.add("hideIt")},e.prototype.addContent=function(e,t,i){var n=this,r=new y.Promise(function(r,o){n.geckoLogger.logDebug(" creating bannerHelper object to renderer ad ");var a=i?i:n.adData;if(i&&(n.geckoLogger=h.getAdLogger(a[0].adId,a[0].creativeType,a[0].network,a[0].channel,v.getTopWindowPageUrl(),"Inview : AdcontentHolder"),n.creativeType=a[t].creativeType,a[t].domDestination=n.adData[0].domDestination),t>0){var s=document.getElementById("zedo-cr-style");s&&s.parentNode&&s.parentNode.removeChild(s);var l=a[t].seederWidth?a[t].seederWidth:a[t].width,d=a[t].seederHeight?a[t].seederHeight:a[t].height;n.actualWidth=l,n.actualHeight=d,n.clonedAdData.width=n.actualWidth,n.clonedAdData.height=n.actualHeight;var c=n.getCurtainRaiserAdProperties();P.applyCSS(n.win,n.doc,a[t],c,n.header,n.footer)}var u,p,f=a[t].content;n.creativeType=a[t].creativeType,n.creativeType===b.STD_BANNER&&(u=n.bannerHelper.transform(f.bannerAd)),n.creativeType===b.HTML&&(p=n.htmlHelper.transform(f.htmlAd)),n.callloadPromise.getPromise().then(function(){n.onloadHandler()});var g=a[t].domDestination;g.addEventListener("load",function(){n.callloadPromise.resolve()});var m=setInterval(function(){(g.contentDocument&&"complete"===g.contentDocument.readyState||g.contentWindow&&"complete"===g.contentWindow.document.readyState)&&(n.callloadPromise.resolve(),clearInterval(m))},10);if(u||p){var y;if(n.creativeType===b.STD_BANNER&&u)y=n.bannerHelper.showAd(a[t],u);else{if(n.creativeType!==b.HTML||!p)return n.geckoLogger.logError("ad creative type not compatible"),void o("ad creative type not compatible");y=n.htmlHelper.showAd(a[t],p,e)}var S=new w,C=new w;y.adRendered.then(function(){n.impressionSubscribableCallback.notify(a[t].tracking),S.resolve(),n.geckoLogger.logDebug(" ad rendered successfully resolving promise");var e={adRendered:S.getPromise(),impression:y.impression,click:C.getPromise()};r(e),y.click.then(function(){n.clickSubscribableCallback.notify(a[t].tracking)})}),n.win.addEventListener("scroll",function(){n.offset=n.availHeight-(n.scaledHeight+n.header+n.footer),n.curtainRaiserWrapper.getBoundingClientRect().top>0&&n.curtainRaiserWrapper.getBoundingClientRect().bottom<n.win.innerHeight&&(n.isPlaceholderAbovefold=!0),n.offset>0&&A.Util.addClass(n.curtainRaiserAdContainer,["noTransition"])})}else n.geckoLogger.logError("ad content type not compatible"),o("ad content type not compatible")});return r},e.prototype.startListeningInview2sec=function(){var e=this;return new y.Promise(function(t,i){v.trackIfElementIsVisibleForSeconds(e.curtainRaiserAdWindow,e.win,e.doc,e.adInViewTrackerTimeMs).then(function(){t()})["catch"](function(){i()})})},e.prototype.startListeningViewableImpression=function(){var e=this;return new y.Promise(function(t,i){var n={id:e.curtainRaiserAdWindow.id,debugMode:"true"===C.getViewabilityDebug(),IntervalForPullingViewablityMs:parseInt(C.getViewabilityPollingInterval(),10)};e.vbDetector.getViewabilityMonitor(n).then(function(e){e.onAdViewableImpression(function(){t()})})["catch"](function(t){e.geckoLogger.logDebug(t.message)})})},e.prototype.isAdContainerVisible=function(){return v.isElementVisibleInViewport(this.curtainRaiserAdWindow,this.win,this.doc)},e.prototype.positionAdAfterExpand=function(e,t){e&&300===e&&t&&250===t?(this.curtainRaiserAdContainer.style.position="relative",this.curtainRaiserAdContainer.style.margin="0px",this.curtainRaiserAdContainer.style.top=this.header+"px"):(this.curtainRaiserAdContainer.style.top="",this.curtainRaiserAdContainer.style.position="fixed");var i=this.availHeight-this.scaledHeight;i>0?(this.curtainRaiserAdContainer.style.top=this.availHeight-this.scaledHeight+"px",this.clonedAdData.domDestination.className="adiframecss"):this.clonedAdData.domDestination.className="",this.scroll=f.getScrollAmountAndDirection(this.win.scrollY||this.win.pageYOffset,this.previousScrollPosition),this.offset=this.availHeight-(this.scaledHeight+this.header+this.footer),f.adjustAdPosition(this.curtainRaiserHeader,this.curtainRaiserWrapper,this.curtainRaiserAdContainer,this.curtainRaiserAdWindow,this.offset,this.availHeight,this.header,this.footer,this.xscale,this.yscale,this.scaledHeight,this.islandscape,this.scroll.amount,this.scroll.directionUp,this.availHeight,this.win.innerHeight,this.stickyHeaderHeight,this.clonedAdData.domDestination,this.actualWidth<=320&&this.actualHeight<250)},e.prototype.expandAdInViewPortByPercent=function(e,t){var i=this;if(this.curtainRaiserWrapper&&!e)this.curtainRaiserWrapper.style.height=this.scaledHeight+this.header+this.footer+"px",this.container.style.height=this.scaledHeight+this.header+this.footer+"px";else{var n=t||k,r=this.scaledHeight*n/100+this.header+this.footer;this.curtainRaiserWrapper.style.height=r+"px",this.container.style.height=r+"px",setTimeout(function(){i.container.style.transition="none";var e=0;i.win.addEventListener("scroll",function(){i.curtainRaiserWrapper.style.height&&(e=parseInt(i.curtainRaiserWrapper.style.height,10)),i.scroll.directionUp||e<i.scaledHeight+i.header+i.footer&&(i.curtainRaiserWrapper.style.height=i.scaledHeight+i.header+i.footer+"px",i.container.style.height=i.scaledHeight+i.header+i.footer+"px")})},1e3)}this.win.addEventListener("resize",function(){i.orientationchangeHandler()})},e.prototype.orientationchangeHandler=function(){this.islandscape=this.win.innerHeight<this.win.innerWidth},e}();t.exports=E}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/AdcontentHolder.ts","/src/renderer/curtainraiser")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/CSS":265,"../../utility/DOM":266,"../../utility/DefferedPromise":267,"../../utility/Utility":275,"../display/BannerHelper":100,"../display/HtmlHelper":102,"../model/CreativeTypeConstants":210,"./BehaviourHelper":76,"./model/CurtainRaiserStyle":86,_process:8,buffer:4,"es6-promise":5,timers:9}],75:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("../../utility/DefferedPromise"),g=function(){function e(e,t){this.timerToken=e,this.prom=t}return e.prototype.stop=function(){clearInterval(this.timerToken)},e.prototype.getPromise=function(){return this.prom},e.createTracker=function(t,i,n){try{var r=new f,o=setInterval(function(){h.isElementVisibleInViewport(t,i,n)&&(r.resolve(),clearInterval(o))},10);return new e(o,r.getPromise())}catch(a){throw a}},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/AnchorPointTracking.ts","/src/renderer/curtainraiser");
},{"../../utility/DefferedPromise":267,"../../utility/Utility":275,_process:8,buffer:4,timers:9}],76:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/CSS"),f=450,g=function(){function e(){}return e.getScrollAmountAndDirection=function(e,t){var i=Math.abs(t-e),n=!(e>t);return{directionUp:n,amount:i}},e.getTransform=function(e){var t=0;return e.style.transform&&(t=parseInt(e.style.transform.split(" ")[1],0)),t},e.getScaledDimension=function(e,t,i){var n=e/t,r=n*t;r>f&&(n=f/e,r=f);var o=i/t*r;return 600===i&&160===e&&(o=r/5*8),{width:r,height:o}},e.adjustAdPosition=function(t,i,n,r,o,a,s,l,d,c,u,p,f,g,m,y,b,v,P){var w=Math.floor(r.getBoundingClientRect().top),S=(Math.floor(r.getBoundingClientRect().bottom),0);if(t.style.position="absolute",o<0){t.style.position="absolute",t.style.left="0px",S=e.getTransform(v);var C=f+Math.abs(S);w<=1+b&&!g?("fixed"!==t.style.position&&(t.style.position="fixed"),p?t.style.left=(m-y)/2+"px":t.style.left="0px",t.style.top=b+"px",e.isheaderdocked?S<=a-b-(u-s)?(h.Util.setPrefixedStyle(n,"transform"," scale("+d+" , "+c+")"),h.Util.setPrefixedStyle(v,"transform"," translate3d( 0 ,"+(a-b-(u-s))+"px , 0)")):S>=a-b-(u-s)&&(h.Util.setPrefixedStyle(n,"transform"," scale("+d+" , "+c+")"),h.Util.setPrefixedStyle(v,"transform"," translate3d( 0 ,"+-C+"px , 0)")):setTimeout(function(){e.isheaderdocked=!0},350)):w>b?("absolute"!==t.style.position&&(t.style.position="absolute"),t.style.left="0px",e.isheaderdocked=!1,t.style.top="0px"):w<b&&g&&("fixed"!==t.style.position&&(t.style.position="fixed"),t.style.left="0px",t.style.top=b+"px")}o>0&&(w>=b&&r.getBoundingClientRect().bottom-l<=a?(t.style.left="0px",t.style.top="",n.style.position="relative",n.style.margin="0px",P?n.style.top=s+s+"px":n.style.top=s+"px",h.Util.setPrefixedStyle(n,"transform","scale("+d+" , "+c+")")):w<=b?(t.style.left=i.getBoundingClientRect().left+"px",t.style.position="fixed",n.style.position="",n.style.margin="",t.style.top=b+"px",P?n.style.top=b+s+s+"px":n.style.top=b+s+"px",h.Util.setPrefixedStyle(n,"transform","scale("+d+" , "+c+") ")):r.getBoundingClientRect().bottom-l>a&&(n.style.position="",n.style.margin="",t.style.top="0px",h.Util.setPrefixedStyle(n,"transform","scale("+d+" , "+c+")"),P?n.style.top=a-u+s+"px":n.style.top=a-u+"px"))},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/BehaviourHelper.ts","/src/renderer/curtainraiser")},{"../../utility/CSS":265,_process:8,buffer:4,timers:9}],77:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DOM"),f=e("../../config/ConfigHolder"),g=e("../../logging/LogManager"),m=e("../../utility/DefferedPromise"),y=32,b=function(){function e(e,t,i){var n=this;this.doc=e,this.isEnabled=t,this.placementId=i,this.geckoLogger=g.getLogger("CloseButtonHolder"),this.closeButtonPromise=new m,this.touchEndHandler=function(e){e.preventDefault(),h.Util.removeElementEvent(n.closeButtonContainer,"touchend",n.touchEndHandler),n.closeButtonPromise.resolve()}}return e.prototype.getCloseButton=function(){if(this.isEnabled){this.closeButtonContainer=h.Util.createDivElement(this.doc,"curtainRaiserCloseButtonContainer"+this.placementId),this.closeButtonContainer.style.width=y+"px",this.closeButtonContainer.style.height=y+"px",h.Util.addElementEvent(this.closeButtonContainer,"touchend",this.touchEndHandler);var e=h.Util.createImageElement(this.doc,"curtainRaiserCloseButtonImg"+this.placementId);e.alt="Close",e.height=y,e.width=y,e.src=f.getCurtainRaiserCloseBtnUrl(),this.closeButtonContainer.appendChild(e)}else this.closeButtonPromise.reject();return this.closeButtonContainer},e.prototype.getCloseButtonTouchedPromise=function(){return this.closeButtonPromise.getPromise()},e.prototype.showCloseButton=function(){this.isEnabled&&(this.geckoLogger.logInfo("Showing close button"),this.closeButtonContainer.style.display="block")},e.prototype.hideCloseButton=function(){this.isEnabled&&(this.geckoLogger.logInfo("Hiding close button"),this.closeButtonContainer.style.display="none")},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/CloseButtonHolder.ts","/src/renderer/curtainraiser")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,"../../utility/DefferedPromise":267,_process:8,buffer:4,timers:9}],78:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("../../eventtracker/DebugEventTracker"),g=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return h(t,e),t.prototype.sendBeacon=function(t,i,n){e.prototype.sendBeacon.call(this,t,i,n)},t}(f);i.CurtainRaiserDebug=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/CurtainRaiserDebug.ts","/src/renderer/curtainraiser")},{"../../eventtracker/DebugEventTracker":40,_process:8,buffer:4,timers:9}],79:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.PUB_IMPRESSION="PUB_IMPRESSION",e.PUB_CLICK="PUB_CLICK",e.AD_SHOWN="ADSHOWN",e.AD_IV_2SECSPLUS="AVIEWSP",e.AD_RENDERED="AREND",e.EXIT_BEFORE_ADINVIEW="EXITB",e.AD_NOTREADY="ADNR",e.AD_CLOSE="close"}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/CurtainRaiserEvent.ts","/src/renderer/curtainraiser")},{_process:8,buffer:4,timers:9}],80:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./CurtainRaiserRenderer"),f=e("../../utility/DefferedPromise"),g=e("es6-promise"),m=e("./../decorators/ViewabilityTrackingRendererDecorator"),y=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,y){var b=this;this.noDemandPromise=new f,this.adReadyPromise=new f,this.adOpportunityPromise=new f,this.missedOpportunityPromise=new f,this.adCompletePromise=new f,this.iaUnitClosedPromise=new f;var v=new g.Promise(function(e,t){b.signalDestReady=e});this.mySlave=new m(v,new h(e,t,i,n,r,o,a,s,l,d,this.noDemandPromise,this.adOpportunityPromise,this.missedOpportunityPromise,c,this.adReadyPromise,u,p,y))}return e.prototype.cancel=function(){},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.getReloadCallback=function(){return this.mySlave.getReloadCallback()},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.getCurtainRaiserFacadeName=function(){return h.NAME},e.prototype.getVersion=function(){return this.mySlave.getVersion()},e.prototype.isSupported=function(){return this.mySlave.isSupported()},e.prototype.getPlacementElement=function(){return this.mySlave.getPlacementElement()},e.prototype.getName=function(){return this.mySlave.getName()},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.isOnByDefault=function(){return this.mySlave.isOnByDefault()},e.prototype.getCapability=function(){return this.mySlave.getCapability()},e.prototype.getBehaviourForRequest=function(){return this.mySlave.getBehaviourForRequest()},e.prototype.getBehaviourForHB=function(){return this.mySlave.getBehaviourForHB()},e.prototype.getBehaviourForRenderer=function(e,t){return this.mySlave.getBehaviourForRenderer(e,t)},e.prototype.getNoDemandPromise=function(){return this.mySlave.getNoDemandPromise()},e.prototype.getAdReadyPromise=function(){return this.mySlave.getAdReadyPromise()},e.prototype.getAdOpportunityPromise=function(){return this.mySlave.getAdOpportunityPromise()},e.prototype.getMissedOpportunityPromise=function(){return this.mySlave.getMissedOpportunityPromise()},e.prototype.reloadAd=function(e,t,i){return this.mySlave.reloadAd(e,t,i)},e.prototype.showAd=function(e,t,i){return this.signalDestReady(e[0].domDestination),this.mySlave.showAd(e,t,i)},e.prototype.transform=function(e,t){return this.mySlave.transform(e,t)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/CurtainRaiserFacade.ts","/src/renderer/curtainraiser")},{"../../utility/DefferedPromise":267,"./../decorators/ViewabilityTrackingRendererDecorator":99,"./CurtainRaiserRenderer":81,_process:8,buffer:4,"es6-promise":5,timers:9}],81:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("./model/Behaviours"),g=e("./model/Behaviours"),m=e("./model/Behaviours"),y=e("./CurtainRaiserTrackers"),b=e("../../utility/DefferedPromise"),v=e("./CurtainRaiserEvent"),P=e("../../utility/BrowserUtils"),w=e("../../detector/OsType"),S=e("../../detector/BrowserType"),C=e("../../utility/Utility"),A=e("./StateContext"),I=e("../model/TrackerConstants"),T=e("../../utility/SubscribableCallback"),B=.1,k=!0,E=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,g,v,P,w,S){var C=this;this.suppliedBehaviour=e,this.touchStartPromise=l,this.firstScrollPromise=d,this.noDemandPromise=c,this.adOpportunityPromise=u,this.missedOpportunityPromise=p,this.alreadyScrolledPromise=g,this.adReadyPromise=v,this.adCount=P,this.reloadCount=w,this.reloadTimer=S,this.geckoLogger=h.getLogger("CurtainRaiserRenderer"),this.onAdReadyPromise=new b,this.behavior=new f.Behaviours,this.adCompletePromise=new b,this.placementElementPromise=new b,this.iaUnitClosedPromise=new b,this.reloadCallback=new T,this.impressionSubscribableCallback=new T,this.clickSubscribableCallback=new T,this.adsReloadedCallback=new T,this.adsToShowPromise=new T,this.adAlreadyShown=!1,this.adTriggerPromise=new b,this.browserExitAfterOpportunityPromise=new b,this.curtainRaiserTrackers=new y(t),this.stateContext=new A(document,window,this.curtainRaiserTrackers,l,this.onAdReadyPromise,t,o,a,m.BehaviourParser.getBehaviours(e),i,this.noDemandPromise,d,this.geckoLogger,this.adOpportunityPromise,this.missedOpportunityPromise,this.isSupported(),this.alreadyScrolledPromise,this.impressionSubscribableCallback,this.clickSubscribableCallback,this.reloadCallback,this.adsReloadedCallback,w,S,0,this.adsToShowPromise,s,this.adAlreadyShown,this.adTriggerPromise,this.browserExitAfterOpportunityPromise),this.stateContext.doAction(),this.impressionSubscribableCallback.subscribe(function(e){e.fireMultiImpressionTrackers().then(function(){C.geckoLogger.logInfo("Impression trackers successfully fired")})["catch"](function(){C.geckoLogger.logInfo("Failed to fire one or more Impression trackers")}),C.curtainRaiserTrackers.firePubImpressionTrackerOnce()}),this.clickSubscribableCallback.subscribe(function(e){e.fireMultiClickTrackers().then(function(){C.geckoLogger.logInfo("click trackers successfully fired")})["catch"](function(){C.geckoLogger.logInfo("Failed to fire one or more click trackers")}),C.curtainRaiserTrackers.firePubClickTracker()}),this.onAdReadyPromise.getPromise().then(function(){C.adReadyPromise.resolve()})}return e.prototype.getVersion=function(){return B},e.prototype.getName=function(){return e.NAME},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getReloadCallback=function(){return this.reloadCallback},e.prototype.getPlacementElement=function(){return this.placementElementPromise},e.prototype.getCapability=function(){return{}},e.prototype.isOnByDefault=function(){return k},e.prototype.getBehaviourForRequest=function(){var e=C.merge(this.suppliedBehaviour,g.DefaultBehaviour);return e},e.prototype.getBehaviourForRenderer=function(e,t){var i=C.merge(e,g.DefaultBehaviour);return C.merge(t,i)},e.prototype.getBehaviourForHB=function(){var e={};return e},e.prototype.getNoDemandPromise=function(){return this.noDemandPromise},e.prototype.getAdReadyPromise=function(){return this.adReadyPromise},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getMissedOpportunityPromise=function(){return this.missedOpportunityPromise},e.prototype.cancel=function(){},e.prototype.isSupported=function(){var e=P.getBrowser(),t=P.getOS();if(t===w.WindowsPhone)return!1;if(e===S.UCBrowser)return!1;if(e===S.Firefox)return!1;if(t===w.IOS)return!0;if(t===w.Android){var i=P.getAndroidVersion();return null!==i&&i>=4.2}return!1},e.prototype.transform=function(e,t){var i=this.checkBannerAd(e),n=this.checkHtmlAd(e),r=void 0;t||(t={});var o={bannerAd:i,videoAd:r,htmlAd:n,adShownTrackerUrl:[t[v.AD_SHOWN]],adNotReadyTrackerUrl:[t[v.AD_NOTREADY]],adInView2secsPlusTrackerUrl:[t[v.AD_IV_2SECSPLUS]],adRenderedTrackerUrl:[t[v.AD_RENDERED]],exitBeforeAdInViewTrackerUrl:[t[v.EXIT_BEFORE_ADINVIEW]],adCloseTrackerUrl:[t[v.AD_CLOSE]]};return o},e.prototype.checkBannerAd=function(e){if(void 0!==e.click&&void 0!==e.url)return{target:e.target,defText:e.defText,defAltText:e.defAltText,click:e.click,url:e.url}},e.prototype.checkHtmlAd=function(e){if(void 0!==e.jsData||void 0!==e.htmlData)return{jsData:e.jsData,htmlData:e.htmlData}},e.prototype.reloadAd=function(e,t,i){return this.stateContext.UpdateReloadCountCallback.notify(this.stateContext.ReloadCount-1),this.adsToShowPromise.notify({adData:e,hBHelper:t}),{impression:this.stateContext.ImpressionPromise.getPromise(),adRendered:this.stateContext.AdRendereredPromise.getPromise(),click:this.stateContext.ClickPromise.getPromise(),viewable:this.stateContext.ViewablePromise.getPromise()}},e.prototype.showAd=function(e,t,i){this.geckoLogger.logDebug(" showAd : Creating CurtainRaiserController object");var n=e[0],r=n.content;n.seederWidth?n.seederWidth:n.width,n.seederHeight?n.seederHeight:n.height;return r?(this.onAdReadyPromise.resolve(),this.adsToShowPromise.notify({adData:e,hBHelper:t}),this.curtainRaiserTrackers.initializeTrackers(n.behaviour[I.PublisherTracker.Impression],n.behaviour[I.PublisherTracker.Click],r.adShownTrackerUrl,r.adInView2secsPlusTrackerUrl,r.adRenderedTrackerUrl,r.exitBeforeAdInViewTrackerUrl,r.adNotReadyTrackerUrl,r.adCloseTrackerUrl)):this.onAdReadyPromise.reject("no content in ad Data"),{impression:this.stateContext.ImpressionPromise.getPromise(),adRendered:this.stateContext.AdRendereredPromise.getPromise(),click:this.stateContext.ClickPromise.getPromise(),viewable:this.stateContext.ViewablePromise.getPromise()}},e}();E.NAME="CurtainRaiser",t.exports=E}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/CurtainRaiserRenderer.ts","/src/renderer/curtainraiser")},{"../../detector/BrowserType":29,"../../detector/OsType":31,"../../logging/LogManager":58,"../../utility/BrowserUtils":264,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"../model/TrackerConstants":212,"./CurtainRaiserEvent":79,"./CurtainRaiserTrackers":82,"./StateContext":84,"./model/Behaviours":85,_process:8,buffer:4,timers:9}],82:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../eventtracker/EventConstants"),g=e("./CurtainRaiserEvent"),m=e("../../utility/DefferedPromise"),y=e("../model/TrackerConstants"),b=function(){function e(e){this.eventTracker=e,this.trackers={},this.pubImpressionOneTimePromise=new m,this.pubClickOneTimePromise=new m,this.adShownOneTimePromise=new m,this.adInView2SecsPlusOneTimePromise=new m,this.adRenderedOneTimePromise=new m,this.exitBeforeAdInViewOneTimePromise=new m,this.pageExitOneTimePromise=new m,this.missedOpportunityOneTimePromise=new m,this.blockedOneTimePromise=new m,this.adOpportunityOneTimePromise=new m,this.adNotReadyOneTimePromise=new m,this.adCloseTrackerPromise=new m,this.noDemandOneTimePromise=new m}return e.prototype.initializeTrackers=function(e,t,i,n,r,o,a,s){this.eventTracker.setTracker(g.PUB_IMPRESSION,e),this.eventTracker.setTracker(g.PUB_CLICK,t),this.eventTracker.setTracker(g.AD_SHOWN,i),this.eventTracker.setTracker(g.AD_IV_2SECSPLUS,n),this.eventTracker.setTracker(g.AD_RENDERED,r),this.eventTracker.setTracker(g.EXIT_BEFORE_ADINVIEW,o),this.eventTracker.setTracker(g.AD_NOTREADY,a),this.eventTracker.setTracker(g.AD_CLOSE,s)},e.prototype.firePubImpressionTrackerOnce=function(){var e=this;return this.pubImpressionOneTimePromise.resolve(),new h.Promise(function(t,i){e.pubImpressionOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.PUB_IMPRESSION).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.firePubClickTracker=function(){var e=this;return this.pubClickOneTimePromise.resolve(),new h.Promise(function(t,i){e.pubClickOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.PUB_CLICK,void 0,!1).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdShownTrackersOnce=function(){var e=this;return this.adShownOneTimePromise.resolve(),new h.Promise(function(t,i){e.adShownOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_SHOWN).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdNotReadyTrackersOnce=function(){var e=this;return this.adNotReadyOneTimePromise.resolve(),new h.Promise(function(t,i){e.adNotReadyOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_NOTREADY).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdInView2secsPlusTrackersOnce=function(){var e=this;return this.adInView2SecsPlusOneTimePromise.resolve(),new h.Promise(function(t,i){e.adInView2SecsPlusOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_IV_2SECSPLUS).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdRenderedTrackersOnce=function(){var e=this;return this.adRenderedOneTimePromise.resolve(),new h.Promise(function(t,i){e.adRenderedOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_RENDERED).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireExitBeforeAdInViewTrackersOnce=function(){var e=this;return this.exitBeforeAdInViewOneTimePromise.resolve(),new h.Promise(function(t,i){e.exitBeforeAdInViewOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.EXIT_BEFORE_ADINVIEW).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.firePageExitTrackersOnce=function(){var e=this;return this.pageExitOneTimePromise.resolve(),new h.Promise(function(t,i){e.pageExitOneTimePromise.getPromise().then(function(){e.eventTracker.setStage(y.StageName.USER_CLOSE_BROWSER),e.eventTracker.emit(f.USER_CLOSE_BROWSER).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireMissedOpportunityTrackersOnce=function(){var e=this;return this.missedOpportunityOneTimePromise.resolve(),new h.Promise(function(t,i){e.missedOpportunityOneTimePromise.getPromise().then(function(){e.eventTracker.emit(f.MISSED_OPPORTUNITY).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireblockedTrackersOnce=function(){var e=this;return this.blockedOneTimePromise.resolve(),new h.Promise(function(t,i){e.blockedOneTimePromise.getPromise().then(function(){e.eventTracker.emit(f.BLOCKED).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdOpportunityTrackersOnce=function(){var e=this;return this.adOpportunityOneTimePromise.resolve(),new h.Promise(function(t,i){e.adOpportunityOneTimePromise.getPromise().then(function(){e.eventTracker.setStage(y.StageName.ADD_OPPORTUNITY),e.eventTracker.emit(f.ADD_OPPORTUNITY).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdCloseTrackersOnce=function(){var e=this;return this.adCloseTrackerPromise.resolve(),new h.Promise(function(t,i){e.adCloseTrackerPromise.getPromise().then(function(){e.eventTracker.emit(g.AD_CLOSE).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireNoDemandTrackerOnce=function(){var e=this;return this.noDemandOneTimePromise.resolve(),new h.Promise(function(t,i){e.noDemandOneTimePromise.getPromise().then(function(){e.eventTracker.emit(f.NO_DEMAND).then(function(){t()})["catch"](function(e){i(e)})})})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/CurtainRaiserTrackers.ts","/src/renderer/curtainraiser")},{"../../eventtracker/EventConstants":42,"../../utility/DefferedPromise":267,"../model/TrackerConstants":212,"./CurtainRaiserEvent":79,_process:8,buffer:4,"es6-promise":5,timers:9}],83:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("../../utility/DOM"),g=e("../../config/ConfigHolder"),m=function(){function e(e,t,i){this.placementId=e,this.doc=t,this.win=i,this.geckoLogger=h.getLogger("InlineSpaceGrabber")}return e.prototype.grabMarkerDivPlacement=function(e){this.geckoLogger.logDebug("Searching right place and appending element into it. Returning promise ...");var t=parseInt(g.getGracefulBacktrackNumberOfChecks(),10),i=parseInt(g.getGracefulBacktrackStartingTime(),10),n=f.Util.createDivElement(document,"cr_markerDiv"+e);return n.style.display="block",n.style.width="0px",n.style.height="0px",f.Util.insertMultiElementsAt(this.placementId,n,t,i)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/InlineSpaceGrabber.ts","/src/renderer/curtainraiser")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,_process:8,buffer:4,timers:9}],84:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DefferedPromise"),f=e("./states/BeginState"),g=e("./CurtainRaiserDebug"),m=e("../../utility/SubscribableCallback"),y=e("./states/ErrorState"),b=e("./AnchorPointTracking"),v=e("./states/IdentifyBestPositionState"),P=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,P,w,S,C,A,I,T,B,k,E,L,D,O,R,N,_){var x=this;this.doc=e,this.win=t,this.curtainRaiserTrackers=i,this.touchPromise=n,this.onAdReadyPromise=r,this.eventTracker=o,this.network=a,this.channel=s,this.behaviour=l,this.noDemandPromise=c,this.firstScrollPromise=u,this.gAdLogger=p,this.adOpportunityPromise=P,this.missedOpportunityPromise=w,this.isSupported=S,this.alreadyScrolledPromise=C,this.impressionSubscribableCallback=A,this.clickSubscribableCallback=I,this.reloadCallback=T,this.adsReloadedCallback=B,this.reloadCount=k,this.reloadTimer=E,this.adShownCount=L,this.adsToShowPromise=D,this.vbDetector=O,this.adAlreadyShown=R,this.adTriggerPromise=N,this.browserExitAfterOpportunityPromise=_,this.updateReloadCountCallback=new m,this.adRequestTime=0,this.updateAdRequestTimeCallback=new m,this.clickPromise=new h,this.impressionPromise=new h,this.adRendereredPromise=new h,this.viewablePromise=new h,this.pageExitPromise=new h,this.exitBeforeAdInViewPromise=new h,this.adNotReadyPromise=new h,this.state=new f(this.onAdReadyPromise,o,d),this.curtainraiserdebug=new g.CurtainRaiserDebug(o,this.network,this.channel),this.updateReloadCountCallback.subscribe(function(e){x.reloadCount=e}),this.updateAdRequestTimeCallback.subscribe(function(e){x.adRequestTime=e}),this.AdsToShowPromise.subscribe(function(e){if(x.gAdLogger.logInfo("received ad list, of size "+e.adData),e.adData)if(1===e.adData.length&&e.adData[0].isFoc)if(x.AdShownCount<Number(x.Behaviour.adCount[0])&&x.ReloadCount>0){var t=(new Date).getTime(),i=(t-x.AdRequestTime)/1e3;i<x.ReloadTimer?setTimeout(function(){x.UpdateAdRequestTimeCallback.notify((new Date).getTime()),x.ReloadCallback.notify()},1e3*(x.ReloadTimer-i)):(x.UpdateAdRequestTimeCallback.notify((new Date).getTime()),x.ReloadCallback.notify())}else x.NoDemandPromise.resolve(),x.ImpressionPromise.reject(),x.CurtainRaiserTrackers.fireNoDemandTrackerOnce(),x.gAdLogger.logInfo("Foc Ad"),x.setState(new y("No ad"));else x.AdTriggerPromise.getPromise().then(function(t){x.CRDebugHandler.sendBeacon("adAvailable","",e.adData[0].adId);var i=b.createTracker(t.markerdiv,x.Win,x.Doc);i.getPromise().then(function(){x.AdNotReadyPromise.resolve()}),x.AdAlreadyShown?x.AdsReloadedCallback.notify({adData:e.adData,hBHelper:e.hBHelper}):(x.AdAlreadyShown=!0,x.setState(new v(t.markerdiv,e.adData,e.hBHelper,x.BrowserExitAfterOpportunityPromise,i,t.otherNodes)),x.doAction())});else x.NoDemandPromise.resolve(),x.CurtainRaiserTrackers.fireNoDemandTrackerOnce(),x.setState(new y("No ad"))})}return Object.defineProperty(e.prototype,"Doc",{get:function(){return this.doc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Win",{get:function(){return this.win},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Behaviour",{get:function(){return this.behaviour},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClickPromise",{get:function(){return this.clickPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionPromise",{get:function(){return this.impressionPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdRendereredPromise",{get:function(){return this.adRendereredPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewablePromise",{get:function(){return this.viewablePromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PageExitPromise",{get:function(){return this.pageExitPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExitBeforeAdInViewPromise",{get:function(){return this.exitBeforeAdInViewPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdNotReadyPromise",{get:function(){return this.adNotReadyPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GAdLogger",{get:function(){return this.gAdLogger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurtainRaiserTrackers",{get:function(){return this.curtainRaiserTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TouchStartPromise",{get:function(){return this.touchPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScrollPromise",{get:function(){return this.firstScrollPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AlreadyScrolledPromise",{get:function(){return this.alreadyScrolledPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MissedOppPromise",{get:function(){return this.missedOpportunityPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionSubscriber",{get:function(){return this.impressionSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClickSubscriber",{get:function(){return this.clickSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSupportedEnv",{get:function(){return this.isSupported},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoDemandPromise",{get:function(){return this.noDemandPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdOppPromise",{get:function(){return this.adOpportunityPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CRDebugHandler",{get:function(){return this.curtainraiserdebug},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadCount",{get:function(){return this.reloadCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadTimer",{get:function(){return this.reloadTimer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdShownCount",{get:function(){return this.adShownCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UpdateAdRequestTimeCallback",{get:function(){return this.updateAdRequestTimeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdRequestTime",{get:function(){return this.adRequestTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UpdateReloadCountCallback",{get:function(){return this.updateReloadCountCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadCallback",{get:function(){return this.reloadCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdsReloadedCallback",{get:function(){return this.adsReloadedCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdsToShowPromise",{get:function(){return this.adsToShowPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewabilityDetector",{get:function(){return this.vbDetector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdAlreadyShown",{get:function(){return this.adAlreadyShown},set:function(e){this.adAlreadyShown=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdTriggerPromise",{get:function(){return this.adTriggerPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BrowserExitAfterOpportunityPromise",{get:function(){return this.browserExitAfterOpportunityPromise},enumerable:!0,configurable:!0}),e.prototype.setAdShownCount=function(e){this.adShownCount=e},e.prototype.setState=function(e){this.gAdLogger.logDebug("setting state to "+e.getName()),this.state=e},e.prototype.doAction=function(){this.gAdLogger.logDebug("performing action of state  "+this.state.getName()),this.state.doAction(this)},e}();t.exports=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/StateContext.ts","/src/renderer/curtainraiser")},{"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"./AnchorPointTracking":75,"./CurtainRaiserDebug":78,"./states/BeginState":87,"./states/ErrorState":89,"./states/IdentifyBestPositionState":90,_process:8,buffer:4,timers:9}],85:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/Utility"),f=e("../../model/TrackerConstants");i.DefaultBehaviour={};var g=function(){function e(){}return e}();i.Behaviours=g;var m=function(){function e(){}return e.getBehaviours=function(e){return{anchorPoint:e.cssSelector[0],downwardbuffer:h.isNullOrUndefined(e.downwardbuffer)&&""!==e.downwardbuffer[0]?parseInt(e.downwardbuffer[0],10):20,upwardbuffer:h.isNullOrUndefined(e.upwardbuffer)&&""!==e.upwardbuffer[0]?parseInt(e.upwardbuffer[0],10):5,pubClickTracker:e[f.PublisherTracker.Click],pubImpressionTracker:e[f.PublisherTracker.Impression],adInViewTrackerPercent:h.isNullOrUndefined(e.adInViewTrackerPercent)?parseInt(e.adInViewTrackerPercent[0],10):75,adInViewTrackerTimeMs:h.isNullOrUndefined(e.adInViewTrackerTimeMs)?parseInt(e.adInViewTrackerTimeMs[0],10):2e3,
addCloseButton:h.isNullOrUndefined(e.addCloseButton)&&""!==e.addCloseButton[0]?parseInt(e.addCloseButton[0],10):0,closeButtonAfter:h.isNullOrUndefined(e.closeButtonAfter)&&""!==e.closeButtonAfter[0]?parseInt(e.closeButtonAfter[0],10):60,stickyHeaderHeight:h.isNullOrUndefined(e.stickyHeaderHeight)&&""!==e.stickyHeaderHeight[0]?parseInt(e.stickyHeaderHeight[0],10):0,disableAutoExpand:h.isNullOrUndefined(e.disableAutoExpand)&&""!==e.disableAutoExpand[0]?parseInt(e.disableAutoExpand[0],10):0,renderWhenInView:h.isNullOrUndefined(e.renderWhenInView)&&""!==e.renderWhenInView[0]?parseInt(e.renderWhenInView[0],10):1,disableHeader:h.isNullOrUndefined(e.disableHeader)&&""!==e.disableHeader[0]?parseInt(e.disableHeader[0],10):0,disableFooter:h.isNullOrUndefined(e.disableFooter)&&""!==e.disableFooter[0]?parseInt(e.disableFooter[0],10):0,enableArticleWidth:h.isNullOrUndefined(e.enableArticleWidth)&&""!==e.enableArticleWidth[0]?parseInt(e.enableArticleWidth[0],10):0,headerText:"undefined"==typeof e.headerText?"undefined":e.headerText[0],footerText:"undefined"==typeof e.footerText?"undefined":e.footerText[0],adCount:"undefined"==typeof e.adCount?"0":e.adCount[0],refreshTime:"undefined"==typeof e.refreshTime?"1":e.refreshTime[0],multiAdWhenInView:h.isNullOrUndefined(e.multiAdWhenInView)&&""!==e.multiAdWhenInView[0]?parseInt(e.multiAdWhenInView[0],10):1}},e}();i.BehaviourParser=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/model/Behaviours.ts","/src/renderer/curtainraiser/model")},{"../../../utility/Utility":275,"../../model/TrackerConstants":212,_process:8,buffer:4,timers:9}],86:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/CSS"),f=function(){function e(){}return e.applyCSS=function(e,t,i,n,r,o){var a=n.xscale,s=n.scaledWidth,l="0 0",d=(n.scaledHeight,n.yscale),c=n.maxWidth,u=n.maxHeight,p=0,f=n.closeTransitionDurationSec;try{p=(e.innerHeight-s)/2}catch(g){console.log(g)}var m="#zdt_"+i.placmentId+"_wrapper, #cr_markerDiv"+i.placmentId+"{will-change:height;display:none;transition: height 0.3s ease-out;}\n        #curtainraiser_Container"+i.placmentId+"{position:relative;margin:0px auto;height:0px;transition:height 1s ease;-webkit-transition:height 1s ease;-moz-transition:height 1s \n            ease;-ms-transition:height 1s ease;-o-transition:height 1s ease;}#curtainRaiserAdWindow"+i.placmentId+"\n            {position:absolute;width:100%;height:100%;left:0px;top:0px;clip:rect(auto,auto,auto,auto);\n                will-change:position;} \n               #curtainRaiserAdContainer"+i.placmentId+"\n               {position:fixed;margin:0px auto; top:"+n.stickyHeaderHeight+"px;width:"+c+"px;max-width:"+c+"px;height:"+u+"px;transform:scale\n                ("+a+","+d+");-webkit-transform:scale("+a+","+d+");-moz-transform:scale("+a+","+d+") ;-ms-transform: scale("+a+","+d+");\n                -o-transform:scale("+a+","+d+"); overflow:hidden;\n                transform-origin:"+l+";-webkit-transform-origin:\n        "+l+";moz-transform-origin:"+l+"; -ms-transform-origin:"+l+";-o-transform-origin:"+l+";will-change:transform,scroll,\n        height;transition:transform .5s ease-in-out;}\n        #zdt_"+i.placmentId+"{\n            transition:transform .5s ease-in-out;\n            -webkit-transition: transform .5s ease-in-out;\n            -ms-transition: transform .5s ease-in-out;\n            -o-transition:transform .5s ease-in-out;            \n             max-width:"+c+"px !important;\n        }\n        .adiframecss{\n             transform:translate3d(0,0,0) !important;\n            -moz-transform:translate3d(0,0,0) !important;\n            -ms-transform:translate3d(0,0,0) !important;\n            -webkit-transform:translate3d(0,0,0) !important;\n            -o-transform:translate3d(0,0,0) !important;    \n        }\n        .curtainraiser-header-footer-mini{\n          font-size:9px !important;\n          background:#C0C0C0 !important;\n        }.hideIt{\n            height:0px !important;\n        }\n        #curtainRaiserFooter"+i.placmentId+"{bottom:0px;height:"+o+"px;line-height:"+o+"px;}\n        #curtainRaiserHeader"+i.placmentId+"{top:0px;-webkit-backface-visibility: hidden;backface-visibility: hidden;height:"+r+"px;line-height:"+r+"px;}\n        .curtainraiser-header-footer{position:absolute;left:0px;width:"+s+"px;text-align:center;font-family:Arial,sans-serif;background-color:#000;\n        font-size:12px;color:#fff;z-index:999999999;height:"+r+"px;transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-webkit-transform:translate3d\n        (0,0,0);-o-transform:translate3d(0,0,0);will-change:position;\n        vertical-align:middle;line-height:"+r+"px;}.noTransition {transition:none !important;-webkit-transition:none !important;-moz-transition:none !important;\n            -o-transition:none !important;-ms-transition:none !important;}.pause-scrolling { height: 100%;overflow: hidden;}\n        .noScroll{overflow:hidden !important;}\n        .center-wrapper-landscape{left:0px !important;margin-right:auto !important; margin-left:auto !important;} .center-adcontent-landscape{left:"+p+"px !important;}\n        #curtainRaiserCloseButtonContainer"+i.placmentId+"{position:absolute; top:0px; right:0px; z-index:999999999; display:none;}\n        .curtainraiser-close-transition{transition:height "+f+"s ease !important;-webkit-transition:height "+f+"s ease !important;-moz-transition:height "+f+"s\n            ease !important;-ms-transition:height "+f+"s ease !important;-o-transition:height "+f+"s ease !important;}";h.Util.addCSSRule(m,"zedo-cr-style",t,e)},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/model/CurtainRaiserStyle.ts","/src/renderer/curtainraiser/model")},{"../../../utility/CSS":265,_process:8,buffer:4,timers:9}],87:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./States"),f=e("../../../logging/LogManager"),g=e("../InlineSpaceGrabber"),m=e("./WaitingForTriggerState"),y=function(){function e(e,t,i){this.onAdReadyPromise=e,this.eventTracker=t,this.placementId=i,this.geckoLogger=f.getLogger(" CR BeginState")}return e.prototype.getName=function(){return h.StateName.BeginState},e.prototype.processError=function(e,t){this.geckoLogger.logDebug(t),e.MissedOppPromise.resolve(),e.CurtainRaiserTrackers.fireMissedOpportunityTrackersOnce(),e.NoDemandPromise.resolve()},e.prototype.doAction=function(e){var t=this;if(e.isSupportedEnv){var i=new g(e.Behaviour.anchorPoint,e.Doc,e.Win);i.grabMarkerDivPlacement(this.placementId).then(function(i){i.theNode?(e.setState(new m(i.theNode,t.onAdReadyPromise,i.otherNodes)),e.doAction()):t.processError(e,"target html element not found, weird state shouldn't have reached here")})["catch"](function(){t.processError(e,"fired missed opp")})}else e.CurtainRaiserTrackers.fireblockedTrackersOnce(),e.NoDemandPromise.resolve()},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/BeginState.ts","/src/renderer/curtainraiser/states")},{"../../../logging/LogManager":58,"../InlineSpaceGrabber":83,"./States":92,"./WaitingForTriggerState":94,_process:8,buffer:4,timers:9}],88:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./States"),f=function(){function e(){}return e.prototype.doAction=function(){},e.prototype.getName=function(){return h.StateName.CompleteState},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/CompleteState.ts","/src/renderer/curtainraiser/states")},{"./States":92,_process:8,buffer:4,timers:9}],89:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./States"),f=function(){function e(e){this.error=e}return e.prototype.doAction=function(e){e.GAdLogger.logError("Entered error state: "+this.error),e.ImpressionPromise.reject(),e.AdRendereredPromise.reject(),e.ViewablePromise.reject(),e.ClickPromise.reject()},e.prototype.getName=function(){return h.StateName.ViewableState},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/ErrorState.ts","/src/renderer/curtainraiser/states")},{"./States":92,_process:8,buffer:4,timers:9}],90:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./States"),f=e("./RenderState"),g=e("../../../utility/Utility"),m=function(){function e(e,t,i,n,r,o){this.markerElement=e,this.adData=t,this.hbHelper=i,this.browserExitAfterOpportunityPromise=n,this.anchoPointTracker=r,this.otherNodes=o}return e.findClosest=function(e,t,i,n,r){if(e)for(var o=n?e.length-1:0;n?o>=0:o<e.length;n?o--:o++){var a=e[o].getBoundingClientRect().top+r;if(Math.abs(a)>t&&Math.abs(a)<i)return e[o]}},e.removeUnwantedNodes=function(e,t){for(var i=0;i<t.length;i++){var n=t[i].parentNode;n&&(e?e.id!==t[i].id&&n.removeChild(t[i]):n.removeChild(t[i]))}},e.prototype.doAction=function(t){var i,n=t.Behaviour.downwardbuffer,r=t.Behaviour.upwardbuffer,o=t.Win.scrollY||t.Win.pageYOffset,a=o+t.Win.innerHeight,s=t.Win.innerHeight,l=a+s*n/100,d=o-s*r/100;this.otherNodes&&this.otherNodes.length>0&&(i=e.findClosest(this.otherNodes,l,999999999,!1,o),i||(t.GAdLogger.logInfo("Failed to find a position below the viewport with buffer looking for one in buffer zone"),i=e.findClosest(this.otherNodes,a,l,!0,o)),i||(t.GAdLogger.logInfo("Failed to find a position below the viewport so looking for one above with buffer"),i=e.findClosest(this.otherNodes,0,d,!0,o)),i||(t.GAdLogger.logInfo("Failed to find a position above the viewport with buffer so looking above within buffer zone"),i=e.findClosest(this.otherNodes,o,d,!1,o)),e.removeUnwantedNodes(i,this.otherNodes)),null==i?(t.GAdLogger.logInfo("No optional position were found so proceeding with marker div"),i=this.markerElement,t.CRDebugHandler.sendBeacon("eindex","-1",this.adData[0].adId)):t.CRDebugHandler.sendBeacon("eindex",i.id,this.adData[0].adId),g.isElementAboveViewport(i,t.Win,t.Doc)?t.CRDebugHandler.sendBeacon("markerPlacement","aboveViewport",this.adData[0].adId):t.CRDebugHandler.sendBeacon("markerPlacement","belowViewport",this.adData[0].adId),t.setState(new f(i,this.adData,this.hbHelper,this.browserExitAfterOpportunityPromise,this.anchoPointTracker)),t.doAction()},e.prototype.getName=function(){return h.StateName.IdentifyBestPositionState},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/IdentifyBestPositionState.ts","/src/renderer/curtainraiser/states")},{"../../../utility/Utility":275,"./RenderState":91,"./States":92,_process:8,buffer:4,timers:9}],91:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./States"),f=e("./ViewableState"),g=e("./../AdcontentHolder"),m=e("./ErrorState"),y=e("../../../utility/DefferedPromise"),b=e("../../../utility/Utility"),v=e("../CloseButtonHolder"),P=e("../../../utility/DOM"),w=e("../../model/TrackerConstants"),S=function(){function e(e,t,i,n,r){var o=this;this.markerElement=e,this.adData=t,this.hbHelper=i,this.browserExitAfterOpportunityPromise=n,this.anchorPointTracker=r,this.getAdlength=function(e){var t=parseInt(e.Behaviour.adCount,10)<o.adData.length?parseInt(e.Behaviour.adCount,10):o.adData.length;return t=parseInt(e.Behaviour.adCount,10)>10?10:t}}return e.prototype.getName=function(){return h.StateName.RenderState},e.prototype.doAction=function(e){var t=this,i=1===e.Behaviour.addCloseButton,n=new v(e.Doc,i,this.adData[0].placmentId),r=this.adData[0].seederWidth?this.adData[0].seederWidth:this.adData[0].width,o=this.adData[0].seederHeight?this.adData[0].seederHeight:this.adData[0].height;this.actualWidth=r,this.actualHeight=o,this.adContentHandler=new g(e.Doc,e.Win,this.adData,this.markerElement,this.actualWidth,this.actualHeight,e.ViewabilityDetector,e.Behaviour.adInViewTrackerPercent,e.Behaviour.adInViewTrackerTimeMs,n.getCloseButton(),e.Behaviour.stickyHeaderHeight,e.Behaviour.enableArticleWidth,e.Behaviour.headerText,e.Behaviour.footerText,e.Behaviour.disableHeader,e.Behaviour.disableFooter,e.ImpressionSubscriber,e.ClickSubscriber);var a=new y;e.ImpressionPromise.getPromise().then(function(){e.PageExitPromise.reject()});var s=new y;e.Behaviour.renderWhenInView?b.trackIfElementIsViewable(this.markerElement,e.Win,e.Doc).then(function(){s.resolve(),e.AdOppPromise.resolve(),e.CurtainRaiserTrackers.fireAdOpportunityTrackersOnce(),e.GAdLogger.logDebug("ad opportunity tracker fired")}):s.resolve(),s.getPromise().then(function(){var i=0,r=1e3*parseInt(e.Behaviour.refreshTime,10),o=0,s=0,l=t.getAdlength(e),d=function(c,u,p){u&&(p&&(l=t.getAdlength(e)),i=0);var h=p[i].content;e.CurtainRaiserTrackers.initializeTrackers(p[i].behaviour[w.PublisherTracker.Impression],p[i].behaviour[w.PublisherTracker.Click],h.adShownTrackerUrl,h.adInView2secsPlusTrackerUrl,h.adRenderedTrackerUrl,h.exitBeforeAdInViewTrackerUrl,h.adNotReadyTrackerUrl,h.adCloseTrackerUrl);var g=p[i].seederWidth?p[i].seederWidth:p[i].width,y=p[i].seederHeight?p[i].seederHeight:p[i].height;t.actualHeight=y,t.actualWidth=g,t.adContentHandler.addContent(c,i,p).then(function(u){u.click.then(function(){e.ClickPromise.resolve(),e.CurtainRaiserTrackers.firePubClickTracker()}),u.impression.then(function(){e.ImpressionPromise.resolve(),e.CurtainRaiserTrackers.firePubImpressionTrackerOnce()}),a.getPromise().then(function(){e.CRDebugHandler.sendBeacon("userAtPageEnd","")}),n.getCloseButtonTouchedPromise().then(function(){clearTimeout(o),clearTimeout(s)});var h=Math.max(e.Doc.body.offsetHeight,e.Doc.documentElement&&e.Doc.documentElement.scrollHeight||e.Doc.body.scrollHeight),g=function(){e.Win.innerHeight+Math.ceil(e.Win.pageYOffset)>=h&&(P.Util.removeWindowEvent(e.Win,"scroll",g),a.resolve())};P.Util.addWindowEvent(window,"scroll",g);var m;t.adContentHandler.isAdContainerVisible()?(e.CRDebugHandler.sendBeacon("containerVisible","",t.adData[0].adId),m=!0):t.adContentHandler.startListeningVisible().then(function(){e.CRDebugHandler.sendBeacon("containerVisible","",t.adData[0].adId),m=!0}),t.adContentHandler.onLoadPromise().then(function(){if(e.GAdLogger.logDebug("container loaded"),t.adContentHandler.isAdContainerVisible())e.Behaviour.disableAutoExpand?(e.CRDebugHandler.sendBeacon("renderedNotExpanding","",t.adData[i].adId),e.GAdLogger.logDebug("container visble not expanding")):(e.AdNotReadyPromise.reject(),t.anchorPointTracker.stop(),250===+t.actualHeight&&300===+t.actualWidth?(t.adContentHandler.expandAdInViewPortByPercent(!0,100),setTimeout(function(){t.adContentHandler.positionAdAfterExpand(300,250)},1e3)):(t.adContentHandler.expandAdInViewPortByPercent(!0),setTimeout(function(){t.adContentHandler.positionAdAfterExpand()},1e3)),e.CRDebugHandler.sendBeacon("expandLocation","inViewPort",t.adData[i].adId)),t.adContentHandler.startListeningNotVisible().then(function(){e.GAdLogger.logDebug("container not visible now , expanding"),e.AdNotReadyPromise.reject(),t.anchorPointTracker.stop(),b.isElementAboveViewport(t.markerElement,e.Win,e.Doc)?e.CRDebugHandler.sendBeacon("expandLocation","delayed-aboveViewPort",t.adData[i].adId):e.CRDebugHandler.sendBeacon("expandLocation","delayed-belowViewPort",t.adData[i].adId),e.CRDebugHandler.sendBeacon("expandAd","delayed-cViewed",t.adData[i].adId),t.adContentHandler.expandAdInViewPortByPercent(!1)});else try{e.AdNotReadyPromise.reject(),t.anchorPointTracker.stop(),b.isElementAboveViewport(t.markerElement,e.Win,e.Doc)?e.CRDebugHandler.sendBeacon("expandLocation","immediate-aboveViewPort",t.adData[i].adId):e.CRDebugHandler.sendBeacon("expandLocation","immediate-belowViewPort",t.adData[i].adId),e.CRDebugHandler.sendBeacon("expandAd","immediate-"+(m?"cViewed":"cNotViewed"),t.adData[i].adId),e.GAdLogger.logDebug("container not visible  , expanding"),250===+t.actualHeight&&300===+t.actualWidth?(t.adContentHandler.expandAdInViewPortByPercent(!1),setTimeout(function(){t.adContentHandler.positionAdAfterExpand(300,250)},1e3)):(t.adContentHandler.expandAdInViewPortByPercent(!1),setTimeout(function(){t.adContentHandler.positionAdAfterExpand()},1e3))}catch(a){console.log(a.message)}e.AdRendereredPromise.resolve(),e.CurtainRaiserTrackers.fireAdRenderedTrackersOnce();var u=p[i];if(t.adContentHandler.startListeningVisible().then(function(){e.ExitBeforeAdInViewPromise.reject(),t.browserExitAfterOpportunityPromise.reject(),e.setState(new f(u,t.adContentHandler,n)),e.doAction()}),i++,e.setAdShownCount(e.AdShownCount+1),l>0&&i<l&&e.AdShownCount<parseInt(e.Behaviour.adCount,10)?o=setTimeout(function(){e.Behaviour.multiAdWhenInView?t.adContentHandler.isContainerVisibleByAtleastFiftyPercent().then(function(){d(c,!1,p)}):d(c,!1,p)},r):clearTimeout(o),i>=l&&e.AdShownCount<parseInt(e.Behaviour.adCount,10)&&e.ReloadCount>0){var h=(new Date).getTime(),g=(h-e.AdRequestTime)/1e3;g<e.ReloadTimer?setTimeout(function(){e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.ReloadCallback.notify()},1e3*(e.ReloadTimer-g)):(e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.ReloadCallback.notify())}else clearTimeout(s)})})["catch"](function(t){e.setState(new m("Ad content holder error"+t)),e.doAction()})};d(t.hbHelper,!1,t.adData),e.AdsReloadedCallback.subscribe(function(i){s=setTimeout(function(){e.Behaviour.multiAdWhenInView?t.adContentHandler.isContainerVisibleByAtleastFiftyPercent().then(function(){d(i.hBHelper,!0,i.adData)}):d(i.hBHelper,!0,i.adData),clearTimeout(s)},r)})})},e}();t.exports=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/RenderState.ts","/src/renderer/curtainraiser/states")},{"../../../utility/DOM":266,"../../../utility/DefferedPromise":267,"../../../utility/Utility":275,"../../model/TrackerConstants":212,"../CloseButtonHolder":77,"./../AdcontentHolder":74,"./ErrorState":89,"./States":92,"./ViewableState":93,_process:8,buffer:4,timers:9}],92:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.BeginState=0]="BeginState",e[e.WaitingForTriggerState=1]="WaitingForTriggerState",e[e.IdentifyBestPositionState=2]="IdentifyBestPositionState",e[e.RenderState=3]="RenderState",e[e.ViewableState=4]="ViewableState",e[e.CompleteState=5]="CompleteState",e[e.ErrorState=6]="ErrorState"}(p=i.StateName||(i.StateName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/States.ts","/src/renderer/curtainraiser/states")},{_process:8,buffer:4,timers:9}],93:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./States"),f=e("./CompleteState"),g=function(){function e(e,t,i){this.adData=e,this.adContentHandler=t,this.closeButtonHolder=i}return e.prototype.doAction=function(e){var t=this;e.CurtainRaiserTrackers.fireAdShownTrackersOnce(),this.adContentHandler.startListeningInview2sec().then(function(){e.CurtainRaiserTrackers.fireAdInView2secsPlusTrackersOnce()}),this.adContentHandler.startListeningViewableImpression().then(function(){t.adData.tracking.fireViewabilityTrackers()}),this.closeButtonHolder.getCloseButtonTouchedPromise().then(function(){e.CurtainRaiserTrackers.fireAdCloseTrackersOnce(),t.closeButtonHolder.hideCloseButton(),t.adContentHandler.collapseAd()}),this.adContentHandler.isContainerVisibleMoreThanPercent(e.Behaviour.closeButtonAfter).then(function(){t.closeButtonHolder.showCloseButton()}),e.setState(new f)},e.prototype.getName=function(){return h.StateName.ViewableState},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/ViewableState.ts","/src/renderer/curtainraiser/states")},{"./CompleteState":88,"./States":92,_process:8,buffer:4,timers:9}],94:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./States"),f=e("es6-promise"),g=e("../../../utility/Utility"),m=e("./ErrorState"),y=e("../../../logging/LogManager"),b=function(){function e(e,t,i){this.markerElement=e,this.onAdReadyPromise=t,this.otherNodes=i,this.logger=y.getLogger("Universe:WaitingForTriggerState")}return e.prototype.doAction=function(e){var t=this;f.Promise.race([e.TouchStartPromise.getPromise(),e.ScrollPromise.getPromise(),e.AlreadyScrolledPromise.getPromise()]).then(function(){e.AdTriggerPromise.resolve({markerdiv:t.markerElement,otherNodes:t.otherNodes}),e.Behaviour.renderWhenInView||(e.AdOppPromise.resolve(),e.CurtainRaiserTrackers.fireAdOpportunityTrackersOnce(),e.GAdLogger.logDebug("ad opportunity tracker fired")),e.NoDemandPromise.getPromise().then(function(){e.CurtainRaiserTrackers.fireNoDemandTrackerOnce(),e.GAdLogger.logDebug("no demand tracker fired"),e.Behaviour.renderWhenInView&&(e.AdOppPromise.resolve(),e.CurtainRaiserTrackers.fireAdOpportunityTrackersOnce(),e.GAdLogger.logDebug("ad opportunity tracker fired"))}),e.AdNotReadyPromise.getPromise().then(function(){e.CurtainRaiserTrackers.fireAdNotReadyTrackersOnce(),e.GAdLogger.logDebug("ad not ready tracker fired here")})["catch"](function(){e.GAdLogger.logDebug("ad not ready promise rejected")}),g.createBrowserExitPromise(e.Win).then(function(){e.BrowserExitAfterOpportunityPromise.resolve()})["catch"](function(t){e.setState(new m("Failed to initialize browser exit tracking: "+t)),e.doAction()}),e.BrowserExitAfterOpportunityPromise.getPromise().then(function(){e.PageExitPromise.resolve(),e.ImpressionPromise.getPromise().then(function(){e.ExitBeforeAdInViewPromise.resolve()})})})["catch"](function(t){e.AdTriggerPromise.reject(),e.setState(new m("Failed while waiting for trigger point(touchstart/firstscroll/alreadyscrolled) rejected "+t)),e.doAction()}),e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.PageExitPromise.getPromise().then(function(){e.CurtainRaiserTrackers.firePageExitTrackersOnce()}),e.ExitBeforeAdInViewPromise.getPromise().then(function(){e.CurtainRaiserTrackers.fireExitBeforeAdInViewTrackersOnce()})},e.prototype.getName=function(){return h.StateName.WaitingForTriggerState},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/curtainraiser/states/WaitingForTriggerState.ts","/src/renderer/curtainraiser/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./ErrorState":89,"./States":92,_process:8,buffer:4,"es6-promise":5,timers:9}],95:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./RendererDecorator"),g=e("../../utility/DefferedPromise"),m=function(e){function t(t){var i=e.call(this,t)||this;return i.adCompletePromise=new g,i}return h(t,e),t.prototype.cancel=function(){},t.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},t.prototype.reloadAd=function(e,t,i){return this.inner.reloadAd(e,t,i)},t.prototype.showAd=function(e,t,i){var n=window;return n.context&&(e[0].isFoc&&e[0].isCollapse?n.context.noContentAvailable():n.context.renderStart()),this.inner.showAd(e,t,i)},t.prototype.transform=function(e,t){return this.inner.transform(e,t)},t.prototype.isSupported=function(){return this.inner.isSupported()},t}(f);t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/decorators/AMPRendererDecorator.ts","/src/renderer/decorators")},{"../../utility/DefferedPromise":267,"./RendererDecorator":98,_process:8,buffer:4,timers:9}],96:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./RendererDecorator"),g=e("../../utility/DefferedPromise"),m=function(e){function t(t){var i=e.call(this,t)||this;return i.adCompletePromise=new g,i.iaUnitClosedPromise=new g,i}return h(t,e),t.prototype.cancel=function(){},t.prototype.reloadAd=function(e,t,i){return this.inner.reloadAd(e,t,i)},t.prototype.showAd=function(e,t,i){var n=this,r=this.inner.showAd(e,t,i);return r.impression.then(function(){e[0].tracking.fireImpressionTrackers().then(function(){n.geckoLogger.logInfo("Impression trackers successfully fired")})["catch"](function(){n.geckoLogger.logInfo("Failed to fire one or more Impression trackers")})}),r.click.then(function(){e[0].tracking.fireClickTrackers().then(function(){n.geckoLogger.logInfo("Click trackers successfully fired")})["catch"](function(){n.geckoLogger.logInfo("Failed to fire one or more click trackers")})}),r},t.prototype.transform=function(e,t){return this.inner.transform(e,t)},t.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},t.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},t.prototype.isSupported=function(){return this.inner.isSupported()},t}(f);t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/decorators/BasicTrackingRendererDecorator.ts","/src/renderer/decorators")},{"../../utility/DefferedPromise":267,"./RendererDecorator":98,_process:8,buffer:4,timers:9}],97:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./RendererDecorator"),g=e("../../config/ConfigHolder"),m=e("../display/BannerHelper"),y=e("es6-promise"),b=e("../../utility/DefferedPromise"),v=function(e){function t(t,i,n){var r=e.call(this,t)||this;return r.noDemandPromise=i,r.adReadyPromise=n,r.bannerHelper=new m,r.adCompletePromise=new b,r.iaUnitClosedPromise=new b,r}return h(t,e),t.prototype.cancel=function(){},t.prototype.reloadAd=function(e,t,i){return this.inner.reloadAd(e,t,i)},t.prototype.showAd=function(e,t,i){var n,r=document.getElementById(g.getIdPrefix()+e[0].placmentId);if(e[0].isFoc){var o=new b;e[0].isCollapse&&null!=r?(r.style.display="none",this.adReadyPromise.reject(),o.reject(),this.noDemandPromise.resolve()):this.bannerRendererData?(o.resolve(),this.adReadyPromise.resolve(),this.noDemandPromise.reject(),this.bannerHelper.showAd(e[0],this.bannerRendererData)):(this.adReadyPromise.reject(),o.reject(),this.noDemandPromise.resolve()),n={impression:o.getPromise(),adRendered:y.Promise.resolve(),click:y.Promise.resolve()}}else n=this.inner.showAd(e,t,i);return n},t.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},t.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},t.prototype.transform=function(e,t){return this.bannerRendererData=this.bannerHelper.transform(e),this.inner.transform(e,t)},t.prototype.isSupported=function(){return this.inner.isSupported()},t}(f);t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/decorators/FOCRendererDecorator.ts","/src/renderer/decorators")},{"../../config/ConfigHolder":23,"../../utility/DefferedPromise":267,"../display/BannerHelper":100,"./RendererDecorator":98,_process:8,buffer:4,"es6-promise":5,timers:9}],98:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("../../utility/DefferedPromise"),g=function(){function e(e){this.inner=e,this.geckoLogger=h.getLogger("Renderer Decorator"),this.adCompletePromise=new f,this.iaUnitClosedPromise=new f}return e.prototype.getVersion=function(){return this.geckoLogger.logInfo("Click promise is fulfilled"),this.inner.getVersion()},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getName=function(){return this.inner.getName()},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.getCapability=function(){return this.inner.getCapability()},e.prototype.getBehaviourForHB=function(){return this.inner.getBehaviourForHB()},e.prototype.getBehaviourForRequest=function(){return this.inner.getBehaviourForRequest()},e.prototype.getBehaviourForRenderer=function(e,t){return this.inner.getBehaviourForRenderer(e,t)},e.prototype.getNoDemandPromise=function(){return this.inner.getNoDemandPromise()},e.prototype.getAdReadyPromise=function(){return this.inner.getAdReadyPromise()},e.prototype.getAdOpportunityPromise=function(){return this.inner.getAdOpportunityPromise()},e.prototype.getMissedOpportunityPromise=function(){return this.inner.getMissedOpportunityPromise()},e.prototype.getReloadCallback=function(){return this.inner.getReloadCallback()},e.prototype.isOnByDefault=function(){return this.inner.isOnByDefault()},e.prototype.isSupported=function(){return this.inner.isSupported()},e.prototype.getPlacementElement=function(){return this.inner.getPlacementElement()},e.prototype.cancel=function(){this.inner.cancel()},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/decorators/RendererDecorator.ts","/src/renderer/decorators")},{"../../logging/LogManager":58,"../../utility/DefferedPromise":267,_process:8,buffer:4,timers:9}],99:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,
new i)},f=e("./RendererDecorator"),g=e("../../utility/Utility"),m=e("../../config/ConfigHolder"),y=e("../../utility/DefferedPromise"),b=function(e){function t(t,i){var n=e.call(this,i)||this;return n.elementToWatch=t,n.adCompletePromise=new y,n.iaUnitClosedPromise=new y,n}return h(t,e),t.prototype.cancel=function(){},t.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},t.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},t.prototype.reloadAd=function(e,t,i){return this.inner.reloadAd(e,t,i)},t.prototype.showAd=function(e,t,i){var n=this;return this.elementToWatch.then(function(t){var r={id:""+t.id,debugMode:"true"===m.getViewabilityDebug(),IntervalForPullingViewablityMs:parseInt(m.getViewabilityPollingInterval(),10)},o=i.getViewabilityMonitor(r);o.then(function(t){g.isValidObject(t)?t.onAdViewableImpression(function(t,i,r){e[0].tracking.fireViewabilityTrackers().then(function(){n.geckoLogger.logInfo("Viewability trackers successfully fired.")})["catch"](function(){n.geckoLogger.logError("Failed to fire one or more viewability trakcers.")})}):n.geckoLogger.logError("Error in initializing viewability.")})["catch"](function(e){n.geckoLogger.logError("Error in initializing viewability, "+e)})})["catch"](function(e){n.geckoLogger.logError("Error in initializing viewability, "+e)}),this.inner.showAd(e,t,i)},t.prototype.transform=function(e,t){return this.inner.transform(e,t)},t.prototype.isSupported=function(){return this.inner.isSupported()},t}(f);t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/decorators/ViewabilityTrackingRendererDecorator.ts","/src/renderer/decorators")},{"../../config/ConfigHolder":23,"../../utility/DefferedPromise":267,"../../utility/Utility":275,"./RendererDecorator":98,_process:8,buffer:4,timers:9}],100:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("es6-promise"),g=e("../../logging/LogManager"),m=.1,y="banner",b=!0,v={},P={},w=function(){function e(){this.geckoLogger=g.getLogger("BannerHelper")}return e.prototype.transform=function(e){if(void 0!==e.url)return{target:e.target,defText:e.defText,defAltText:e.defAltText,click:e.click,url:e.url}},e.prototype.showAd=function(e,t){var i=this;this.geckoLogger=g.getAdLogger(e.adId,e.creativeType,e.network,e.channel,h.getTopWindowPageUrl(),"BannerHelper");var n=new f.Promise(function(e,t){i.click=e}),r=""+e.width+e.dimsuffix,o=""+e.height+e.dimsuffix;e.domDestination.style.display="block",e.domDestination.style.width=r,e.domDestination.style.height=o;var a=e.domDestination.contentWindow,s=e.domDestination.parentElement;if(s){var l=s;e.rvtTracker.fireSystemRVTTracker(e.placmentId,l,0,0).then(function(){i.geckoLogger.logDebug("SystemRVT Tag fired successfully.")})["catch"](function(e){i.geckoLogger.logError("There is something wrong to fire system rvt script.")}),e.rvtTracker.fireSystemScriptTracker(e.placmentId,l,0,0).then(function(){i.geckoLogger.logDebug("SCRIPT RVT Tag fired successfully.")})["catch"](function(e){i.geckoLogger.logError("There is something wrong to fire script rvt.")}),e.rvtTracker.fireRVTTrackersForUrl().then(function(){i.geckoLogger.logDebug("RVT tracker tag urls fired successfully.")})}var d=e.domDestination.contentDocument||e.domDestination.contentWindow.document;return d.write(this.getTemplate(t,r,o)),d.close(),a.adClick=function(){i.onAdClick()},{impression:f.Promise.resolve(),adRendered:f.Promise.resolve(),click:n}},e.prototype.onAdClick=function(){this.click()},e.prototype.onAdViewable=function(){this.viewable()},e.prototype.getTemplate=function(e,t,i){var n=void 0===e.target?"_blank":e.target,r=void 0===e.defText?"":e.defText,o=void 0===e.defAltText?"":e.defAltText,a=void 0===e.defAltText?"":e.defAltText,s=e.click?"href='"+e.click+"'":"";return"<a  "+s+" onclick='adClick()' target=\""+n+'" onmouseover=\'window.status="'+r+"\"' onmouseout=\"window.status=''; return true;\">\n                    <img src='"+e.url+"' width='"+t+"' height='"+i+"' title='"+o+"' alt='"+a+'\' style="border:none;">\n                </a>'},e.prototype.getVersion=function(){return m},e.prototype.getName=function(){return y},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.isOnByDefault=function(){return b},e.prototype.getCapability=function(){return v},e.prototype.getBehaviour=function(e,t){var i=h.merge(P,e);return h.merge(t,i)},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/display/BannerHelper.ts","/src/renderer/display")},{"../../logging/LogManager":58,"../../utility/Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],101:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e){this.configurator=e,this.isFullscreen=!1,this.id={},this.fullscreenflag=!1}return e.prototype.addMuteButton=function(e,t){var i=this,n=Window;this.muteBtnId=e.buttonId,n.buttonHandler=function(){i.toggleMuteButton(i.muteStatus),void 0!==t&&t()};var r=e.buttonImgUrl,o=e.buttonClassName,a=n.buttonHandler,s=e.buttonPosition,l=e.buttonHpadding,d=e.buttonVpadding,c=e.buttonWidth,u=e.buttonHeight;this.configurator.addButton(r,o,a,this.muteBtnId,s,l,d,c,u)},e.prototype.updateMuteState=function(e){this.muteStatus=e},e.prototype.toggleMuteButton=function(e){e?(this.configurator.showButton(this.unmuteBtnId),this.configurator.hideButton(this.muteBtnId)):(this.configurator.showButton(this.muteBtnId),this.configurator.hideButton(this.unmuteBtnId))},e.prototype.updateFullScreenState=function(e){this.fullScreenStatus=e,this.fullScreenStatus?(this.configurator.hideButton(this.unmuteBtnId),this.configurator.hideButton(this.muteBtnId),this.configurator.showButton(this.closeBtnId)):(this.configurator.hideButton(this.closeBtnId),this.toggleMuteButton(!this.muteStatus))},e.prototype.addUnmuteButton=function(e,t){var i=this,n=Window;n.buttonUnMuteHandler=function(){i.toggleMuteButton(i.muteStatus),void 0!==t&&t()},this.unmuteBtnId=e.buttonId;var r=e.buttonImgUrl,o=e.buttonClassName,a=n.buttonUnMuteHandler,s=e.buttonPosition,l=e.buttonHpadding,d=e.buttonVpadding,c=e.buttonWidth,u=e.buttonHeight;this.configurator.addButton(r,o,a,this.unmuteBtnId,s,l,d,c,u)},e.prototype.addCloseButton=function(e,t){var i=this,n=Window;this.closeBtnId=e.buttonId;var r=e.buttonImgUrl,o=e.buttonClassName,a=n.closeButtonHandler,s=e.buttonPosition,l=e.buttonHpadding,d=e.buttonVpadding,c=e.buttonWidth,u=e.buttonHeight;a=function(){i.configurator.hideButton(i.closeBtnId)};this.configurator.addButton(r,o,a,this.closeBtnId,s,l,d,c,u)},e.prototype.addFullscreenButton=function(e,t){var i=Window;this.fullScrnBtnId=e.buttonId;var n=e.buttonImgUrl,r=e.buttonClassName,o=i.fullScreenButtonHandler,a=e.buttonPosition,s=e.buttonHpadding,l=e.buttonVpadding,d=e.buttonWidth,c=e.buttonHeight;o=function(){};this.configurator.addButton(n,r,o,this.fullScrnBtnId,a,s,l,d,c)},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/display/ButtonManager.ts","/src/renderer/display")},{_process:8,buffer:4,timers:9}],102:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../utility/Utility"),g=e("../../logging/LogManager"),m=e("./MacroProcessor"),y=.1,b="html",v=!0,P={},w={},S=function(){function e(){this.geckoLogger=g.getLogger("HtmlHelper")}return e.prototype.transform=function(e){if(void 0!==e.jsData||void 0!==e.htmlData)return{jsData:e.jsData,htmlData:e.htmlData}},e.prototype.showAd=function(e,t,i,n,r){var o=this,a=void 0!==t.jsData?t.jsData:t.htmlData;if(n&&""!==n&&r&&""!==r&&(this.geckoLogger.logInfo("Replacing "+r+" with "+n),a=m.replaceMacros(a,n,r)),e.domDestination.style.display="block",a.match("window.top.zfhs_hdrs.renderAd")){var s=""+e.width+e.dimsuffix,l=""+e.height+e.dimsuffix;return e.domDestination.style.width=s,e.domDestination.style.height=l,i.renderAd(e.domDestination.contentDocument||e.domDestination.contentWindow.document,i.getWinningSlotId()),{impression:h.Promise.resolve(),adRendered:h.Promise.resolve(),click:h.Promise.resolve()}}var d=new h.Promise(function(e,t){o.click=e}),s=""+e.width+e.dimsuffix,l=""+e.height+e.dimsuffix;e.domDestination.style.width=s,e.domDestination.style.height=l;var c=e.domDestination.contentWindow,u=e.domDestination.parentElement;if(u){var p=u;e.rvtTracker.fireSystemRVTTracker(e.placmentId,p,0,0).then(function(){o.geckoLogger.logDebug("SystemRVT Tag fired successfully.")})["catch"](function(e){console.log(e),o.geckoLogger.logError("There is something wrong to fire system rvt script.")}),e.rvtTracker.fireSystemScriptTracker(e.placmentId,p,0,0).then(function(){o.geckoLogger.logDebug("SCRIPT RVT Tag fired successfully.")})["catch"](function(e){console.log(e),o.geckoLogger.logError("There is something wrong to fire script rvt.")}),e.rvtTracker.fireRVTTrackersForUrl().then(function(){o.geckoLogger.logDebug("RVT tracker tag urls fired successfully.")})}var f=e.domDestination.contentDocument||e.domDestination.contentWindow.document;return f.open("text/html","replace"),f.write(this.getTemplate(a,s,l)),f.close(),c.adClick=function(){o.onAdClick()},{impression:h.Promise.resolve(),adRendered:h.Promise.resolve(),click:d}},e.prototype.wrapWithScriptTag=function(e){var t=e,i="<script>"+t+"</script><style>body{margin:0px;padding:0px;}</style>";return i},e.prototype.getTemplate=function(e,t,i){return this.wrapWithScriptTag(e)},e.prototype.onAdClick=function(){this.click()},e.prototype.onAdViewable=function(){this.viewable()},e.prototype.getVersion=function(){return y},e.prototype.getName=function(){return b},e.prototype.isOnByDefault=function(){return v},e.prototype.getCapability=function(){return P},e.prototype.getBehaviour=function(e,t){var i=f.merge(w,e);return f.merge(t,i)},e}();t.exports=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/display/HtmlHelper.ts","/src/renderer/display")},{"../../logging/LogManager":58,"../../utility/Utility":275,"./MacroProcessor":104,_process:8,buffer:4,"es6-promise":5,timers:9}],103:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("../../utility/DOM"),g=e("../../config/ConfigHolder"),m=function(){function e(e,t){this.placementId=e,this.doc=t,this.geckoLogger=h.getLogger("InlineSpaceGrabber")}return e.prototype.grabInlinePlacement=function(e){this.geckoLogger.logDebug("Searching right place and appending element into it. Returning promise ...");var t=parseInt(g.getGracefulBacktrackNumberOfChecks(),10),i=parseInt(g.getGracefulBacktrackStartingTime(),10),n=f.Util.createDivElement(this.doc,"display_wrapperDiv"+e);return n.style.display="block",f.Util.insertElementAt(this.placementId,n,t,i)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/display/InlineSpaceGrabber.ts","/src/renderer/display")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,_process:8,buffer:4,timers:9}],104:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){}return e.replaceMacros=function(e,t,i){return e.replace(i,t)},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/display/MacroProcessor.ts","/src/renderer/display")},{_process:8,buffer:4,timers:9}],105:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("es6-promise"),g=e("../../video/player/VideoPlayer"),m=e("../../logging/LogManager"),y=e("./ButtonManager"),b=e("../../config/ConfigHolder"),v=e("../../utility/DefferedPromise"),P=e("../../utility/SubscribableCallback"),w=.1,S="banner",C=!0,A={},I={},T="closeButton",B="fullScreenButton",k="muteButton",E="unmuteButton",L=function(){function e(){this.geckoLogger=m.getLogger("VideoHelper"),this.fullScreenFlag=!1,this.onParallelInitializedPromise=new v}return e.prototype.createLastFrame=function(e){},e.prototype.showAd=function(e,t,i){var n=this;this.geckoLogger=m.getAdLogger(e.adId,e.creativeType,e.network,e.channel,h.getTopWindowPageUrl(),"VideoHelper");var r=!1,o="",a=t.xmlData;if(i){var s=i.getResponse(i.getWinningSlotId());s?s.VastUrl?a=t.xmlData.replace(/http:\/\/dummyurlforrubicon.com/,s.VastUrl):s.VastXml&&t.xmlData.indexOf("dummyurlforrubicon.com")!==-1&&(r=!0,o=s.VastXml):this.geckoLogger.logError("Failed to find hb response for placement "+e.placmentId)}var l=new f.Promise(function(e,t){n.click=e}),d=function(){n.geckoLogger.logError("Failed to play ad")},c=new g,u=new P,p={type:"Auto",adtag:a,width:e.width,height:e.height,hbEnable:r,hbrespXML:o},b=c.createAd(e.placmentId,p,window,d,this.onParallelInitializedPromise,u);return b.configPromise.then(function(e){n.geckoLogger.logInfo(" AdReady : "+e.getId()+" "),b.playablePromise.then(function(t){n.buttonManager=new y(e),n.buttonManager.addFullscreenButton(n.getFullscreenButtonConfig()),n.buttonManager.addMuteButton(n.getMuteButtonConfig(),function(){t.mute(!1)}),n.buttonManager.addCloseButton(n.getCloseButtonConfig()),n.buttonManager.addUnmuteButton(n.getunMuteButtonConfig(),function(){t.mute(!0)}),t.onPlay(function(){e.hideButton(T),e.hideButton(E)}),t.mute(!0),t.onMuteChange(function(e){n.buttonManager.updateMuteState(e)}),t.onFullscreen(function(e){}),t.onAdTime(function(e){n.geckoLogger.logInfo("onAdTime position:"+e.position+" duration:"+e.duration)})})["catch"](function(e){n.geckoLogger.logInfo(" Error called of configurator in VideoHelper ")})}),e.domDestination.style.display="none",e.domDestination.contentDocument.close(),{impression:f.Promise.resolve(),adRendered:f.Promise.resolve(),click:l}},e.prototype.test=function(){console.log("tested")},e.prototype.getFullscreenButtonConfig=function(){return{buttonId:B,buttonImgUrl:b.getInbannerFullscreenBtneUrl(),buttonClassName:"fullscreen",buttonPosition:"bottomright",buttonHpadding:"0px",buttonVpadding:"0px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.getMuteButtonConfig=function(){return{buttonId:k,buttonImgUrl:b.getInbannerMuteBtneUrl(),buttonClassName:"",buttonPosition:"bottomright",buttonHpadding:"30px",buttonVpadding:"0px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.getunMuteButtonConfig=function(){return{buttonId:E,buttonImgUrl:b.getInbannerUnmuteBtneUrl(),buttonClassName:"",buttonPosition:"bottomright",buttonHpadding:"30px",buttonVpadding:"0px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.getCloseButtonConfig=function(){return{buttonId:T,buttonImgUrl:b.getInbannerCloseBtneUrl(),buttonClassName:"exit",buttonPosition:"topright",buttonHpadding:"0px",buttonVpadding:"0px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.transform=function(e){if(void 0!==e.xmlData)return{xmlData:e.xmlData}},e.prototype.onAdClick=function(){this.click()},e.prototype.onAdViewable=function(){this.viewable()},e.prototype.getVersion=function(){return w},e.prototype.getName=function(){return S},e.prototype.isOnByDefault=function(){return C},e.prototype.getCapability=function(){return A},e.prototype.getBehaviour=function(e,t){var i=h.merge(I,e);return h.merge(t,i)},e}();t.exports=L}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/display/VideoHelper.ts","/src/renderer/display")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"../../video/player/VideoPlayer":287,"./ButtonManager":101,_process:8,buffer:4,"es6-promise":5,timers:9}],106:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../display/BannerHelper"),f=e("../display/HtmlHelper"),g=e("es6-promise"),m=e("../../utility/Utility"),y=e("../../logging/LogManager"),b=e("../../utility/DefferedPromise"),v=e("../../config/ConfigHolder"),P=e("../../utility/DOM"),w=e("./model/InarticleStyle"),S=e("../../utility/CSS"),C=e("../../utility/SubscribableCallback"),A=e("./video/ThumbnailHolder"),I=15,T=15,B=18,k=126,E=30,L=53,D=53,O=function(){function e(e,t,i,n,r,o){this.doc=e,this.win=t,this.placementElement=i,this.inlineSpceG=n,this.iAcompanionHolder=r,this.placementId=o,this.geckoLogger=y.getLogger("AdcontentHolder"),this.bannerHelper=new h,this.htmlHelper=new f,this.loadPromise=new b,this.inarticleDisplayedPromise=new b,this.mouseOverCallback=new C,this.mouseOutCallback=new C,this.isContainerRemoved=!1,this.inarticleStyle=new w,this.inarticleStyle.applyCSS(this.win,this.doc,this.placementElement.id),this.containerDiv=P.Util.createDivElement(this.doc,"containerDiv-"+this.placementId);var a="mainPlayerDiv-"+this.placementId;this.mainPlayerDiv=P.Util.createDivElement(this.doc,a),this.mainPlayerDiv.className="zg-mainContainer",this.placeHolderDiv=P.Util.createDivElement(this.doc,"placeHolerDiv-"+this.placementId),this.placeHolderDiv.style.display="none",this.replayBarDiv=P.Util.createDivElement(this.doc,"ad-replay-bar-div-"+this.placementId),this.replayBarDiv.className="zg-replayBar",this.replayAdvSpan=P.Util.createSpanElement(this.doc,"ad-replay-adv-span-"+this.placementId),this.replayLinkSpan=P.Util.createSpanElement(this.doc,"ad-replay-link-span-"+this.placementId),this.replayBarDiv.appendChild(this.replayAdvSpan),this.replayBarDiv.appendChild(this.replayLinkSpan),this.addPlayButtonOverlay(this.containerDiv),this.containerDiv.appendChild(this.mainPlayerDiv),this.prerollMediaTitleDiv=P.Util.createDivElement(this.doc,"preroll-title-div"+this.placementId),this.prerollMediaTitleDiv.style.display="none",this.prerollMediaTitleDiv.style.paddingTop="5px",this.divForStrip=P.Util.createDivElement(this.doc,"divForStrip"+this.placementId),this.divForMediaContent=P.Util.createDivElement(this.doc,"divForMediaContent"+this.placementId),this.divForStrip.style.display="none",this.divForStrip.style.borderTop="1px solid #ffffff",this.divForMediaContent.style.display="none",this.containerDiv.appendChild(this.divForMediaContent),this.containerDiv.appendChild(this.divForStrip),this.placementElement.parentNode&&this.placementElement.parentNode.insertBefore(this.replayBarDiv,this.placementElement),this.placementElement.appendChild(this.prerollMediaTitleDiv),this.iAcompanionHolder&&this.placementElement.appendChild(this.iAcompanionHolder.getTopDiv()),this.placementElement.appendChild(this.containerDiv),this.iAcompanionHolder&&this.placementElement.appendChild(this.iAcompanionHolder.getBottomDiv()),this.placementElement.appendChild(this.placeHolderDiv)}return e.prototype.addcompanionholder=function(){return this.iAcompanionHolder},e.prototype.addPlayButtonOverlay=function(e){this.clickOverlayDiv=P.Util.createDivElement(this.doc,"zPlayButton-"+this.placementId),this.iconsDiv=P.Util.createDivElement(this.doc,"zIconsDiv-"+this.placementId),this.iconsDiv.style.position="absolute",this.iconsDiv.style.top="50%",this.iconsDiv.style.left="50%",this.iconsDiv.style.margin="0 auto",this.iconsDiv.classList.add("zg-playbuttonoverlay");var t=P.Util.createSpanElement(this.doc,"zClkWatchSpan-"+this.placementId);t.style.position="relative",t.style.top="0px",t.style.margin="0 auto",t.style.display="inline-block",this.clickToWatchImg=P.Util.createImageElement(this.doc,"zClkWatchImg-"+this.placementId),this.clickToWatchImg&&(this.clickToWatchImg.src=v.getClickToWatchTextButtonUrl(),this.clickToWatchImg.style.maxWidth=k+"px",this.clickToWatchImg.style.maxHeight=E+"px");var i=P.Util.createSpanElement(this.doc,"zPlayButtonSpan-"+this.placementId);i.style.position="relative",i.style.bottom="0px",i.style.margin="0 auto",this.playButtonImageElement=P.Util.createImageElement(this.doc,"zPlayButtonImg-"+this.placementId),this.playButtonImageElement&&(this.playButtonImageElement.src=v.getPlayButtonUrl(),this.playButtonImageElement.style.maxWidth=L+"px",this.playButtonImageElement.style.maxHeight=D+"px"),this.clickOverlayDiv.style.position="absolute",this.clickOverlayDiv.style.textAlign="center",this.clickOverlayDiv.style.display="none",t.appendChild(this.clickToWatchImg),i.appendChild(this.playButtonImageElement),this.playBtnSpan=i,this.iconsDiv.appendChild(t),this.iconsDiv.appendChild(i),this.clickOverlayDiv.appendChild(this.iconsDiv),e.appendChild(this.clickOverlayDiv)},e.prototype.onmouseover=function(e){m.isNullOrUndefined(this.soundBehaviour)&&0===this.soundBehaviour&&this.mouseOverCallback.notify(e)},e.prototype.onmouseout=function(e){m.isNullOrUndefined(this.soundBehaviour)&&0===this.soundBehaviour&&this.mouseOutCallback.notify(e)},e.prototype.updateSound=function(e){this.soundBehaviour=e,this.containerDiv.removeEventListener("mouseover",this.onmouseover.bind(this)),this.containerDiv.removeEventListener("mouseout",this.onmouseout.bind(this)),0===e&&(this.containerDiv.addEventListener("mouseover",this.onmouseover.bind(this)),this.containerDiv.addEventListener("mouseout",this.onmouseout.bind(this)))},e.prototype.attachInline=function(e,t,i,n){var r=this;return new g.Promise(function(o,a){r.geckoLogger.logInfo("Attach inline called");var s=r.getContainerDiv();r.placementElement.style.width=e.width+"px",r.placeHolderDiv.style.width=e.width+"px";var l=r.iAcompanionHolder?r.iAcompanionHolder.getcompanionheight():0;r.placementHeight>0||(r.placementHeight=e.height+I),i&&(r.placementElement.style.paddingTop=i+"px"),r.placementElement.style.height=r.placementHeight+l+i+"px",t&&(r.placementElement.style.height=r.placementHeight+l+t+i+"px"),r.divForStrip&&n?r.divForStrip.style.display="block":r.divForStrip&&!n&&(r.divForStrip.style.display="none"),r.mainPlayerDiv.style.height=e.height+"px",s.style.width=e.width+"px",s.style.height="",r.clickOverlayDiv.style.width=s.style.width,r.clickOverlayDiv.style.height=e.height+"px",r.playButtonImageElement.className="",r.clickToWatchImg.className="",S.Util.removeClass(s,["sanook-leaveBehind","zg-leaveBehind"]),r.getReplayBarDiv().style.width=e.width+"px",o()})},e.prototype.showInArticle=function(e,t,i,n,r,o){var a=this;return this.geckoLogger.logInfo("showInarticle called---"+o),new g.Promise(function(s,l){if(!a.isContainerRemoved){var d=function(){a.inarticleDisplayedPromise.resolve(),s()};a.adjustPlacementContainer(t),a.attachInline(e,i,n,r),a.placementElement.addEventListener("transitionend",d),o.resolve(),a.geckoLogger.logInfo("Inarticle opened promise resolved"),t&&s()}})},e.prototype.adjustPlacementHeight=function(e,t,i,n,r){t?(this.placementHeight=e.height+B+n+T+i+20,this.placementElement.style.height=this.placementHeight+"px",r&&(this.placementElement.style.height=this.placementHeight+r+"px")):(this.placementHeight=e.height+I,this.placementElement.style.height=this.placementHeight+"px",this.placementElement.style.paddingTop="0px")},e.prototype.adjustPlacementContainer=function(e){try{this.placementElement.className="zg-placement",e||(this.placementElement.className=this.placementElement.className+"   zg-placement-transition"),S.Util.removeClass(this.mainPlayerDiv,["zg-mainContainer"])}catch(t){this.geckoLogger.logError("error:: AdcontentHolder:: adjustPlacementContainer() ::"+t)}},e.prototype.hideInArticle=function(e){var t=this;return new g.Promise(function(i,n){var r=function(){i()};t.placementElement.style.paddingTop="0px",t.placementElement.style.paddingBottom="0px",t.placementElement.style.height="0px",t.placementElement.addEventListener("transitionend",r),e&&i()})},Object.defineProperty(e.prototype,"ClickOverlayDiv",{get:function(){return this.clickOverlayDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayBtnSpan",{get:function(){return this.playBtnSpan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PrerollMediaTitleDiv",{get:function(){return this.prerollMediaTitleDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayButtonImageElement",{get:function(){return this.playButtonImageElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IconsDiv",{get:function(){return this.iconsDiv},enumerable:!0,configurable:!0}),e.prototype.getMainPlayerDiv=function(){return this.mainPlayerDiv},e.prototype.getAdComponent=function(){return this.placementElement},e.prototype.getContainerDiv=function(){return this.containerDiv},e.prototype.getReplayBarDiv=function(){return this.replayBarDiv},e.prototype.getPlaceHolderDiv=function(){return this.placeHolderDiv},e.prototype.getmouseOverCallback=function(){return this.mouseOverCallback},e.prototype.getmouseOutCallback=function(){return this.mouseOutCallback},e.prototype.getDivForStrip=function(){return this.divForStrip},e.prototype.getDivforMediaContent=function(){return this.divForMediaContent},e.prototype.updateAdRemainingTime=function(e){return this.thumbnailHolder&&this.thumbnailHolder.updateRemainingTimeInThumbnail&&this.thumbnailHolder.updateRemainingTimeInThumbnail(e),e},e.prototype.addThumbnails=function(e,t){return this.thumbnailHolder=new A(this.doc,this.placementElement,this.mainPlayerDiv),this.thumbnailHolder.createThumbnailDiv(t,e),this.thumbnailHolder},e.prototype.removeAdContainer=function(){try{this.container.parentElement&&(this.container.parentElement.removeChild(this.container),this.isContainerRemoved=!0)}catch(e){return!1}return!0},e}();t.exports=O}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/AdcontentHolder.ts","/src/renderer/inarticle")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/CSS":265,"../../utility/DOM":266,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"../display/BannerHelper":100,"../display/HtmlHelper":102,"./model/InarticleStyle":121,"./video/ThumbnailHolder":187,_process:8,buffer:4,"es6-promise":5,timers:9}],107:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DOM"),f=e("es6-promise"),g=e("../../logging/LogManager"),m=e("../../utility/Utility"),y=function(){function e(e){this.doc=e,this.geckoLogger=g.getLogger("CornerSlotSpaceGrabber")}return e.prototype.getInlinePosition=function(e,t,i,n){return this.geckoLogger.logDebug(" setting maxWidth "+n+" "),this.getPosition(n,n,t,i)},e.prototype.grabInlinePlacement=function(e){var t=this;this.geckoLogger.logDebug("Appending element to document body. Returning promise ...");var i=h.Util.createDivElement(this.doc,e.id+"_wrapper");return new f.Promise(function(e,n){i.style.height="0px",t.doc.body.appendChild(i);var r=t.doc.getElementById(i.id);r&&e({theNode:r})})},e.prototype.getPosition=function(e,t,i,n){var r=Math.min(e),o=m.computeInRatio(i,n,r);return this.geckoLogger.logDebug("Width of corner slot  = "+e),{left:(e-r)/2,width:r,height:o}},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/CornerSlotSpaceGrabber.ts","/src/renderer/inarticle")},{"../../logging/LogManager":58,"../../utility/DOM":266,"../../utility/Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],108:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("../../utility/DOM"),g=function(){function e(e,t,i,n,r){this.doc=e,this.containerDiv=t,this.inlineSpceG=i,this.showZINCHeader=n,this.placementId=r,this.geckoLogger=h.getLogger("CornerSlotTitleHolder"),this.geckoLogger.logDebug("appending title to corner slot unit"),this.designCaption()}return e.prototype.showTitle=function(){var e=this.adsbyzincspan;e&&this.showZINCHeader&&(this.geckoLogger.logInfo("corner slot title shown."),e.style.display="inline-block")},e.prototype.hideTitleDiv=function(){this.adTitleDiv&&(this.geckoLogger.logInfo("corner slot title hidden."),this.adTitleDiv.style.display="none")},e.prototype.getTitleDiv=function(){return this.adTitleDiv},e.prototype.designCaption=function(){this.adTitleDiv=f.Util.createDivElement(this.doc,"corner-slot-ad-header-div-"+this.placementId),this.adTitleDiv.style.cursor="pointer",this.adTitleDiv.style.pointerEvents="none",this.adTitleDiv.style.lineHeight="1",this.showZINCHeader&&(this.adsbyzincspan=f.Util.createSpanElement(this.doc,"corner-slot-ad-header-span-"+this.placementId),this.adsbyzincspan.innerHTML="Ads by ZEDO",this.adsbyzincspan.className="zg-cornerSlotAdsByZINCClass",this.adTitleDiv.appendChild(this.adsbyzincspan),this.containerDiv.insertBefore(this.adTitleDiv,this.containerDiv.childNodes[0]))},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/CornerSlotTitleHolder.ts","/src/renderer/inarticle")},{"../../logging/LogManager":58,"../../utility/DOM":266,_process:8,buffer:4,timers:9}],109:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=function(){function e(){}return e.positionDiv=function(e,t,i,n,r){this.savedProperties=i,this.behaviorCount=i.Behaviour.adCount,r&&1===r&&(e.IsViewabilityImpressionFired=!1);var o,a=t.scrollY||t.pageYOffset,s=i&&i.Behaviour.positionUnit?i.Behaviour.positionUnit:0;if(h.isElementOutViewport(e.PlacementElement,t))this.adInview=1,e.dynamicElements&&e.dynamicElements.length>0&&document.getElementById(e.dynamicElements[0].id)&&(o=this.getBestDiv(e,a,t),o&&h.isElementOutViewport(e.PlacementElement,t)&&(this.previousNode.indexOf(o)===-1&&this.previousNode.length<=s&&1===n&&(this.previousNode.push(o),this.previousScroll=a,this.shiftUnit(e,i,o)),this.previousNode.indexOf(o)>-1&&0!==n&&this.shiftUnit(e,i,o),this.sorted=this.previousNode.sort(function(e,t){var i=e.id.split("_"),n=t.id.split("_");return parseInt(i[4],10)>parseInt(n[4],10)?1:-1}),0===n&&(this.sorted[0]===e.PlacementElement&&this.resetUnitPosition(e),this.shifUnitHideWhiteSpaceBelow(e,o))));else if(0===this.adInview){this.adInview=1;var l=0,d=this;l=setTimeout(function(){if(clearTimeout(l),e.dynamicElements&&e.dynamicElements.length>0){var t=e.dynamicElements[0].offsetTop;e.PlacementElement.style.position="absolute",e.PlacementElement.style.top=t+"px",d.previousNode.push(e.dynamicElements[0]),d.previousScroll=a,d.sorted=d.previousNode.sort(),e.dynamicElements[0].style.width=i.InlineSpaceProperties.width+"px",e.dynamicElements[0].style.height=e.PlacementElement.style.height}},200)}},e.callPositionDiv=function(e,t,i){this.positionDiv(e,t,this.savedProperties,i)},e.getBestDiv=function(e,t,i){
var n;if(e.dynamicElements&&e.dynamicElements.length>0){if(0===this.previousScroll&&(n=h.findClosest(e.dynamicElements,t,999999999,!1,t)),this.sorted.length>0){var r=i.innerHeight,o=document.body.getBoundingClientRect(),a=e.PlacementElement.getBoundingClientRect(),s=a.top-o.top;this.topBufferPosition=s+a.height+r,t<this.previousScroll&&(this.topBufferPosition=s-r),t+r>this.topBufferPosition&&(n=h.findClosest(e.dynamicElements,this.topBufferPosition,999999999,!1,t));for(var l=0;l<this.sorted.length;l++)h.isElementOutViewport(this.sorted[l],i)||(n=this.sorted[l],this.topBufferPosition=this.sorted[l].offsetTop+this.sorted[l].offsetHeight+r)}return n}},e.shiftUnit=function(e,t,i){e.PlacementElement.style.position="absolute",i.style.width=t.InlineSpaceProperties.width+"px",i.style.height=e.PlacementElement.style.height;var n=i.offsetTop;e.PlacementElement.style.top=n+"px"},e.resetUnitPosition=function(e){e.PlacementElement.style.position="",e.PlacementElement.style.top="",this.sorted[0].style.width="",this.sorted[0].style.height="",this.sorted[0]===e.PlacementElement&&e.dynamicElements&&e.dynamicElements.length>0&&h.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)},e.shifUnitHideWhiteSpaceBelow=function(e,t){for(var i=0;i<this.sorted.length;i++){if(this.sorted[i]===t&&this.sorted[i].clientHeight>0){var n=t.offsetTop;e.PlacementElement.style.top=n+"px"}var r=t.id.split("_"),o=this.sorted[i].id.split("_");i>0&&parseInt(o[4],10)>parseInt(r[4],10)&&(this.sorted[i].style.width="",this.sorted[i].style.height="")}},e.hideNodes=function(e,t,i){var n=this,r=9999,o=0,a={checkPosition:function(){var s=n;o=setTimeout(function(){if(clearTimeout(o),!e.IsAdFullscreen)for(var n=0;n<s.sorted.length;n++){if(h.isElementOutViewport(e.PlacementElement,t)&&(r=parseInt(s.sorted[n].id.split("_")[4],10),s.sorted[n].clientHeight>0)){var l=s.sorted[n].offsetTop;e.PlacementElement.style.top=l+"px"}var d=parseInt(s.sorted[n].id.split("_")[4],10);d>r&&h.isElementOutViewport(s.sorted[n],t)&&s.sorted[n].clientHeight>0&&(s.sorted[n].style.width="",s.sorted[n].style.height=""),(!h.isElementOutViewport(s.sorted[0],t)&&s.sorted.length>1||s.sorted.length>1&&"0px"===e.PlacementElement.style.height&&e.StarStateContext.UniverStateContext.IsAdReloaded)&&(t.removeEventListener("scroll",a.checkPosition),e.StarStateContext.UniverStateContext.ReloadCount>=1&&"0px"===e.PlacementElement.style.height?(e.PlacementElement.style.position="",e.PlacementElement.style.top="",e.dynamicElements&&e.dynamicElements.length>0&&h.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)):(e.PlacementElement.style.position="",e.PlacementElement.style.top="",e.dynamicElements&&e.dynamicElements.length>0&&h.removeUnwantedNodes(e.PlacementElement,e.dynamicElements))),(h.isElementOutViewport(s.sorted[0],t)&&1===s.sorted.length||1===s.sorted.length&&"0px"===e.PlacementElement.style.height&&e.StarStateContext.UniverStateContext.IsAdReloaded)&&(t.removeEventListener("scroll",a.checkPosition),e.StarStateContext.UniverStateContext.ReloadCount>=1?1===i&&(e.PlacementElement.style.position="",e.PlacementElement.style.top="",e.dynamicElements&&e.dynamicElements.length>0&&h.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)):(e.PlacementElement.style.position="",e.PlacementElement.style.top="",e.dynamicElements&&e.dynamicElements.length>0&&h.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)))}},100)}};0===this.scrollEventAdded&&(this.scrollEventAdded=1,t.addEventListener("scroll",a.checkPosition)),a.checkPosition()},e.adjustHeight=function(e){for(var t=0;t<this.sorted.length;t++)h.isElementOutViewport(this.sorted[t],window)||(this.sorted[t].style.height=e)},e}();f.previousScroll=0,f.adInview=0,f.previousNode=[],f.sorted=[],f.topBufferPosition=0,f.scrollEventAdded=0,f.behaviorCount=0,t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/DynamicPosition.ts","/src/renderer/inarticle")},{"../../utility/Utility":275,_process:8,buffer:4,timers:9}],110:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./InArticleButtonManager"),f=e("./../../config/ConfigHolder"),g=e("./../../utility/SubscribableCallback"),m=e("./../../logging/LogManager"),y=e("es6-promise"),b=e("../../detector/OsType"),v=e("./../../utility/BrowserUtils"),P=function(){function e(e){this.placementId=e,this.CLOSEBUTTON="closeButton_",this.FULLSCREENBUTTON="fullScreenButton_",this.MUTEBUTTON="muteButton_",this.LBMUTEBUTTON="lbmuteButton_",this.UNMUTEBUTTON="unmuteButton_",this.LBUNMUTEBUTTON="lbunmuteButton_",this.LBFULLSCREENBUTTON="lbfullScreenButton_",this.LBCLOSEBUTTON="lbclosebutton_",this.FULLSCREENCLOSEBUTTON="fullScreenCloseButton_",this.REPLAYBUTTON="replayButton_",this.LBREPLAYBUTTON="lbreplayButton_",this.MOUSEOVERBUTTON="mouseOver_",this.CLICKTOFULLSCREEN="ClickToFullScreen_",this.CLICKTOEXITFULLSCREEN="ClickToExitFullScreenText_",this.ADLABELBUTTON="adLabelButton",this.CTABUTTON="ctaButton_",this.closeCallback=new g,this.replayCallback=new g,this.muteCallback=new g,this.lbCloseCallback=new g,this.geckoLogger=m.getLogger("IAButtonListener"),this.fullscreenState=!1,this.CLOSEBUTTON+=e,this.FULLSCREENBUTTON+=e,this.MUTEBUTTON+=e,this.LBMUTEBUTTON+=e,this.UNMUTEBUTTON+=e,this.LBUNMUTEBUTTON+=e,this.LBFULLSCREENBUTTON+=e,this.LBCLOSEBUTTON+=e,this.FULLSCREENCLOSEBUTTON+=e,this.REPLAYBUTTON+=e,this.LBREPLAYBUTTON+=e,this.MOUSEOVERBUTTON+=e,this.CLICKTOFULLSCREEN+=e,this.CLICKTOEXITFULLSCREEN+=e,this.ADLABELBUTTON+=e,this.CTABUTTON+=e}return e.prototype.addButtonsToPlayer=function(e,t,i,n,r,o){var a=this;v.getOS()!==b.Android&&v.getOS()!==b.WindowsPhone&&v.getOS()!==b.IOS||(i.soundIcon=1,i.fullscreenIcon=1);var s={delaycloseButtonBy:i.delaycloseButtonBy?i.delaycloseButtonBy:0===i.delaycloseButtonBy?0:3,removeClose:i.removeClose?i.removeClose:0,fullScreenIcon:i.fullscreenIcon?i.fullscreenIcon:0,ClicksOnlyOnAd:i.ClicksOnlyOnAd?i.ClicksOnlyOnAd:0,soundIcon:i.soundIcon?i.soundIcon:0};return this.iAbuttonManager=new h(e,s,t,this.placementId),new y.Promise(function(t,s){var l=a.getLBCloseBtnConfig();r&&(l=a.getCornerSlotCloseBtnConfig()),y.Promise.all([a.iAbuttonManager.addFullscreenButton(a.getFullscreenButtonConfig(i)),a.iAbuttonManager.addAdLabelButton(a.getAdLabelButtonConfig(i)),a.iAbuttonManager.addLBFullscreenButton(a.getLBFullScrnBtnConfig()),a.iAbuttonManager.addLBCloseButton(l,function(){a.lbCloseCallback.notify()}),a.iAbuttonManager.addCloseButton(a.getCloseButtonConfig(),function(){a.closeCallback.notify(!0)}),a.iAbuttonManager.addReplayButton(a.getReplayBtnConfig(),function(){a.replayCallback.notify(),a.hideReplayButton()}),a.iAbuttonManager.addLBReplayButton(a.getLBReplayBtnConfig(),function(){a.replayCallback.notify(),a.hideLBReplayButton()}),a.iAbuttonManager.addClickToFullScreenButton(a.getClickToFullScreenButtonConfig()),a.iAbuttonManager.addMouseOverButton(a.getMouseOverButtonConfig()),a.iAbuttonManager.addMuteButton(a.getMuteButtonConfig(),function(){a.muteCallback.notify(!1)}),a.iAbuttonManager.addLBMuteButton(a.getLBMuteButtonConfig(),function(){a.muteCallback.notify(!1)}),a.iAbuttonManager.addFullscreenCloseButton(a.getFullscreenCloseButtonConfig()),a.iAbuttonManager.addUnmuteButton(a.getunMuteButtonConfig(),function(){a.muteCallback.notify(!0)}),a.iAbuttonManager.addLBUnmuteButton(a.getLBunMuteButtonConfig(),function(){a.muteCallback.notify(!0)}),a.iAbuttonManager.addClickToExitFullscreenTextButton(a.getClickToExitFullScreenTextButtonConfig()),a.iAbuttonManager.addCTAButton(a.getCTAButtonConfig(i.CTA),function(){a.ctacallback(o)})]).then(function(){e.hideButton(a.CLICKTOEXITFULLSCREEN),e.hideButton(a.CLOSEBUTTON),e.showButton(a.CLICKTOFULLSCREEN),e.hideButton(a.LBCLOSEBUTTON),e.hideButton(a.LBFULLSCREENBUTTON),e.hideButton(a.FULLSCREENCLOSEBUTTON),e.hideButton(a.REPLAYBUTTON),e.hideButton(a.LBREPLAYBUTTON),e.hideButton(a.LBMUTEBUTTON),e.hideButton(a.LBUNMUTEBUTTON),a.iAbuttonManager.impressionOccured(),a.iAbuttonManager.updateMuteState(n,!0),t()})["catch"](function(){t()})})},e.prototype.getButtonIds=function(){return[this.CLOSEBUTTON,this.FULLSCREENBUTTON,this.LBFULLSCREENBUTTON,this.LBCLOSEBUTTON,this.CLOSEBUTTON,this.REPLAYBUTTON,this.LBREPLAYBUTTON,this.CLICKTOEXITFULLSCREEN,this.MOUSEOVERBUTTON,this.MUTEBUTTON,this.FULLSCREENCLOSEBUTTON,this.UNMUTEBUTTON,this.CLICKTOFULLSCREEN,this.ADLABELBUTTON,this.LBMUTEBUTTON,this.LBUNMUTEBUTTON,this.CTABUTTON]},Object.defineProperty(e.prototype,"CloseCallback",{get:function(){return this.closeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LBCloseCallback",{get:function(){return this.lbCloseCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReplayCallback",{get:function(){return this.replayCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MuteCallback",{get:function(){return this.muteCallback},enumerable:!0,configurable:!0}),e.prototype.updateFullScreen=function(e){this.iAbuttonManager?this.iAbuttonManager.updateFullScreenState(e):this.geckoLogger.logError("updateFullScreen called before button initalized")},e.prototype.updateMuteState=function(e,t){this.iAbuttonManager?this.iAbuttonManager.updateMuteState(e,t):this.geckoLogger.logError("updateMuteState called before button initalized")},e.prototype.updateMuteStateLB=function(e){this.iAbuttonManager?this.iAbuttonManager.updateMuteStateLB(e):this.geckoLogger.logError("updateMuteStateLB called before button initalized")},e.prototype.showLBButtons=function(){this.iAbuttonManager?this.iAbuttonManager.showInArticleLBButtons():this.geckoLogger.logError("showInArticleLBButtons called before button initalized")},e.prototype.hideLBButtons=function(){this.iAbuttonManager?this.iAbuttonManager.hideInArticleLBButtons(this.fullscreenState):this.geckoLogger.logError("hideLBButtons called before button initalized")},e.prototype.showFullscreenCloseButton=function(){this.iAbuttonManager?this.iAbuttonManager.showFullscreenCloseButton():this.geckoLogger.logError("showFullscreenButton called before button initalized")},e.prototype.hideFullscreenCloseButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideFullscreenCloseButton():this.geckoLogger.logError("hideFullscreenButton called before button initalized")},e.prototype.showInArticleInlineButtons=function(){this.iAbuttonManager?this.iAbuttonManager.showInArticleInlineButtons():this.geckoLogger.logError("showInArticleInlineButtons called before button initalized")},e.prototype.showInArticleInlineCloseButton=function(){this.iAbuttonManager?this.iAbuttonManager.showInArticleInlineCloseButton():this.geckoLogger.logError("showInArticleInlineButtons called before button initalized")},e.prototype.hideInArticleInlineCloseButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideInArticleInlineCloseButton():this.geckoLogger.logError("hideInArticleInlineCloseButton called before button initalized")},e.prototype.showInArticleLBCloseButton=function(){this.iAbuttonManager?this.iAbuttonManager.showInArticleLBCloseButton():this.geckoLogger.logError("showInArticleLBCloseButton called before button initalized")},e.prototype.hideInArticleLBCloseButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideInArticleLBCloseButton():this.geckoLogger.logError("hideInArticleLBCloseButton called before button initalized")},e.prototype.hideInarticleInlineButtons=function(e){this.iAbuttonManager&&this.iAbuttonManager.hideInarticleInlineButtons(e)},e.prototype.showInArticleLBButtons=function(){this.iAbuttonManager?this.iAbuttonManager.showInArticleLBButtons():this.geckoLogger.logError("showInArticleLBButtons called before button initalized")},e.prototype.hideInArticleLBButtons=function(e){this.iAbuttonManager?this.iAbuttonManager.hideInArticleLBButtons(e):this.geckoLogger.logError("hideInArticleLBButtons called before button initalized")},e.prototype.hideFullScreenButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideFullScreenButton():this.geckoLogger.logError("hideFullScreenButton called before button initalized")},e.prototype.hideLBFullScreenButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideLBFullScreenButton():this.geckoLogger.logError("hideLBFullScreenButton called before button initalized")},e.prototype.hideSoundButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideSoundButton():this.geckoLogger.logError("hideSoundButton called before button initalized")},e.prototype.showClickToExitFullscreenTextButton=function(){this.iAbuttonManager?this.iAbuttonManager.showClickToExitFullscreenTextButton():this.geckoLogger.logError("showClickToExitFullscreenTextButton called before button initalized")},e.prototype.hideClickToExitFullscreenTextButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideClickToExitFullscreenTextButton():this.geckoLogger.logError("hideClickToExitFullscreenTextButton called before button initalized")},e.prototype.showRollOverForSoundTextButton=function(){this.iAbuttonManager?this.iAbuttonManager.showRollOverForSoundTextButton():this.geckoLogger.logError("showRollOverForSoundTextButton called before button initalized")},e.prototype.hideRollOverForSoundTextButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideRollOverForSoundTextButton():this.geckoLogger.logError("hideRollOverForSoundTextButton called before button initalized")},e.prototype.hideClickToFullscreenButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideClickToFullscreenButton():this.geckoLogger.logError("hideClickToFullscreenButton called before button initalized")},e.prototype.showReplayButton=function(){this.iAbuttonManager?this.iAbuttonManager.showReplayButton():this.geckoLogger.logError("showReplayButton called before button initalized")},e.prototype.showLBReplayButton=function(){this.iAbuttonManager?this.iAbuttonManager.showLBReplayButton():this.geckoLogger.logError("showLBReplayButton called before button initalized")},e.prototype.hideReplayButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideReplayButton():this.geckoLogger.logError("hideReplayButton called before button initalized")},e.prototype.hideLBReplayButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideLBReplayButton():this.geckoLogger.logError("hideLBReplayButton called before button initalized")},e.prototype.hideCTAButton=function(){this.iAbuttonManager?this.iAbuttonManager.hideCTAButton():this.geckoLogger.logError("hideCTAButton called before button initalized")},e.prototype.showCTAButton=function(){this.iAbuttonManager?this.iAbuttonManager.showCTAButton():this.geckoLogger.logError("showCTAButton called before button initalized")},e.prototype.cleanUpButtons=function(e){this.iAbuttonManager?this.iAbuttonManager.cleanUpButtons(e):this.geckoLogger.logError("cleanUpButtons called before button initalized")},e.prototype.ctacallback=function(e){var t=window,i=document,n=e.clickTrackers;if(""!==n[0])for(var r=[],o=0,a=n.length;o<a;o++)"undefined"!==n[o]&&(r[o]=i.createElement("img"),r[o].src=n[o]);""!==e.clickThrough&&"undefined"!==e.clickThrough&&t.open(e.clickThrough,"_blank")},e.prototype.getFullscreenButtonPadding=function(e){var t={buttonHpadding:"45px",buttonVpadding:"10px",buttonWidth:"30px",buttonHeight:"30px"};return e.Sanook&&(e.soundIcon=1),1===e.soundIcon||2===e.soundIcon?(t.buttonHpadding="45px",t.buttonVpadding="10px",t.buttonWidth="30px",t.buttonHeight="30px"):0===e.soundIcon&&(t.buttonHpadding="10px",t.buttonVpadding="10px",t.buttonWidth="30px",t.buttonHeight="30px"),t},e.prototype.getFullscreenButtonConfig=function(e){var t=this.getFullscreenButtonPadding(e);return{buttonId:this.FULLSCREENBUTTON,buttonImgUrl:f.getInbannerFullscreenBtneUrl(),buttonClassName:"fullscreen",buttonPosition:"bottomright",buttonHpadding:t.buttonHpadding,buttonVpadding:t.buttonVpadding,buttonWidth:t.buttonWidth,buttonHeight:t.buttonHeight}},e.prototype.getAdLabelButtonConfig=function(e){var t={buttonHpadding:"0px",buttonVpadding:"10px",buttonWidth:"34px",buttonHeight:"22px"};return this.thumbnailStrip=e.ThumbnailStrip,e.ThumbnailStrip&&(t.buttonWidth="0px",t.buttonHeight="0px"),{buttonId:this.ADLABELBUTTON,buttonImgUrl:f.getInarticleAdLabelBtn(),buttonClassName:"label",buttonPosition:"topleft",buttonHpadding:t.buttonHpadding,buttonVpadding:t.buttonVpadding,buttonWidth:t.buttonWidth,buttonHeight:t.buttonHeight}},e.prototype.getLBFullScrnBtnConfig=function(){return{buttonId:this.LBFULLSCREENBUTTON,buttonImgUrl:f.getInarticleFullScrnBtnLB(),buttonClassName:"fullscreen",buttonPosition:"bottomright",buttonHpadding:"0px",buttonVpadding:"0px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getLBCloseBtnConfig=function(){return{buttonId:this.LBCLOSEBUTTON,buttonImgUrl:f.getInarticleCloseBtnLB(),buttonClassName:"lbclose",buttonPosition:"topright",buttonHpadding:"0px",buttonVpadding:"12px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getCornerSlotCloseBtnConfig=function(){return{buttonId:this.LBCLOSEBUTTON,buttonImgUrl:f.getInarticleCloseBtnLB(),buttonClassName:"lbclose",buttonPosition:"topright",buttonHpadding:"0px",buttonVpadding:"8px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getCloseButtonConfig=function(){return{buttonId:this.CLOSEBUTTON,buttonImgUrl:f.getInbannerCloseBtneUrl(),buttonClassName:"close",buttonPosition:"topright",buttonHpadding:"10px",buttonVpadding:"10px",buttonWidth:"24px",buttonHeight:"24px"}},e.prototype.getReplayBtnConfig=function(){return{buttonId:this.REPLAYBUTTON,buttonImgUrl:f.getInarticleReplayBtn(),buttonClassName:"",buttonPosition:"bottomright",buttonHpadding:"10px",buttonVpadding:"30px",buttonWidth:"40px",buttonHeight:"40px"}},e.prototype.getLBReplayBtnConfig=function(){return{buttonId:this.LBREPLAYBUTTON,buttonImgUrl:f.getInarticleReplayBtn(),buttonClassName:"",buttonPosition:"bottomright",buttonHpadding:"5px",buttonVpadding:"5px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getClickToFullScreenButtonConfig=function(){return{buttonId:this.CLICKTOFULLSCREEN,buttonImgUrl:f.getInaticleClickToFullscreenBtnUrl(),buttonClassName:"clickToFullScreen",buttonPosition:"bottomleft",buttonHpadding:"10px",buttonVpadding:"30px",buttonWidth:"202px",buttonHeight:"30px"}},e.prototype.getMouseOverButtonConfig=function(){return{buttonId:this.MOUSEOVERBUTTON,buttonImgUrl:f.getInaticleRolloverToSoundBtnUrl(),buttonClassName:"rollover",buttonPosition:"bottomleft",buttonHpadding:"10px",buttonVpadding:"30px",buttonWidth:"154px",buttonHeight:"30px"}},e.prototype.getMuteButtonConfig=function(){return{buttonId:this.MUTEBUTTON,buttonImgUrl:f.getInbannerMuteBtneUrl(),buttonClassName:"mute",buttonPosition:"bottomright",buttonHpadding:"10px",buttonVpadding:"10px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.getLBMuteButtonConfig=function(){return{buttonId:this.LBMUTEBUTTON,buttonImgUrl:f.getInbannerMuteBtneUrl(),buttonClassName:"lbmute",buttonPosition:"bottomright",buttonHpadding:"20px",buttonVpadding:"0px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getFullscreenCloseButtonConfig=function(){return{buttonId:this.FULLSCREENCLOSEBUTTON,buttonImgUrl:f.getInarticleFullScrnCloseBtnLB(),buttonClassName:"exit",buttonPosition:"topright",buttonHpadding:"10px",buttonVpadding:"20px",buttonWidth:"40px",buttonHeight:"40px"}},e.prototype.getunMuteButtonConfig=function(){return{buttonId:this.UNMUTEBUTTON,buttonImgUrl:f.getInbannerUnmuteBtneUrl(),buttonClassName:"sound",buttonPosition:"bottomright",buttonHpadding:"10px",buttonVpadding:"10px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.getLBunMuteButtonConfig=function(){return{buttonId:this.LBUNMUTEBUTTON,buttonImgUrl:f.getInbannerUnmuteBtneUrl(),buttonClassName:"lbsound",buttonPosition:"bottomright",buttonHpadding:"20px",buttonVpadding:"0px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getClickToExitFullScreenTextButtonConfig=function(){return{buttonId:this.CLICKTOEXITFULLSCREEN,buttonImgUrl:f.getClickToExitFullScreenTextButtonUrl(),buttonClassName:"exit",buttonPosition:"bottomright",buttonHpadding:"10px",buttonVpadding:"10px",buttonWidth:"184px",buttonHeight:"30px"}},e.prototype.getCTAButtonConfig=function(e){var t=Number(9*e.length+14),i={buttonHpadding:"38px",buttonVpadding:"10px",buttonWidth:t+"px",buttonHeight:"22px"};return this.thumbnailStrip&&(i.buttonHpadding="0px"),{buttonId:this.CTABUTTON,buttonImgUrl:'<div style="-webkit-border-radius: 3;-moz-border-radius: 3; border-radius: 3px; font-family: Arial; color: #ffffff; font-size: 14px; background: #000000; opacity: 0.5; filter: alpha(opacity=50); /* For IE8 and earlier */ padding: 2px 7px 2px 7px; width: fit-content; line-height: 18px;text-decoration: none;">'+e+"</div>",buttonClassName:"cta",buttonPosition:"topleft",buttonHpadding:i.buttonHpadding,buttonVpadding:i.buttonVpadding,buttonWidth:i.buttonWidth,buttonHeight:i.buttonHeight}},e.prototype.isFullscreen=function(){return this.geckoLogger.logInfo("isFullscreen retuned  with fullscreeState :"+this.fullscreenState),this.fullscreenState},e}();t.exports=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/IAButtonListener.ts","/src/renderer/inarticle")},{"../../detector/OsType":31,"./../../config/ConfigHolder":23,"./../../logging/LogManager":58,"./../../utility/BrowserUtils":264,"./../../utility/SubscribableCallback":274,"./InArticleButtonManager":113,_process:8,buffer:4,"es6-promise":5,timers:9}],111:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("../../utility/DOM"),g=e("../../utility/CSS"),m=e("../../utility/DefferedPromise"),y=function(){function e(e,t,i){this.doc=e,this.placementElement=t,this.placementId=i,this.geckoLogger=h.getLogger("IAcompanionHolder"),this.topBanner=new m,this.bottomBanner=new m,this.validCreativeFormats=["image/png","image/jpeg","image/gif","image/jpg","html"],this.geckoLogger.logDebug("adding companion to div")}return e.prototype.applycssforTopbanner=function(e,t){var i=".zg-topbanner{max-width:"+t+"px; width:"+t+"px;border:0;margin:auto;}";g.Util.addCSSRule(i,"",document,window)},e.prototype.applycssforBottombanner=function(e,t){var i=".zg-bottombanner{max-width:"+t+"px; width:"+t+"px;border:0;margin:auto;}";g.Util.addCSSRule(i,"",document,window)},e.prototype.createBottomBanner=function(e,t){this.geckoLogger.logDebug("Bottom Banner Present");var i=Math.ceil(e.height/e.width*t);this.applycssforBottombanner(i,t),this.spanbottomcontainer=f.Util.createSpanElement(this.doc,"spanbannerAd1-"+this.placementId),"html"===e.type?(i=Math.ceil(e.height),this.iframebottombanner=f.Util.createIframeElement(this.doc,"iframebannerAd1-"+this.placementId),this.spanbottomcontainer.appendChild(this.iframebottombanner),this.iframebottombanner.src=e.src,this.iframebottombanner.height=i.toString(),this.iframebottombanner.className="zg-bottombanner",this.iframebottombanner.scrolling="no",this.iframebottombanner.style.height=i+"px",this.iframebottombanner.style.maxHeight=i+"px",this.companionBottomDiv.style.border="1px solid #e1e8ed",this.companionBottomDiv.style.borderWidth="0 1px 1px",this.companionBottomDiv.style.borderRadius="0 0 4px 4px",this.placementElement.style.paddingBottom="10px",i+=10):(this.imagebottombanner=f.Util.createImageElement(this.doc,"bannerAd1-"+this.placementId),this.spanbottomcontainer.appendChild(this.imagebottombanner),this.imagebottombanner.src=e.src,this.imagebottombanner.height=i,this.imagebottombanner.alt="",this.imagebottombanner.className="zg-bottombanner",this.imagebottombanner.style.height=i+"px",this.imagebottombanner.style.maxHeight=i+"px",e.clicktracker&&(this.imagebottombanner.onclick=function(){window.open(e.clicktracker,"_blank")},this.imagebottombanner.style.cursor="pointer")),this.spanbottomcontainer.style.display="inline-block",this.spanbottomcontainer.style.top="2px",this.spanbottomcontainer.style.width=t+"px",this.spanbottomcontainer.style.position="relative",this.companionBottomDiv.appendChild(this.spanbottomcontainer),this.companionBottomDiv.style.display="",this.bottomBannerHeight=i},e.prototype.createTopBanner=function(e,t){this.geckoLogger.logDebug("Top Banner Present");var i=Math.ceil(e.height/e.width*t);this.applycssforTopbanner(i,t),this.spantopcontainer=f.Util.createSpanElement(this.doc,"spanbannerAd3-"+this.placementId),"html"===e.type?(i=Math.ceil(e.height),this.iframetopbanner=f.Util.createIframeElement(this.doc,"iframebannerAd3-"+this.placementId),this.spantopcontainer.appendChild(this.iframetopbanner),this.iframetopbanner.src=e.src,this.iframetopbanner.height=i.toString(),this.iframetopbanner.className="zg-topbanner",this.iframetopbanner.scrolling="no",this.iframetopbanner.style.height=i+"px",this.iframetopbanner.style.maxHeight=i+"px",this.placementElement.style.paddingBottom="10px",i+=10):(this.imagetopbanner=f.Util.createImageElement(this.doc,"bannerAd3-"+this.placementId),this.spantopcontainer.appendChild(this.imagetopbanner),this.imagetopbanner.src=e.src,this.imagetopbanner.height=i,this.imagetopbanner.alt="",this.imagetopbanner.className="zg-topbanner",this.imagetopbanner.style.height=i+"px",this.imagetopbanner.style.maxHeight=i+"px",e.clicktracker&&(this.imagetopbanner.onclick=function(){window.open(e.clicktracker,"_blank")},this.imagetopbanner.style.cursor="pointer")),this.spantopcontainer.style.display="inline-block",this.spantopcontainer.style.bottom="2px",this.spantopcontainer.style.width=t+"px",this.spantopcontainer.style.position="relative",this.companionTopDiv.appendChild(this.spantopcontainer),this.companionTopDiv.style.display="",this.topBannerHeight=i},e.prototype.hideCompanionbanner=function(){var e=this;this.topBanner.getPromise().then(function(){e.companionTopDiv.style.display="none"}),this.bottomBanner.getPromise().then(function(){e.companionBottomDiv.style.display="none"})},e.prototype.showCompanionbanner=function(){var e=this;this.topBanner.getPromise().then(function(){e.companionTopDiv.style.display=""}),this.bottomBanner.getPromise().then(function(){e.companionBottomDiv.style.display=""})},e.prototype.getcompanionheight=function(){var e=0;return this.topBannerHeight>0&&(e+=this.topBannerHeight),this.bottomBannerHeight>0&&(e+=this.bottomBannerHeight),e},e.prototype.getBottomDiv=function(){return this.companionBottomDiv=f.Util.createDivElement(this.doc,"adcomp-bottom-div-"+this.placementId),this.companionBottomDiv.style.display="none",this.companionBottomDiv},e.prototype.getTopDiv=function(){return this.companionTopDiv=f.Util.createDivElement(this.doc,"adcomp-top-div-"+this.placementId),this.companionTopDiv.style.display="none",this.companionTopDiv},e.prototype.createCompanionBanner=function(e,t){e.bottombanner&&(this.bottomBanner.resolve(),this.createBottomBanner(e.bottombanner,t)),e.topbanner&&(this.topBanner.resolve(),this.createTopBanner(e.topbanner,t))},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/IAcompanionHolder.ts","/src/renderer/inarticle")},{"../../logging/LogManager":58,"../../utility/CSS":265,"../../utility/DOM":266,"../../utility/DefferedPromise":267,_process:8,buffer:4,timers:9}],112:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../display/HtmlHelper"),f=e("../../logging/LogManager"),g=e("../../utility/DOM"),m=function(){function e(e,t,i,n,r,o,a){this.doc=e,this.placementElement=t,this.containerDiv=i,this.inlineSpceG=n,this.showZINCHeader=r,this.sanook=o,this.placementId=a,this.geckoLogger=f.getLogger("IAtitleHolder"),this.htmlHelper=new h;var s=e.getElementById("ad-header-div-"+this.placementId);s&&s.remove(),this.geckoLogger.logDebug("appending title to div")}return e.prototype.designCaption=function(){this.adTitleDiv=g.Util.createDivElement(this.doc,"ad-header-div-"+this.placementId),this.showZINCHeader&&!this.sanook?(this.adsbyzincspan=g.Util.createSpanElement(this.doc,"ad-header-span-"+this.placementId),this.adsbyzincspan.className="zg-adsByZINCClass",this.adTitleDiv.appendChild(this.adsbyzincspan),this.placementElement.insertBefore(this.adTitleDiv,this.placementElement.childNodes[0])):(this.advertisementDiv=g.Util.createDivElement(this.doc,"ad-footer-div-"+this.placementId),this.advertisementspan=g.Util.createSpanElement(this.doc,"ad-footer-span-"+this.placementId),this.advertisementspan.className="zg-advertisementClass",this.advertisementDiv.appendChild(this.advertisementspan),this.placementElement.appendChild(this.advertisementDiv))},e.prototype.exhibitTitle=function(){var e=this.doc.getElementById("ad-header-div-"+this.placementId);e&&(e.style.display="block");var t=this.showZINCHeader&&!this.sanook?"Ads by ZEDO ":"Advertisement ";this.showTitle(t)},e.prototype.showTitle=function(e){var t=this.showZINCHeader&&!this.sanook?this.adsbyzincspan:this.advertisementspan;t&&this.showZINCHeader&&(this.geckoLogger.logInfo("title shown."),t.style.display="block",t.innerHTML=e)},e.prototype.hideTitle=function(){var e=this.sanook?this.advertisementspan:this.adsbyzincspan;e&&(this.geckoLogger.logInfo("title Hidden."),e.style.display="none")},e.prototype.getTitleDiv=function(){return this.adTitleDiv},e.prototype.getFooterDiv=function(){return this.advertisementDiv},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/IAtitleHolder.ts","/src/renderer/inarticle")},{"../../logging/LogManager":58,"../../utility/DOM":266,"../display/HtmlHelper":102,_process:8,buffer:4,timers:9}],113:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("es6-promise"),g=e("../../utility/DefferedPromise"),m=e("../../logging/LogManager");!function(e){e[e.LEAVEBEHIND=0]="LEAVEBEHIND",e[e.INLINE=1]="INLINE"}(h||(h={}));var y="vpaid",b=function(){function e(e,t,i,n){this.configurator=e,this.buttonManagerConfig=t,this.adType=i,this.placementId=n,this.geckoLogger=m.getLogger("ButtonManager"),this.isFullscreen=!1,this.id={},this.fullscreenflag=!1,this.muted=!1,this.soundIconPromise=new g,this.adLabelPromise=new g,this.fullscreenIconPromise=new g,this.mouseOverIconPromise=new g,this.clickToFullScreenIconPromise=new g,this.muteIconPromise=new g,this.delayClosePromise=new g,this.clickOnlyAdPromise=new g,this.removeClosePromise=new g,this.lbFullscreenPromise=new g,this.buttonState=h.INLINE,0!==t.soundIcon?this.muteIconPromise.resolve():this.muteIconPromise.reject(),i=i.toLowerCase(),1!==t.fullScreenIcon&&1!==t.ClicksOnlyOnAd||i===y?this.fullscreenIconPromise.reject():this.fullscreenIconPromise.resolve(),1!==t.fullScreenIcon&&1!==t.ClicksOnlyOnAd&&0!==t.fullScreenIcon||i===y?this.lbFullscreenPromise.reject():this.lbFullscreenPromise.resolve(),0===t.fullScreenIcon&&1!==t.ClicksOnlyOnAd&&i!==y?this.clickToFullScreenIconPromise.resolve():this.clickToFullScreenIconPromise.reject(),0===t.soundIcon&&i!==y?this.mouseOverIconPromise.resolve():this.mouseOverIconPromise.reject(),this.adLabelPromise.resolve(),0===t.removeClose?this.removeClosePromise.resolve():this.removeClosePromise.reject(),1===t.ClicksOnlyOnAd?this.clickOnlyAdPromise.resolve():this.clickOnlyAdPromise.reject()}return e.prototype.addMuteButton=function(e,t){var i=this,n=window,r="muteButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.muteIconPromise.getPromise().then(function(){i.muteBtnId=e.buttonId,n[r]=function(){try{void 0!==t&&t()}catch(e){console.error(e)}};var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],
e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.muteBtnId,l,d,c,u,p),o(!0)})["catch"](function(){o(!0)})})},e.prototype.addLBMuteButton=function(e,t){var i=this,n=window,r="lbMuteButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.muteIconPromise.getPromise().then(function(){i.lbMuteBtnId=e.buttonId,n[r]=function(){try{void 0!==t&&t()}catch(e){console.error(e)}};var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.lbMuteBtnId,l,d,c,u,p),o(!0)})["catch"](function(){o(!0)})})},e.prototype.updateMuteState=function(e,t){this.muted=e,t&&(this.toggleMuteButton(this.muted),this.showClickToFullscreenText())},e.prototype.updateMuteStateLB=function(e){this.muted=e,this.fullScreenStatus||(this.muted?(this.configurator.showButton(this.lbMuteBtnId),this.configurator.hideButton(this.lbUnmuteBtnId)):(this.configurator.showButton(this.lbUnmuteBtnId),this.configurator.hideButton(this.lbMuteBtnId)))},e.prototype.showClickToFullscreenTextDefault=function(){0===this.buttonManagerConfig.soundIcon||0!==this.buttonManagerConfig.ClicksOnlyOnAd||0!==this.buttonManagerConfig.fullScreenIcon||this.fullScreenStatus||this.configurator.showButton(this.clickToFullScreenBtnId)},e.prototype.toggleMouseOverTextButtons=function(){this.muted!==!1||0!==this.buttonManagerConfig.fullScreenIcon||this.fullScreenStatus?this.configurator.hideButton(this.clickToFullScreenBtnId):this.configurator.showButton(this.clickToFullScreenBtnId)},e.prototype.showClickToFullscreenText=function(){var e=this;this.toggleMouseOverTextButtons(),this.showClickToFullscreenTextDefault(),this.clickOnlyAdPromise.getPromise().then(function(){e.configurator.hideButton(e.clickToFullScreenBtnId)})},e.prototype.updateFullScreenState=function(e){this.fullScreenStatus=e},e.prototype.impressionOccured=function(){var e=this;setTimeout(function(){e.delayClosePromise.resolve()},1e3*this.buttonManagerConfig.delaycloseButtonBy)},e.prototype.addUnmuteButton=function(e,t){var i=this,n=window,r="unMuteButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.muteIconPromise.getPromise().then(function(){n[r]=function(){void 0!==t&&t()},i.unmuteBtnId=e.buttonId;var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.unmuteBtnId,l,d,c,u,p),o(!0)})["catch"](function(){o(!0)})})},e.prototype.addLBUnmuteButton=function(e,t){var i=this,n=window,r="lbUnMuteButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.muteIconPromise.getPromise().then(function(){n[r]=function(){void 0!==t&&t()},i.lbUnmuteBtnId=e.buttonId;var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.lbUnmuteBtnId,l,d,c,u,p),o(!0)})["catch"](function(){o(!0)})})},e.prototype.addCloseButton=function(e,t){var i=this,n=window,r="closeButtonHandler"+this.placementId;return new f.Promise(function(o,a){n[r]=function(){t&&t()},i.closeBtnId=e.buttonId;var s=e.buttonImgUrl,l=e.buttonClassName,d=(n[r],e.buttonPosition),c=e.buttonHpadding,u=e.buttonVpadding,p=e.buttonWidth,h=e.buttonHeight;i.configurator.addButton(s,l,r,i.closeBtnId,d,c,u,p,h),o(!0)})},e.prototype.addFullscreenButton=function(e,t){var i=this,n=window,r="fullScreenButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.fullscreenIconPromise.getPromise().then(function(){n[r]=function(){t&&t()},i.fullScrnBtnId=e.buttonId;var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.fullScrnBtnId,l,d,c,u,p),o(!0)})["catch"](function(){o(!1)})})},e.prototype.addAdLabelButton=function(e,t){var i=this;window;return new f.Promise(function(t,n){i.adLabelPromise.getPromise().then(function(){i.adLabelBtnId=e.buttonId;var n=e.buttonImgUrl,r=e.buttonClassName,o=e.buttonPosition,a=e.buttonHpadding,s=e.buttonVpadding,l=e.buttonWidth,d=e.buttonHeight;i.configurator.addButton(n,r,"",i.adLabelBtnId,o,a,s,l,d),t(!0)})["catch"](function(){t(!1)})})},e.prototype.addLBCloseButton=function(e,t){var i=this,n=window,r="lbCloseButtonHandler"+this.placementId;return new f.Promise(function(o,a){n[r]=function(){t&&t()},i.lbCloseBtnId=e.buttonId;var s=e.buttonImgUrl,l=e.buttonClassName,d=e.buttonPosition,c=e.buttonHpadding,u=e.buttonVpadding,p=e.buttonWidth,h=e.buttonHeight;i.configurator.addButton(s,l,r,i.lbCloseBtnId,d,c,u,p,h),o(!0)})},e.prototype.addLBFullscreenButton=function(e,t){var i=this,n=window,r="lbFullScreenButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.lbFullscreenPromise.getPromise().then(function(){if(i.adType!==y){n[r]=function(){t&&t()},i.lbFullScrnBtnId=e.buttonId;var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.lbFullScrnBtnId,l,d,c,u,p)}o(!0)})["catch"](function(){o(!1)})})},e.prototype.addFullscreenCloseButton=function(e,t){var i=this,n=window,r="lbFullScreenButtonHandler"+this.placementId;return new f.Promise(function(o,a){n[r]=function(){i.configurator.hideButton(i.fullScrnCloseBtnId),t&&t()},i.fullScrnCloseBtnId=e.buttonId;var s=e.buttonImgUrl,l=e.buttonClassName,d=(n[r],e.buttonPosition),c=e.buttonHpadding,u=e.buttonVpadding,p=e.buttonWidth,h=e.buttonHeight;i.configurator.addButton(s,l,r,i.fullScrnCloseBtnId,d,c,u,p,h),o(!0)})},e.prototype.addMouseOverButton=function(e,t){var i=this,n=window,r="mouseOverButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.mouseOverIconPromise.getPromise().then(function(){n[r]=function(){t&&t()},i.mouseOverBtnId=e.buttonId;var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.mouseOverBtnId,l,d,c,u,p),o(!0)})["catch"](function(){o(!1)})})},e.prototype.addClickToFullScreenButton=function(e,t){var i=this,n=window,r="ClickToFullScreenButtonHandler"+this.placementId;return new f.Promise(function(o,a){i.clickToFullScreenIconPromise.getPromise().then(function(){n[r]=function(){t&&t()},i.clickToFullScreenBtnId=e.buttonId;var a=e.buttonImgUrl,s=e.buttonClassName,l=(n[r],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;i.configurator.addButton(a,s,r,i.clickToFullScreenBtnId,l,d,c,u,p),o(!0)})["catch"](function(){o(!1)})})},e.prototype.addClickToExitFullscreenTextButton=function(e,t){var i=this,n=window,r="clickToExitFullScreenTextButton"+this.placementId;return new f.Promise(function(o,a){n[r]=function(){i.configurator.hideButton(i.fullScrnCloseBtnId),t&&t()},i.clickToExitFullScreenTextBtnId=e.buttonId;var s=e.buttonImgUrl,l=e.buttonClassName,d=(n[r],e.buttonPosition),c=e.buttonHpadding,u=e.buttonVpadding,p=e.buttonWidth,h=e.buttonHeight;i.configurator.addButton(s,l,r,i.clickToExitFullScreenTextBtnId,d,c,u,p,h),o(!0)})},e.prototype.addReplayButton=function(e,t){var i=this,n=window,r="replayButtonHandler"+this.placementId;return new f.Promise(function(o,a){n[r]=function(){t&&t()},i.replayBtnId=e.buttonId;var s=e.buttonImgUrl,l=e.buttonClassName,d=(n[r],e.buttonPosition),c=e.buttonHpadding,u=e.buttonVpadding,p=e.buttonWidth,h=e.buttonHeight;i.configurator.addButton(s,l,r,i.replayBtnId,d,c,u,p,h),o()})},e.prototype.addLBReplayButton=function(e,t){var i=this,n=window,r="replayButtonHandler"+this.placementId;return new f.Promise(function(o,a){n[r]=function(){t&&t()},i.lbreplayBtnId=e.buttonId;var s=e.buttonImgUrl,l=e.buttonClassName,d=(n[r],e.buttonPosition),c=e.buttonHpadding,u=e.buttonVpadding,p=e.buttonWidth,h=e.buttonHeight;i.configurator.addButton(s,l,r,i.lbreplayBtnId,d,c,u,p,h),o()})},e.prototype.addCTAButton=function(e,t){var i=this,n=window,r=(document,"ctaButton"+this.placementId);return new f.Promise(function(o,a){n[r]=function(){t&&t()},i.ctaBtnId=e.buttonId;var s=e.buttonImgUrl,l=e.buttonClassName,d=(n[r],e.buttonPosition),c=e.buttonHpadding,u=e.buttonVpadding,p=e.buttonWidth,h=e.buttonHeight;i.configurator.addTextButton(s,l,r,i.ctaBtnId,d,c,u,p,h),o(!0)})},e.prototype.showFullscreenCloseButton=function(){this.configurator.showButton(this.fullScrnCloseBtnId)},e.prototype.hideFullscreenCloseButton=function(){this.configurator.hideButton(this.fullScrnCloseBtnId)},e.prototype.showReplayButton=function(){this.configurator.showButton(this.replayBtnId)},e.prototype.showLBReplayButton=function(){this.configurator.showButton(this.lbreplayBtnId)},e.prototype.hideReplayButton=function(){this.configurator.hideButton(this.replayBtnId)},e.prototype.hideLBReplayButton=function(){this.configurator.hideButton(this.lbreplayBtnId)},e.prototype.showCTAButton=function(){this.configurator.showButton(this.ctaBtnId)},e.prototype.hideCTAButton=function(){this.configurator.hideButton(this.ctaBtnId)},e.prototype.showInArticleInlineButtons=function(){var e=this;this.buttonState=h.INLINE,this.configurator.showButton(this.fullScrnBtnId),this.configurator.showButton(this.adLabelBtnId),this.configurator.showButton(this.ctaBtnId),this.showClickToFullscreenText(),this.toggleMuteButton(this.muted),this.removeClosePromise.getPromise().then(function(){e.delayClosePromise.getPromise().then(function(){e.buttonState!==h.INLINE||e.fullScreenStatus||e.showInArticleInlineCloseButton()})}),this.toggleMuteButton(this.muted)},e.prototype.showInArticleInlineCloseButton=function(){1!==this.buttonManagerConfig.removeClose&&this.configurator.showButton(this.closeBtnId)},e.prototype.hideInArticleInlineCloseButton=function(){this.configurator.hideButton(this.closeBtnId)},e.prototype.showInArticleLBCloseButton=function(){1!==this.buttonManagerConfig.removeClose&&(this.configurator.hideButton(this.closeBtnId),this.configurator.showButton(this.lbCloseBtnId))},e.prototype.hideInArticleLBCloseButton=function(){this.configurator.hideButton(this.lbCloseBtnId)},e.prototype.hideInarticleInlineButtons=function(e){this.configurator.hideButton(this.muteBtnId),this.configurator.hideButton(this.unmuteBtnId),this.configurator.hideButton(this.adLabelBtnId),this.configurator.hideButton(this.ctaBtnId),this.configurator.hideButton(this.fullScrnBtnId),this.configurator.hideButton(this.mouseOverBtnId),this.configurator.hideButton(this.clickToFullScreenBtnId),e||this.configurator.hideButton(this.closeBtnId)},e.prototype.hideSoundButton=function(){this.configurator.hideButton(this.muteBtnId),this.configurator.hideButton(this.unmuteBtnId),this.configurator.hideButton(this.lbMuteBtnId),this.configurator.hideButton(this.lbUnmuteBtnId)},e.prototype.showInArticleLBButtons=function(){var e=this;this.buttonState=h.LEAVEBEHIND,this.removeClosePromise.getPromise().then(function(){e.delayClosePromise.getPromise().then(function(){e.buttonState!==h.LEAVEBEHIND||e.fullScreenStatus||e.configurator.showButton(e.lbCloseBtnId)})}),this.configurator.showButton(this.lbFullScrnBtnId)},e.prototype.hideInArticleLBButtons=function(e){this.configurator.hideButton(this.lbFullScrnBtnId),this.configurator.hideButton(this.lbCloseBtnId),e&&this.toggleMuteButton(this.muted)},e.prototype.hideFullScreenButton=function(){this.configurator.hideButton(this.fullScrnBtnId)},e.prototype.hideLBFullScreenButton=function(){this.configurator.hideButton(this.lbFullScrnBtnId)},e.prototype.toggleMuteButton=function(e){this.fullScreenStatus||(e?(this.configurator.showButton(this.muteBtnId),this.configurator.hideButton(this.unmuteBtnId),this.configurator.showButton(this.mouseOverBtnId)):(this.configurator.showButton(this.unmuteBtnId),this.configurator.hideButton(this.muteBtnId),this.configurator.hideButton(this.mouseOverBtnId)))},e.prototype.hideClickToFullscreenButton=function(){this.configurator.hideButton(this.clickToFullScreenBtnId)},e.prototype.showClickToExitFullscreenTextButton=function(){this.configurator.showButton(this.clickToExitFullScreenTextBtnId)},e.prototype.hideClickToExitFullscreenTextButton=function(){this.configurator.hideButton(this.clickToExitFullScreenTextBtnId)},e.prototype.showRollOverForSoundTextButton=function(){this.configurator.showButton(this.mouseOverBtnId)},e.prototype.hideRollOverForSoundTextButton=function(){this.configurator.hideButton(this.mouseOverBtnId)},e.prototype.cleanUpButtons=function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&this.configurator.deleteButton(e[t])},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/InArticleButtonManager.ts","/src/renderer/inarticle")},{"../../logging/LogManager":58,"../../utility/DefferedPromise":267,_process:8,buffer:4,"es6-promise":5,timers:9}],114:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("../../logging/LogManager"),g=e("../../utility/BrowserUtils"),m=e("../../utility/DefferedPromise"),y=e("./model/Behaviours"),b=e("./model/Behaviours"),v=e("./InArticleTrackers"),P=e("../../config/ConfigHolder"),w=e("./model/Behaviours"),S=e("./model/Behaviours"),C=e("../../detector/OsType"),A=e("./model/Behaviours"),I=e("./model/Behaviours"),T=e("./model/Behaviours"),B=e("./model/Behaviours"),k=e("./model/Behaviours"),E=e("./model/Behaviours"),L=e("./universe/states/StateContext"),D=e("./universe/states/BigBangState"),O=e("../../detector/MobilePlayableInteractionDetector"),R=e("../positioning/AdSlotPositionProperty"),N=e("../../utility/SubscribableCallback"),_=.1,x=!1,U=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,g,y){this.adCount=u,this.reloadCount=p,this.firstScrollPromise=g,this.alreadyScrolledPromise=y,this.geckoLogger=f.getLogger("InArticleRender"),this.behavior=new b.Behaviours,this.behaviorHolder=new w.BehavioursHolder,this.inlineGrabElePromise=new m,this.viewablityMonitorPromise=new m,this.iaViewablePromise=new m,this.impressionPromise=new m,this.clickPromise=new m,this.renderedPromise=new m,this.frdViewable=new m,this.adsToShowPromise=new N,this.initialAdPromise=new m,this.stopRendererPromise=new m,this.noDemandPromise=new m,this.adReadyPromise=new m,this.adOpportunityPromise=new m,this.missedOpportunityPromise=new m,this.placementElementPromise=new m,this.trackBrowserExitPromise=new m,this.scrollTriggerPromise=new m,this.completeSubscriber=new N,this.iaUnitClosedPromise=new m,this.stopreloadPromise=new m,this.reloadCallback=new N,this.playpausePromise=new N,this.inarticleopenedPromise=new m;var S=this.behaviorHolder.getBehaviours();u&&u>-1&&e.adCount&&(e.adCount[0]=""+u),this.preparedBehaviours=this.createBehaviourPayLoad(e,S);var C=e.Sanook&&"1"===e.Sanook[0],A=this.preparedBehaviours.scrollTrigger,I=A&&h.isValidNumber(A[0])?parseInt(A[0],10):-1,T=this.preparedBehaviours.adOppTrigger&&h.isValidNumber(this.preparedBehaviours.adOppTrigger[0])?parseInt(this.preparedBehaviours.adOppTrigger[0],10):0,B="undefined"!=typeof e.showCornerVideoOnTablet&&"1"===e.showCornerVideoOnTablet[0],R=!C&&this.canShowCornerSlot(this.preparedBehaviours[k.AD_SLOT_POSITION],this.preparedBehaviours[E.AD_SLOT_WIDTH],I,B),_=(new m,[]);this.inArtTracker=new v(t);var x=document.getElementById(P.getIdPrefix()+i);x||(x=document.body);var U=new O(window,document,x,a,s,"IA",this.impressionPromise),M=h.isNullOrUndefined(e.cssSelector)?e.cssSelector[0]:"";this.stateContext=new L(this.preparedBehaviours,this.inArtTracker,this.adOpportunityPromise,this.noDemandPromise,this.adReadyPromise,this.missedOpportunityPromise,this.placementElementPromise,this.trackBrowserExitPromise,this.iaViewablePromise,this.adsToShowPromise,this.initialAdPromise,this.impressionPromise,this.clickPromise,this.renderedPromise,i,d,this.stopRendererPromise,C,this.completeSubscriber,this.iaUnitClosedPromise,new D(M,i,n,r,o,a,s,l,e,I,T),U,c,R,this.scrollTriggerPromise,this.stopreloadPromise,this.reloadCallback,this.reloadCount,this.firstScrollPromise,this.alreadyScrolledPromise,T,this.playpausePromise,this.inarticleopenedPromise,_),this.stateContext.doAction()}return e.prototype.cancel=function(){this.stopRendererPromise.resolve()},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getPlacementElement=function(){return this.placementElementPromise},e.prototype.getVersion=function(){return _},e.prototype.getName=function(){return e.NAME},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.getCapability=function(){return{}},e.prototype.isOnByDefault=function(){return x},e.prototype.getBehaviourForHB=function(){var e={};return e[T.VIDEO_AD_POSITION]=this.preparedBehaviours[T.VIDEO_AD_POSITION],e},e.prototype.setAdCount=function(e){this.adCount=e},e.prototype.getBehaviourForRequest=function(){return this.preparedBehaviours},e.prototype.getBehaviourForRenderer=function(e,t){var i={};try{i=this.compareBehaviours(e,t,this.behaviorHolder)}catch(n){this.geckoLogger.logError(h.errorMsg(" getBehaviourForRenderer catch called ",n))}return i},e.prototype.getNoDemandPromise=function(){return this.noDemandPromise},e.prototype.getReloadCallback=function(){return this.reloadCallback},e.prototype.getAdStoppedPromise=function(){var e=this,t=new m;return this.completeSubscriber.subscribe(function(i){if(y.BehaviourParser.getBehaviours(e.preparedBehaviours).backfillOnComplete){var n=!!i&&i.userClosed;n||t.resolve(i)}}),t},e.prototype.getReloadPromise=function(){return this.stopreloadPromise},e.prototype.getAdReadyPromise=function(){return this.adReadyPromise},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getMissedOpportunityPromise=function(){return this.missedOpportunityPromise},e.prototype.createBehaviourPayLoad=function(e,t){var i={};try{for(var n in e)if(e.hasOwnProperty(n)&&n){if(h.isNullOrUndefined(t[n])&&!this.validatePropertyWithDefaultValues(e[n],t[n]))throw new Error("Invalid values for publisherBehaviour property "+n);h.isNullOrUndefined(e[n])&&(n===S.SOUND_ON_LOAD||n===T.VIDEO_AD_POSITION)&&h.inArray(e[n],B.NO_PREF)?i[n]=t[n].getAllValidValuesWithoutNoPref():h.inArray(e[n],B.NO_PREF)&&h.isNullOrUndefined(t[n])?i[n]=t[n].getDefaultValues():h.isNullOrUndefined(e[n][0])&&""!==e[n][0].trim()?i[n]=e[n]:(h.isNullOrUndefined(e[n][0])&&""===e[n][0].trim()||h.isNullOrUndefined(e[n])&&!h.isNullOrUndefined(e[n][0]))&&h.isNullOrUndefined(t[n])&&(i[n]=t[n].getDefaultValues()),!h.isNullOrUndefined(e[n])||n!==A.NO_LB||g.getOS()!==C.Android&&g.getOS()!==C.IOS||(i[A.NO_LB]=["1"]),h.isNullOrUndefined(e[n])&&n===I.LB_MOBILE&&!g.isMobileDevice()&&(i[I.LB_MOBILE]=["0"])}for(var r in t)t.hasOwnProperty(r)&&r&&t[r].getDefaultValues().length>0&&!h.isNullOrUndefined(e[r])&&(i[r]=t[r].getDefaultValues())}catch(o){throw this.geckoLogger.logError(h.errorMsg(" Invalid values by publisher ",o)),new Error("Invalid values for publisherBehaviour property "+o)}return i},e.prototype.compareBehaviours=function(e,t,i){var n={};for(var r in e)if(e.hasOwnProperty(r)&&r){var o=e[r].length>1,a=!h.isNullOrUndefined(t[r]),s=!a&&t[r].length>1,l=i.getBehaviour(r);if(h.isNullOrUndefined(l)||(n[r]=e[r]),r===T.VIDEO_AD_POSITION&&t[r]&&(t[r][0]=t[r][0]?t[r][0].toLowerCase():t[r][0]),h.isNullOrUndefined(l)){if(!this.validatePropertyWithDefaultValues(e[r],l))throw new Error("Invalid values for "+r);if(a)if(o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else{if(!h.isNullOrUndefined(e[r])||!h.isNullOrUndefined(l))throw new Error("Not possible values for "+r);n[r]=e[r]}else if(s&&o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else if(o&&1===t[r].length&&h.inArray(e[r],t[r][0]))n[r]=t[r];else{if(1!==t[r].length||1!==e[r].length||t[r][0]!==e[r][0])throw new Error("Not possible values for  "+r);n[r]=e[r]}}}return g.getOS()!==C.Android&&g.getOS()!==C.IOS||(n[A.NO_LB]=["1"]),g.isMobileDevice()||(n[I.LB_MOBILE]=["0"]),n},e.prototype.validatePropertyWithDefaultValues=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n]){if(t.getAllValidValues().length<1){i=!0;continue}if(i=h.inArray(t.getAllValidValues(),e[n]),i===!0)continue;break}return i},e.prototype.checkBannerAd=function(e){if(void 0!==e.click&&void 0!==e.url)return{target:e.target,defText:e.defText,defAltText:e.defAltText,click:e.click,url:e.url}},e.prototype.checkHtmlAd=function(e){if(void 0!==e.jsData||void 0!==e.htmlData)return{jsData:e.jsData,htmlData:e.htmlData}},e.prototype.checkInarticleVideoAd=function(e){if(void 0!==e.xmlData)return{xmlData:e.xmlData}},e.prototype.transform=function(e,t){var i=this.checkInarticleVideoAd(e),n={videoAd:i};return n},e.prototype.reloadAd=function(e,t,i){var n=this;return this.stateContext.setReloadCount(this.stateContext.ReloadCount-1),this.stateContext.IsAdReloaded=!0,this.adsToShowPromise.notify({adData:e,hBHelper:t,reloaded:!0}),this.impressionPromise.getPromise().then(function(){n.stopRendererPromise.reject()}),this.noDemandPromise.getPromise().then(function(){n.stopRendererPromise.reject()}),{impression:this.impressionPromise.getPromise(),adRendered:this.renderedPromise.getPromise(),click:this.clickPromise.getPromise(),viewable:this.iaViewablePromise.getPromise()}},e.prototype.showAd=function(e,t,i){var n=this;return this.initialAdPromise.resolve({adData:e,hBHelper:t,reloaded:!1}),this.impressionPromise.getPromise().then(function(){n.stopRendererPromise.reject()}),this.noDemandPromise.getPromise().then(function(){n.stopRendererPromise.reject()}),{impression:this.impressionPromise.getPromise(),adRendered:this.renderedPromise.getPromise(),click:this.clickPromise.getPromise(),viewable:this.iaViewablePromise.getPromise()}},e.prototype.isSupported=function(){return!0},e.prototype.canShowCornerSlot=function(e,t,i,n){var r=e&&t?R.AdSlotPositionProperty.getAdSlotPositionValues(e[0],t[0]):void 0,o="undefined"!=typeof r&&i>-1;return g.getOS()===C.Android||g.getOS()===C.IOS?g.isTablet(window)&&n?o:(g.isSmartPhone(window),!1):o},e}();U.NAME="Inarticle",t.exports=U}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/InArticleRenderer.ts","/src/renderer/inarticle")},{"../../config/ConfigHolder":23,"../../detector/MobilePlayableInteractionDetector":30,"../../detector/OsType":31,"../../logging/LogManager":58,"../../utility/BrowserUtils":264,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"../positioning/AdSlotPositionProperty":229,"./InArticleTrackers":115,"./model/Behaviours":120,"./universe/states/BigBangState":170,"./universe/states/StateContext":176,_process:8,buffer:4,timers:9}],115:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../eventtracker/EventConstants"),f=e("../../utility/DefferedPromise"),g=e("../model/TrackerConstants"),m=e("../../utility/SubscribableCallback"),y="OPPORTUNITY_FILLED",b=function(){function e(e){var t=this;this.eventTracker=e,this.noDemandOneTimePromise=new f,this.parallelReqOneTimePromise=new f,this.lbImpressionOneTimePromise=new f,this.trackerParamPromise=new f,this.oppTrackerParamPromise=new f,this.missedOpportunityOneTimePromise=new f,this.adOpportunityOneTimePromise=new f,this.opportunityFilledOneTimePromise=new f,this.browserExitOneTimePromise=new f,this.multiAdOpportunityCallback=new m,this.multiOpportunityFilledCallback=new m,this.missedOpportunityOneTimePromise.getPromise().then(function(){t.eventTracker.emit(h.MISSED_OPPORTUNITY)}),this.parallelReqOneTimePromise.getPromise().then(function(){t.eventTracker.emit(h.PARALLEL_REQUESTS)}),this.lbImpressionOneTimePromise.getPromise().then(function(){t.trackerParamPromise.getPromise().then(function(e){t.eventTracker.emit(h.LB_IMPRESSION,e)})}),this.adOpportunityOneTimePromise.getPromise().then(function(){t.eventTracker.setStage(g.StageName.ADD_OPPORTUNITY),t.eventTracker.emit(h.ADD_OPPORTUNITY)}),this.opportunityFilledOneTimePromise.getPromise().then(function(){t.eventTracker.setStage(y),t.oppTrackerParamPromise.getPromise().then(function(e){t.eventTracker.emit(h.OPPORTUNITY_FILLED,e,void 0,!0)})}),this.multiAdOpportunityCallback.subscribe(function(){t.eventTracker.emit(h.ADD_OPPORTUNITY2,void 0,void 0,!0)}),this.multiOpportunityFilledCallback.subscribe(function(e){t.eventTracker.emit(h.OPPORTUNITY_2FILLED,e,void 0,!0)}),this.browserExitOneTimePromise.getPromise().then(function(){t.eventTracker.setStage(g.StageName.USER_CLOSE_BROWSER),t.eventTracker.emit(h.USER_CLOSE_BROWSER)}),this.noDemandOneTimePromise.getPromise().then(function(){t.eventTracker.emit(h.NO_DEMAND)})}return e.prototype.fireMissedOpportunityTrackerOnce=function(){return this.missedOpportunityOneTimePromise.resolve(),this.missedOpportunityOneTimePromise.getPromise()},e.prototype.fireParallelRequestsTrackerOnce=function(){return this.parallelReqOneTimePromise.resolve(),this.parallelReqOneTimePromise.getPromise()},e.prototype.fireLbImpressionTrackerOnce=function(e){return this.trackerParamPromise.resolve(e),this.lbImpressionOneTimePromise.resolve(),this.lbImpressionOneTimePromise.getPromise()},e.prototype.fireAdOpportunityTrackerOnce=function(){return this.adOpportunityOneTimePromise.resolve(),this.adOpportunityOneTimePromise.getPromise()},e.prototype.fireOpportunityFilledTrackerOnce=function(e){return this.opportunityFilledOneTimePromise.resolve(),this.oppTrackerParamPromise.resolve(e),this.opportunityFilledOneTimePromise.getPromise()},e.prototype.fireMultiAdOpportunityTracker=function(){return this.multiAdOpportunityCallback.notify()},e.prototype.fireMultiOpportunityFilledTracker=function(e){return this.multiOpportunityFilledCallback.notify(e)},e.prototype.fireBrowserExitTrackerOnce=function(){return this.browserExitOneTimePromise.resolve(),this.browserExitOneTimePromise.getPromise()},e.prototype.fireNoDemandTrackerOnce=function(){return this.noDemandOneTimePromise.resolve(),this.noDemandOneTimePromise.getPromise()},e.prototype.fireContentVideoPlayedTracker=function(e){return this.eventTracker.emit(h.CONTENT_VIDEO_PLAYED,e)},e.prototype.fireChannelDebugTracker=function(e){var t=this;this.eventTracker.getMarcoProcessor().setAI(e),this.eventTracker.emit(h.CHANNEL_DEBUG).then(function(){t.eventTracker.getMarcoProcessor().setAI("")})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/InArticleTrackers.ts","/src/renderer/inarticle")},{"../../eventtracker/EventConstants":42,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../model/TrackerConstants":212,_process:8,buffer:4,timers:9}],116:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DOM"),f=e("../../logging/LogManager"),g=e("../../config/ConfigHolder"),m=e("../../utility/Utility"),y=600,b=function(){function e(e,t,i,n,r){this.placementId=e,this.doc=t,this.win=i,this.tagWidth=n,this.tagHeight=r,this.geckoLogger=f.getLogger("InlineSpaceGrabber")}return e.prototype.getPosition=function(e,t,i,n,r,o,a,s){var l=Math.min(e);r&&(l=r),l>y&&(i=a?a:16,n=s?s:9);var d=m.computeInRatio(i,n,l);return o&&(d=o),this.geckoLogger.logDebug("Width of Article  = "+e),{left:(e-l)/2,width:l,height:d}},e.prototype.getInlinePosition=function(e,t,i,n,r,o,a,s){var l=this.doc.getElementById(e.id),d=l.offsetWidth;return this.geckoLogger.logDebug("found parentNode offsetWidth "+d),d<=0&&(d=l.parentNode.parentNode.offsetWidth,this.geckoLogger.logDebug("trying again top parentNode offsetWidth "+d),d<=0&&(this.geckoLogger.logDebug(" parentElementWidth is 0 setting maxWidth "+n+" "),d=n)),this.getPosition(d,n,t,i,r,o,a,s)},e.prototype.grabInlinePlacement=function(e){this.geckoLogger.logDebug("Searching right place and appending element into it. Returning promise ...");var t,i=parseInt(g.getGracefulBacktrackNumberOfChecks(),10),n=parseInt(g.getGracefulBacktrackStartingTime(),10),r=window;return t=r[e.id+"_wrapper"]?r[e.id+"_wrapper"]:h.Util.createDivElement(document,e.id+"_wrapper"),h.Util.insertMultiElementsAt(this.placementId,t,i,n)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/InlineSpaceGrabber.ts","/src/renderer/inarticle")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,"../../utility/Utility":275,_process:8,buffer:4,timers:9}],117:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DOM"),f=e("../../video/MediaDetails"),g="Sponsored by ",m="ZINC",y=function(){function e(e,t,i){this.titleDivHolder=t,this.suffixId=i;var n=(h.Util.createDivElement(e,"media-header-div-"+i),h.Util.createDivElement(e,"media-title-div-"+i)),r=h.Util.createDivElement(e,"media-sponsor-div-"+i),o=h.Util.createSpanElement(e,"media-header-span-"+i);this.videoTitle=h.Util.createSpanElement(e,"ad-footer-span-1-"+i),this.sponsorBySpan=h.Util.createSpanElement(e,"ad-footer-span-2-"+i),this.sponsorName=h.Util.createSpanElement(e,"ad-footer-name-span-2-"+i),o.className="zg-sponsorvideoclass",this.videoTitle.className=f.VIDEO_TITLE_SPAN_CLASSNAME,this.sponsorBySpan.className="zg-sponsorbyclass",this.sponsorName.className="zg-sponsorbynameclass",n.appendChild(this.videoTitle),r.appendChild(this.sponsorBySpan),r.appendChild(this.sponsorName),this.sponsorBySpan.innerHTML=g,this.sponsorName.innerHTML=m,r.style.lineHeight="1",r.style.marginBottom="3px",t.appendChild(n),t.appendChild(r)}return e.prototype.showCaption=function(e){this.videoTitle.innerHTML=e.videoTitle,e.sponsoredBy?(this.sponsorBySpan.innerHTML=e.sponsoredBy,this.sponsorName.innerHTML=""):(this.sponsorBySpan.innerHTML=g,this.sponsorName.innerHTML=m),this.titleDivHolder.style.display="block"},e.prototype.hideCaption=function(){this.titleDivHolder.style.display="none"},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/MediaTitleHolder.ts","/src/renderer/inarticle")},{"../../utility/DOM":266,"../../video/MediaDetails":281,_process:8,buffer:4,timers:9}],118:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DOM"),f=e("es6-promise"),g=e("../../logging/LogManager"),m=e("../../config/ConfigHolder"),y=e("../../utility/Utility"),b=e("../../utility/NodeSelector"),v=600,P=350,w=function(){function e(e,t,i,n,r){var o=this;this.placementId=e,this.doc=t,this.win=i,this.tagWidth=n,this.tagHeight=r,this.geckoLogger=g.getLogger("SanookSpaceGrabber"),this.checkTargetNodeExist=function(){return!!o.isContentMoreThanExpected(o.sanookId)||(o.geckoLogger.logInfo("content length is smaller than expected"),!1)}}return e.prototype.getPosition=function(e,t,i,n,r,o){var a=Math.min(e);r&&(a=r),a>v&&(i=16,n=9);var s=y.computeInRatio(i,n,a);return o&&(s=o),this.geckoLogger.logDebug("Width of Article  = "+e),{left:(e-a)/2,width:a,height:s}},e.prototype.getInlinePosition=function(e,t,i,n,r,o){var a=this.doc.getElementById(e.id),s=a.offsetWidth;return this.geckoLogger.logDebug("found parentNode offsetWidth "+s),s<=0&&(s=a.parentNode.parentNode.offsetWidth,this.geckoLogger.logDebug("trying again top parentNode offsetWidth "+s),s<=0&&(this.geckoLogger.logDebug(" parentElementWidth is 0 setting maxWidth "+n+" "),
s=n)),this.getPosition(s,n,t,i,r,o)},e.prototype.getSanookPlacementId=function(e){var t=e.trim();t.indexOf(" ")<0&&(t="div id "+t);var i=t.split(" "),n="undefined"!=typeof i[2]?i[2]:"";return n},e.prototype.checkNodeType=function(e,t){var i=!1;return e&&e.nodeName.toLowerCase()===t&&(i=!0),i},e.prototype.lastPNodeIndex=function(e,t){for(var i=e;i>0;--i)if(this.checkNodeType(t[i],"p"))return i;return null},e.prototype.getSanookTargetNode=function(e){var t=null,i=0,n=this.doc.getElementById(e);if(n){var r=n.children;i=n.children.length;var o=Math.floor(i/2);t=this.lastPNodeIndex(i,r);for(var a=o;a<i-1;a++){var s=r[a-1],l=r[a+1];if(s&&l&&!this.checkNodeType(s,"img")&&!this.checkNodeType(l,"img")&&a!==t){var d=r[a];return d}}}return null},e.prototype.isContentMoreThanExpected=function(e){var t=0,i=this.doc.getElementById(e);return i&&(t=i.offsetHeight),!(t<P)},e.prototype.grabInlinePlacement=function(e){var t=this;this.geckoLogger.logDebug("Searching right place and appending element into it. Returning promise ...");var i=parseInt(m.getGracefulBacktrackNumberOfChecks(),10),n=parseInt(m.getGracefulBacktrackStartingTime(),10),r=null,o=new b.NodeSelector(this.placementId,document);return new f.Promise(function(a,s){o.isSelectorValid()?(t.sanookId=t.getSanookPlacementId(t.placementId),y.executeRepeatedly(t.checkTargetNodeExist,i,n).then(function(){var i=h.Util.createDivElement(document,e.id+"_wrapper");i.appendChild(e);var n=t.getSanookTargetNode(t.sanookId);"undefined"!=typeof n&&null!==n&&n.parentNode?(n.parentNode.insertBefore(i,n),r=document.getElementById(i.id),a({theNode:r})):s("Element within placement not rendered or does not exist")})["catch"](function(e){s(e)})):(t.geckoLogger.logInfo("selector not found : "+t.placementId+" "),s("Cannot find placement.Proper selector id is required"))})},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/SanookSpaceGrabber.ts","/src/renderer/inarticle")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,"../../utility/NodeSelector":271,"../../utility/Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],119:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n,r,o,a,s,l){this.placementProperties=e,this.contentPlayer=t,this.vastAdParametersExist=i,this.iaButonListener=n,this.replayBarHolder=r,this.adObject=o,this.behaviour=a,this.leavebehindHolder=s,this.thumbnailHolder=l}return Object.defineProperty(e.prototype,"InlineSpaceProperties",{get:function(){return this.placementProperties},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ContentPlayer",{get:function(){return this.contentPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VastAdParametersExist",{get:function(){return this.vastAdParametersExist},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IAButtonListener",{get:function(){return this.iaButonListener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReplayBarHolder",{get:function(){return this.replayBarHolder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdDetails",{get:function(){return this.adObject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Behaviour",{get:function(){return this.behaviour},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LeaveBehind",{get:function(){return this.leavebehindHolder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ThumbnailHolder",{get:function(){return this.thumbnailHolder},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/model/AdProperties.ts","/src/renderer/inarticle/model")},{_process:8,buffer:4,timers:9}],120:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/Utility"),f=e("../../../utility/BrowserUtils"),g=e("../../../detector/OsType"),m=e("../../positioning/AdSlotPositionProperty");i.PLACEMENT_ID="placementId",i.TYPE="type",i.WIDTH="width",i.HEIGHT="height",i.PLAY_AD_ON_READY="playAdOnReady",i.LANDING_PAGE_ON_CLICK="landingPageOnClick",i.ON_CLICK_FULLSCREEN="onclickFullscreen",i.LANDING_PAGE_ON_ESC="landingPageOnEsc",i.MUTE_ON_LOAD="muteOnLoad",i.VIEWABILITY="viewability",i.PRELOADMEDIA="preLoadMedia",i.LANDING_PAGE_ON_EXIT="landingPageOnExit",i.DEBUG_TOKEN="debugToken",i.NO_OFTAGS_INITIALIZED_AFTER_ERROR="noOfTagsInitlizedAfterErr",i.DELAY_CLOSE_BUTTON_BY="delaycloseButtonBy",i.AUTO_CLOSE_VIDEO="AutoCloseVideo",i.KEEP_UNIT_OPEN="KeepUnitOpen",i.NO_LB="NoLB",i.PAUSE_VIDEO_OFF_VIEW="pauseVideoOffview",i.CLICK_ONLY_ON_AD="ClicksOnlyOnAd",i.SOUND_ICON="soundIcon",i.SOUND_ON_LOAD="SoundOnload",i.FULLSCREEN_ICON="fullscreenIcon",i.REMOVE_REPLAY_STRIP="removeReplayStrip",i.REMOVE_CLOSE="removeClose",i.NO_ANIMATION="noAnimation",i.LB_FIRST="LBFirst",i.LB_SIZE="LBSize",i.PARALLELISM="parallelism",i.MAX_PARALLEL_CALLS="maxParallelCalls",i.MAX_PARALLELISM_TRIGGERED="maxParallelismtriggered",i.PTIMEOUT="ptimeout",i.DTIMEOUT="dtimeout",i.SHOW_DISPLAY_ADSBY_ZINC_HEADER="showDisplayAdsByZINCHeader",i.NO_PREF="NoPref",i.PUB_IMP_TRACKER="pubImpTracker",i.PUB_CLICK_TRACKER="pubclickTracker",i.SANOOK="Sanook",i.MAX_INARTICLE_WIDTH="maxInarticleWidth",i.VIDEO_AD_POSITION="videoAdPosition",i.AD_SPACE_BELOW="AddSpaceBelow",i.AD_SPACE_ABOVE="AddSpaceAbove",i.LB_OPEN="LBOpen",i.LB_POSITION="LBPosition",i.LB_OFFSET="LBOffset",i.LB_MOUSEOVER="LBMouseover",i.LB_MOBILE="LBMobile",i.LB_BGCOLOR="LBBgColor",i.DISABLE_COOKIE_SYNC="DisableCookieSync",i.SHOW_THUMBNAIL="showThumbnail",i.AD_COUNT="adCount",i.AD_SLOT_POSITION="adSlotPosition",i.AD_SLOT_WIDTH="adSlotWidth",i.AD_SLOT_HEIGHT="adSlotHeight",i.SCROLL_TRIGGER="scrollTrigger",i.BACKFILL_ON_COMPLETE="backfillOnComplete",i.POSITION_UNIT="positionUnit",i.FIXED_INARTICLE_WIDTH="fixedInarticleWidth",i.FIXED_INARTICLE_HEIGHT="fixedInarticleHeight",i.ASPECTRATIOWIDTH="AspectRatioWidth",i.ASPECTRATIOHEIGHT="AspectRatioHeight",i.AUTOPLAY_CONTENT="autoplayContent",i.THUMBNAIL_STRIP="ThumbnailStrip",i.MIDROLL_SECONDS="midrollSeconds",i.CTA="CTA",i.ADOPPTRIGGER="adOppTrigger",i.SHOW_CORNER_VIDEO_ON_TABLET="showCornerVideoOnTablet",i.DefaultBehaviour={};var y=function(){function e(){this.behaviours={};var e=["0","1"];f.getOS()!==g.Android&&f.getOS()!==g.IOS||(e=["1"]),this.behaviours[i.NO_LB]=new b(i.NO_LB,e,["0","1","NoPref"],this.makeChoiceForNoLb),this.behaviours[i.SOUND_ON_LOAD]=new b(i.SOUND_ON_LOAD,["0"],["0","1","NoPref"],this.makeChoiceForSoundOnload);var t="0";f.getOS()!==g.Android&&f.getOS()!==g.IOS||(t="1"),this.behaviours[i.FULLSCREEN_ICON]=new b(i.FULLSCREEN_ICON,[t],["0","1","2"],this.makeChoice),this.behaviours[i.DELAY_CLOSE_BUTTON_BY]=new b(i.DELAY_CLOSE_BUTTON_BY,["3"],[],this.makeChoice),this.behaviours[i.SHOW_DISPLAY_ADSBY_ZINC_HEADER]=new b(i.SHOW_DISPLAY_ADSBY_ZINC_HEADER,["true"],["true","false"],this.makeChoice),this.behaviours[i.AUTO_CLOSE_VIDEO]=new b(i.AUTO_CLOSE_VIDEO,["0"],["0","1"],this.makeChoice),this.behaviours[i.KEEP_UNIT_OPEN]=new b(i.KEEP_UNIT_OPEN,["0"],["0","1"],this.makeChoice),this.behaviours[i.PAUSE_VIDEO_OFF_VIEW]=new b(i.PAUSE_VIDEO_OFF_VIEW,["0"],[],this.makeChoice),this.behaviours[i.CLICK_ONLY_ON_AD]=new b(i.CLICK_ONLY_ON_AD,["0"],["0","1"],this.makeChoice);var n="1";f.getOS()!==g.Android&&f.getOS()!==g.IOS||(n="1"),this.behaviours[i.SOUND_ICON]=new b(i.SOUND_ICON,[n],["0","1"],this.makeChoice),this.behaviours[i.REMOVE_REPLAY_STRIP]=new b(i.REMOVE_REPLAY_STRIP,["0"],["0","1"],this.makeChoice),this.behaviours[i.REMOVE_CLOSE]=new b(i.REMOVE_CLOSE,["0"],["0","1"],this.makeChoice),this.behaviours[i.NO_ANIMATION]=new b(i.NO_ANIMATION,["0"],["0","1"],this.makeChoice),this.behaviours[i.LB_FIRST]=new b(i.LB_FIRST,["0"],["0","1"],this.makeChoice),this.behaviours[i.LB_SIZE]=new b(i.LB_SIZE,[],[],this.makeChoice),this.behaviours[i.PARALLELISM]=new b(i.PARALLELISM,["0"],["0","1"],this.makeChoice),this.behaviours[i.MAX_PARALLEL_CALLS]=new b(i.MAX_PARALLEL_CALLS,[],[],this.makeChoice),this.behaviours[i.MAX_PARALLELISM_TRIGGERED]=new b(i.MAX_PARALLELISM_TRIGGERED,[],[],this.makeChoice),this.behaviours[i.PTIMEOUT]=new b(i.PTIMEOUT,[],[],this.makeChoice),this.behaviours[i.DTIMEOUT]=new b(i.DTIMEOUT,[],[],this.makeChoice),this.behaviours[i.PUB_IMP_TRACKER]=new b(i.PUB_IMP_TRACKER,[],[],this.makeChoice),this.behaviours[i.PUB_CLICK_TRACKER]=new b(i.PUB_CLICK_TRACKER,[],[],this.makeChoice),this.behaviours[i.SANOOK]=new b(i.SANOOK,[],[],this.makeChoice),this.behaviours[i.MAX_INARTICLE_WIDTH]=new b(i.MAX_INARTICLE_WIDTH,["640"],[],this.makeChoice),this.behaviours[i.VIDEO_AD_POSITION]=new b(i.VIDEO_AD_POSITION,["preroll","midroll","outstream"],["preroll","midroll","outstream","NoPref"],this.makeChoiceForNoVideoAdPosition),this.behaviours[i.AD_SPACE_BELOW]=new b(i.AD_SPACE_BELOW,["0"],[],this.makeChoice),this.behaviours[i.AD_SPACE_ABOVE]=new b(i.AD_SPACE_ABOVE,["0"],[],this.makeChoice),this.behaviours[i.LB_OPEN]=new b(i.LB_OPEN,["0"],["0","1"],this.makeChoice),this.behaviours[i.LB_POSITION]=new b(i.LB_POSITION,["0"],["0","1"],this.makeChoice),this.behaviours[i.LB_OFFSET]=new b(i.LB_OFFSET,["0"],[],this.makeChoice),this.behaviours[i.LB_MOUSEOVER]=new b(i.LB_MOUSEOVER,["0"],["0","1"],this.makeChoice);var r=["0"];f.getOS()!==g.Android&&f.getOS()!==g.IOS||(r=["0","1"]),this.behaviours[i.LB_MOBILE]=new b(i.LB_MOBILE,r,["0","1"],this.makeChoice),this.behaviours[i.LB_BGCOLOR]=new b(i.LB_BGCOLOR,[],[],this.makeChoice),this.behaviours[i.DISABLE_COOKIE_SYNC]=new b(i.DISABLE_COOKIE_SYNC,["1"],["0","1"],this.makeChoice),this.behaviours[i.AD_SLOT_POSITION]=new b(i.AD_SLOT_POSITION,[],[],this.makeChoice),this.behaviours[i.SCROLL_TRIGGER]=new b(i.SCROLL_TRIGGER,["-1"],[],this.makeChoice),this.behaviours[i.BACKFILL_ON_COMPLETE]=new b(i.BACKFILL_ON_COMPLETE,["true"],["true","false"],this.makeChoice),this.behaviours[i.POSITION_UNIT]=new b(i.POSITION_UNIT,[],[],this.makeChoice),this.behaviours[i.FIXED_INARTICLE_WIDTH]=new b(i.FIXED_INARTICLE_WIDTH,[],[],this.makeChoice),this.behaviours[i.FIXED_INARTICLE_HEIGHT]=new b(i.FIXED_INARTICLE_HEIGHT,[],[],this.makeChoice),this.behaviours[i.AUTOPLAY_CONTENT]=new b(i.AUTOPLAY_CONTENT,["0"],["0","1"],this.makeChoice),this.behaviours[i.THUMBNAIL_STRIP]=new b(i.THUMBNAIL_STRIP,["false"],["true","false"],this.makeChoice),this.behaviours[i.ASPECTRATIOWIDTH]=new b(i.ASPECTRATIOWIDTH,[],[],this.makeChoice),this.behaviours[i.ASPECTRATIOHEIGHT]=new b(i.ASPECTRATIOHEIGHT,[],[],this.makeChoice),this.behaviours[i.MIDROLL_SECONDS]=new b(i.MIDROLL_SECONDS,[],[],this.makeChoice),this.behaviours[i.CTA]=new b(i.CTA,["Read More","Learn More","Know More","Buy Now","Book Test"],["Read More","Learn More","Know More","Buy Now","Book Test","NoPref"],this.makeChoiceForCTA),this.behaviours[i.ADOPPTRIGGER]=new b(i.ADOPPTRIGGER,["0"],["0","1"],this.makeChoice),this.behaviours[i.SHOW_CORNER_VIDEO_ON_TABLET]=new b(i.SHOW_CORNER_VIDEO_ON_TABLET,[],[],this.makeChoice),this.behaviours[i.AD_SLOT_WIDTH]=new b(i.AD_SLOT_WIDTH,[],[],this.makeChoice),this.behaviours[i.AD_SLOT_HEIGHT]=new b(i.AD_SLOT_HEIGHT,[],[],this.makeChoice)}return e.prototype.makeChoice=function(){},e.prototype.makeChoiceForCTA=function(e,t){if(h.isNullOrUndefined(t[i.CTA])){if(e[i.CTA].length>1&&t[i.CTA].length>=1)return t[i.CTA][0]}else if(e[i.CTA].length>=1)return"Learn More";return"Learn More"},e.prototype.makeChoiceForNoVideoAdPosition=function(e,t){if(h.isNullOrUndefined(t[i.VIDEO_AD_POSITION])){if(e[i.VIDEO_AD_POSITION].length>1&&t[i.VIDEO_AD_POSITION].length>=1)return t[i.VIDEO_AD_POSITION][0]}else if(e[i.VIDEO_AD_POSITION].length>=1)return"oustream";return"oustream"},e.prototype.makeChoiceForSoundOnload=function(e,t){if(h.isNullOrUndefined(t[i.SOUND_ON_LOAD])){if(e[i.SOUND_ON_LOAD].length>1&&t[i.SOUND_ON_LOAD].length>=1)return t[i.SOUND_ON_LOAD][0]}else if(e[i.SOUND_ON_LOAD].length>=1)return e[i.SOUND_ON_LOAD][0];return"0"},e.prototype.makeChoiceForNoLb=function(e,t){if(h.isNullOrUndefined(t[i.NO_LB])){if(e[i.NO_LB].length>1&&t[i.NO_LB].length>=1)return t[i.NO_LB][0]}else if(e[i.NO_LB].length>=1)return e[i.NO_LB][0];return"0"},e.prototype.getBehaviours=function(){return this.behaviours},e.prototype.getBehaviour=function(e){return this.behaviours[e]},e}();i.BehavioursHolder=y;var b=function(){function e(e,t,i,n){this.name=e,this.defaultValues=t,this.allValidValues=i,this.makeChoiceCallback=n}return e.prototype.getName=function(){return this.name},e.prototype.getAllValidValues=function(){return this.allValidValues},e.prototype.getDefaultValues=function(){return this.defaultValues},e.prototype.getAllValidValuesWithoutNoPref=function(){return h.removeStringFromArray(this.allValidValues,i.NO_PREF)},e.prototype.makeChoiseAndGetValue=function(e,t){return this.makeChoiceCallback?this.makeChoiceCallback(e,t):""},e}();i.BehavioursParam=b;var v=function(){function e(){}return e}();i.Behaviours=v;var P=function(){function e(){}return e.getBehaviours=function(e){var t=(e.type?e.type[0]:"",[]),n="";if(e.pubImpTrackerMacro)for(var r in e.pubImpTrackerMacro)e.pubImpTrackerMacro.hasOwnProperty(r)&&r&&t.push(e.pubImpTrackerMacro[r]);var o=[];if(e.pubclickTrackerMacro)for(var r in e.pubclickTrackerMacro)e.pubclickTrackerMacro.hasOwnProperty(r)&&r&&o.push(e.pubclickTrackerMacro[r]);var a;if(h.isNullOrUndefined(e[i.AD_SLOT_POSITION])&&h.isNullOrUndefined(e[i.AD_SLOT_WIDTH])&&(a=m.AdSlotPositionProperty.getAdSlotPositionValues(e[i.AD_SLOT_POSITION][0],e[i.AD_SLOT_WIDTH][0])),h.isNullOrUndefined(e.cssSelector))n=e.cssSelector[0];else if(!a&&!h.isNullOrUndefined(e[i.SCROLL_TRIGGER]))throw new Error("placementId selector not found ");var s=h.isNullOrUndefined(e[i.SCROLL_TRIGGER])&&h.isValidNumber(e[i.SCROLL_TRIGGER][0])?parseInt(e[i.SCROLL_TRIGGER][0],10):-1,l=h.isNullOrUndefined(e[i.SOUND_ICON])?parseInt(e[i.SOUND_ICON][0],10):1;return a&&s>-1&&!h.isNullOrUndefined(e.soundIcon)&&(l=1),{placementId:n,type:h.isNullOrUndefined(e[i.TYPE])?e[i.TYPE][0]:"auto",width:h.isNullOrUndefined(e[i.WIDTH])?parseInt(e[i.WIDTH][0],10):700,height:h.isNullOrUndefined(e[i.HEIGHT])?parseInt(e[i.HEIGHT][0],10):393,playAdOnReady:!!h.isNullOrUndefined(e[i.PLAY_AD_ON_READY])&&"true"===e[i.PLAY_AD_ON_READY][0],landingPageOnClick:!h.isNullOrUndefined(e[i.LANDING_PAGE_ON_CLICK])||"true"===e[i.LANDING_PAGE_ON_CLICK][0],onclickFullscreen:!h.isNullOrUndefined(e[i.ON_CLICK_FULLSCREEN])||"true"===e[i.ON_CLICK_FULLSCREEN][0],landingPageOnEsc:!h.isNullOrUndefined(e[i.LANDING_PAGE_ON_ESC])||"true"===e[i.LANDING_PAGE_ON_ESC][0],muteOnLoad:!h.isNullOrUndefined(e[i.MUTE_ON_LOAD])||"true"===e[i.MUTE_ON_LOAD][0],viewability:!h.isNullOrUndefined(e[i.VIEWABILITY])||"true"===e[i.VIEWABILITY][0],landingPageOnExit:!h.isNullOrUndefined(e[i.LANDING_PAGE_ON_EXIT])||"true"===e[i.LANDING_PAGE_ON_EXIT][0],debugToken:h.isNullOrUndefined(e[i.DEBUG_TOKEN])?e[i.DEBUG_TOKEN][0]:"",noOfTagsInitlizedAfterErr:h.isNullOrUndefined(e[i.NO_OFTAGS_INITIALIZED_AFTER_ERROR])?parseInt(e[i.NO_OFTAGS_INITIALIZED_AFTER_ERROR][0],10):1,delaycloseButtonBy:h.isNullOrUndefined(e[i.DELAY_CLOSE_BUTTON_BY])?parseInt(e[i.DELAY_CLOSE_BUTTON_BY][0],10):3,AutoCloseVideo:h.isNullOrUndefined(e[i.AUTO_CLOSE_VIDEO])?parseInt(e[i.AUTO_CLOSE_VIDEO][0],10):0,NoLB:h.isNullOrUndefined(e[i.NO_LB])?parseInt(e[i.NO_LB][0],10):0,pauseVideoOffview:h.isNullOrUndefined(e[i.PAUSE_VIDEO_OFF_VIEW])?parseInt(e[i.PAUSE_VIDEO_OFF_VIEW][0],10):0,ClicksOnlyOnAd:h.isNullOrUndefined(e[i.CLICK_ONLY_ON_AD])?parseInt(e[i.CLICK_ONLY_ON_AD][0],10):0,soundIcon:l,fullscreenIcon:h.isNullOrUndefined(e[i.FULLSCREEN_ICON])?parseInt(e[i.FULLSCREEN_ICON][0],10):0,removeReplayStrip:h.isNullOrUndefined(e[i.REMOVE_REPLAY_STRIP])?parseInt(e[i.REMOVE_REPLAY_STRIP][0],10):0,removeClose:h.isNullOrUndefined(e[i.REMOVE_CLOSE])?parseInt(e[i.REMOVE_CLOSE][0],10):0,noAnimation:h.isNullOrUndefined(e[i.NO_ANIMATION])?parseInt(e[i.NO_ANIMATION][0],10):0,LBFirst:h.isNullOrUndefined(e[i.LB_FIRST])?parseInt(e[i.LB_FIRST][0],10):0,LBSize:h.isNullOrUndefined(e[i.LB_SIZE])?parseInt(e[i.LB_SIZE][0],10):160,parallelism:h.isNullOrUndefined(e[i.PARALLELISM])?parseInt(e[i.PARALLELISM][0],10):0,maxParallelCalls:h.isNullOrUndefined(e[i.MAX_PARALLEL_CALLS])?parseInt(e[i.MAX_PARALLEL_CALLS][0],10):25,maxParallelismtriggered:h.isNullOrUndefined(e[i.MAX_PARALLELISM_TRIGGERED])?parseInt(e[i.MAX_PARALLELISM_TRIGGERED][0],10):10,ptimeout:h.isNullOrUndefined(e[i.PTIMEOUT])?parseInt(e[i.PTIMEOUT][0],10):3e3,dtimeout:h.isNullOrUndefined(e[i.DTIMEOUT])?1e3*parseInt(e[i.DTIMEOUT][0],10):void 0,showDisplayAdsByZINCHeader:!h.isNullOrUndefined(e[i.SHOW_DISPLAY_ADSBY_ZINC_HEADER])||"true"===e[i.SHOW_DISPLAY_ADSBY_ZINC_HEADER][0],SoundOnload:h.isNullOrUndefined(e[i.SOUND_ON_LOAD])?parseInt(e[i.SOUND_ON_LOAD][0],10):0,Sanook:h.isNullOrUndefined(e[i.SANOOK])?parseInt(e[i.SANOOK][0],10):0,maxInarticleWidth:h.isNullOrUndefined(e[i.MAX_INARTICLE_WIDTH])?parseInt(e[i.MAX_INARTICLE_WIDTH][0],10):640,preLoadMedia:!!h.isNullOrUndefined(e[i.PRELOADMEDIA])&&"true"===e[i.PRELOADMEDIA][0],vAdPos:h.isNullOrUndefined(e[i.VIDEO_AD_POSITION])?e[i.VIDEO_AD_POSITION][0]:"oustream",AddSpaceBelow:h.isNullOrUndefined(e[i.AD_SPACE_BELOW])?parseInt(e[i.AD_SPACE_BELOW][0],10):0,AddSpaceAbove:h.isNullOrUndefined(e[i.AD_SPACE_ABOVE])?parseInt(e[i.AD_SPACE_ABOVE][0],10):0,LBOpen:h.isNullOrUndefined(e[i.LB_OPEN])?parseInt(e[i.LB_OPEN][0],10):0,LBPosition:h.isNullOrUndefined(e[i.LB_POSITION])?parseInt(e[i.LB_POSITION][0],10):0,LBOffset:h.isNullOrUndefined(e[i.LB_OFFSET])?parseInt(e[i.LB_OFFSET][0],10):0,LBMouseover:h.isNullOrUndefined(e[i.LB_MOUSEOVER])?parseInt(e[i.LB_MOUSEOVER][0],10):0,LBMobile:h.isNullOrUndefined(e[i.LB_MOBILE])?parseInt(e[i.LB_MOBILE][0],10):0,LBBgColor:h.isNullOrUndefined(e[i.LB_BGCOLOR])?e[i.LB_BGCOLOR][0]:"",DisableCookieSync:h.isNullOrUndefined(e[i.DISABLE_COOKIE_SYNC])?parseInt(e[i.DISABLE_COOKIE_SYNC][0],10):1,showThumbnail:h.isNullOrUndefined(e[i.SHOW_THUMBNAIL])?parseInt(e[i.SHOW_THUMBNAIL][0],10):1,adCount:h.isNullOrUndefined(e[i.AD_COUNT])?parseInt(e[i.AD_COUNT][0],10):1,ThumbnailStrip:!!h.isNullOrUndefined(e[i.THUMBNAIL_STRIP])&&"true"===e[i.THUMBNAIL_STRIP][0],adSlotPosition:a,scrollTrigger:s,positionUnit:h.isNullOrUndefined(e[i.POSITION_UNIT])?parseInt(e[i.POSITION_UNIT][0],10):0,backfillOnComplete:!h.isNullOrUndefined(e[i.BACKFILL_ON_COMPLETE])||"true"===e[i.BACKFILL_ON_COMPLETE][0],autoplayContent:h.isNullOrUndefined(e[i.AUTOPLAY_CONTENT])?parseInt(e[i.AUTOPLAY_CONTENT][0],10):0,AspectRatioWidth:h.isNullOrUndefined(e[i.ASPECTRATIOWIDTH])?parseInt(e[i.ASPECTRATIOWIDTH][0],10):0,AspectRatioHeight:h.isNullOrUndefined(e[i.ASPECTRATIOHEIGHT])?parseInt(e[i.ASPECTRATIOHEIGHT][0],10):0,midrollSeconds:h.isNullOrUndefined(e[i.MIDROLL_SECONDS])?h.isValidNumber(e[i.MIDROLL_SECONDS][0])?parseInt(e[i.MIDROLL_SECONDS][0],10):4:-1,CTA:h.isNullOrUndefined(e[i.CTA])?e[i.CTA][0]:"Learn More",adOppTrigger:h.isNullOrUndefined(e[i.ADOPPTRIGGER])?parseInt(e[i.ADOPPTRIGGER][0],10):0,showCornerVideoOnTablet:h.isNullOrUndefined(e[i.SHOW_CORNER_VIDEO_ON_TABLET])?parseInt(e[i.SHOW_CORNER_VIDEO_ON_TABLET][0],10):0,KeepUnitOpen:h.isNullOrUndefined(e[i.KEEP_UNIT_OPEN])?parseInt(e[i.KEEP_UNIT_OPEN][0],10):0,adSlotWidth:h.isNullOrUndefined(e[i.AD_SLOT_WIDTH])?parseInt(e[i.AD_SLOT_WIDTH][0],10):0,adSlotHeight:h.isNullOrUndefined(e[i.AD_SLOT_HEIGHT])?parseInt(e[i.AD_SLOT_HEIGHT][0],10):0}},e}();i.BehaviourParser=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/model/Behaviours.ts","/src/renderer/inarticle/model")},{"../../../detector/OsType":31,"../../../utility/BrowserUtils":264,"../../../utility/Utility":275,"../../positioning/AdSlotPositionProperty":229,_process:8,buffer:4,timers:9}],121:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/CSS"),f=e("../../../logging/LogManager"),g=function(){function e(){this.geckoLogger=f.getLogger("InarticleStyle")}return e.prototype.applyCSS=function(e,t,i){this.geckoLogger.logInfo("Apply CSS called");var n="#"+i+" { float: none;} #"+i+" > div { float: none; }.zg-leaveBehind{position: fixed; z-index: 2147483647;}.zg-adsByZINCClass{ display: none; height: 15px; bottom: 1px; text-align: center; line-height:100%;background: transparent none repeat scroll 0% 0%;margin: 0px; font-size: 12px ! important; color: rgb(0, 0, 0); font-weight: normal; font-family: Roboto, Arial,sans-serif;}.zg-cornerSlotAdsByZINCClass { display: none; line-height:1.4; border-radius: 4px; background-color: rgba(2, 2, 2, 0.5); margin: 0px; font-size: 10px ! important; color: rgb(255, 255, 255); font-weight: normal; font-family: Roboto, Arial,sans-serif; padding: 2px;}.zg-container {transition-property: bottom; transition-duration:0.4s;z-index: 2147483647;} .zg-mainContainer { left: -9999px; top: -9999px; position: fixed; } .zg-placement{height: 0px;overflow: hidden;margin: 0 auto;box-sizing:content-box!important;}.zg-placement-transition{transition-property: height; transition-duration: 0.9s;}.zg-replayBar { display: none; text-align: center; color: rgb(0, 0, 0); font-weight: bold; border: 0px; font-family: Arial; font-size: 10px;border-bottom:1px dotted #3E5F9D; width: auto; } .zg-replayBar > span:nth-child(2) { margin-left: 2px; cursor:pointer; display: inline; text-decoration: underline; font-size: 12px !important; color: #3B68FF !important;}.zg-advertisementClass { height: 15px; font-size: 12px ! important; font-weight: normal; text-align: center; color: rgb(0, 0, 0);}.zg-sponsorvideoclass { height: 18px; font-size: 16px ! important; font-weight: bold; font-family: Roboto, Arial; text-align: left; color: rgb(51, 51, 51);}.zg-mediatitleclass { height: 30px; font-size: 27px ! important; font-weight: bold; font-family: Roboto, Arial; text-align: left; color: rgb(0, 102, 153);}.zg-sponsorbyclass { height: 15px; font-size: 12px ! important; font-weight: medium; font-family: Roboto, Arial; text-align: left; color: rgb(51, 51, 51);}.zg-sponsorbynameclass { height: 15px; font-size: 12px ! important; font-weight: medium; font-family: Roboto, Arial; text-align: left; color: rgb(0, 102, 153);font-family: Roboto, Arial,sans-serif;} .sanook-leaveBehind { margin: 0 auto; position: fixed; transform: translate3d(700px, -130px, 0px); -webkit-transform: translate3d(700px, -130px, 0px); -moz-transform: translate3d(700px, -130px, 0px); -o-transform: translate3d(700px, -130px, 0px); z-index: 2147483647;} .sanook-main {-webkit-transition: 0.6s ease-in-out;  -moz-transition: 0.6s ease-in-out; -o-transition: 0.6s ease-in-out; transition: 0.6s ease-in-out; margin: 0 auto;  }.zg-thumbnail{position: absolute;bottom: 85px;}.zg-thumbnailText{position:absolute;bottom: 0px; left:0; font-family: Roboto, Arial; font-size: 15px; color: white;text-align: center;}.zg-unselectable { position:absolute; top:0px; left:0px; bottom:0px; right:0px; }.zg-playbuttonoverlay { -webkit-transform: translateX(-50%) translateY(-50%); transform: translateX(-50%) translateY(-50%); }.zg-lbplaybuttonoverlay { -webkit-transform: translateX(-50%) translateY(-50%) scale(0.7); transform: translateX(-50%) translateY(-50%) scale(0.7); }";h.Util.addCSSRule(n,"",t,e)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/model/InarticleStyle.ts","/src/renderer/inarticle/model")},{"../../../logging/LogManager":58,"../../../utility/CSS":265,_process:8,buffer:4,timers:9}],122:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../model/Behaviours"),f=function(){function e(e){this.adData=e}return e.prototype.getBehaviour=function(e){if(1===this.adData.length)return h.BehaviourParser.getBehaviours(this.adData[0].behaviour);var t=this.adData.filter(function(t){return t.adId===e}),i=t.length>0?t[0]:void 0;return i?h.BehaviourParser.getBehaviours(i.behaviour):void 0},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/BehaviourProvider.ts","/src/renderer/inarticle/universe/galaxy")},{"../../model/Behaviours":120,_process:8,buffer:4,timers:9}],123:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("./FullScreenState"),y=e("./EndState"),b=function(){function e(e){this.leavebehind=e,this.geckoLogger=g.getLogger("Solar : CornerSlotState")}return e.prototype.getName=function(){return h.StateName.CornerSlotState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.Playable.getFullscreenCallback(),callbackMethod:function(i){i&&(e.LbPresentationCallback.notify(!1),e.setStateAndDoAction(new m(t)))}}),i.push({onSubscribeMethod:e.LBCloseButtonCallback,callbackMethod:function(){e.GalaxyContext.UniverStateContext.IAUnitClosedPromise.resolve(!0),t.hideLeavebehind(e)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOverCallback(),callbackMethod:function(){e.PlayList.mute(!1)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOutCallback(),callbackMethod:function(){e.PlayList.mute(!0)}}),i.push({onSubscribeMethod:e.EndCallback,callbackMethod:function(){e.setStateAndDoAction(new y)}}),i},e.prototype.doAction=function(e){var t=this;return e.IsInline=!1,this.leavebehind.showLeaveBehind().then(function(){e.LbPresentationCallback.notify(!0),t.geckoLogger.logInfo("Showing corner slot unit"),e.GalaxyContext.IsAdPlayComplete||e.PlayList.play()})["catch"](function(e){t.geckoLogger.logError(f.errorMsg(" Error showing corner slot unit ",e))}),f.createPromise(void 0)},e.prototype.hideLeavebehind=function(e){this.leavebehind.hideLeaveBehind().then(function(){e.LbPresentationCallback.notify(!1),e.setStateAndDoAction(new y)})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/solar/states/CornerSlotState.ts","/src/renderer/inarticle/universe/galaxy/solar/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"./EndState":124,"./FullScreenState":125,"./State":128,_process:8,buffer:4,timers:9}],124:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=function(){function e(){}return e.prototype.getName=function(){return h.StateName.EndState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.doAction=function(e){return f.createPromise(void 0)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/solar/states/EndState.ts","/src/renderer/inarticle/universe/galaxy/solar/states")},{"../../../../../../utility/Utility":275,"./State":128,_process:8,buffer:4,timers:9}],125:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("../../../../../../utility/CSS"),y=function(){function e(e){this.prevState=e,this.geckoLogger=g.getLogger("Solar : FullScreenState")}return e.prototype.getName=function(){return h.StateName.FullScreenState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.Playable.getFullscreenCallback(),callbackMethod:function(i){i||(t.closeFullscreen(e),e.setStateAndDoAction(t.prevState))}}),i.push({onSubscribeMethod:e.CompleteCallback,callbackMethod:function(){t.closeFullscreen(e),e.setStateAndDoAction(t.prevState)}}),i.push({onSubscribeMethod:e.CloseButtonCallback,callbackMethod:function(){t.closeFullscreen(e),e.setStateAndDoAction(t.prevState)}}),i.push({onSubscribeMethod:e.Playable.getClickCallback(),callbackMethod:function(){t.closeFullscreen(e),e.setStateAndDoAction(t.prevState)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOverCallback(),callbackMethod:function(){e.PlayList.mute(!1)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOutCallback(),callbackMethod:function(){e.PlayList.mute(!0)}}),i},e.prototype.doAction=function(e){var t=e.GalaxyContext.AdcontentHolder.getContainerDiv();return m.Util.removeClass(t,["sanook-main"]),e.PlayList.mute(!1),e.GalaxyContext.IsIAUnitPaused||e.PlayList.play(),e.IAButtonListener&&(e.IAButtonListener.updateMuteState(!1,e.IsInline),e.IAButtonListener.updateFullScreen(!0),e.GalaxyContext.UniverStateContext.ShowCornerSlot&&e.IAButtonListener.updateMuteStateLB(!1),e.IAButtonListener.hideSoundButton(),e.IAButtonListener.showFullscreenCloseButton(),e.IAButtonListener.showClickToExitFullscreenTextButton(),e.IAButtonListener.hideInArticleInlineCloseButton(),e.IAButtonListener.hideClickToFullscreenButton(),e.IAButtonListener.hideCTAButton()),f.createPromise(void 0)},e.prototype.closeFullscreen=function(e){e.IAButtonListener&&(e.IAButtonListener.hideFullscreenCloseButton(),e.IAButtonListener.hideClickToExitFullscreenTextButton(),e.GalaxyContext.UniverStateContext.ShowCornerSlot||e.GalaxyContext.IsLBVisible||e.IAButtonListener.showInArticleInlineCloseButton(),e.IAButtonListener.updateFullScreen(!1),e.PlayList.mute(!0),e.IAButtonListener.updateMuteState(!0,e.IsInline),e.GalaxyContext.UniverStateContext.ShowCornerSlot&&e.IAButtonListener.updateMuteStateLB(!0))},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/solar/states/FullScreenState.ts","/src/renderer/inarticle/universe/galaxy/solar/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/CSS":265,"../../../../../../utility/Utility":275,"./State":128,_process:8,buffer:4,timers:9}],126:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("./FullScreenState"),y=e("./LbState"),b=e("./EndState"),v=function(){function e(){this.geckoLogger=g.getLogger("Solar : InlineState")}return e.prototype.getName=function(){return h.StateName.InlineState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.Playable.getFullscreenCallback(),callbackMethod:function(i){i&&(e.InlinePresentationCallback.notify(!1),e.setStateAndDoAction(new m(t)))}}),i.push({onSubscribeMethod:e.GalaxyContext.InlineInViewCallback,callbackMethod:function(i){t.viewableHandler(e,i)}}),i.push({onSubscribeMethod:e.GalaxyContext.InlineOutOfViewCallback,callbackMethod:function(i){t.unviewableHandler(e,i)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOverCallback(),
callbackMethod:function(){e.PlayList.mute(!1)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOutCallback(),callbackMethod:function(){e.PlayList.mute(!0)}}),i.push({onSubscribeMethod:e.EndCallback,callbackMethod:function(){e.setStateAndDoAction(new b)}}),i},e.prototype.doAction=function(e){var t=this;if(e.IsInline=!0,!e.GalaxyContext.IsInarticleClosed){e.InlinePresentationCallback.notify(!0),e.PlayList.resize(e.InlineSpaceProperties.width,e.InlineSpaceProperties.height);var i=0,n=1,r=!1;try{i=parseInt(e.GalaxyContext.UniverStateContext.Behaviours.AddSpaceAbove[0],10),e.GalaxyContext.UniverStateContext.Behaviours.adCount&&(n=parseInt(e.GalaxyContext.UniverStateContext.Behaviours.adCount[0],10)),e.GalaxyContext.UniverStateContext.Behaviours.ThumbnailStrip&&(r="true"===e.GalaxyContext.UniverStateContext.Behaviours.ThumbnailStrip[0])}catch(o){this.geckoLogger.logError(o)}e.GalaxyContext.AdcontentHolder.attachInline(e.InlineSpaceProperties,"undefined"!=typeof e.AddSpaceBelow?e.AddSpaceBelow:0,i,r)["catch"](function(e){t.geckoLogger.logError(f.errorMsg(" adContentHandler's attachinline catch called ",e))}),"1"===e.GalaxyContext.UniverStateContext.Behaviours.LBMobile[0]&&e.LeaveBehind&&e.GalaxyContext.IsLBVisible&&e.LeaveBehind.resizeLeaveBehind(30)}return f.createPromise(void 0)},e.prototype.viewableHandler=function(e,t){"undefined"!=typeof e.LeaveBehind&&10===e.PauseVideoOffview&&"0"===e.GalaxyContext.UniverStateContext.Behaviours.LBMobile[0]&&(this.geckoLogger.logInfo("calling play 100% viewable"),e.PlayList.play())},e.prototype.unviewableHandler=function(e,t){try{var i=t.getViewability();e.LeaveBehind&&!e.GalaxyContext.IsLBClosed&&!e.GalaxyContext.IsInarticleClosed&&i.viewablePercentage<=0&&!e.GalaxyContext.IsIAUnitPaused&&(e.InlinePresentationCallback.notify(!1),"0"===e.GalaxyContext.UniverStateContext.Behaviours.LBMobile[0]&&e.setStateAndDoAction(new y(e.LeaveBehind,this)))}catch(n){this.geckoLogger.logDebug(n.message)}},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/solar/states/InlineState.ts","/src/renderer/inarticle/universe/galaxy/solar/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"./EndState":124,"./FullScreenState":125,"./LbState":127,"./State":128,_process:8,buffer:4,timers:9}],127:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("./FullScreenState"),y=e("./EndState"),b=function(){function e(e,t){this.leavebehind=e,this.inlineState=t,this.geckoLogger=g.getLogger("Solar : LbState")}return e.prototype.getName=function(){return h.StateName.LbState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.GalaxyContext.InlineInViewCallback,callbackMethod:function(i){t.hideLeavebehind(e)}}),i.push({onSubscribeMethod:e.InlinePresentationCallback,callbackMethod:function(i){t.hideLeavebehind(e),e.setStateAndDoAction(t.inlineState),e.GalaxyContext.AdcontentHolder.getDivForStrip()&&(e.GalaxyContext.AdcontentHolder.getDivForStrip().style.display="block")}}),i.push({onSubscribeMethod:e.Playable.getFullscreenCallback(),callbackMethod:function(i){i&&(e.LbPresentationCallback.notify(!1),e.setStateAndDoAction(new m(t)))}}),i.push({onSubscribeMethod:e.LBCloseButtonCallback,callbackMethod:function(){t.hideLeavebehind(e),e.setStateAndDoAction(t.inlineState)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOverCallback(),callbackMethod:function(){e.PlayList.mute(!1)}}),i.push({onSubscribeMethod:e.GalaxyContext.AdcontentHolder.getmouseOutCallback(),callbackMethod:function(){e.PlayList.mute(!0)}}),i.push({onSubscribeMethod:e.EndCallback,callbackMethod:function(){e.setStateAndDoAction(new y)}}),i},e.prototype.doAction=function(e){var t=this;return e.IsInline=!1,e.GalaxyContext.AdcontentHolder.getDivForStrip()&&(e.GalaxyContext.AdcontentHolder.getDivForStrip().style.display="none"),this.leavebehind.showLeaveBehind().then(function(){e.LbPresentationCallback.notify(!0),t.geckoLogger.logInfo("Showing leave behind and hiding inline block"),e.PauseVideoOffview>0&&e.PlayList.play()})["catch"](function(){e.setStateAndDoAction(t.inlineState)}),f.createPromise(void 0)},e.prototype.hideLeavebehind=function(e){var t=this;this.leavebehind.hideLeaveBehind().then(function(){e.LbPresentationCallback.notify(!1),e.setStateAndDoAction(t.inlineState)})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/solar/states/LbState.ts","/src/renderer/inarticle/universe/galaxy/solar/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"./EndState":124,"./FullScreenState":125,"./State":128,_process:8,buffer:4,timers:9}],128:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.InlineState=0]="InlineState",e[e.LbState=1]="LbState",e[e.FullScreenState=2]="FullScreenState",e[e.EndState=3]="EndState",e[e.CornerSlotState=4]="CornerSlotState"}(p=i.StateName||(i.StateName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/solar/states/State.ts","/src/renderer/inarticle/universe/galaxy/solar/states")},{_process:8,buffer:4,timers:9}],129:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../../../logging/LogManager"),f=e("./State"),g=e("../../../../../../utility/SubscribableCallback"),m=function(){function e(e,t,i,n,r,o,a,s,l){this.galaxyContext=e,this.playable=t,this.playlist=i,this.iAButtonListener=n,this.inlineSpaceProperties=r,this.leavebehind=o,this.pauseVideoOffview=a,this.addSpaceBelow=s,this.state=l,this.logger=h.getLogger("Solar:StateContext"),this.completeCallback=new g,this.closeCallback=new g,this.endCallback=new g,this.lbCloseCallback=new g,this.inlinePresentationCallback=new g,this.lbPresentationCallback=new g}return Object.defineProperty(e.prototype,"CompleteCallback",{get:function(){return this.completeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EndCallback",{get:function(){return this.endCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CloseButtonCallback",{get:function(){return this.closeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LBCloseButtonCallback",{get:function(){return this.lbCloseCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsInline",{get:function(){return this.isInline},set:function(e){this.isInline=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Playable",{get:function(){return this.playable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayList",{get:function(){return this.playlist},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InlinePresentationCallback",{get:function(){return this.inlinePresentationCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LbPresentationCallback",{get:function(){return this.lbPresentationCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GalaxyContext",{get:function(){return this.galaxyContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IAButtonListener",{get:function(){return this.iAButtonListener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LeaveBehind",{get:function(){return this.leavebehind},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PauseVideoOffview",{get:function(){return this.pauseVideoOffview},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InlineSpaceProperties",{get:function(){return this.inlineSpaceProperties},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AddSpaceBelow",{get:function(){return this.addSpaceBelow},enumerable:!0,configurable:!0}),e.prototype.setState=function(e){this.logger.logInfo("Solar State changing from "+f.StateName[this.state.getName()]+" to "+f.StateName[e.getName()]),this.state=e},e.prototype.getState=function(){return this.state},e.prototype.doAction=function(){if(this.logger.logInfo("Solar performing State action "+f.StateName[this.state.getName()]),this.prevStateSpecificCallback)for(var e in this.prevStateSpecificCallback)this.prevStateSpecificCallback.hasOwnProperty(e)&&this.prevStateSpecificCallback[e]&&this.prevStateSpecificCallback[e]();this.prevStateSpecificCallback=[];var t=this.state.getStateSpecificCallbackPairs(this);if(t)for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var n=t[i];this.prevStateSpecificCallback.push(n.onSubscribeMethod.subscribe(n.callbackMethod))}this.state.doAction(this)},e.prototype.setStateAndDoAction=function(e){this.setState(e),this.doAction()},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/solar/states/StateContext.ts","/src/renderer/inarticle/universe/galaxy/solar/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/SubscribableCallback":274,"./State":128,_process:8,buffer:4,timers:9}],130:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(e,t,i,n,r){this.playable=e,this.playableAdDiv=t,this.adObject=i,this.behaviour=n,this.configurator=r}return Object.defineProperty(e.prototype,"PlayableAd",{get:function(){return this.playable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayableAdDiv",{get:function(){return this.playableAdDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdDetails",{get:function(){return this.adObject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Behaviour",{get:function(){return this.behaviour},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdConfigurator",{get:function(){return this.configurator},enumerable:!0,configurable:!0}),e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/model/Sun.ts","/src/renderer/inarticle/universe/galaxy/star/model")},{_process:8,buffer:4,timers:9}],131:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=function(){function e(){this.geckoLogger=g.getLogger("Star: AllAdsTriedState")}return e.prototype.getName=function(){return h.StateName.AllAdsTriedState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=[];return t.push({onSubscribeMethod:e.LookForAdCallback,callbackMethod:function(){e.AllAdsTriedCallback.notify()}}),t.push({onSubscribeMethod:e.TryAdCallback,callbackMethod:function(){e.AllAdsTriedCallback.notify()}}),t},e.prototype.doAction=function(e){return e.AllAdsTriedCallback.notify(),f.createPromise(void 0)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/AllAdsTriedState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"./State":138,_process:8,buffer:4,timers:9}],132:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("./WaitingToLookForAnAdState"),y=e("./LookingForAnAdState"),b=function(){function e(e,t,i,n,r){this.placementElement=e,this.inlineSpceG=t,this.maxInarticleWidth=i,this.geckoLogger=g.getLogger("Star: BeginState"),this.mediaWidthForRatio=16,this.mediaHeightForRatio=9,this.mediaWidthForRatio="undefined"!=typeof n?n:this.mediaWidthForRatio,this.mediaHeightForRatio="undefined"!=typeof r?r:this.mediaHeightForRatio}return e.prototype.getName=function(){return h.StateName.BeginState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.doAction=function(e){var t=this.inlineSpceG.getInlinePosition(this.placementElement,this.mediaWidthForRatio,this.mediaHeightForRatio,this.maxInarticleWidth);return e.setStateAndDoAction(new m(new y(e.PlayList,e.AdData,e.WrapperPlacementDiv,e.UniverStateContext.InArticleTracker,t.width,t.height,e))),f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/BeginState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"./LookingForAnAdState":133,"./State":138,"./WaitingToLookForAnAdState":142,_process:8,buffer:4,timers:9}],133:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("../../../../../../utility/DefferedPromise"),y=e("./LookingForGuaranteedState"),b=e("./LookingForNonGuaranteedState"),v=e("./NoDemandState"),P=e("./AllAdsTriedState"),w=e("../../../../../../utility/SubscribableCallback"),S=e("./ReloadAdState"),C={GUARANTEED:"guranteed",NONGUARANTEED:"nonGuranteed"},A=function(){function e(e,t,i,n,r,o,a){var s=this;this.playlist=e,this.wrapperPlacement=i,this.inArticleTracker=n,this.playerWidth=r,this.playerHeight=o,this.context=a,this.geckoLogger=g.getLogger("Galaxy: LookingForAnAdState"),this.guranteedAdCounter=0,this.isNonGuaranteedStarted=!1,this.onParallelInitializedPromise=new m,this.playPromise=new m,this.waitForReloadCallback=new w,a.UniverStateContext.AdsToShowPromise.subscribe(function(e){a.setHBHelper(e.hBHelper),s.setup(e.adData)}),this.setup(t)}return e.prototype.setup=function(e){var t=this,i=this.filterAds(e);this.guaranteedAds=i.guaranteedAds,this.nonGuarantueedAds=i.nonGuranteedAds,(this.guaranteedAds.length>0||this.nonGuarantueedAds.length>0)&&(this.context.GuranteedAdPlayerDiv.innerHTML="",this.context.NonGuranteedAdPlayerDiv.innerHTML=""),this.nonGuarantueedAds.length>0&&(this.lookingForNonGuaranteedState=new b(this.playlist,this.nonGuarantueedAds,this.onParallelInitializedPromise,this,this.wrapperPlacement,this.playPromise,this.playerWidth,this.playerHeight,this.context)),this.onParallelInitializedPromise.getPromise().then(function(){t.inArticleTracker.fireParallelRequestsTrackerOnce()}),this.isNonGuaranteedStarted=!1,this.guranteedAdCounter=0,this.context.GuaranteeAdReadyCountCallback.notify(this.guaranteedAds.length),this.geckoLogger.logInfo("Total guaranteed count"+this.guaranteedAds.length),this.geckoLogger.logInfo("Total non-guaranteed count"+this.nonGuarantueedAds.length)},e.prototype.getName=function(){return h.StateName.LookingForAnAdState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){if(this.guranteedAdCounter<this.guaranteedAds.length)this.geckoLogger.logInfo("Attempting guaranteed ad number"+ +this.guranteedAdCounter+1),this.guranteedAdCounter++,e.setStateAndDoAction(new y(this.playlist,this.guranteedAdCounter-1,this.guaranteedAds[this.guranteedAdCounter-1],this.onParallelInitializedPromise,this,this.playPromise,this.playerWidth,this.playerHeight));else if(this.nonGuarantueedAds.length>0)if(this.isNonGuaranteedStarted)if(e.AdsShownCount>0)if(e.NonGuaranteedAdReadyCount>0)e.setStateAndDoAction(this.lookingForNonGuaranteedState);else{var t=1;e.UniverStateContext.Behaviours.adCount&&(t=parseInt(e.UniverStateContext.Behaviours.adCount[0],10)),t>e.AdsShownCount&&e.UniverStateContext.ReloadCount>=1?(e.UniverStateContext.ReloadCallback.notify(),e.setStateAndDoAction(new S(this))):(e.UniverStateContext.setReloadCount(0),e.setStateAndDoAction(new P))}else{var t=1;e.UniverStateContext.Behaviours.adCount&&(t=parseInt(e.UniverStateContext.Behaviours.adCount[0],10)),t>e.AdsShownCount&&e.UniverStateContext.ReloadCount>=1?(e.UniverStateContext.ReloadCallback.notify(),e.setStateAndDoAction(new S(this))):(e.UniverStateContext.setReloadCount(0),e.setStateAndDoAction(new v))}else this.geckoLogger.logInfo("Attempting non guaranteed ads"),this.isNonGuaranteedStarted=!0,e.setStateAndDoAction(this.lookingForNonGuaranteedState);else{var t=1;e.UniverStateContext.Behaviours.adCount&&(t=parseInt(e.UniverStateContext.Behaviours.adCount[0],10)),t>e.AdsShownCount&&e.UniverStateContext.ReloadCount>=1?(e.UniverStateContext.ReloadCallback.notify(),e.setStateAndDoAction(new S(this))):e.AdsShownCount>0?e.setStateAndDoAction(new P):e.setStateAndDoAction(new v)}return f.createPromise(void 0)},e.prototype.filterAds=function(e){for(var t=[],i=[],n=0,r=e.length;n<r;n++)if(f.isNullOrUndefined(e[n])){var o=e[n];o.buyType===C.NONGUARANTEED?i.push(o):t.push(o)}return{guaranteedAds:t,nonGuranteedAds:i}},e}();t.exports=A}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/LookingForAnAdState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/DefferedPromise":267,"../../../../../../utility/SubscribableCallback":274,"../../../../../../utility/Utility":275,"./AllAdsTriedState":131,"./LookingForGuaranteedState":134,"./LookingForNonGuaranteedState":135,"./NoDemandState":136,"./ReloadAdState":137,"./State":138,_process:8,buffer:4,timers:9}],134:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("../../../../video/GuaranteedPlayer"),y=e("./WaitingToTryAdState"),b=e("../../../../video/MobileBrowserHelper"),v=e("./TryingAdState"),P=e("../../../../../../utility/SubscribableCallback"),w=e("../../../../model/Behaviours"),S=function(){function e(e,t,i,n,r,o,a,s){this.playlist=e,this.guaranteedAdCounter=t,this.adData=i,this.onParallelInitializedPromise=n,this.lookingForAnAdState=r,this.playPromise=o,this.playerWidth=a,this.playerHeight=s,this.geckoLogger=g.getLogger("Star: LookingForGuaranteedAdState")}return e.prototype.getName=function(){return h.StateName.LookingForGuaranteedAdState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=[];return t.push({onSubscribeMethod:e.LookForAdCallback,callbackMethod:function(){}}),t},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.adData.adId},e.prototype.doAction=function(e){var t=this;try{e.GuranteedAdPlayerDiv.innerHTML="",e.GuranteedAdPlayerDiv.style.display="block";var i=new m(this.adData,this.guaranteedAdCounter,e.GuranteedAdPlayerDiv),n=new P;n.subscribe(function(){t.updateAdReadyCount(e)});var r=n.subscribe(function(i){t.geckoLogger.logError("Guaranteed Player failed, trying the next ad"),r(),e.setStateAndDoAction(t.lookingForAnAdState)}),o=i.createGuranteedPlayer(e.HBHelper,this.onParallelInitializedPromise,e.GuranteedAdPlayerDiv,this.guaranteedAdCounter,this.playerWidth,this.playerHeight,n,e.UniverStateContext.InArticleTracker.fireChannelDebugTracker);o.configPromise.then(function(a){t.geckoLogger.logInfo(" AdReady : "+a.getId()+" "),i.PlayableAdDiv.style.display="block",e.UniverStateContext.AdReadyPromise.resolve();var s=0;try{var l=w.BehaviourParser.getBehaviours(t.adData.behaviour);l&&(s=l.LBFirst)}catch(d){t.geckoLogger.logError(d)}new b(t.playPromise,t.playlist,e.StopTouchListener);o.playablePromise.then(function(s){s.getOnAdSkippedSubscribable().subscribe(function(){i.PlayableAdDiv.style.display="none",t.updateAdReadyCount(e)}),s.getOnAdStoppedSubscribable().subscribe(function(){t.updateAdReadyCount(e)}),r();var l=new v(t.playlist,a,s,i.PlayableAdDiv,t.playPromise,o.adDetailsCallback,n,t.onParallelInitializedPromise,t.lookingForAnAdState);e.setStateAndDoAction(new y(t.playlist,a,s,t.adData,i.PlayableAdDiv,t.playPromise,o.adDetailsCallback,n,t.onParallelInitializedPromise,l,t.lookingForAnAdState))})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from playable ",i)),e.setStateAndDoAction(t.lookingForAnAdState)})})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from configurator",i)),e.setStateAndDoAction(t.lookingForAnAdState)})}catch(a){this.geckoLogger.logError(f.errorMsg(" Error creating guaranteed player",a)),e.setStateAndDoAction(this.lookingForAnAdState)}return f.createPromise(void 0)},e.prototype.updateAdReadyCount=function(e){e.GuaranteeAdReadyCountCallback.notify(e.GuaranteedAdReadyCount-1)},e}();t.exports=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/LookingForGuaranteedState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/SubscribableCallback":274,"../../../../../../utility/Utility":275,"../../../../model/Behaviours":120,"../../../../video/GuaranteedPlayer":180,"../../../../video/MobileBrowserHelper":184,"./State":138,"./TryingAdState":140,"./WaitingToTryAdState":143,_process:8,buffer:4,timers:9}],135:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../..//../../utility/Utility"),g=e("../../../..//../../logging/LogManager"),m=e("./WaitingToTryAdState"),y=e("./TryingNextNonGuaranteedAdState"),b=e("../../../..//video/NonGuaranteedPlayer"),v=e("../../../..//video/MobileBrowserHelper"),P=e("../../../..//../../utility/SubscribableCallback"),w=e("./TryingAdState"),S=e("../../BehaviourProvider"),C=function(){function e(e,t,i,n,r,o,a,s,l){var d=this;this.playlist=e,this.adData=t,this.onParallelInitializedPromise=i,this.lookingForAnAdState=n,this.playPromise=o,this.playerWidth=a,this.playerHeight=s,this.geckoLogger=g.getLogger("Star: LookingForNonGuaranteedAdState"),this.isNonGuaranteedAttempted=!1,this.errorFromPlayerFlag=!1,this.errorSubsCallback=new P;try{this.nonGuaranteedPlayer=new b(this.adData),this.errorUnsubscribe=this.errorSubsCallback.subscribe(function(){d.errorFromPlayerFlag=!0,l.NonGuaranteeAdReadyCountCallback.notify(0)}),this.player=this.nonGuaranteedPlayer.createNonGuaranteedPlayer(this.onParallelInitializedPromise,l.NonGuranteedAdPlayerDiv,this.playerWidth,this.playerHeight,this.errorSubsCallback),this.player.configPromise.then(function(e){d.player.playablePromise.then(function(e){var t=e.getReadyAds(),i=t?t.length:0;d.geckoLogger.logInfo("Non Guranteed ad ready "),l.NonGuaranteeAdReadyCountCallback.notify(i),e.getHasMoreAdsSubscribable().subscribe(function(e){d.geckoLogger.logInfo("Has more ads callled with count "+e),l.NonGuaranteeAdReadyCountCallback.notify(e)})})})}catch(c){this.geckoLogger.logError(f.errorMsg(" Error while creating the non guaranteed player",c))}}return e.prototype.getName=function(){return h.StateName.LookingForNonGuaranteedAdState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.LookForAdCallback,callbackMethod:function(){e.setStateAndDoAction(t.lookingForAnAdState)}}),i},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this;return this.nonGuaranteedPlayer?(e.GuranteedAdPlayerDiv.innerText="",e.GuranteedAdPlayerDiv.style.display="none",this.nonGuaranteedPlayer.show(),this.errorFromPlayerFlag?(this.geckoLogger.logError("Non Guaranteed Player failed, trying the next ad"),e.setStateAndDoAction(this.lookingForAnAdState)):(this.errorUnsubscribe(),this.errorUnsubscribe=this.errorSubsCallback.subscribe(function(i){e.NonGuaranteeAdReadyCountCallback.notify(0),t.geckoLogger.logError("Non Guaranteed Player failed in action, trying the next ad"),t.errorUnsubscribe(),e.setStateAndDoAction(t.lookingForAnAdState)})),this.player.configPromise.then(function(i){t.geckoLogger.logInfo(" AdReady : "+i.getId()+" ");var n=0;try{var r=new S(t.adData),o=r.getBehaviour(i.getId());o&&(n=o.LBFirst)}catch(a){t.geckoLogger.logError(a)}e.UniverStateContext.AdReadyPromise.resolve(),t.player.playablePromise.then(function(n){new v(t.playPromise,t.playlist,e.StopTouchListener);t.errorUnsubscribe();var r,o=t.findNextAdReady(n);if(void 0===o){var a=n.getReadyAds();e.NonGuaranteeAdReadyCountCallback.notify(a?a.length:0),e.setStateAndDoAction(t.lookingForAnAdState)}else t.isNonGuaranteedAttempted?r=new y(t.playlist,i,n,t.nonGuaranteedPlayer.AdPlayableDiv,t.playPromise,t.player.adDetailsCallback,t.errorSubsCallback,t.onParallelInitializedPromise,t.lookingForAnAdState):(t.isNonGuaranteedAttempted=!0,r=new w(t.playlist,i,n,t.nonGuaranteedPlayer.AdPlayableDiv,t.playPromise,t.player.adDetailsCallback,t.errorSubsCallback,t.onParallelInitializedPromise,t.lookingForAnAdState)),e.setStateAndDoAction(new m(t.playlist,i,n,o,t.nonGuaranteedPlayer.AdPlayableDiv,t.playPromise,t.player.adDetailsCallback,t.errorSubsCallback,t.onParallelInitializedPromise,r,t.lookingForAnAdState))})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from playable ",i)),e.setStateAndDoAction(t.lookingForAnAdState)})})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from configurator",i)),e.setStateAndDoAction(t.lookingForAnAdState)})):(this.geckoLogger.logError("Moving to next state since non guaranteed player not created"),e.setStateAndDoAction(this.lookingForAnAdState)),f.createPromise(void 0)},e.prototype.findNextAdReady=function(e){var t=e.getReadyAds();if(t&&t.length>0)return this.getAdData(t[0])},e.prototype.getAdData=function(e){if(1===this.adData.length)return this.adData[0];var t=this.adData.filter(function(t){return t.adId===e});return t.length>0?t[0]:void 0},e}();t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/LookingForNonGuaranteedState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../..//../../logging/LogManager":58,"../../../..//../../utility/SubscribableCallback":274,"../../../..//../../utility/Utility":275,"../../../..//video/MobileBrowserHelper":184,"../../../..//video/NonGuaranteedPlayer":185,"../../BehaviourProvider":122,"./State":138,"./TryingAdState":140,"./TryingNextNonGuaranteedAdState":141,"./WaitingToTryAdState":143,_process:8,buffer:4,timers:9}],136:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=function(){function e(){this.geckoLogger=g.getLogger("Star: NoDemandState")}return e.prototype.getName=function(){return h.StateName.NoDemandState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){return e.UniverStateContext.TrackBrowserExitPromise.reject(),e.UniverStateContext.NoDemandPromise.getPromise().then(function(){e.UniverStateContext.MobilePlayableInteractionDetector.stopTrackingPlayableTouches()}),e.UniverStateContext.NoDemandPromise.resolve(),e.UniverStateContext.ShowCornerSlot?e.UniverStateContext.ScrollTriggerPromise.getPromise().then(function(){e.UniverStateContext.InArticleTracker.fireNoDemandTrackerOnce()}):e.UniverStateContext.IaViewablePromise.getPromise().then(function(){e.UniverStateContext.InArticleTracker.fireNoDemandTrackerOnce()}),e.NoDemandCallback.notify(),e.UniverStateContext.CompletePromise.notify(),e.UniverStateContext.dynamicElements&&e.UniverStateContext.dynamicElements.length>0&&f.removeUnwantedNodes(e.PlacementElement,e.UniverStateContext.dynamicElements),f.createPromise(void 0)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/NoDemandState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"./State":138,_process:8,buffer:4,timers:9}],137:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=function(){function e(e){this.lookingForAdState=e}return e.prototype.getName=function(){return h.StateName.ReloadAdState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.GuaranteeAdReadyCountCallback,callbackMethod:function(i){i>0&&e.setStateAndDoAction(t.lookingForAdState)}}),i.push({onSubscribeMethod:e.NonGuaranteeAdReadyCountCallback,callbackMethod:function(i){e.setStateAndDoAction(t.lookingForAdState)}}),i.push({onSubscribeMethod:e.LookForAdCallback,callbackMethod:function(i){e.setStateAndDoAction(t.lookingForAdState)}}),i},e.prototype.doAction=function(e){return f.createPromise(void 0)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/ReloadAdState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../utility/Utility":275,"./State":138,_process:8,buffer:4,timers:9}],138:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.BeginState=0]="BeginState",e[e.WaitingToLookForAnAdState=1]="WaitingToLookForAnAdState",e[e.LookingForAnAdState=2]="LookingForAnAdState",e[e.LookingForGuaranteedAdState=3]="LookingForGuaranteedAdState",e[e.LookingForNonGuaranteedAdState=4]="LookingForNonGuaranteedAdState",e[e.WaitingToTryAdState=5]="WaitingToTryAdState",e[e.TryingAdState=6]="TryingAdState",e[e.TryingNextNonGuaranteedAdState=7]="TryingNextNonGuaranteedAdState",e[e.NoDemandState=8]="NoDemandState",e[e.AllAdsTriedState=9]="AllAdsTriedState",e[e.ReloadAdState=10]="ReloadAdState"}(p=i.StateName||(i.StateName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/State.ts","/src/renderer/inarticle/universe/galaxy/star/states");
},{_process:8,buffer:4,timers:9}],139:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../../../logging/LogManager"),f=e("./State"),g=e("../../../../../../utility/SubscribableCallback"),m=e("../../BehaviourProvider"),y=function(){function e(e,t,i,n,r,o,a,s,l,d,c){var u=this;this.univerStateContext=e,this.playlist=t,this.hBHelper=i,this.adData=n,this.wrapperPlacementDiv=r,this.guranteedAdPlayerDiv=o,this.nonGuranteedAdPlayerDiv=a,this.state=s,this.placementElement=l,this.inlineSpceG=d,this.maxInarticleWidth=c,this.logger=h.getLogger("Star:StateContext"),this.noDemandCallback=new g,this.tryAdCallback=new g,this.adReadyCallback=new g,this.lookForAdCallback=new g,this.adImprCallback=new g,this.allAdsTriedCallback=new g,this.stillTryingCallback=new g,this.adsShownCount=0,this.stopTouchListener=new g,this.nonGuaranteeAdReadyCountCallback=new g,this.guaranteeAdReadyCountCallback=new g,this.canLookForAdOnError=!1,this.canLookForAdOnErrorCallback=new g,this.nonGuaranteedAdReadyCount=0,this.guaranteedAdCount=0,this.isWaitingToLookForAd=!1,this.behaviourProvider=new m(n),this.nonGuaranteeAdReadyCountCallback.subscribe(function(e){u.nonGuaranteedAdReadyCount=e>=0?e:0}),this.guaranteeAdReadyCountCallback.subscribe(function(e){u.guaranteedAdCount=e>=0?e:0}),this.allAdsTriedCallback.subscribe(function(){u.guaranteedAdCount=0,u.nonGuaranteedAdReadyCount=0}),this.canLookForAdOnErrorCallback.subscribe(function(e){u.canLookForAdOnError=e}),this.doAction()}return Object.defineProperty(e.prototype,"FallBackToState",{get:function(){return this.fallBackToState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxInarticleWidth",{get:function(){return this.maxInarticleWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InlineSpceGrabber",{get:function(){return this.inlineSpceG},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UniverStateContext",{get:function(){return this.univerStateContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayList",{get:function(){return this.playlist},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoDemandCallback",{get:function(){return this.noDemandCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TryAdCallback",{get:function(){return this.tryAdCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdReadyCallback",{get:function(){return this.adReadyCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LookForAdCallback",{get:function(){return this.lookForAdCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdImprCallback",{get:function(){return this.adImprCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AllAdsTriedCallback",{get:function(){return this.allAdsTriedCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StillTryingCallback",{get:function(){return this.stillTryingCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdsShownCount",{get:function(){return this.adsShownCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HBHelper",{get:function(){return this.hBHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NonGuranteedAdPlayerDiv",{get:function(){return this.nonGuranteedAdPlayerDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GuranteedAdPlayerDiv",{get:function(){return this.guranteedAdPlayerDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WrapperPlacementDiv",{get:function(){return this.wrapperPlacementDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StopTouchListener",{get:function(){return this.stopTouchListener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NonGuaranteeAdReadyCountCallback",{get:function(){return this.nonGuaranteeAdReadyCountCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GuaranteeAdReadyCountCallback",{get:function(){return this.guaranteeAdReadyCountCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BehaviourProvider",{get:function(){return this.behaviourProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NonGuaranteedAdReadyCount",{get:function(){return this.nonGuaranteedAdReadyCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GuaranteedAdReadyCount",{get:function(){return this.guaranteedAdCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdData",{get:function(){return this.adData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TotalAdReadyCount",{get:function(){return this.nonGuaranteedAdReadyCount+this.guaranteedAdCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsWaitingToLookForAd",{get:function(){return this.isWaitingToLookForAd},set:function(e){this.isWaitingToLookForAd=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementElement",{get:function(){return this.placementElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanLookForAdOnError",{get:function(){return this.canLookForAdOnError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanLookForAdOnErrorCallback",{get:function(){return this.canLookForAdOnErrorCallback},enumerable:!0,configurable:!0}),e.prototype.incrementAdsShownCount=function(){this.adsShownCount=this.adsShownCount+1},e.prototype.setAdData=function(e){this.adData=e},e.prototype.setFallBackState=function(e){this.fallBackToState=e},e.prototype.setHBHelper=function(e){this.hBHelper=e},e.prototype.setState=function(e){this.logger.logInfo("Star State changing from "+f.StateName[this.state.getName()]+" to "+f.StateName[e.getName()]),this.state=e},e.prototype.getState=function(){return this.state},e.prototype.doAction=function(){if(this.logger.logInfo("Star performing State action "+f.StateName[this.state.getName()]),this.prevStateSpecificCallback)for(var e in this.prevStateSpecificCallback)this.prevStateSpecificCallback.hasOwnProperty(e)&&this.prevStateSpecificCallback[e]&&this.prevStateSpecificCallback[e]();this.prevStateSpecificCallback=[];var t=this.state.getStateSpecificCallbackPairs(this);if(t)for(var i in t)if(t.hasOwnProperty(i)&&(t[i].onSubscribeMethod||t[i].callbackMethod)){var n=t[i];this.prevStateSpecificCallback.push(n.onSubscribeMethod.subscribe(n.callbackMethod))}this.state.doAction(this)},e.prototype.setStateAndDoAction=function(e){this.logger.logInfo("Star State changing from "+f.StateName[this.state.getName()]+" to "+f.StateName[e.getName()]),this.setState(e),this.doAction()},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/StateContext.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/SubscribableCallback":274,"../../BehaviourProvider":122,"./State":138,_process:8,buffer:4,timers:9}],140:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=e("../../../../../../video/player/Player"),y=e("./WaitingToLookForAnAdState"),b=e("../model/Sun"),v=e("../../../../model/Behaviours"),P=function(){function e(e,t,i,n,r,o,a,s,l){this.playlist=e,this.configurator=t,this.playable=i,this.playableAdDiv=n,this.playPromise=r,this.adDetailsCallback=o,this.errorSubsCallback=a,this.onParallelInitializedPromise=s,this.lookingForAnAdState=l,this.geckoLogger=g.getLogger("Star: TryingAdState"),this.callAdPlayableCallback=!0}return e.prototype.getName=function(){return h.StateName.TryingAdState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:this.playable.getOnAdImpressionSubscribable(),callbackMethod:function(i){t.geckoLogger.logInfo(" onAdImpression : "+t.playable.getId()+",  "+i.CreativeProperties.CP_ADID);var n=e.BehaviourProvider.getBehaviour(i.CreativeProperties.CP_ADID);n||(n=v.BehaviourParser.getBehaviours(e.UniverStateContext.Behaviours)),n?(e.AdImprCallback.notify(new b(t.playable,t.playableAdDiv,i,n,t.configurator)),e.setStateAndDoAction(new y(t.lookingForAnAdState))):(t.geckoLogger.logError("No behavour for the adid "+i.CreativeProperties.CP_ADID),e.setStateAndDoAction(t.lookingForAnAdState))}}),i.push({onSubscribeMethod:e.LookForAdCallback,callbackMethod:function(){e.StillTryingCallback.notify()}}),i.push({onSubscribeMethod:this.errorSubsCallback,callbackMethod:function(i){e.CanLookForAdOnErrorCallback.notify(!0),e.setStateAndDoAction(t.lookingForAnAdState)}}),i.push({onSubscribeMethod:this.adDetailsCallback,callbackMethod:function(i){e.UniverStateContext.MobilePlayableInteractionDetector.setAdId(i.CreativeProperties.CP_ADID),t.callAdPlayableCallback&&(t.callAdPlayableCallback=!1,e.UniverStateContext.MobilePlayableInteractionDetector.adPlayableCallback().subscribe(function(t){e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(t)})),i.selectedPlayer===m.PLAYERTYPE.HTML5&&(t.geckoLogger.logInfo("calling play on Html5 player "),setTimeout(function(){t.geckoLogger.logInfo("adSelected play called "),t.playable.play()},750))}}),i},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.playable.getId()},e.prototype.doAction=function(e){var t=this;return this.onParallelInitializedPromise.getPromise().then(function(){t.geckoLogger.logDebug("onParallelInitialized : "),e.UniverStateContext.InArticleTracker.fireParallelRequestsTrackerOnce()}),this.playable.onPlay(function(){t.geckoLogger.logInfo("Play called"),e.StopTouchListener.notify(!0)}),this.startAd(this.playable),f.createPromise(void 0)},e.prototype.startAd=function(e){this.geckoLogger.logInfo("Begin next ad play"),e.start(),this.playPromise.resolve()},e}();t.exports=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/TryingAdState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"../../../../../../video/player/Player":286,"../../../../model/Behaviours":120,"../model/Sun":130,"./State":138,"./WaitingToLookForAnAdState":142,_process:8,buffer:4,timers:9}],141:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./TryingAdState"),g=e("../../../../../../logging/LogManager"),m=e("./State"),y=function(e){function t(){var t=e.apply(this,arguments)||this;return t.geckoLogger=g.getLogger("Star: TryingNextNonGuaranteedAdState"),t}return h(t,e),t.prototype.getName=function(){return m.StateName.TryingNextNonGuaranteedAdState},t.prototype.startAd=function(e){this.geckoLogger.logDebug("Begin next play"),e.startNextAd()},t}(f);t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/TryingNextNonGuaranteedAdState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"./State":138,"./TryingAdState":140,_process:8,buffer:4,timers:9}],142:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=function(){function e(e){this.lookingForanAdState=e}return e.prototype.getName=function(){return h.StateName.WaitingToLookForAnAdState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.LookForAdCallback,callbackMethod:function(){e.IsWaitingToLookForAd=!1,e.setStateAndDoAction(t.lookingForanAdState)}}),i},e.prototype.doAction=function(e){return e.IsWaitingToLookForAd=!0,e.setFallBackState(this),f.createPromise(void 0)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/WaitingToLookForAnAdState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../utility/Utility":275,"./State":138,_process:8,buffer:4,timers:9}],143:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../../utility/Utility"),g=e("../../../../../../logging/LogManager"),m=function(){function e(e,t,i,n,r,o,a,s,l,d,c){this.playlist=e,this.configurator=t,this.playable=i,this.possibleNextAd=n,this.playableAdDiv=r,this.playPromise=o,this.adDetailsCallback=a,this.errorSubsCallback=s,this.onParallelInitializedPromise=l,this.tryingAdState=d,this.lookingForAnAdState=c,this.geckoLogger=g.getLogger("Star: WaitingToTryAdState")}return e.prototype.getName=function(){return h.StateName.WaitingToTryAdState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.TryAdCallback,callbackMethod:function(){e.setStateAndDoAction(t.tryingAdState)}}),i},e.prototype.doAction=function(e){return e.AdReadyCallback.notify(this.possibleNextAd),f.createPromise(void 0)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/star/states/WaitingToTryAdState.ts","/src/renderer/inarticle/universe/galaxy/star/states")},{"../../../../../../logging/LogManager":58,"../../../../../../utility/Utility":275,"./State":138,_process:8,buffer:4,timers:9}],144:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../logging/LogManager"),g=e("../../../../../utility/Utility"),m=e("es6-promise"),y=e("./WaitingForReplayState"),b=e("./CompleteState"),v=e("./LastFrameState"),P=e("../../../video/VideoTypeHelper"),w=e("../../../DynamicPosition"),S=function(){function e(e,t,i,n,r){this.playable=t,this.adProperties=i,this.playingAdState=n,this.solarContext=r,this.geckoLogger=f.getLogger("Galaxy: AdCompleteState"),this.waitingForReplayState=new y(this.solarContext,this.adProperties,this.playable,n)}return e.prototype.getName=function(){return h.StateName.AdCompleteState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.playable.getId()},e.prototype.doAction=function(e){var t=this;if(this.solarContext.IsInline)e.IsIAUnitPaused=!0,this.closeInarticle(e);else{var i=0;if(i=this.adProperties.Behaviour.LBOpen?this.adProperties.Behaviour.LBOpen:0,this.adProperties.LeaveBehind){var n=this.adProperties.LeaveBehind.hideLeaveBehind();m.Promise.race([n,new m.Promise(function(t,i){setTimeout(function(){e.IsIAUnitPaused=!0,t()},2e3)})]).then(function(){e.UniverStateContext.ShowCornerSlot?t.closeCornerSlotInarticle(e):(e.IsIAUnitPaused=!0,e.AdcontentHolder.attachInline(t.adProperties.InlineSpaceProperties,"undefined"!=typeof t.adProperties.Behaviour.AddSpaceBelow?t.adProperties.Behaviour.AddSpaceBelow:0,"undefined"!=typeof t.adProperties.Behaviour.AddSpaceAbove?t.adProperties.Behaviour.AddSpaceAbove:0,!!t.adProperties.Behaviour.ThumbnailStrip&&t.adProperties.Behaviour.ThumbnailStrip).then(function(){e.IsAdPlayComplete||e.PlayList.resize(t.adProperties.InlineSpaceProperties.width,t.adProperties.InlineSpaceProperties.height),t.closeInarticle(e)}))})["catch"](function(){e.UniverStateContext.ShowCornerSlot?t.closeCornerSlotInarticle(e):(e.IsIAUnitPaused=!0,e.AdcontentHolder.attachInline(t.adProperties.InlineSpaceProperties,"undefined"!=typeof t.adProperties.Behaviour.AddSpaceBelow?t.adProperties.Behaviour.AddSpaceBelow:0,"undefined"!=typeof t.adProperties.Behaviour.AddSpaceAbove?t.adProperties.Behaviour.AddSpaceAbove:0,!!t.adProperties.Behaviour.ThumbnailStrip&&t.adProperties.Behaviour.ThumbnailStrip).then(function(){e.IsAdPlayComplete||e.PlayList.resize(t.adProperties.InlineSpaceProperties.width,t.adProperties.InlineSpaceProperties.height),t.closeInarticle(e)}))})}}return g.createPromise(void 0)},e.prototype.closeInarticle=function(e){var t=this,i=0,n=0;i=this.adProperties.Behaviour.AutoCloseVideo?this.adProperties.Behaviour.AutoCloseVideo:0,n=this.adProperties.Behaviour.KeepUnitOpen?this.adProperties.Behaviour.KeepUnitOpen:0,n?(this.adProperties.IAButtonListener.hideInarticleInlineButtons(e.IsAdPlayComplete),this.adProperties.IAButtonListener.hideLBFullScreenButton(),this.adProperties.IAButtonListener.showInArticleInlineCloseButton(),this.solarContext.EndCallback.notify(),e.setStateAndDoAction(new v((!1),this.adProperties,this.solarContext))):(e.IsInarticleClosed=!0,e.AdcontentHolder.hideInArticle(this.adProperties.Behaviour.noAnimation).then(function(){t.closePlaylist(e,e.PlayList),t.solarContext.EndCallback.notify(),e.setStateAndDoAction(new b((!1))),e.dynamicElements&&e.dynamicElements.length>0&&(w.hideNodes(e,window,1),e.PlacementElement.style.position="",e.PlacementElement.style.top="",g.removeUnwantedNodes(e.PlacementElement,e.dynamicElements))}))},e.prototype.closeCornerSlotInarticle=function(e){var t=this,i=0;i=this.adProperties.Behaviour.AutoCloseVideo?this.adProperties.Behaviour.AutoCloseVideo:0,P.canReplay(this.adProperties.AdDetails)?i?this.closeCornerSlotIAHandler(e).then(function(i){t.solarContext.EndCallback.notify(),e.setStateAndDoAction(i)}):(this.solarContext.EndCallback.notify(),e.setStateAndDoAction(new b((!1)))):(e.IsInarticleClosed=!0,this.closePlaylist(e,e.PlayList),this.solarContext.EndCallback.notify(),e.setStateAndDoAction(new b((!1))))},e.prototype.closeIAShowReplayHandler=function(e){var t=this;return new m.Promise(function(i){e.IsInarticleClosed=!0,e.AdcontentHolder.hideInArticle(t.adProperties.Behaviour.noAnimation).then(function(){t.geckoLogger.logInfo("ad complete, close IA"),e.dynamicElements&&e.dynamicElements.length>0&&(e.PlacementElement.style.position="",e.PlacementElement.style.top="",g.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)),t.closePlaylist(e,e.PlayList),t.adProperties.ReplayBarHolder?(t.adProperties.ReplayBarHolder.changeLinkText(e.IsAdPlayComplete),t.adProperties.ReplayBarHolder.showReplayBar(),i(t.adProperties.ReplayBarHolder.isReplayBarVisible()?t.waitingForReplayState:new b((!1)))):i(new b((!1)))})})},e.prototype.closeCornerSlotIAHandler=function(e){var t=this;return new m.Promise(function(i){e.IsInarticleClosed=!0,t.geckoLogger.logInfo("ad complete, close corner slot IA"),t.closePlaylist(e,e.PlayList),i(new b((!1)))})},e.prototype.closePlaylist=function(e,t){e.IsAdPlayComplete||e.PlayList.close()},e}();t.exports=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/AdCompleteState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../DynamicPosition":109,"../../../video/VideoTypeHelper":188,"./CompleteState":147,"./LastFrameState":151,"./State":162,"./WaitingForReplayState":169,_process:8,buffer:4,"es6-promise":5,timers:9}],145:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("es6-promise"),m=e("../../../../../logging/LogManager"),y=e("../../../model/AdProperties"),b=e("./PlayingAdState"),v=e("../../../../../video/position/VideoAdPositioningHelper"),P=e("../../../MediaTitleHolder"),w=e("../../../IAButtonListener"),S=e("../../../video/ReplayBarHolder"),C=e("../../../video/LeaveBehindHolder"),A=e("../../../video/LeaveBehindSanookHolder"),I=e("../../../IAtitleHolder"),T=e("../solar/states/StateContext"),B=e("../solar/states/LbState"),k=e("../solar/states/InlineState"),E=e("../../../../../video/MediaDetails"),L=e("../../../video/CornerSlotHolder"),D=e("../solar/states/CornerSlotState"),O=e("../../../CornerSlotTitleHolder"),R=e("../solar/states/EndState"),N=e("../../../DynamicPosition"),_="topbanner",x="middlebanner",U="bottombanner",M="bannerad1",H="bannerad2",V="bannerad3",F=2,W="AdProperties",G="IPL_TWITTER_BANNERBOTTOM",j="IPL_TWITTER_BANNERTOP",z=function(){function e(e,t,i,n,r,o){this.playable=e,this.playableAdDiv=t,this.adObject=i,this.behaviour=n,this.configurator=r,this.waitingForAdReadyState=o,this.thumbnailHeight=0,this.geckoLogger=m.getLogger("Galaxy: AdSetupState"),this.played=!1}return e.prototype.getName=function(){return h.StateName.AdSetupState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.adObject.adId+":"+this.adObject.mediaURL},e.prototype.doAction=function(e){var t=this,i=!1;0===e.StarStateContext.AdsShownCount?(e.UniverStateContext.ImpressionPromise.resolve(),"undefined"!=typeof this.adObject.CreativeProperties&&null!==this.adObject.CreativeProperties&&(i=!0,e.UniverStateContext.InArticleTracker.fireOpportunityFilledTrackerOnce(this.getTrackerParam(this.adObject)))):"undefined"!=typeof this.adObject.CreativeProperties&&null!==this.adObject.CreativeProperties&&(i=!0,e.UniverStateContext.InArticleTracker.fireMultiOpportunityFilledTracker(this.getTrackerParam(this.adObject))),e.UniverStateContext.TrackBrowserExitPromise.reject();var n=this.behaviour.maxInarticleWidth;e.UniverStateContext.ShowCornerSlot&&"undefined"!=typeof this.behaviour.adSlotPosition&&(n=this.behaviour.adSlotPosition.width);var r=this.behaviour.adSlotWidth,o=this.behaviour.adSlotHeight,a=this.behaviour.AspectRatioWidth?this.behaviour.AspectRatioWidth:0,s=this.behaviour.AspectRatioHeight?this.behaviour.AspectRatioHeight:0,l=e.InlineSpceG.getInlinePosition(e.PlacementElement,this.adObject.mediaWidth,this.adObject.mediaHeight,n,r,o,a,s);if(e.UniverStateContext.IsSanook&&(this.behaviour.showDisplayAdsByZINCHeader=!1),e.cleanup(),!e.UniverStateContext.ShowCornerSlot){var d=this.parseCompanionData();f.isEmptyObject(d)&&(d=this.getIPLTwitter()),this.setupCompanion(e,d)}e.UniverStateContext.InarticleOpened.getPromise().then(function(){t.geckoLogger.logInfo("show inarticle "),e.UniverStateContext.AdOppTrigger&&setTimeout(function(){e.ViewablityMonitorPromise.then(function(i){i.isViewable()||(t.geckoLogger.logInfo("ad paused for adOpptrigger  "),e.PlayList.pause())})},1e3)});var c=new w(e.UniverStateContext.PlacementId);return c.addButtonsToPlayer(this.configurator,this.adObject.adType,this.behaviour,this.playable.isMute(),e.UniverStateContext.ShowCornerSlot,this.adObject).then(function(){e.ContentPlayerPromise.then(function(n){var r,o,a=new I(document,e.PlacementElement,e.AdcontentHolder.getContainerDiv(),e.InlineSpceG,t.behaviour.showDisplayAdsByZINCHeader,e.UniverStateContext.IsSanook,e.UniverStateContext.PlacementId);if(e.UniverStateContext.ShowCornerSlot){o=void 0;var s=new O(document,e.AdcontentHolder.getContainerDiv(),e.InlineSpceG,t.behaviour.showDisplayAdsByZINCHeader,e.UniverStateContext.PlacementId);r=t.setupCornerSlotUnit(e,s)}else o=t.setupReplay(e),r=t.behaviour.NoLB?void 0:t.setupLeavebehind(e,a),t.behaviour.LBMobile&&(r=t.setupLeavebehind(e,a));c.MuteCallback.subscribe(function(t){e.PlayList.mute(t)}),e.AdcontentHolder.updateSound(t.behaviour.soundIcon);var d,u,p=new y(l,n,i,c,o,t.adObject,t.behaviour,r,d);e.UniverStateContext.ShowCornerSlot?u=t.showCornerSlotUnit(e,p,c,r,l):(t.setupPreroll(n,e,a,l,t.behaviour),u=t.showInlineUnit(e,p,c,r,l)),u.then(function(i){e.StarStateContext.incrementAdsShownCount(),i.doAction(),e.setStateAndDoAction(new b(e,t.playable,t.playableAdDiv,p,i,t.waitingForAdReadyState))})})}),f.createPromise(void 0)},e.prototype.showInlineUnit=function(e,t,i,n,r){var o=this;return new g.Promise(function(a,s){e.ViewablityMonitorPromise.then(function(s){o.pauseVideoOffview(e,o.behaviour,s),s.onViewableStateChange(function(){if(s.isViewable())!e.UniverStateContext.AdOppTrigger||0!==o.behaviour.pauseVideoOffview||o.played||e.IsIAUnitPaused||(e.PlayList.play(),o.played=!0),o.geckoLogger.logInfo("placement is inview : viewableHandler"),e.InlineInViewCallback.notify(s),o.behaviour.LBMobile&&n&&(e.IsAdPlayComplete||t.IAButtonListener.showInArticleInlineButtons());else try{var i=void 0;i=t.Behaviour.adCount,o.geckoLogger.logInfo("placement is unviewable : unviewableHandler"),(!e.IsAdPlayComplete||0!==t.Behaviour.LBOpen||i>=F)&&e.InlineOutOfViewCallback.notify(s)}catch(r){o.geckoLogger.logError(f.errorMsg(" InlineOutOfViewCallback catch called ",r)),e.InlineOutOfViewCallback.notify(s)}}),N.positionDiv(e,window,t,1,1),e.PlayList.updateCurrentPlayable(o.playable);var l;if(e.UniverStateContext.RenderedPromise.resolve(),o.playable.resize(t.InlineSpaceProperties.width,t.InlineSpaceProperties.height),0===e.StarStateContext.AdsShownCount&&e.AdcontentHolder.showInArticle(t.InlineSpaceProperties,t.Behaviour.noAnimation,t.Behaviour.AddSpaceBelow?t.Behaviour.AddSpaceBelow:0,t.Behaviour.AddSpaceAbove?t.Behaviour.AddSpaceAbove:0,!!t.Behaviour.ThumbnailStrip&&t.Behaviour.ThumbnailStrip,e.UniverStateContext.InarticleOpened)["catch"](function(e){o.geckoLogger.logError(f.errorMsg(" adContentHandler's showInArticle catch called ",e))}),!s.isViewable()&&n&&t.Behaviour.LBFirst){e.AdcontentHolder.adjustPlacementContainer(t.Behaviour.noAnimation),t.IAButtonListener.hideInarticleInlineButtons(e.IsAdPlayComplete),t.VastAdParametersExist&&e.UniverStateContext.InArticleTracker.fireLbImpressionTrackerOnce(o.getTrackerParam(t.AdDetails)),l=new T(e,o.playable,e.PlayList,i,r,n,o.behaviour.pauseVideoOffview,o.behaviour.AddSpaceBelow,new B(n,new k));var d=t.Behaviour.Sanook;d?t.IAButtonListener.hideLBButtons():t.IAButtonListener.showLBButtons()}else if((e.StarStateContext.AdsShownCount>0||o.isMidroll(o.behaviour))&&!s.isViewable()&&n){l=new T(e,o.playable,e.PlayList,i,r,n,o.behaviour.pauseVideoOffview,o.behaviour.AddSpaceBelow,new B(n,new k));var d=t.Behaviour.Sanook;t.IAButtonListener.hideInarticleInlineButtons(!1),d?t.IAButtonListener.hideLBButtons():t.IAButtonListener.showLBButtons()}else l=new T(e,o.playable,e.PlayList,i,r,n,o.behaviour.pauseVideoOffview,o.behaviour.AddSpaceBelow,new k),t.IAButtonListener.showInArticleInlineButtons();o.behaviour.LBMobile&&n&&o.mobileLbOffview(e,t,o.behaviour,s,n),e.AdcontentHolder.getDivforMediaContent()&&(e.AdcontentHolder.getDivforMediaContent().style.display="none"),e.WrapperPlacementDiv.parentElement&&(e.WrapperPlacementDiv.parentElement.style.display="block"),o.playableAdDiv.style.display="block";var c=function(){try{i.cleanUpButtons(i.getButtonIds())}catch(e){o.geckoLogger.logInfo('"Failed to cleanup buttons - '+e)}};e.CleanupFunc=c,a(l)})["catch"](function(e){o.geckoLogger.logError(f.errorMsg("iaViewabilityMonitor inside mergedBehaviorsPromise catch called ",e))})})},e.prototype.showCornerSlotUnit=function(e,t,i,n,r){var o=this;return new g.Promise(function(a,s){e.PlayList.updateCurrentPlayable(o.playable);var l;e.UniverStateContext.RenderedPromise.resolve(),o.playable.resize(t.InlineSpaceProperties.width,t.InlineSpaceProperties.height);var d={id:e.AdcontentHolder.getContainerDiv().id,debugMode:"true"===f.getNameParameter("zView",f.getTopWindowPageUrl()),IntervalForPullingViewablityMs:25};if(e.UniverStateContext.ViewabilityDetector.getViewabilityMonitor(d).then(function(t){t.onViewableStateChange(function(){t.isViewable()&&(o.geckoLogger.logInfo("Fired viewable tracker for corner slot unit"),e.UniverStateContext.IaViewablePromise.resolve())}),t.isViewable()&&(o.geckoLogger.logInfo("Fired viewable tracker for corner slot unit 2"),e.UniverStateContext.IaViewablePromise.resolve()),e.UniverStateContext.IaViewablePromise.getPromise().then(function(){t.stopViewabilityMonitor()})})["catch"](function(e){o.geckoLogger.logError(f.errorMsg("vbDetector's getViewabilityMonitor catch called ",e))}),n){n.showLeaveBehind(),e.AdcontentHolder.adjustPlacementContainer(t.Behaviour.noAnimation),t.IAButtonListener.hideInarticleInlineButtons(e.IsAdPlayComplete);var c=!0;o.behaviour.SoundOnload&&(c=0===o.behaviour.SoundOnload),t.IAButtonListener.hideSoundButton(),t.IAButtonListener.updateMuteStateLB(c),t.VastAdParametersExist&&e.UniverStateContext.InArticleTracker.fireLbImpressionTrackerOnce(o.getTrackerParam(t.AdDetails)),l=new T(e,o.playable,e.PlayList,i,r,n,o.behaviour.pauseVideoOffview,o.behaviour.AddSpaceBelow,new D(n))}else l=new T(e,o.playable,e.PlayList,i,r,n,o.behaviour.pauseVideoOffview,o.behaviour.AddSpaceBelow,new R);e.AdcontentHolder.getDivforMediaContent()&&(e.AdcontentHolder.getDivforMediaContent().style.display="none"),e.WrapperPlacementDiv.parentElement&&(e.WrapperPlacementDiv.parentElement.style.display="block"),o.playableAdDiv.style.display="block";var u=function(){try{i.cleanUpButtons(i.getButtonIds())}catch(e){o.geckoLogger.logInfo('"Failed to cleanup buttons - '+e)}};e.CleanupFunc=u,a(l)})},e.prototype.setupMediaContent=function(e,t){var i=this;return new g.Promise(function(n){try{var r=i.adObject.CreativeProperties.CP_AD_META,o=v.getMedia(r,i.adObject.CreativeProperties);e.MediaPlayerPromise.then(function(r){if(o){r.setMediaDetails(o);var a=new P(document,e.PlacementElement,e.UniverStateContext.PlacementId);if(a.showCaption(o),i.behaviour.showDisplayAdsByZINCHeader=!1,i.behaviour.removeReplayStrip=1,i.behaviour.AutoCloseVideo=1,!e.UniverStateContext.ShowCornerSlot){var s=i.getMediaTitleSpanHeight(e);e.AdcontentHolder.adjustPlacementHeight(t,!0,0,s,i.behaviour.AddSpaceBelow)}o&&e.dynamicElements&&e.dynamicElements.length>0&&(f.removeUnwantedNodes(e.PlacementElement,e.dynamicElements),e.dynamicElements=void 0)}n(o)})}catch(a){i.geckoLogger.logError(f.errorMsg(" AdMedia perform event failed ",a))}})},e.prototype.getMediaTitleSpanHeight=function(e){var t=0;try{var i=e.PlacementElement.getElementsByClassName(E.VIDEO_TITLE_SPAN_CLASSNAME)[0];if(i&&i.offsetHeight)return t=i.offsetHeight}catch(n){this.geckoLogger.logError("error:: AdcontentHolder:: adjustPlacementHeight for mediaContentTitle height ::"+n)}return t},e.prototype.parseCompanionData=function(){var e=this.adObject.companions,t={};if(e.length>0){var i=["image/png","image/jpeg","image/gif","image/jpg","html"];if(e[0].variations&&e[0].variations.length>0)for(var n=e[0].variations.length,r=0;r<n;r++)(i.indexOf(e[0].variations[r].creativeType)>=0||i.indexOf(e[0].variations[r].resourceType)>=0)&&(e[0].variations[r].resource.toLowerCase().indexOf(M)>0&&(t[U]={width:e[0].variations[r].width,height:e[0].variations[r].height,src:e[0].variations[r].resource,clicktracker:e[0].variations[r].companionClickThroughURLTemplate,type:"html"===e[0].variations[r].resourceType?"html":e[0].variations[r].creativeType}),e[0].variations[r].resource.toLowerCase().indexOf(H)>0&&(t[x]={width:e[0].variations[r].width,height:e[0].variations[r].height,src:e[0].variations[r].resource,clicktracker:e[0].variations[r].companionClickThroughURLTemplate,type:"html"===e[0].variations[r].resourceType?"html":e[0].variations[r].creativeType}),e[0].variations[r].resource.toLowerCase().indexOf(V)>0&&(t[_]={
width:e[0].variations[r].width,height:e[0].variations[r].height,src:e[0].variations[r].resource,clicktracker:e[0].variations[r].companionClickThroughURLTemplate,type:"html"===e[0].variations[r].resourceType?"html":e[0].variations[r].creativeType}))}return t},e.prototype.getIPLTwitter=function(){var e={},t=f.parseXML(this.adObject.CreativeProperties.CP_AD_META),i=f.getNodeElementValues(t,W,j);if(i&&i.length>0){var n=JSON.parse(i[0]);e[_]={width:n.width,height:n.height,src:n.src,clicktracker:n.clicktracker,type:n.type}}var r=f.getNodeElementValues(t,W,G);if(r&&r.length>0){var o=JSON.parse(r[0]);e[U]={width:o.width,height:o.height,src:o.src,clicktracker:o.clicktracker,type:o.type}}return e},e.prototype.setupCompanion=function(e,t){try{if(Object.keys(t).length>0){var i=e.InlineSpceG.getInlinePosition(e.PlacementElement,this.adObject.mediaWidth,this.adObject.mediaHeight,this.behaviour.maxInarticleWidth),n=e.AdcontentHolder.addcompanionholder();n&&n.createCompanionBanner(t,i.width)}}catch(r){this.geckoLogger.logError("Error with companion data "+r)}},e.prototype.setupPreroll=function(e,t,i,n,r){var o=0;if(e&&e.hasContent()){if(this.behaviour.ThumbnailStrip){var a=t.StarStateContext.TotalAdReadyCount-1;t.AdcontentHolder.getDivForStrip()&&(t.AdcontentHolder.getDivForStrip().style.display="block"),this.geckoLogger.logInfo("total adready count:"+a),e.activateThumbnailStrip(3),this.thumbnailHeight=e.DivHeight}this.behaviour.ThumbnailStrip||"preroll"===r.vAdPos||this.isMidroll(r)?(e.activateThumbnailStrip(3),i.hideTitle(),e.setMediaTitleHeaders(),o=this.getMediaTitleSpanHeight(t),("preroll"===r.vAdPos||this.isMidroll(r))&&e.showTimeRemainingDiv(),t.AdcontentHolder.adjustPlacementHeight(n,!0,this.thumbnailHeight,o,this.behaviour.AddSpaceBelow)):this.setupAdTitle(e,t,i,n)}else this.setupAdTitle(e,t,i,n)},e.prototype.setupAdTitle=function(e,t,i,n){i.designCaption(),i.exhibitTitle(),e&&e.hideTitleHeaders();var r=this.getMediaTitleSpanHeight(t);t.AdcontentHolder.adjustPlacementHeight(n,!1,0,r,this.behaviour.AddSpaceBelow)},e.prototype.setupReplay=function(e){var t={advertisementText:"Advertisement:",replayLinkText:"Replay Ad",resumeLinkText:"Resume Ad",removeReplayStrip:1,removeResumeStrip:1};return new S.ReplayBarHolder(e.AdcontentHolder,t)},e.prototype.getTrackerParam=function(e){var t={nID:parseInt(e.CreativeProperties.CP_NID,10),chID:parseInt(e.CreativeProperties.CP_CHANID,10),pubID:parseInt(e.CreativeProperties.CP_PUBID,10),dimID:parseInt(e.CreativeProperties.CP_DIMID,10),adId:e.CreativeProperties.CP_ADID};return t},e.prototype.setupLeavebehind=function(e,t){var i,n={left:100,LBFirst:this.behaviour.LBFirst,LBSize:this.behaviour.LBSize,NoLB:this.behaviour.NoLB,noAnimation:this.isMidroll(this.behaviour)?1:this.behaviour.noAnimation,LBPosition:"undefined"!=typeof this.behaviour.LBPosition&&null!==this.behaviour.LBPosition?this.behaviour.LBPosition:0,LBOffset:"undefined"!=typeof this.behaviour.LBOffset&&null!==this.behaviour.LBOffset?this.behaviour.LBOffset:0,LBOpen:"undefined"!=typeof this.behaviour.LBOpen&&null!==this.behaviour.LBOpen?this.behaviour.LBOpen:0,LBMouseover:"undefined"!=typeof this.behaviour.LBMouseover&&null!==this.behaviour.LBMouseover?this.behaviour.LBMouseover:0,LBMobile:"undefined"!=typeof this.behaviour.LBMobile&&null!==this.behaviour.LBMobile?this.behaviour.LBMobile:0,LBBgColor:"undefined"!=typeof this.behaviour.LBBgColor&&""!==this.behaviour.LBBgColor?this.behaviour.LBBgColor:""};return i=e.UniverStateContext.IsSanook?new A.LeaveBehindSanookHolder(e.PlayList,t,n,e.AdcontentHolder.getContainerDiv(),e.AdcontentHolder.getPlaceHolderDiv()):new C.LeaveBehindHolder(e.PlayList,t,n,e.AdcontentHolder.getContainerDiv(),e.AdcontentHolder.getPlaceHolderDiv(),e.AdcontentHolder.IconsDiv,e.AdcontentHolder.ClickOverlayDiv,e.PlacementElement)},e.prototype.setupCornerSlotUnit=function(e,t){var i,n={left:0,LBFirst:this.behaviour.LBFirst,LBSize:this.behaviour.adSlotPosition?this.behaviour.adSlotPosition.width:0,NoLB:this.behaviour.NoLB,noAnimation:this.behaviour.noAnimation,LBPosition:0,LBOffset:"undefined"!=typeof this.behaviour.LBOffset&&null!==this.behaviour.LBOffset?this.behaviour.LBOffset:0,LBOpen:"undefined"!=typeof this.behaviour.LBOpen&&null!==this.behaviour.LBOpen?this.behaviour.LBOpen:0,LBMouseover:"undefined"!=typeof this.behaviour.LBMouseover&&null!==this.behaviour.LBMouseover?this.behaviour.LBMouseover:0},r=this.behaviour.adSlotPosition?this.behaviour.adSlotPosition.position:"",o=this.behaviour.AspectRatioWidth>0&&this.behaviour.AspectRatioHeight>0?this.behaviour.AspectRatioHeight/this.behaviour.AspectRatioWidth:.75;return i=new L.CornerSlotHolder(e.PlayList,n,e.AdcontentHolder.getContainerDiv(),e.AdcontentHolder.getPlaceHolderDiv(),r,t,o,e.AdcontentHolder.IconsDiv,e.AdcontentHolder.ClickOverlayDiv,(!0),e.IsCornerSlotInitialized),e.IsCornerSlotInitializedCallback.notify(!0),i},e.prototype.pauseVideoOffview=function(e,t,i){var n=this,r={2:"onEightyPercentViewable",4:"onSixtyPercentViewable",6:"onFourtyPercentViewable",8:"onTwentyPercentViewable"};if(f.isNullOrUndefined(r[t.pauseVideoOffview])){for(var o=i,a=function(i){i>=t.pauseVideoOffview?o[r[i]](function(){n.playable.isFullscreen()||e.getState().getName()===h.StateName.WaitingForReplayState||e.IsAdPlayComplete||(n.geckoLogger.logInfo("pausing video pauseVideoOffview : "+i),e.PlayList.pause())}):o[r[i]](function(){n.geckoLogger.logInfo("playing video pauseVideoOffview : "+i),e.getState().getName()===h.StateName.CompleteState||e.IsAdPlayComplete||e.PlayList.play()})},s=2;s<10;s+=2)a(s);o.onHundredPercentViewable(function(){n.geckoLogger.logInfo("playing video viewable hundred percentage"),e.getState().getName()===h.StateName.CompleteState||e.IsAdPlayComplete||e.PlayList.play()})}},e.prototype.mobileLbOffview=function(e,t,i,n,r){var o=this,a=0,s=!1,l={checkPosition:function(){try{var i=n.getViewability(),l=e.AdcontentHolder.getMainPlayerDiv();e.IsInarticleClosed||e.IsLBClosed||e.IsAdPlayComplete&&!s||(f.isElementAboveViewport(e.PlacementElement,window,document)?(i.viewablePercentage<100&&(e.IsLBVisible=!0,e.IsAdPlayComplete?(t.IAButtonListener.showInArticleLBCloseButton(),t.IAButtonListener.hideReplayButton(),t.IAButtonListener.showLBReplayButton()):t.IAButtonListener.showLBButtons(),i.viewablePercentage<35&&e.AdcontentHolder.getDivForStrip()&&(e.AdcontentHolder.getDivForStrip().style.display="none"),t.IAButtonListener.hideInarticleInlineButtons(e.IsAdPlayComplete)),clearTimeout(a),s=!0,r.resizeLeaveBehind(i.viewablePercentage,l,o.thumbnailHeight)):s&&(r.resizeLeaveBehind(-1,l,o.thumbnailHeight),o.playable.resize(t.InlineSpaceProperties.width,t.InlineSpaceProperties.height),e.IsLBVisible=!1,e.AdcontentHolder.getDivForStrip()&&(e.AdcontentHolder.getDivForStrip().style.display="block"),e.IsAdPlayComplete||(t.IAButtonListener.showInArticleInlineButtons(),t.IAButtonListener.hideLBButtons()),e.IsAdPlayComplete&&(t.IAButtonListener.hideLBButtons(),t.IAButtonListener.showInArticleInlineCloseButton(),t.IAButtonListener.showReplayButton(),t.IAButtonListener.hideLBReplayButton())))}catch(d){o.geckoLogger.logDebug(d.message)}}};window.addEventListener("scroll",l.checkPosition)},e.prototype.isMidroll=function(e){var t=void 0!==e.ThumbnailStrip&&e.ThumbnailStrip===!0;return("preroll"===e.vAdPos||"midroll"===e.vAdPos||t)&&e.midrollSeconds>-1},e}();t.exports=z}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/AdSetupState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../../../video/MediaDetails":281,"../../../../../video/position/VideoAdPositioningHelper":288,"../../../CornerSlotTitleHolder":108,"../../../DynamicPosition":109,"../../../IAButtonListener":110,"../../../IAtitleHolder":112,"../../../MediaTitleHolder":117,"../../../model/AdProperties":119,"../../../video/CornerSlotHolder":179,"../../../video/LeaveBehindHolder":182,"../../../video/LeaveBehindSanookHolder":183,"../../../video/ReplayBarHolder":186,"../solar/states/CornerSlotState":123,"../solar/states/EndState":124,"../solar/states/InlineState":126,"../solar/states/LbState":127,"../solar/states/StateContext":129,"./PlayingAdState":154,"./State":162,_process:8,buffer:4,"es6-promise":5,timers:9}],146:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./WaitingForAdReadyState"),y=function(){function e(){this.geckoLogger=g.getLogger("Galaxy : BeginState")}return e.prototype.getName=function(){return h.StateName.BeginState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){if(!e.UniverStateContext.ShowCornerSlot){e.AdcontentHolder.getContainerDiv(),e.AdcontentHolder.getPlaceHolderDiv();e.PlacementElement.style.height="2px",e.PlacementElement.style.width=""}try{e.UniverStateContext.AdOpportunityPromise.getPromise().then(function(){e.UniverStateContext.InArticleTracker.fireAdOpportunityTrackerOnce()}),e.setStateAndDoAction(new m)}catch(t){this.geckoLogger.logError(f.errorMsg("initialise() catch called ",t))}return f.createPromise(void 0)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/BeginState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./State":162,"./WaitingForAdReadyState":166,_process:8,buffer:4,timers:9}],147:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=function(){function e(e){this.userClosed=e,this.geckoLogger=g.getLogger("Galaxy : CompleteState")}return e.prototype.getName=function(){return h.StateName.CompleteState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){this.geckoLogger.logDebug("Is in complete state");var t=1;e.UniverStateContext.Behaviours.adCount&&(t=parseInt(e.UniverStateContext.Behaviours.adCount[0],10));var i=!1;return e.UniverStateContext.CompletePromise.notify({adCount:e.StarStateContext.AdsShownCount,adShownCount:e.StarStateContext.AdsShownCount,userClosed:this.userClosed}),e.UniverStateContext.StopReloadPromise.resolve(i),e.ViewablityMonitorPromise.then(function(e){e.stopViewabilityMonitor()}),e.AdcontentHolder.getMainPlayerDiv().innerHTML="",e.AdcontentHolder.getDivforMediaContent().style.display="none",f.createPromise(void 0)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/CompleteState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./State":162,_process:8,buffer:4,timers:9}],148:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./CompleteState"),y=e("../../../DynamicPosition"),b=function(){function e(e,t){this.contentBehaviour=e,this.solarContext=t,this.geckoLogger=g.getLogger("Galaxy : ContentCompleteState")}return e.prototype.getName=function(){return h.StateName.ContentCompleteState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this;return this.solarContext.LBCloseButtonCallback.notify(),e.IsInarticleClosed=!0,e.UniverStateContext.ShowCornerSlot&&this.solarContext.LeaveBehind?this.solarContext.LeaveBehind.hideLeaveBehind().then(function(){t.geckoLogger.logInfo("content complete, close IA"),e.PlayList.close(),t.solarContext.EndCallback.notify(),e.setStateAndDoAction(new m((!1)))}):e.AdcontentHolder.hideInArticle(this.contentBehaviour.noAnimation).then(function(){t.geckoLogger.logInfo("content complete, close IA"),e.PlayList.close(),t.solarContext.EndCallback.notify(),e.setStateAndDoAction(new m((!1))),e.dynamicElements&&e.dynamicElements.length>0&&y.hideNodes(e,window,1)}),e.dynamicElements&&e.dynamicElements.length>0&&(e.PlacementElement.style.position="",e.PlacementElement.style.top="",f.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)),f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/ContentCompleteState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../DynamicPosition":109,"./CompleteState":147,"./State":162,_process:8,buffer:4,timers:9}],149:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./InitPrerollState"),y=function(){function e(e,t){this.contentPlayer=e,this.waitingForAdReadyState=t,this.geckoLogger=g.getLogger("Galaxy : ContentPreviewState")}return e.prototype.getName=function(){return h.StateName.ContentPreviewState},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:this.contentPlayer.ContentClickedCallback,callbackMethod:function(){t.geckoLogger.logInfo(" on click of content ");var i=t.contentPlayer.getBehaviour();e.setStateAndDoAction(new m(t.contentPlayer,i,t.waitingForAdReadyState))}}),i},e.prototype.doAction=function(e){return this.contentPlayer.activateThumbnailStrip(3),e.AdcontentHolder.getMainPlayerDiv()&&(e.AdcontentHolder.getMainPlayerDiv().style.display="none"),e.setStateAndDoAction(new m(this.contentPlayer,this.contentPlayer.getBehaviour(),this.waitingForAdReadyState)),f.createPromise(void 0)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/ContentPreviewState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./InitPrerollState":150,"./State":162,_process:8,buffer:4,timers:9}],150:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./PreAdContentSetupState"),y=e("./WaitingForAdImprState"),b=function(){function e(e,t,i){this.contentPlayer=e,this.contentBehaviour=t,this.waitingForAdReadyState=i,this.geckoLogger=g.getLogger("Galaxy : InitPrerollState"),this.callAdPlayableCallback=!0}return e.prototype.getName=function(){return h.StateName.InitPrerollState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){if(this.contentPlayer.IsContentActive){var t=this.contentPlayer.getActiveContentPlayable();e.PlayList.updateCurrentPlayable(t),t.play(),e.setStateAndDoAction(new m(this.contentPlayer,t,this.contentBehaviour,this,this.waitingForAdReadyState))}else{this.geckoLogger.logDebug("Begin content play");var i=this.contentPlayer.activateContent(!e.UniverStateContext.ShowCornerSlot);i?(e.PlayList.add(i),e.PlayList.start(),e.setStateAndDoAction(new m(this.contentPlayer,i,this.contentBehaviour,this,this.waitingForAdReadyState))):e.setStateAndDoAction(new y(this.waitingForAdReadyState))}return f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/InitPrerollState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./PreAdContentSetupState":158,"./State":162,"./WaitingForAdImprState":164,_process:8,buffer:4,timers:9}],151:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("../../../DynamicPosition"),y=function(){function e(e,t,i){this.userClosed=e,this.adProperties=t,this.solarContext=i,this.geckoLogger=g.getLogger("Galaxy : LastFrameState")}return e.prototype.getName=function(){return h.StateName.LastFrameState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:this.adProperties.IAButtonListener.CloseCallback,callbackMethod:function(){t.solarContext.CloseButtonCallback.notify(),e.UniverStateContext.IAUnitClosedPromise.resolve(!0),t.closeInarticle(e)}}),i},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){this.geckoLogger.logDebug("Is in lastframe state");var t=1;e.UniverStateContext.Behaviours.adCount&&(t=parseInt(e.UniverStateContext.Behaviours.adCount[0],10));var i=!1;return e.UniverStateContext.CompletePromise.notify({adCount:e.StarStateContext.AdsShownCount,adShownCount:e.StarStateContext.AdsShownCount,userClosed:this.userClosed}),e.UniverStateContext.StopReloadPromise.resolve(i),e.ViewablityMonitorPromise.then(function(e){e.stopViewabilityMonitor()}),f.createPromise(void 0)},e.prototype.closeInarticle=function(e){var t=this;e.IsInarticleClosed=!0,e.AdcontentHolder.hideInArticle(this.adProperties.Behaviour.noAnimation).then(function(){t.closePlaylist(e,e.PlayList),e.dynamicElements&&e.dynamicElements.length>0&&(m.hideNodes(e,window,1),e.PlacementElement.style.position="",e.PlacementElement.style.top="",f.removeUnwantedNodes(e.PlacementElement,e.dynamicElements))})},e.prototype.closePlaylist=function(e,t){e.IsAdPlayComplete||e.PlayList.close()},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/LastFrameState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../DynamicPosition":109,"./State":162,_process:8,buffer:4,timers:9}],152:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./ContentCompleteState"),y=e("../../../../../video/MediaDetails"),b=function(){function e(e,t,i,n,r){this.contentPlayer=e,this.playable=t,this.contentBehaviour=i,this.solarContext=n,this.waitingForAdReadyState=r,this.geckoLogger=g.getLogger("Galaxy : PauseMediaState")}return e.prototype.getName=function(){return h.StateName.PauseMediaState},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:this.playable.getPlayCallback(),callbackMethod:function(){t.contentPlayer.hideClickButtonOverlay(),e.saveCheckpoint("complete",new m(t.contentBehaviour,t.solarContext)),e.setStateAndDoAction(t.waitingForAdReadyState)}}),i.push({onSubscribeMethod:this.contentPlayer.PlayBtnClickedCallback,callbackMethod:function(i){if(e.IsIAUnitPaused=!1,t.contentPlayer.hideClickButtonOverlay(),e.UniverStateContext.InArticleTracker.fireMultiAdOpportunityTracker(),i){var n=i.props;if(n){var r="PREROLL:CNTCLICKPAUSE:"+n.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r)}}t.playable.play()}}),i.push({onSubscribeMethod:this.contentPlayer.ContentClickedCallback,callbackMethod:function(i){e.IsIAUnitPaused=!1;var n=i.props;if(e.UniverStateContext.InArticleTracker.fireMultiAdOpportunityTracker(),n){var r="PREROLL:CNTCLICKCNT:"+n.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r)}e.saveCheckpoint("complete",new m(t.contentBehaviour,t.solarContext)),e.setStateAndDoAction(t.waitingForAdReadyState)}}),i.push({onSubscribeMethod:this.contentPlayer.ActiveContentClickedCallback,callbackMethod:function(i){e.IsIAUnitPaused=!1;var n=i.props;if(e.UniverStateContext.InArticleTracker.fireMultiAdOpportunityTracker(),n){var r="PREROLL:CNTCLICKCNT:"+n.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r)}e.saveCheckpoint("complete",new m(t.contentBehaviour,t.solarContext)),e.setStateAndDoAction(t.waitingForAdReadyState)}}),i},e.prototype.getMediaTitleSpanHeight=function(e){var t=0;try{var i=e.PlacementElement.getElementsByClassName(y.VIDEO_TITLE_SPAN_CLASSNAME)[0];if(i&&i.offsetHeight)return t=i.offsetHeight}catch(n){}return t},e.prototype.doAction=function(e){e.IsIAUnitPaused=!0,this.solarContext.InlinePresentationCallback.notify(!0),this.contentPlayer.showClickButtonOverlay(!0);var t=0,i=0;try{t=this.getMediaTitleSpanHeight(e),i=this.contentPlayer.DivHeight,e.AdcontentHolder.adjustPlacementHeight(this.solarContext.InlineSpaceProperties,!0,i,t,parseInt(e.UniverStateContext.Behaviours.AddSpaceAbove[0],10))}catch(n){this.geckoLogger.logError(n)}this.contentPlayer.MediaPlayer.hidePauseIcon(),this.contentPlayer.MediaPlayer.hideMuteIcon(),this.contentPlayer.MediaPlayer.hideUnmuteIcon();var r="PREROLL:PAUSESTATE:"+e.StarStateContext.TotalAdReadyCount+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r);var o;return o=e.UniverStateContext.Behaviours.autoplayContent[0]?parseInt(e.UniverStateContext.Behaviours.autoplayContent[0],10):0,o&&this.contentPlayer.StartAutoPLayCallback.notify(),f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PauseMediaState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../../../video/MediaDetails":281,"./ContentCompleteState":148,"./State":162,_process:8,buffer:4,timers:9}],153:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("./PostAdContentSetupState"),m=e("./AdCompleteState"),y=e("./PlayingContentCompleteState"),b=e("./ContentCompleteState"),v=e("../../../../../video/MediaDetails"),P=function(){function e(e,t,i,n,r,o,a){this.adProperties=e,this.playable=t,this.playableAdDiv=i,this.playingAdState=n,this.solarContext=r,this.thumbnailClicked=o,this.waitingForAdReadyState=a}return e.prototype.getName=function(){return h.StateName.PlayingAdCompleteState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.adProperties.AdDetails.adId},e.prototype.doAction=function(e){var t=e.StarStateContext.TotalAdReadyCount;if(this.adProperties.LeaveBehind&&e.UniverStateContext.ShowCornerSlot&&this.adProperties.LeaveBehind.hideTitle(),1===this.adProperties.Behaviour.adCount)("preroll"===this.adProperties.Behaviour.vAdPos||this.isMidroll(this.adProperties.Behaviour))&&this.adProperties.ContentPlayer?(this.updateDisplay(e),e.setStateAndDoAction(new g(this.adProperties.AdDetails,this.adProperties,this.playable,this.playingAdState,this.solarContext,this.adProperties.ContentPlayer,new b(this.adProperties.ContentPlayer.getBehaviour(),this.solarContext),(!1),this.waitingForAdReadyState))):this.moveToAdComplete(e);else if(this.adProperties.ContentPlayer&&(this.adProperties.Behaviour.ThumbnailStrip||"preroll"===this.adProperties.Behaviour.vAdPos||this.isMidroll(this.adProperties.Behaviour)))this.thumbnailClicked?(this.updateDisplay(e),t>0?(this.adProperties.ContentPlayer.IsContentActive&&this.adProperties.ContentPlayer.deactivateContent(),e.setStateAndDoAction(this.waitingForAdReadyState)):(t<=0&&this.adProperties.Behaviour.adCount>e.StarStateContext.AdsShownCount?(e.UniverStateContext.ReloadCallback.notify(),e.setStateAndDoAction(this.waitingForAdReadyState)):e.UniverStateContext.setReloadCount(0),e.setStateAndDoAction(new g(this.adProperties.AdDetails,this.adProperties,this.playable,this.playingAdState,this.solarContext,this.adProperties.ContentPlayer,new b(this.adProperties.ContentPlayer.getBehaviour(),this.solarContext),(!0),this.waitingForAdReadyState)))):(e.WrapperPlacementDiv.parentElement&&(e.WrapperPlacementDiv.parentElement.style.display="none"),this.playableAdDiv.style.display="none",t<=0&&this.adProperties.Behaviour.adCount>e.StarStateContext.AdsShownCount&&e.UniverStateContext.ReloadCallback.notify(),(this.adProperties.Behaviour.ThumbnailStrip||e.UniverStateContext.ShowCornerSlot)&&this.adProperties.ContentPlayer.activateThumbnailStrip(3),e.setStateAndDoAction(new g(this.adProperties.AdDetails,this.adProperties,this.playable,this.playingAdState,this.solarContext,this.adProperties.ContentPlayer,new y(this.adProperties.ContentPlayer.getBehaviour(),this.adProperties.ContentPlayer,this.solarContext,this.waitingForAdReadyState),(!1),this.waitingForAdReadyState)));else{e.AdcontentHolder.getDivForStrip()&&(e.AdcontentHolder.getDivForStrip().style.display="none");var i=1;if(e.UniverStateContext.Behaviours.adCount&&(i=parseInt(e.UniverStateContext.Behaviours.adCount[0],10)),!this.isMidroll(this.adProperties.Behaviour)&&this.adProperties.Behaviour.adCount>1&&e.StarStateContext.AdsShownCount<i&&(e.StarStateContext.UniverStateContext.ReloadCount>=1||t>0))e.saveCheckpoint("complete",new m(e,this.playable,this.adProperties,this.playingAdState,this.solarContext)),e.setStateAndDoAction(this.waitingForAdReadyState);else{var n="PREROLL:NOCONTENTPLAYER:"+this.adProperties.AdDetails.adId+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(n),this.moveToAdComplete(e)}}return f.createPromise(void 0)},e.prototype.getMediaTitleSpanHeight=function(e){var t=0;try{var i=e.PlacementElement.getElementsByClassName(v.VIDEO_TITLE_SPAN_CLASSNAME)[0];if(i&&i.offsetHeight)return t=i.offsetHeight}catch(n){}return t},e.prototype.updateDisplay=function(e){e.AdcontentHolder.getDivForStrip();e.WrapperPlacementDiv.parentElement&&(e.WrapperPlacementDiv.parentElement.style.display="none"),this.playableAdDiv.style.display="none"},e.prototype.moveToAdComplete=function(e){e.setStateAndDoAction(new m(e,this.playable,this.adProperties,this.playingAdState,this.solarContext))},e.prototype.isMidroll=function(e){var t=void 0!==e.ThumbnailStrip&&e.ThumbnailStrip===!0;return("preroll"===e.vAdPos||"midroll"===e.vAdPos||t)&&e.midrollSeconds>-1},e}();t.exports=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PlayingAdCompleteState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../utility/Utility":275,"../../../../../video/MediaDetails":281,"./AdCompleteState":144,"./ContentCompleteState":148,"./PlayingContentCompleteState":155,"./PostAdContentSetupState":156,"./State":162,_process:8,buffer:4,timers:9}],154:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("es6-promise"),m=e("../../../../../logging/LogManager"),y=e("./PlayingAdCompleteState"),b=e("../../../../../video/player/Player"),v=e("../../../../../utility/DOM"),P=e("./CompleteState"),w=e("./SetupReplayState"),S=e("../solar/states/FullScreenState"),C=e("../solar/states/InlineState"),A=e("../solar/states/CornerSlotState"),I=e("../../../DynamicPosition"),T="hidden",B=function(){function e(e,t,i,n,r,o){var a=this;this.context=e,this.playable=t,this.playableAdDiv=i,this.adProperties=n,this.solarContext=r,this.waitingForAdReadyState=o,this.geckoLogger=m.getLogger("Galaxy : PlayingAdState"),this.isFullscreen=!1,this.thumbnailClicked=!1,this.firedMultipleAdOpp=!1,this.previousDuration=0,this.bestDivPrevHeight="0px",this.playable.onPlay(function(){a.geckoLogger.logInfo("Play called"),e.IsAdPlayComplete=!1,e.StarStateContext.StopTouchListener.notify(!0),a.adProperties.Behaviour.LBMobile?(e.IsLBVisible||a.adProperties.IAButtonListener.showInArticleInlineButtons(),a.solarContext.LeaveBehind&&e.IsLBVisible&&a.solarContext.LeaveBehind.resizeLeaveBehind(30)):r.IsInline&&a.adProperties.IAButtonListener.showInArticleInlineButtons(),a.adProperties.AdDetails.adType.toLowerCase()===b.ADTYPE.VAST&&(a.adProperties.IAButtonListener.hideReplayButton(),a.adProperties.Behaviour.LBMobile&&a.adProperties.IAButtonListener.hideLBReplayButton())}),this.playable.onAdClick(function(){a.geckoLogger.logInfo("AdClickHandler called"),e.UniverStateContext.ClickPromise.resolve()}),this.playable.onAdTime(function(t){var i=t.duration-t.position,r=Math.floor(t.position);e.AdcontentHolder.updateAdRemainingTime(Math.round(i)),("preroll"===a.adProperties.Behaviour.vAdPos||a.isMidroll(a.adProperties.Behaviour))&&e.UniverStateContext.AdRemainingTimeCallback.notify(Math.round(i)),r===a.previousDuration||e.IsViewabilityImpressionFired||a.isFullscreen||(I.positionDiv(e,window,n,1),a.previousDuration=r),r!==a.previousDuration&&e.IsViewabilityImpressionFired&&!a.isFullscreen&&(e.dynamicElements&&e.dynamicElements[0]&&document.getElementById(e.dynamicElements[0].id)&&I.positionDiv(e,window,n,0),a.previousDuration=r),e.PlacementElement.style.height&&a.bestDivPrevHeight!==e.PlacementElement.style.height&&!e.IsViewabilityImpressionFired&&(a.bestDivPrevHeight=e.PlacementElement.style.height,I.adjustHeight(a.bestDivPrevHeight),I.callPositionDiv(e,window,1))}),this.playable.onMuteChange(function(t){a.geckoLogger.logInfo("onMuteChange value:"+t),e.IsAdPlayComplete||a.playable.isFullscreen()||(a.adProperties.IAButtonListener.updateMuteState(t,r.IsInline),e.UniverStateContext.ShowCornerSlot&&a.adProperties.IAButtonListener.updateMuteStateLB(t))}),this.playable.onFullscreen(function(t){t?(a.isFullscreen=!0,e.IsAdFullscreen=!0):(a.isFullscreen=!1,e.IsAdFullscreen=!1)}),v.Util.listenVisibilityChange(document,function(t){t!==T||a.isFullscreen||e.IsAdPlayComplete||(a.geckoLogger.logInfo("VisibilityChange :: visibilityState: "+t+" FullScreenMode:"+a.isFullscreen),a.adProperties.IAButtonListener.updateMuteState(!0,r.IsInline))})}return e.prototype.getName=function(){return h.StateName.PlayingAdState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:this.playable.getOnAdSkippedSubscribable(),
callbackMethod:function(){e.IsAdPlayComplete=!0,t.solarContext.CompleteCallback.notify(),e.setStateAndDoAction(new y(t.adProperties,t.playable,t.playableAdDiv,t,t.solarContext,t.thumbnailClicked,t.waitingForAdReadyState))}}),i.push({onSubscribeMethod:e.AdcontentHolder.getmouseOverCallback(),callbackMethod:function(){e.PlayList.mute(!1)}}),i.push({onSubscribeMethod:e.AdcontentHolder.getmouseOutCallback(),callbackMethod:function(){e.PlayList.mute(!0)}}),i.push({onSubscribeMethod:this.playable.getFullscreenCallback(),callbackMethod:function(i){i&&(e.UniverStateContext.ShowCornerSlot&&t.adProperties.LeaveBehind?(t.solarContext.LbPresentationCallback.notify(!1),t.solarContext.setStateAndDoAction(new S(new A(t.adProperties.LeaveBehind)))):t.solarContext.IsInline&&(t.solarContext.InlinePresentationCallback.notify(!1),t.solarContext.setStateAndDoAction(new S(new C))))}}),i.push({onSubscribeMethod:this.playable.getOnAdStoppedSubscribable(),callbackMethod:function(){e.IsAdPlayComplete=!0,t.solarContext.CompleteCallback.notify(),e.setStateAndDoAction(new y(t.adProperties,t.playable,t.playableAdDiv,t,t.solarContext,t.thumbnailClicked,t.waitingForAdReadyState))}}),this.adProperties.ContentPlayer&&i.push({onSubscribeMethod:this.adProperties.ContentPlayer.ContentClickedCallback,callbackMethod:function(i){if(t.firedMultipleAdOpp){var n=i.props;if(n){var r="PREROLL:CNTCLICKADERR:"+n.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r)}e.PlayList.pause(),e.IsAdPlayComplete=!0,t.solarContext.CompleteCallback.notify(),e.setStateAndDoAction(new y(t.adProperties,t.playable,t.playableAdDiv,t,t.solarContext,t.thumbnailClicked,t.waitingForAdReadyState))}else{t.thumbnailClicked=!0,t.firedMultipleAdOpp=!0,e.UniverStateContext.InArticleTracker.fireMultiAdOpportunityTracker(),e.IsIAUnitPaused=!1;var n=i.props;if(n){var r="PREROLL:CNTCLICKAD:"+n.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r)}t.playable.mute(!0),t.playable.skipAd()}}}),i.push({onSubscribeMethod:this.playable.getOnViewableImpressionSubscribable(),callbackMethod:function(){t.geckoLogger.logInfo(" onViewableImpression :"),e.IsViewabilityImpressionFired=!0}}),i.push({onSubscribeMethod:this.adProperties.IAButtonListener.CloseCallback,callbackMethod:function(){t.solarContext.CloseButtonCallback.notify(),e.UniverStateContext.IAUnitClosedPromise.resolve(!0),t.closeIAShowReplayHandler(e)}}),i.push({onSubscribeMethod:this.solarContext.InlinePresentationCallback,callbackMethod:function(i){i?(t.adProperties.ThumbnailHolder&&t.adProperties.Behaviour.ThumbnailStrip&&t.adProperties.ThumbnailHolder.showThumbnailDiv(),e.AdcontentHolder.getDivForStrip()&&t.adProperties.Behaviour.adCount>1&&(e.AdcontentHolder.getDivForStrip().style.display="block"),(!t.adProperties.Behaviour.LBMobile||t.adProperties.Behaviour.LBMobile&&!e.IsLBVisible)&&t.adProperties.IAButtonListener.showInArticleInlineButtons(),t.adProperties.Behaviour.LBMobile&&e.IsLBVisible&&t.adProperties.IAButtonListener.showLBButtons(),t.adProperties.AdDetails.adType.toLowerCase()===b.ADTYPE.VAST&&t.adProperties.IAButtonListener.hideFullscreenCloseButton()):(t.adProperties.ThumbnailHolder&&t.adProperties.ThumbnailHolder.hideThumbnailDiv(),e.AdcontentHolder.getDivForStrip()&&(e.AdcontentHolder.getDivForStrip().style.display="none"),t.adProperties.IAButtonListener.hideInarticleInlineButtons(e.IsAdPlayComplete))}}),i.push({onSubscribeMethod:this.solarContext.LbPresentationCallback,callbackMethod:function(e){if(e){var i=t.adProperties.Behaviour.Sanook;i?t.adProperties.IAButtonListener.hideLBButtons():t.adProperties.IAButtonListener.showLBButtons(),t.adProperties.AdDetails.adType.toLowerCase()===b.ADTYPE.VPAID&&t.adProperties.IAButtonListener.hideLBFullScreenButton()}else t.adProperties.IAButtonListener.hideLBButtons()}}),i.push({onSubscribeMethod:this.adProperties.IAButtonListener.LBCloseCallback,callbackMethod:function(){e.IsLBClosed=!0,t.solarContext.LBCloseButtonCallback.notify(),e.UniverStateContext.ShowCornerSlot&&(e.PlayList.close(),t.solarContext.EndCallback.notify(),t.solarContext.LbPresentationCallback.subscribe(function(t){e.setStateAndDoAction(new P((!0)))})),t.adProperties.Behaviour.LBMobile&&(t.adProperties.IAButtonListener.hideLBButtons(),t.adProperties.IAButtonListener.showInArticleInlineCloseButton(),e.IsAdPlayComplete&&t.adProperties.IAButtonListener.showReplayButton(),t.adProperties.IAButtonListener.hideLBReplayButton(),t.solarContext.LeaveBehind&&t.solarContext.LeaveBehind.resizeLeaveBehind(-1),e.IsLBVisible=!1)}}),i},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){return this.adProperties.AdDetails.adId},e.prototype.doAction=function(e){return e.IsAdPlayComplete=!1,f.createPromise(void 0)},e.prototype.closeIAShowReplayHandler=function(e){var t=this;return new g.Promise(function(i){e.IsInarticleClosed=!0,e.AdcontentHolder.hideInArticle(t.adProperties.Behaviour.noAnimation).then(function(){t.geckoLogger.logInfo("Close called hide inarticle"),e.PlayList.close(),e.dynamicElements&&e.dynamicElements.length>0&&(e.PlacementElement.style.position="",e.PlacementElement.style.top="",f.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)),e.setStateAndDoAction(new w(t.adProperties,t.playable,t,t.solarContext,(!0)))})})},e.prototype.isMidroll=function(e){var t=void 0!==e.ThumbnailStrip&&e.ThumbnailStrip===!0;return("preroll"===e.vAdPos||"midroll"===e.vAdPos||t)&&e.midrollSeconds>-1},e}();t.exports=B}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PlayingAdState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/DOM":266,"../../../../../utility/Utility":275,"../../../../../video/player/Player":286,"../../../DynamicPosition":109,"../solar/states/CornerSlotState":123,"../solar/states/FullScreenState":125,"../solar/states/InlineState":126,"./CompleteState":147,"./PlayingAdCompleteState":153,"./SetupReplayState":161,"./State":162,_process:8,buffer:4,"es6-promise":5,timers:9}],155:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./ContentCompleteState"),y=e("./PauseMediaState"),b=function(){function e(e,t,i,n){this.contentBehaviour=e,this.contentPlayer=t,this.solarContext=i,this.waitingForAdReadyState=n,this.geckoLogger=g.getLogger("Galaxy : PlayingContentCompleteState")}return e.prototype.getName=function(){return h.StateName.PlayingContentCompleteState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){this.contentPlayer.deactivateContent();var t=1,i=e.StarStateContext.TotalAdReadyCount;if(e.UniverStateContext.Behaviours.adCount&&(t=parseInt(e.UniverStateContext.Behaviours.adCount[0],10)),i<=0&&t>e.StarStateContext.AdsShownCount&&e.StarStateContext.UniverStateContext.ReloadCount>=1&&e.UniverStateContext.ReloadCallback.notify(),e.StarStateContext.AdsShownCount<this.contentBehaviour.adCount){var n=this.contentPlayer.activateContent(!e.UniverStateContext.ShowCornerSlot);if(n&&e.StarStateContext.UniverStateContext.ReloadCount>0&&(this.contentBehaviour.ThumbnailStrip?this.contentBehaviour.ThumbnailStrip:e.UniverStateContext.ShowCornerSlot))this.contentPlayer.activateThumbnailStrip(3),e.PlayList.add(n),e.PlayList.start(),e.UniverStateContext.ShowCornerSlot?(this.contentPlayer.showClickButtonOverlay(!1),e.saveCheckpoint("complete",new m(this.contentBehaviour,this.solarContext)),e.setStateAndDoAction(this.waitingForAdReadyState)):(e.PlayList.pause(),e.setStateAndDoAction(new y(this.contentPlayer,n,this.contentPlayer.getBehaviour(),this.solarContext,this.waitingForAdReadyState)));else{var r=1;e.UniverStateContext.Behaviours.adCount&&(r=parseInt(e.UniverStateContext.Behaviours.adCount[0],10)),this.contentBehaviour.adCount>1&&e.StarStateContext.AdsShownCount<r&&e.StarStateContext.UniverStateContext.ReloadCount>=1?(e.saveCheckpoint("complete",new m(this.contentBehaviour,this.solarContext)),e.setStateAndDoAction(this.waitingForAdReadyState)):e.setStateAndDoAction(new m(this.contentBehaviour,this.solarContext))}}else e.setStateAndDoAction(new m(this.contentBehaviour,this.solarContext));return f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PlayingContentCompleteState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./ContentCompleteState":148,"./PauseMediaState":152,"./State":162,_process:8,buffer:4,timers:9}],156:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./PostAdPlayingMediaState"),y=e("./PauseMediaState"),b=e("./ContentCompleteState"),v=e("../../../DynamicPosition"),P=e("../../../../../video/MediaDetails"),w=function(){function e(e,t,i,n,r,o,a,s,l){this.adObject=e,this.adProperties=t,this.playableAd=i,this.playingAdState=n,this.solarContext=r,this.contentPlayer=o,this.contentCompleteState=a,this.playPreroll=s,this.waitingForAdReadyState=l,this.geckoLogger=g.getLogger("Galaxy: PostAdContentSetupState")}return e.prototype.getName=function(){return h.StateName.PostAdContentSetupState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this;this.geckoLogger.logDebug("Is in post ad play media state"),e.IsViewabilityImpressionFired=!0,e.dynamicElements&&e.dynamicElements.length>0&&v.hideNodes(e,window),e.AdcontentHolder.updateSound(this.contentPlayer.getBehaviour().soundIcon);var i;if(this.contentPlayer.IsContentActive)i=this.contentPlayer.getActiveContentPlayable(),e.PlayList.updateCurrentPlayable(i),e.PlayList.play(),this.isMidroll(this.adProperties.Behaviour)&&e.ViewablityMonitorPromise.then(function(i){t.pauseVideoOffview(e,t.contentPlayer.getBehaviour(),i)}),this.moveToPostAdPlayingMediaState(i,e,this.contentCompleteState,!0);else if(i=this.contentPlayer.activateContent(!e.UniverStateContext.ShowCornerSlot)){e.PlayList.add(i),e.PlayList.start();var n=this.isMidroll(this.adProperties.Behaviour);this.playPreroll||"preroll"===this.adProperties.Behaviour.vAdPos||n?this.moveToPostAdPlayingMediaState(i,e,this.contentCompleteState,n):(e.PlayList.pause(),this.moveToPauseMediaState(i,e))}else this.geckoLogger.logInfo("No more content videos to play"),e.setStateAndDoAction(new b(this.contentPlayer.getBehaviour(),this.solarContext));return f.createPromise(void 0)},e.prototype.moveToPostAdPlayingMediaState=function(e,t,i,n){this.updateDisplay(e,t),t.setStateAndDoAction(new m(this.adObject,this.contentPlayer,e,this.contentPlayer.getBehaviour(),this.solarContext,i,this.waitingForAdReadyState,n))},e.prototype.moveToPauseMediaState=function(e,t){this.updateDisplay(e,t),t.setStateAndDoAction(new y(this.contentPlayer,e,this.contentPlayer.getBehaviour(),this.solarContext,this.waitingForAdReadyState))},e.prototype.updateDisplay=function(e,t){var i=this;if(this.solarContext.IsInline){e.resize(this.adProperties.InlineSpaceProperties.width,this.adProperties.InlineSpaceProperties.height),e.onTime(function(e){t.dynamicElements&&t.dynamicElements[0]&&document.getElementById(t.dynamicElements[0].id)&&v.positionDiv(t,window,i.adProperties,1)});var n=this.getMediaTitleSpanHeight(t),r=this.adProperties.Behaviour.ThumbnailStrip?this.contentPlayer.DivHeight:0;t.AdcontentHolder.adjustPlacementHeight(this.adProperties.InlineSpaceProperties,!0,r,n,this.contentPlayer.getBehaviour().AddSpaceBelow)}else this.adProperties.LeaveBehind&&(this.adProperties.LeaveBehind.resize(),t.UniverStateContext.ShowCornerSlot&&this.adProperties.LeaveBehind.hideTitle());t.AdcontentHolder.getDivforMediaContent()&&(t.AdcontentHolder.getDivforMediaContent().style.display="block"),t.AdcontentHolder.getMainPlayerDiv()&&(t.AdcontentHolder.getMainPlayerDiv().style.display="none")},e.prototype.getMediaTitleSpanHeight=function(e){var t=0;try{var i=e.PlacementElement.getElementsByClassName(P.VIDEO_TITLE_SPAN_CLASSNAME)[0];if(i&&i.offsetHeight)return t=i.offsetHeight}catch(n){this.geckoLogger.logError("Error getting content media title span height - "+n)}return t},e.prototype.pauseVideoOffview=function(e,t,i){var n=this,r={2:"onEightyPercentViewable",4:"onSixtyPercentViewable",6:"onFourtyPercentViewable",8:"onTwentyPercentViewable"};if(f.isNullOrUndefined(r[t.pauseVideoOffview])){for(var o=i,a=this.isMidroll(t),s=function(i){i>=t.pauseVideoOffview?o[r[i]](function(){e.getState().getName()!==h.StateName.WaitingForReplayState&&(n.geckoLogger.logInfo("pausing video pauseVideoOffview : "+i),a?e.PlayList.pause():e.PlayList.pause())}):o[r[i]](function(){n.geckoLogger.logInfo("playing video pauseVideoOffview : "+i),e.getState().getName()!==h.StateName.CompleteState&&(a&&e.IsIAUnitPaused?e.PlayList.pause():e.PlayList.play())})},l=2;l<10;l+=2)s(l);o.onHundredPercentViewable(function(){n.geckoLogger.logInfo("playing video viewable hundred percentage"),e.getState().getName()!==h.StateName.CompleteState&&(a?e.IsIAUnitPaused||e.PlayList.play():e.PlayList.play())})}},e.prototype.isMidroll=function(e){var t=void 0!==e.ThumbnailStrip&&e.ThumbnailStrip===!0;return("preroll"===e.vAdPos||"midroll"===e.vAdPos||t)&&e.midrollSeconds>-1},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PostAdContentSetupState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../../../video/MediaDetails":281,"../../../DynamicPosition":109,"./ContentCompleteState":148,"./PauseMediaState":152,"./PostAdPlayingMediaState":157,"./State":162,_process:8,buffer:4,timers:9}],157:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./ContentCompleteState"),y=e("./CompleteState"),b=function(){function e(e,t,i,n,r,o,a,s){this.adObject=e,this.contentPlayer=t,this.playable=i,this.contentBehaviour=n,this.solarContext=r,this.completeState=o,this.waitingForAdReadyState=a,this.isMidRoll=s,this.geckoLogger=g.getLogger("Galaxy : PostAdPlayingMediaState"),this.isContentPlaying=!0}return e.prototype.getName=function(){return h.StateName.PostAdPlayingMediaState},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:this.playable.getCompleteCallback(),callbackMethod:function(){t.contentPlayer.hideClickButtonOverlay();var i=t.contentPlayer.getActiveContentProperties();if(i){var n="PREROLL:CNTCOMPLETE:"+i.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(n)}e.setStateAndDoAction(t.completeState)}}),i.push({onSubscribeMethod:this.contentPlayer.ContentClickedCallback,callbackMethod:function(i){e.IsIAUnitPaused=!1,t.contentPlayer.hideClickButtonOverlay(),e.UniverStateContext.InArticleTracker.fireMultiAdOpportunityTracker();var n=t.contentPlayer.getActiveContentProperties();if(n){var r="PREROLL:CNTCLICKCNT:"+n.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r)}e.saveCheckpoint("complete",new m(t.contentBehaviour,t.solarContext)),e.setStateAndDoAction(t.waitingForAdReadyState)}}),i.push({onSubscribeMethod:this.contentPlayer.ActiveContentClickedCallback,callbackMethod:function(e){t.playable.play()}}),i.push({onSubscribeMethod:this.contentPlayer.PlayBtnClickedCallback,callbackMethod:function(){t.togglePlayPause(e,t.contentPlayer.MediaPlayer)}}),i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.PauseSubscribableCallback,callbackMethod:function(){t.togglePlayPause(e,t.contentPlayer.MediaPlayer)}}),e.UniverStateContext.ShowCornerSlot&&(i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.LBCloseSubscribableCallback,callbackMethod:function(){e.IsLBClosed=!0,t.contentPlayer.showClickButtonOverlay(!1),t.solarContext.LBCloseButtonCallback.notify(),e.PlayList.close(),t.solarContext.EndCallback.notify(),t.solarContext.LbPresentationCallback.subscribe(function(t){e.setStateAndDoAction(new y((!0)))})}}),1===this.contentBehaviour.soundIcon&&(i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.LBMuteSubscribableCallback,callbackMethod:function(){t.toggleMuteUnmute(e,t.contentPlayer.MediaPlayer,!1)}}),i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.LBUnmuteSubscribableCallback,callbackMethod:function(){t.toggleMuteUnmute(e,t.contentPlayer.MediaPlayer,!0)}}))),e.UniverStateContext.ShowCornerSlot||1!==this.contentBehaviour.soundIcon||(i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.MuteSubscribableCallback,callbackMethod:function(){t.toggleMainMuteUnmute(e,t.contentPlayer.MediaPlayer,!1)}}),i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.UnmuteSubscribableCallback,callbackMethod:function(){t.toggleMainMuteUnmute(e,t.contentPlayer.MediaPlayer,!0)}})),i},e.prototype.doAction=function(e){e.UniverStateContext.ShowCornerSlot||e.PlayList.mute(!0);try{if(this.contentPlayer.showClickButtonOverlay(!1),this.contentPlayer.MediaPlayer.showPauseIcon(),e.UniverStateContext.ShowCornerSlot){if(this.contentPlayer.MediaPlayer.showLBCloseIcon(),!this.isMidroll(this.contentBehaviour)){var t=!0;this.playable.mute(t)}1===this.contentBehaviour.soundIcon&&this.contentPlayer.MediaPlayer.updateMuteStateLB(this.playable.isMute())}e.UniverStateContext.ShowCornerSlot||1!==this.contentBehaviour.soundIcon||this.contentPlayer.MediaPlayer.updateMuteState(this.playable.isMute());var i=this.contentPlayer.getActiveContentProperties(),n="";if(i){if(this.isMidRoll)n="PREROLL:CNTMIDROLLVIEW:"+i.CP_ADID+" :"+e.StarStateContext.AdsShownCount;else{var r={nID:parseInt(i.CP_NID,10),chID:parseInt(i.CP_CHANID,10),pubID:parseInt(i.CP_PUBID,10),dimID:parseInt(i.CP_DIMID,10),adId:i.CP_ADID};e.UniverStateContext.InArticleTracker.fireContentVideoPlayedTracker(r),n="PREROLL:CNTVIEW2:"+i.CP_ADID+" :"+e.StarStateContext.AdsShownCount}e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(n)}}catch(o){this.geckoLogger.logError("Not able to track content view")}return f.createPromise(void 0)},e.prototype.togglePlayPause=function(e,t){this.isContentPlaying?(this.isContentPlaying=!1,this.contentPlayer.showClickButtonOverlay(!0),t.hidePauseIcon(),t.hideLBMuteIcon(),t.hideLBUnmuteIcon(),t.hideMuteIcon(),t.hideUnmuteIcon(),e.IsIAUnitPaused=!0,this.playable.pause()):(this.isContentPlaying=!0,this.contentPlayer.showClickButtonOverlay(!1),t.showPauseIcon(),e.IsIAUnitPaused=!1,this.playable.play(),e.UniverStateContext.ShowCornerSlot&&1===this.contentBehaviour.soundIcon&&t.updateMuteStateLB(this.playable.isMute()),e.UniverStateContext.ShowCornerSlot||1!==this.contentBehaviour.soundIcon||(t.updateMuteState(this.playable.isMute()),this.contentBehaviour.SoundOnload&&this.toggleMainMuteUnmute(e,this.contentPlayer.MediaPlayer,!1)))},e.prototype.toggleMuteUnmute=function(e,t,i){this.playable.mute(i),t.updateMuteStateLB(i)},e.prototype.toggleMainMuteUnmute=function(e,t,i){this.playable.mute(i),t.updateMuteState(i)},e.prototype.isMidroll=function(e){var t=void 0!==e.ThumbnailStrip&&e.ThumbnailStrip===!0;return("preroll"===e.vAdPos||"midroll"===e.vAdPos||t)&&e.midrollSeconds>-1},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PostAdPlayingMediaState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./CompleteState":147,"./ContentCompleteState":148,"./State":162,_process:8,buffer:4,timers:9}],158:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("../../../../../utility/DefferedPromise"),y=e("../../../video/LeaveBehindHolder"),b=e("../../../video/LeaveBehindSanookHolder"),v=e("../solar/states/StateContext"),P=e("../solar/states/LbState"),w=e("../solar/states/InlineState"),S=e("../solar/states/CornerSlotState"),C=e("../../../video/CornerSlotHolder"),A=e("./PreAdPlayingMediaState"),I=e("./AdSetupState"),T=e("../../../../../video/MediaDetails"),B=e("../../../DynamicPosition"),k=50,E=function(){function e(e,t,i,n,r){this.contentPlayer=e,this.contentPlayable=t,this.contentBehaviour=i,this.initPreroll=n,this.waitingForAdReadyState=r,this.geckoLogger=g.getLogger("Galaxy: PreAdContentSetupState"),this.abortAction=!1,this.mediaWidthRatio=16,this.mediaHeightRatio=9,this.stopViewability=!1,this.playContentBeforeMidrollPromise=new m}return e.prototype.getName=function(){return h.StateName.PreAdContentSetupState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.StarStateContext.AdImprCallback,callbackMethod:function(i){t.contentPlayable.pause(),t.contentPlayer.hideClickButtonOverlay();var n="PREROLL:PREADSETUPIMPR:"+i.AdDetails.adId+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(n),t.abortAction=!0,e.setStateAndDoAction(new I(i.PlayableAd,i.PlayableAdDiv,i.AdDetails,i.Behaviour,i.AdConfigurator,t.waitingForAdReadyState))}}),i},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t,i=this,n=e.InlineSpceG.getInlinePosition(e.PlacementElement,this.contentPlayable.getWidth(),this.contentPlayable.getHeight(),this.contentBehaviour.maxInarticleWidth);t=e.InlineSpceG.getInlinePosition(e.PlacementElement,this.mediaWidthRatio,this.mediaHeightRatio,this.contentBehaviour.maxInarticleWidth);var r=void 0;return r=e.UniverStateContext.ShowCornerSlot?this.setupCornerSlotUnit(e,this.contentBehaviour):this.contentBehaviour.NoLB?void 0:this.setupLeavebehind(e,this.contentBehaviour),e.AdcontentHolder.updateSound(this.contentBehaviour.soundIcon),e.ViewablityMonitorPromise.then(function(o){i.isMidroll(i.contentBehaviour)?(i.playContentBeforeMidrollPromise.getPromise().then(function(){i.playContentWhenContainerInView(e,i.contentBehaviour,o)}),e.UniverStateContext.ShowCornerSlot?i.playContentBeforeMidrollPromise.resolve():(i.geckoLogger.logInfo("Pausing playlist and waiting for "+k+"% or more of the unit to be in view"),e.PlayList.pause(),!e.IsIAUnitPaused&&o.getViewability().viewablePercentage>=k&&i.playContentBeforeMidrollPromise.resolve(),i.setupTimePercentViewabilityPromise(e,k))):e.UniverStateContext.ShowCornerSlot||i.pauseVideoOffview(e,i.contentBehaviour,o),e.UniverStateContext.ShowCornerSlot||o.onViewableStateChange(function(){o.isViewable()?(i.geckoLogger.logInfo("placement is inview : viewableHandler"),e.InlineInViewCallback.notify(o)):(i.geckoLogger.logInfo("placement is unviewable : unviewableHandler"),e.InlineOutOfViewCallback.notify(o),!i.isMidroll(i.contentBehaviour)||i.contentBehaviour.NoLB||e.IsIAUnitPaused||(i.geckoLogger.logInfo("Playing content video before midroll as LB"),i.playContentBeforeMidrollPromise.resolve()))});var a;e.PlayList.resize(n.width,n.height);var s=t?t:n;if(e.UniverStateContext.ShowCornerSlot)t&&(i.contentPlayer.hideTitleHeaders(),i.contentPlayer.activateThumbnailStrip(3)),e.AdcontentHolder.adjustPlacementContainer(1);else if(0===e.StarStateContext.AdsShownCount&&e.AdcontentHolder.showInArticle(s,i.contentBehaviour.noAnimation,i.contentBehaviour.AddSpaceBelow?i.contentBehaviour.AddSpaceBelow:0,i.contentBehaviour.AddSpaceAbove?i.contentBehaviour.AddSpaceAbove:0,!!i.contentBehaviour.ThumbnailStrip&&i.contentBehaviour.ThumbnailStrip,e.UniverStateContext.InarticleOpened)["catch"](function(e){i.geckoLogger.logError(f.errorMsg(" adContentHandler's showInArticle catch called ",e))}),t){i.contentPlayer.setMediaTitleHeaders(),i.contentPlayer.showTimeRemainingDiv(),i.contentPlayable.resize(t.width,t.height);var l=i.getMediaTitleSpanHeight(e),d=i.contentBehaviour.ThumbnailStrip?i.contentPlayer.DivHeight:0;e.AdcontentHolder.adjustPlacementHeight(t,!0,d,l,i.contentBehaviour.AddSpaceBelow),i.contentPlayer.activateThumbnailStrip(3)}if(e.UniverStateContext.ShowCornerSlot&&r){a=new v(e,i.contentPlayable,e.PlayList,(void 0),s,r,i.contentBehaviour.pauseVideoOffview,i.contentBehaviour.AddSpaceBelow,new S(r));i.contentBehaviour.Sanook}else if((e.StarStateContext.AdsShownCount>0||i.isMidroll(i.contentBehaviour))&&!o.isViewable()&&r){a=new v(e,i.contentPlayable,e.PlayList,(void 0),s,r,i.contentBehaviour.pauseVideoOffview,i.contentBehaviour.AddSpaceBelow,new P(r,new w));i.contentBehaviour.Sanook}else a=new v(e,i.contentPlayable,e.PlayList,(void 0),s,r,i.contentBehaviour.pauseVideoOffview,i.contentBehaviour.AddSpaceBelow,new w);i.abortAction||(a.doAction(),e.AdcontentHolder.getDivforMediaContent()&&(e.AdcontentHolder.getDivforMediaContent().style.display="block"),e.AdcontentHolder.getMainPlayerDiv()&&(e.AdcontentHolder.getMainPlayerDiv().style.display="none"),e.setStateAndDoAction(new A(i.contentPlayer,i.contentPlayable,i.contentBehaviour,a,i.initPreroll,i.waitingForAdReadyState)))}),f.createPromise(void 0)},e.prototype.setupLeavebehind=function(e,t){var i,n={left:100,LBFirst:t.LBFirst,LBSize:t.LBSize,NoLB:t.NoLB,noAnimation:t.noAnimation,LBPosition:"undefined"!=typeof t.LBPosition&&null!==t.LBPosition?t.LBPosition:0,LBOffset:"undefined"!=typeof t.LBOffset&&null!==t.LBOffset?t.LBOffset:0,LBOpen:"undefined"!=typeof t.LBOpen&&null!==t.LBOpen?t.LBOpen:0,LBMouseover:"undefined"!=typeof t.LBMouseover&&null!==t.LBMouseover?t.LBMouseover:0};return i=e.UniverStateContext.IsSanook?new b.LeaveBehindSanookHolder(e.PlayList,(void 0),n,e.AdcontentHolder.getContainerDiv(),e.AdcontentHolder.getPlaceHolderDiv()):new y.LeaveBehindHolder(e.PlayList,(void 0),n,e.AdcontentHolder.getContainerDiv(),e.AdcontentHolder.getPlaceHolderDiv(),e.AdcontentHolder.IconsDiv,e.AdcontentHolder.ClickOverlayDiv)},e.prototype.setupCornerSlotUnit=function(e,t){var i,n={left:0,LBFirst:t.LBFirst,LBSize:t.adSlotPosition?t.adSlotPosition.width:0,NoLB:t.NoLB,noAnimation:t.noAnimation,LBPosition:0,LBOffset:"undefined"!=typeof t.LBOffset&&null!==t.LBOffset?t.LBOffset:0,LBOpen:"undefined"!=typeof t.LBOpen&&null!==t.LBOpen?t.LBOpen:0,LBMouseover:"undefined"!=typeof t.LBMouseover&&null!==t.LBMouseover?t.LBMouseover:0},r=t.adSlotPosition?t.adSlotPosition.position:"",o=t.AspectRatioWidth>0&&t.AspectRatioHeight>0?t.AspectRatioHeight/t.AspectRatioWidth:.75;return i=new C.CornerSlotHolder(e.PlayList,n,e.AdcontentHolder.getContainerDiv(),e.AdcontentHolder.getPlaceHolderDiv(),r,(void 0),o,e.AdcontentHolder.IconsDiv,e.AdcontentHolder.ClickOverlayDiv,(!1),e.IsCornerSlotInitialized),e.IsCornerSlotInitializedCallback.notify(!0),i},e.prototype.pauseVideoOffview=function(e,t,i){var n=this,r={2:"onEightyPercentViewable",4:"onSixtyPercentViewable",6:"onFourtyPercentViewable",8:"onTwentyPercentViewable"};if(f.isNullOrUndefined(r[t.pauseVideoOffview])){for(var o=i,a=this.isMidroll(t),s=function(s){s>=t.pauseVideoOffview?o[r[s]](function(){e.getState().getName()!==h.StateName.WaitingForReplayState&&(n.geckoLogger.logInfo("pausing video pauseVideoOffview : "+s),n.stopViewability||(a?i.getViewability().viewablePercentage<k?e.PlayList.pause():e.IsIAUnitPaused||(n.stopViewability=!0,e.PlayList.play()):e.PlayList.pause()))}):o[r[s]](function(){n.geckoLogger.logInfo("playing video pauseVideoOffview : "+s),e.getState().getName()===h.StateName.CompleteState||n.stopViewability||(a?i.getViewability().viewablePercentage>=k&&!e.IsIAUnitPaused?e.PlayList.play():e.PlayList.pause():e.PlayList.play())})},l=2;l<10;l+=2)s(l);o.onHundredPercentViewable(function(){n.geckoLogger.logInfo("playing video viewable hundred percentage"),e.getState().getName()!==h.StateName.CompleteState&&(a?e.IsIAUnitPaused||e.PlayList.play():e.PlayList.play())})}},e.prototype.playContentWhenContainerInView=function(e,t,i){var n=this,r=this.contentPlayer.getActiveContentPlayable(),o=!1,a=t.midrollSeconds;r.onTime(function(i){if(e.dynamicElements&&e.dynamicElements[0]&&document.getElementById(e.dynamicElements[0].id)&&B.callPositionDiv(e,window,1),!o){var r=(i.duration-i.position,Math.floor(i.position));t.midrollSeconds>=Math.floor(i.duration)&&(a=Math.floor(i.duration)),r>=a&&(n.geckoLogger.logInfo("Playing midroll ad after "+a+" seconds"),o=!0,n.stopViewability=!0,e.StarStateContext.TryAdCallback.notify(),e.PlayMidrollAdCallback.notify(r))}}),e.PlayList.play(),this.contentBehaviour.pauseVideoOffview=4,this.pauseVideoOffview(e,this.contentBehaviour,i)},e.prototype.getMediaTitleSpanHeight=function(e){var t=0;try{var i=e.PlacementElement.getElementsByClassName(T.VIDEO_TITLE_SPAN_CLASSNAME)[0];if(i&&i.offsetHeight)return t=i.offsetHeight}catch(n){this.geckoLogger.logError("Error getting content media title span height - "+n)}return t},e.prototype.setupTimePercentViewabilityPromise=function(e,t){var i=this,n={id:e.AdcontentHolder.getContainerDiv().id,debugMode:"true"===f.getNameParameter("zView",f.getTopWindowPageUrl()),IntervalForPullingViewablityMs:25};e.UniverStateContext.ViewabilityDetector.getTimePercentViewabilityPromise(n,t,0).then(function(){i.geckoLogger.logInfo(t+"% or more of the unit is in view - Playing content video before midroll"),i.playContentBeforeMidrollPromise.resolve()})["catch"](function(e){i.geckoLogger.logError(f.errorMsg("vbDetector's getTimePercentViewabilityPromise catch called ",e))})},e.prototype.isMidroll=function(e){var t=void 0!==e.ThumbnailStrip&&e.ThumbnailStrip===!0;return("preroll"===e.vAdPos||"midroll"===e.vAdPos||t)&&e.midrollSeconds>-1},e}();t.exports=E}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PreAdContentSetupState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/DefferedPromise":267,"../../../../../utility/Utility":275,"../../../../../video/MediaDetails":281,"../../../DynamicPosition":109,"../../../video/CornerSlotHolder":179,"../../../video/LeaveBehindHolder":182,"../../../video/LeaveBehindSanookHolder":183,"../solar/states/CornerSlotState":123,"../solar/states/InlineState":126,"../solar/states/LbState":127,"../solar/states/StateContext":129,"./AdSetupState":145,"./PreAdPlayingMediaState":159,"./State":162,_process:8,buffer:4,timers:9}],159:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./AdSetupState"),y=e("./PlayingContentCompleteState"),b=e("./CompleteState"),v=function(){function e(e,t,i,n,r,o){this.contentPlayer=e,this.contentPlayable=t,this.contentBehaviour=i,this.solarContext=n,this.initPreroll=r,
this.waitingForAdReadyState=o,this.geckoLogger=g.getLogger("Galaxy : PreAdPlayingMediaState"),this.noAdsToPlay=!1,this.callAdPlayableCallback=!0,this.isContentPlaying=!0}return e.prototype.getName=function(){return h.StateName.PreAdPlayingMediaState},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.StarStateContext.AdReadyCallback,callbackMethod:function(){e.StarStateContext.TryAdCallback.notify()}}),i.push({onSubscribeMethod:e.StarStateContext.AdImprCallback,callbackMethod:function(i){t.contentPlayable.pause(),e.AdcontentHolder.getDivforMediaContent()&&(e.AdcontentHolder.getDivforMediaContent().style.display="none"),t.contentPlayer.hideClickButtonOverlay(),t.isMidroll(t.contentBehaviour)&&(i.PlayableAd.seek(0),i.PlayableAd.play()),e.setStateAndDoAction(new m(i.PlayableAd,i.PlayableAdDiv,i.AdDetails,i.Behaviour,i.AdConfigurator,t.waitingForAdReadyState))}}),i.push({onSubscribeMethod:e.PlayMidrollAdCallback,callbackMethod:function(t){e.StarStateContext.LookForAdCallback.notify()}}),i.push({onSubscribeMethod:e.StarStateContext.CanLookForAdOnErrorCallback,callbackMethod:function(i){t.isMidroll(t.contentBehaviour)&&e.StarStateContext.TryAdCallback.notify()}}),i.push({onSubscribeMethod:this.contentPlayable.getCompleteCallback(),callbackMethod:function(){t.contentPlayer.hideClickButtonOverlay();var i=t.contentPlayer.getActiveContentProperties();if(i){var n="PREROLL:CNTCOMPLETEPREAD:"+i.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(n)}t.contentPlayer.deactivateContent(),e.setStateAndDoAction(new y(t.contentPlayer.getBehaviour(),t.contentPlayer,t.solarContext,t.waitingForAdReadyState))}}),i.push({onSubscribeMethod:this.contentPlayer.ContentClickedCallback,callbackMethod:function(i){e.IsIAUnitPaused=!1,t.contentPlayer.hideClickButtonOverlay(),t.isMidroll(t.contentBehaviour)&&e.PlayList.pause(),e.UniverStateContext.InArticleTracker.fireMultiAdOpportunityTracker();var n=t.contentPlayer.getActiveContentProperties();if(n){var r="PREROLL:PRECNTCLICKCNT:"+n.CP_ADID+" :"+e.StarStateContext.AdsShownCount;e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(r)}e.setStateAndDoAction(t.initPreroll)}}),i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.PauseSubscribableCallback,callbackMethod:function(){t.togglePlayPause(e,t.contentPlayer.MediaPlayer)}}),i.push({onSubscribeMethod:this.contentPlayer.PlayBtnClickedCallback,callbackMethod:function(){t.togglePlayPause(e,t.contentPlayer.MediaPlayer)}}),e.UniverStateContext.ShowCornerSlot&&(i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.LBCloseSubscribableCallback,callbackMethod:function(){e.IsLBClosed=!0,t.contentPlayer.showClickButtonOverlay(!1),t.solarContext.LBCloseButtonCallback.notify(),e.PlayList.close(),t.solarContext.EndCallback.notify(),t.solarContext.LbPresentationCallback.subscribe(function(t){e.setStateAndDoAction(new b((!0)))})}}),1===this.contentBehaviour.soundIcon&&(i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.LBMuteSubscribableCallback,callbackMethod:function(){t.toggleMuteUnmute(e,t.contentPlayer.MediaPlayer,!1)}}),i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.LBUnmuteSubscribableCallback,callbackMethod:function(){t.toggleMuteUnmute(e,t.contentPlayer.MediaPlayer,!0)}}))),e.UniverStateContext.ShowCornerSlot||1!==this.contentBehaviour.soundIcon||(i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.MuteSubscribableCallback,callbackMethod:function(){t.toggleMainMuteUnmute(e,t.contentPlayer.MediaPlayer,!1)}}),i.push({onSubscribeMethod:this.contentPlayer.MediaPlayer.UnmuteSubscribableCallback,callbackMethod:function(){t.toggleMainMuteUnmute(e,t.contentPlayer.MediaPlayer,!0)}})),i},e.prototype.doAction=function(e){this.geckoLogger.logDebug("try to play the ad"),e.IsViewabilityImpressionFired=!0;try{if(this.contentPlayer.showClickButtonOverlay(!1),this.contentPlayer.MediaPlayer.showPauseIcon(),e.UniverStateContext.ShowCornerSlot){this.contentPlayer.MediaPlayer.showLBCloseIcon();var t=!0;this.contentPlayable.mute(t),1===this.contentBehaviour.soundIcon&&this.contentPlayer.MediaPlayer.updateMuteStateLB(this.contentPlayable.isMute())}e.UniverStateContext.ShowCornerSlot||1!==this.contentBehaviour.soundIcon||this.contentPlayer.MediaPlayer.updateMuteState(this.contentPlayable.isMute());var i=this.contentPlayer.getActiveContentProperties(),n="";if(i){var r={nID:parseInt(i.CP_NID,10),chID:parseInt(i.CP_CHANID,10),pubID:parseInt(i.CP_PUBID,10),dimID:parseInt(i.CP_DIMID,10),adId:i.CP_ADID};e.UniverStateContext.InArticleTracker.fireContentVideoPlayedTracker(r),n="PREROLL:CNTVIEW1:"+i.CP_ADID+" :"+e.StarStateContext.AdsShownCount,e.UniverStateContext.InArticleTracker.fireChannelDebugTracker(n)}}catch(o){this.geckoLogger.logError("Not able to track content view")}return this.isMidroll(this.contentBehaviour)||e.StarStateContext.LookForAdCallback.notify(),f.createPromise(void 0)},e.prototype.togglePlayPause=function(e,t){this.isContentPlaying?(this.isContentPlaying=!1,this.contentPlayer.showClickButtonOverlay(!0),t.hidePauseIcon(),t.hideLBMuteIcon(),t.hideLBUnmuteIcon(),t.hideMuteIcon(),t.hideUnmuteIcon(),e.IsIAUnitPaused=!0,this.contentPlayable.pause()):(this.isContentPlaying=!0,this.contentPlayer.showClickButtonOverlay(!1),t.showPauseIcon(),e.IsIAUnitPaused=!1,this.contentPlayable.play(),e.UniverStateContext.ShowCornerSlot&&1===this.contentBehaviour.soundIcon&&t.updateMuteStateLB(this.contentPlayable.isMute()),e.UniverStateContext.ShowCornerSlot||1!==this.contentBehaviour.soundIcon||(t.updateMuteState(this.contentPlayable.isMute()),this.contentBehaviour.SoundOnload&&this.toggleMainMuteUnmute(e,this.contentPlayer.MediaPlayer,!1)))},e.prototype.toggleMuteUnmute=function(e,t,i){this.contentPlayable.mute(i),t.updateMuteStateLB(i)},e.prototype.toggleMainMuteUnmute=function(e,t,i){this.contentPlayable.mute(i),t.updateMuteState(i)},e.prototype.isMidroll=function(e){var t=void 0!==e.ThumbnailStrip&&e.ThumbnailStrip===!0;return("preroll"===e.vAdPos||"midroll"===e.vAdPos||t)&&e.midrollSeconds>-1},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/PreAdPlayingMediaState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./AdSetupState":145,"./CompleteState":147,"./PlayingContentCompleteState":155,"./State":162,_process:8,buffer:4,timers:9}],160:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=function(){function e(e,t,i,n,r,o){this.adProperties=e,this.playlist=t,this.isUnitCollapsed=i,this.playingAdState=n,this.solarContext=r,this.isMuted=o}return e.prototype.getName=function(){return h.StateName.ReplayAdState},e.prototype.doAction=function(e){return this.replayAd(e),f.createPromise(void 0)},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.adProperties.AdDetails.adId},e.prototype.replayAd=function(e){var t=this;e.IsAdPlayComplete&&this.playlist.seek(0),this.isUnitCollapsed?this.solarContext.IsInline&&(this.playlist.resize(this.adProperties.InlineSpaceProperties.width,this.adProperties.InlineSpaceProperties.height),e.AdcontentHolder.showInArticle(this.adProperties.InlineSpaceProperties,this.adProperties.Behaviour.noAnimation,"undefined"!=typeof this.adProperties.Behaviour.AddSpaceBelow?this.adProperties.Behaviour.AddSpaceBelow:0,"undefined"!=typeof this.adProperties.Behaviour.AddSpaceAbove?this.adProperties.Behaviour.AddSpaceAbove:0,!!this.adProperties.Behaviour.ThumbnailStrip&&this.adProperties.Behaviour.ThumbnailStrip,e.UniverStateContext.InarticleOpened).then(function(){e.IsInarticleClosed=!1,t.playlist.play()})):(this.playlist.play(),this.adProperties.IAButtonListener.hideReplayButton()),e.IsIAUnitPaused=!1,this.updateButtonsAndMoveState(e)},e.prototype.updateButtonsAndMoveState=function(e){if(this.solarContext.IsInline)this.adProperties.Behaviour.LBMobile&&e.IsLBVisible?this.adProperties.IAButtonListener.showLBButtons():this.adProperties.IAButtonListener.showInArticleInlineButtons();else{var t=this.adProperties.Behaviour.Sanook;t?this.adProperties.IAButtonListener.hideLBButtons():this.adProperties.IAButtonListener.showLBButtons(),this.adProperties.IAButtonListener.hideInarticleInlineButtons(!1),e.UniverStateContext.ShowCornerSlot&&(this.adProperties.IAButtonListener.hideSoundButton(),this.adProperties.IAButtonListener.updateMuteStateLB(this.isMuted))}e.setStateAndDoAction(this.playingAdState)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/ReplayAdState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../utility/Utility":275,"./State":162,_process:8,buffer:4,timers:9}],161:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("./CompleteState"),m=e("./WaitingForReplayState"),y=function(){function e(e,t,i,n,r){this.adProperties=e,this.playable=t,this.playingAdState=i,this.solarContext=n,this.userClosed=r}return e.prototype.getName=function(){return h.StateName.SetupReplayState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.adProperties.AdDetails.adId},e.prototype.doAction=function(e){return this.adProperties.ReplayBarHolder?(this.adProperties.ReplayBarHolder.changeLinkText(e.IsAdPlayComplete),e.IsAdPlayComplete?this.adProperties.ReplayBarHolder.showReplayBar():this.adProperties.ReplayBarHolder.showResumeBar(),this.adProperties.ReplayBarHolder.isReplayBarVisible()?e.setStateAndDoAction(new m(this.solarContext,this.adProperties,this.playable,this.playingAdState)):e.setStateAndDoAction(new g(this.userClosed))):e.setStateAndDoAction(new g(this.userClosed)),f.createPromise(void 0)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/SetupReplayState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../utility/Utility":275,"./CompleteState":147,"./State":162,"./WaitingForReplayState":169,_process:8,buffer:4,timers:9}],162:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.BeginState=0]="BeginState",e[e.WaitingForAdReadyState=1]="WaitingForAdReadyState",e[e.WaitingForAdOpportunityState=2]="WaitingForAdOpportunityState",e[e.WaitingForContentPlayerState=3]="WaitingForContentPlayerState",e[e.WaitingForAdImprState=4]="WaitingForAdImprState",e[e.WaitingForAutoPlayState=5]="WaitingForAutoPlayState",e[e.InitPrerollState=6]="InitPrerollState",e[e.ContentPreviewState=7]="ContentPreviewState",e[e.PreAdContentSetupState=8]="PreAdContentSetupState",e[e.PostAdContentSetupState=9]="PostAdContentSetupState",e[e.AdSetupState=10]="AdSetupState",e[e.PlayingAdState=11]="PlayingAdState",e[e.PreAdPlayingMediaState=12]="PreAdPlayingMediaState",e[e.PauseMediaState=13]="PauseMediaState",e[e.PostAdPlayingMediaState=14]="PostAdPlayingMediaState",e[e.PlayingAdCompleteState=15]="PlayingAdCompleteState",e[e.SetupReplayState=16]="SetupReplayState",e[e.PlayingMediaState=17]="PlayingMediaState",e[e.PlayingContentCompleteState=18]="PlayingContentCompleteState",e[e.ContentCompleteState=19]="ContentCompleteState",e[e.LookingForNextAdState=20]="LookingForNextAdState",e[e.AdCompleteState=21]="AdCompleteState",e[e.WaitingForReplayState=22]="WaitingForReplayState",e[e.ReplayAdState=23]="ReplayAdState",e[e.LastFrameState=24]="LastFrameState",e[e.CompleteState=25]="CompleteState"}(p=i.StateName||(i.StateName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/State.ts","/src/renderer/inarticle/universe/galaxy/states")},{_process:8,buffer:4,timers:9}],163:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../../logging/LogManager"),f=e("./State"),g=e("../../../../../utility/RetroCallback"),m=e("../../../../../utility/SubscribableCallback"),y=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,y){var b=this;this.univerStateContext=e,this.playlist=t,this.placementElement=i,this.adContentHolder=n,this.inlineSpceG=r,this.mediaPlayerPromise=o,this.hBHelper=a,this.viewablityMonitorPromise=s,this.wrapperPlacementDiv=l,this.stopRendererPromise=d,this.contentPlayerPromise=c,this.starStateContext=u,this.state=p,this.otherNodes=y,this.logger=h.getLogger("Galaxy:StateContext"),this.adTimeCallback=new g,this.stopRenderer=!1,this.isAdPlayComplete=!1,this.isMediaPlayComplete=!1,this.isAdFullscreen=!1,this.inlineInViewCallback=new m,this.inlineOutOfViewCallback=new m,this.mediaCompleteCallback=new m,this.checkPointState={},this.isInarticleClosed=!1,this.isLbVisible=!1,this.viewabilityImpression=!1,this.isCornerSlotInitializedCallback=new m,this.isCornerSlotInitialized=!1,this.playMidrollAdCallback=new m,this.timeOutAction=function(){b.logger.logInfo("Timing out in state : "+b.state.getName()),b.UniverStateContext.InArticleTracker.fireChannelDebugTracker("GALAXY-CONTEXT-TIMEOUT:"+f.StateName[b.state.getName()]+":"+(b.state.timeoutDetails()?b.state.timeoutDetails():""))},this.univerStateContext.StopRendererPromise.getPromise().then(function(){b.stopRenderer=!0,b.adContentHolder.removeAdContainer()}),this.cleanupFunc=function(){},this.isCornerSlotInitializedCallback.subscribe(function(e){!b.isCornerSlotInitialized&&e&&(b.isCornerSlotInitialized=!0)})}return Object.defineProperty(e.prototype,"UniverStateContext",{get:function(){return this.univerStateContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdcontentHolder",{get:function(){return this.adContentHolder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InlineSpceG",{get:function(){return this.inlineSpceG},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementElement",{get:function(){return this.placementElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicElements",{get:function(){return this.otherNodes},set:function(e){this.otherNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MediaPlayerPromise",{get:function(){return this.mediaPlayerPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HBHelper",{get:function(){return this.hBHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WrapperPlacementDiv",{get:function(){return this.wrapperPlacementDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewablityMonitorPromise",{get:function(){return this.viewablityMonitorPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StopRendererPromise",{get:function(){return this.stopRendererPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsAdPlayComplete",{get:function(){return this.isAdPlayComplete},set:function(e){this.isAdPlayComplete=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsAdFullscreen",{get:function(){return this.isAdFullscreen},set:function(e){this.isAdFullscreen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMediaPlayComplete",{get:function(){return this.isMediaPlayComplete},set:function(e){this.isMediaPlayComplete=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InlineInViewCallback",{get:function(){return this.inlineInViewCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InlineOutOfViewCallback",{get:function(){return this.inlineOutOfViewCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MediaCompleteCallback",{get:function(){return this.mediaCompleteCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsInarticleClosed",{get:function(){return this.isInarticleClosed},set:function(e){this.isInarticleClosed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsViewabilityImpressionFired",{get:function(){return this.viewabilityImpression},set:function(e){this.viewabilityImpression=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsLBClosed",{get:function(){return this.isLbClosed},set:function(e){this.isLbClosed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsLBVisible",{get:function(){return this.isLbVisible},set:function(e){this.isLbVisible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ContentPlayerPromise",{get:function(){return this.contentPlayerPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CleanupFunc",{set:function(e){this.cleanupFunc=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayList",{get:function(){return this.playlist},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StarStateContext",{get:function(){return this.starStateContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsIAUnitPaused",{get:function(){return this.isIAUnitPaused},set:function(e){this.isIAUnitPaused=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCornerSlotInitializedCallback",{get:function(){return this.isCornerSlotInitializedCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCornerSlotInitialized",{get:function(){return this.isCornerSlotInitialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayMidrollAdCallback",{get:function(){return this.playMidrollAdCallback},enumerable:!0,configurable:!0}),e.prototype.setHBHelper=function(e){this.hBHelper=e},e.prototype.setState=function(e){this.logger.logInfo("Galaxy State changing from "+f.StateName[this.state.getName()]+" to "+f.StateName[e.getName()]),this.state=e},e.prototype.getState=function(){return this.state},e.prototype.doAction=function(){if(this.stateTimeout&&clearTimeout(this.stateTimeout),!this.stopRenderer){if(this.logger.logInfo("Galaxy performing State action "+f.StateName[this.state.getName()]),this.prevStateSpecificCallback)for(var e in this.prevStateSpecificCallback)this.prevStateSpecificCallback.hasOwnProperty(e)&&this.prevStateSpecificCallback[e]&&this.prevStateSpecificCallback[e]();this.prevStateSpecificCallback=[];var t=this.state.getStateSpecificCallbackPairs(this);if(t)for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var n=t[i];this.prevStateSpecificCallback.push(n.onSubscribeMethod.subscribe(n.callbackMethod))}this.state.canTimeout()&&(this.stateTimeout=setTimeout(this.timeOutAction,5e3)),this.state.doAction(this)}},e.prototype.setStateAndDoAction=function(e){this.setState(e),this.doAction()},e.prototype.saveCheckpoint=function(e,t){this.checkPointState[e]=t},e.prototype.moveToCheckPoint=function(e){var t=this.checkPointState[e];t&&(this.setState(t),delete this.checkPointState[e],this.doAction())},e.prototype.hasCheckPoint=function(e){return!!this.checkPointState[e]},e.prototype.cleanup=function(){this.cleanupFunc(),this.cleanupFunc=function(){}},e}();y.Complete="complete",t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/StateContext.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/RetroCallback":273,"../../../../../utility/SubscribableCallback":274,"./State":162,_process:8,buffer:4,timers:9}],164:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("./StateContext"),m=e("../../../../../logging/LogManager"),y=e("./AdSetupState"),b=e("./CompleteState"),v=e("./InitPrerollState"),P=e("../../../model/Behaviours"),w=e("../../../model/Behaviours"),S=e("../../../model/Behaviours"),C=function(){function e(e){this.waitingForAdReadyState=e,this.geckoLogger=m.getLogger("Galaxy : WaitingForAdImprState")}return e.prototype.getName=function(){return h.StateName.WaitingForAdImprState},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.StarStateContext.AdReadyCallback,callbackMethod:function(i){e.StarStateContext.AdsShownCount>0&&i&&"preroll"===i.behaviour[P.VIDEO_AD_POSITION][0]&&!t.isMidroll(i.behaviour)?e.ContentPlayerPromise.then(function(i){var n=!!i&&i.hasContent();n?e.setStateAndDoAction(new v(i,i.getBehaviour(),t.waitingForAdReadyState)):(t.geckoLogger.logInfo("No more content to display, so try serving the ad"),e.setStateAndDoAction(t))}):e.setStateAndDoAction(t)}}),i.push({onSubscribeMethod:e.StarStateContext.AdImprCallback,callbackMethod:function(i){e.setStateAndDoAction(new y(i.PlayableAd,i.PlayableAdDiv,i.AdDetails,i.Behaviour,i.AdConfigurator,t.waitingForAdReadyState))}}),i.push({onSubscribeMethod:e.StarStateContext.NoDemandCallback,callbackMethod:function(t){e.setStateAndDoAction(new b((!1)))}}),i.push({onSubscribeMethod:e.StarStateContext.AllAdsTriedCallback,callbackMethod:function(i){e.hasCheckPoint(g.Complete)?e.moveToCheckPoint(g.Complete):t.geckoLogger.logInfo("No state checkpoint found")}}),i},e.prototype.doAction=function(e){return e.StarStateContext.TryAdCallback.notify(),f.createPromise(void 0)},e.prototype.isMidroll=function(e){var t="undefined"!=typeof e[S.THUMBNAIL_STRIP]&&"true"===e[S.THUMBNAIL_STRIP][0];return("preroll"===e[P.VIDEO_AD_POSITION][0]||"midroll"===e[P.VIDEO_AD_POSITION][0]||t)&&"undefined"!=typeof e[w.MIDROLL_SECONDS]},e}();t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/WaitingForAdImprState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../model/Behaviours":120,"./AdSetupState":145,"./CompleteState":147,"./InitPrerollState":150,"./State":162,"./StateContext":163,_process:8,buffer:4,timers:9}],165:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./WaitingForAutoPlayState"),y=e("../../../model/Behaviours"),b=function(){function e(e,t){this.waitingForAdReadyState=e,this.adData=t,this.geckoLogger=g.getLogger("Galaxy : WaitingForAdOpportunityState")}return e.prototype.getName=function(){return h.StateName.WaitingForAdOpportunityState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this,i=0,n=!1;try{if(this.adData){var r=y.BehaviourParser.getBehaviours(this.adData.behaviour);if(r){i=r.LBFirst;var o=void 0!==r.ThumbnailStrip&&r.ThumbnailStrip===!0;n=!("preroll"!==r.vAdPos&&"midroll"!==r.vAdPos&&!o||!(r.midrollSeconds>-1))}}}catch(a){this.geckoLogger.logError(a)}return e.UniverStateContext.ShowCornerSlot?e.UniverStateContext.ScrollTriggerPromise.getPromise().then(function(){e.setStateAndDoAction(new m(t.waitingForAdReadyState,n))}):i?e.setStateAndDoAction(new m(this.waitingForAdReadyState,n)):e.UniverStateContext.AdOppTrigger?e.UniverStateContext.AdOpportunityPromise.getPromise().then(function(){e.setStateAndDoAction(new m(t.waitingForAdReadyState,n))}):e.UniverStateContext.IaViewablePromise.getPromise().then(function(){e.setStateAndDoAction(new m(t.waitingForAdReadyState,n))}),f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/WaitingForAdOpportunityState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../model/Behaviours":120,"./State":162,"./WaitingForAutoPlayState":167,_process:8,buffer:4,timers:9}],166:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("./StateContext"),m=e("../../../../../logging/LogManager"),y=e("./WaitingForAdOpportunityState"),b=e("./CompleteState"),v=e("./WaitingForAdImprState"),P=e("./InitPrerollState"),w=e("../../../model/Behaviours"),S=e("../../../model/Behaviours"),C=e("../../../model/Behaviours"),A=function(){function e(){this.geckoLogger=m.getLogger("Galaxy : WaitingForAdReadyState")}return e.prototype.getName=function(){return h.StateName.WaitingForAdReadyState},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:e.StarStateContext.AdReadyCallback,callbackMethod:function(i){e.StarStateContext.AdsShownCount>0?e.ContentPlayerPromise.then(function(n){var r=!!n&&n.hasContent();r&&i&&("preroll"===i.behaviour[w.VIDEO_AD_POSITION][0]||t.isMidroll(i.behaviour))?e.setStateAndDoAction(new P(n,n.getBehaviour(),t)):(t.geckoLogger.logInfo("No more content to display, so try serving the ad"),e.setStateAndDoAction(new v(t)))}):e.setStateAndDoAction(new y(t,i))}}),i.push({onSubscribeMethod:e.StarStateContext.AllAdsTriedCallback,callbackMethod:function(i){e.StarStateContext.AdsShownCount>0?t.moveToNextState(e):t.moveToStateComplete(e)}}),i.push({onSubscribeMethod:e.StarStateContext.StillTryingCallback,callbackMethod:function(i){e.StarStateContext.AdsShownCount>0?t.moveToNextState(e):t.moveToStateComplete(e)}}),i.push({onSubscribeMethod:e.StarStateContext.NoDemandCallback,callbackMethod:function(t){e.setStateAndDoAction(new b((!1)))}}),i},e.prototype.doAction=function(e){var t=this;return e.StarStateContext.AdsShownCount>0?e.ContentPlayerPromise.then(function(i){if(i&&(e.UniverStateContext.Behaviours.ThumbnailStrip&&"true"===e.UniverStateContext.Behaviours.ThumbnailStrip[0]||e.UniverStateContext.Behaviours[w.VIDEO_AD_POSITION]&&e.UniverStateContext.Behaviours[w.VIDEO_AD_POSITION].length<3&&"preroll"===e.UniverStateContext.Behaviours[w.VIDEO_AD_POSITION][0]||t.isMidroll(e.UniverStateContext.Behaviours)||e.UniverStateContext.ShowCornerSlot)){var n=i.hasContent();n?e.setStateAndDoAction(new P(i,i.getBehaviour(),t)):e.StarStateContext.LookForAdCallback.notify()}else{var r=1;e.UniverStateContext.Behaviours.adCount&&(r=parseInt(e.UniverStateContext.Behaviours.adCount[0],10)),e.StarStateContext.AdsShownCount<r?e.StarStateContext.LookForAdCallback.notify():e.moveToCheckPoint("complete")}}):e.StarStateContext.LookForAdCallback.notify(),f.createPromise(void 0)},e.prototype.moveToNextState=function(e){var t=this;e.ContentPlayerPromise.then(function(i){if(i){var n=i.hasContent();n?e.setStateAndDoAction(new P(i,i.getBehaviour(),t)):(t.geckoLogger.logInfo("No more content to display, closing unit"),t.moveToStateComplete(e))}else t.geckoLogger.logInfo("No more content to display, closing unit"),t.moveToStateComplete(e)})},e.prototype.moveToStateComplete=function(e){e.hasCheckPoint(g.Complete)?e.moveToCheckPoint(g.Complete):this.geckoLogger.logInfo("No state checkpoint found")},e.prototype.isMidroll=function(e){var t="undefined"!=typeof e[C.THUMBNAIL_STRIP]&&"true"===e[C.THUMBNAIL_STRIP][0];return("preroll"===e[w.VIDEO_AD_POSITION][0]||"midroll"===e[w.VIDEO_AD_POSITION][0]||t)&&"undefined"!=typeof e[S.MIDROLL_SECONDS]},e}();t.exports=A}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/WaitingForAdReadyState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"../../../model/Behaviours":120,"./CompleteState":147,"./InitPrerollState":150,"./State":162,"./StateContext":163,"./WaitingForAdImprState":164,"./WaitingForAdOpportunityState":165,_process:8,buffer:4,timers:9}],167:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./WaitingForContentPlayerState"),y=e("./WaitingForAdImprState"),b=function(){function e(e,t){this.waitingForAdReadyState=e,this.isMidroll=t,this.geckoLogger=g.getLogger("Galaxy : WaitingForAutoPlayState")}return e.prototype.getName=function(){return h.StateName.WaitingForAutoPlayState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this;return e.UniverStateContext.AutoPlayerDetector.isAutoPlayPromise().getPromise().then(function(i){i&&!t.isMidroll?e.setStateAndDoAction(new y(t.waitingForAdReadyState)):e.setStateAndDoAction(new m(t.waitingForAdReadyState))}),f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/WaitingForAutoPlayState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./State":162,"./WaitingForAdImprState":164,"./WaitingForContentPlayerState":168,_process:8,buffer:4,timers:9}],168:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../utility/Utility"),g=e("../../../../../logging/LogManager"),m=e("./ContentPreviewState"),y=e("./WaitingForAdImprState"),b=function(){function e(e){this.waitingForAdReadyState=e,this.geckoLogger=g.getLogger("Galaxy : WaitingForContentPlayerState")}return e.prototype.getName=function(){return h.StateName.WaitingForContentPlayerState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this;return e.ContentPlayerPromise.then(function(i){var n=!!i&&i.hasContent();n?e.setStateAndDoAction(new m(i,t.waitingForAdReadyState)):(t.geckoLogger.logInfo("No more content to display, so try serving the ad"),e.setStateAndDoAction(new y(t.waitingForAdReadyState)))}),f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/WaitingForContentPlayerState.ts","/src/renderer/inarticle/universe/galaxy/states");
},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./ContentPreviewState":149,"./State":162,"./WaitingForAdImprState":164,_process:8,buffer:4,timers:9}],169:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../../logging/LogManager"),g=e("../../../../../utility/Utility"),m=e("es6-promise"),y=e("./CompleteState"),b=e("./ReplayAdState"),v=function(){function e(e,t,i,n){this.solarContext=e,this.adProperties=t,this.playable=i,this.playingAdState=n,this.geckoLogger=f.getLogger("Galaxy : WaitingForReplayState")}return e.prototype.getName=function(){return h.StateName.WaitingForReplayState},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return this.adProperties.ReplayBarHolder&&i.push({onSubscribeMethod:this.adProperties.ReplayBarHolder.getReplayLinkCallback(),callbackMethod:function(){e.setStateAndDoAction(new b(t.adProperties,e.PlayList,(!0),t.playingAdState,t.solarContext,t.playable.isMute()))}}),i.push({onSubscribeMethod:this.adProperties.IAButtonListener.ReplayCallback,callbackMethod:function(){e.setStateAndDoAction(new b(t.adProperties,e.PlayList,(!1),t.playingAdState,t.solarContext,t.playable.isMute()))}}),i.push({onSubscribeMethod:this.adProperties.IAButtonListener.LBCloseCallback,callbackMethod:function(){e.IsLBClosed=!0,t.solarContext.LBCloseButtonCallback.notify(),t.adProperties.Behaviour.LBMobile&&(t.adProperties.IAButtonListener.hideLBButtons(),t.adProperties.IAButtonListener.showInArticleInlineCloseButton(),t.adProperties.IAButtonListener.showReplayButton(),t.adProperties.IAButtonListener.hideLBReplayButton(),t.solarContext.LeaveBehind&&t.solarContext.LeaveBehind.resizeLeaveBehind(-1),e.IsLBVisible=!1)}}),i.push({onSubscribeMethod:this.solarContext.InlinePresentationCallback,callbackMethod:function(e){e?t.adProperties.IAButtonListener.showInArticleInlineCloseButton():t.adProperties.IAButtonListener.hideInArticleInlineCloseButton()}}),i.push({onSubscribeMethod:this.solarContext.LbPresentationCallback,callbackMethod:function(e){e?t.adProperties.IAButtonListener.showInArticleLBCloseButton():t.adProperties.IAButtonListener.hideInArticleLBCloseButton()}}),i.push({onSubscribeMethod:this.adProperties.IAButtonListener.CloseCallback,callbackMethod:function(){t.closeIAShowReplayHandler(e),e.UniverStateContext.IAUnitClosedPromise.resolve(!0)}}),i.push({onSubscribeMethod:this.playable.getOnAdClickSubscribable(),callbackMethod:function(){e.setStateAndDoAction(t.playingAdState)}}),i},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){return this.adProperties.AdDetails.adId},e.prototype.doAction=function(e){return g.createPromise(void 0)},e.prototype.closeIAShowReplayHandler=function(e){var t=this;return new m.Promise(function(i){e.IsInarticleClosed=!0,e.AdcontentHolder.hideInArticle(t.adProperties.Behaviour.noAnimation).then(function(){t.geckoLogger.logInfo("Close called hide inarticle"),e.PlayList.close(),t.adProperties.Behaviour.LBOpen||(e.IsIAUnitPaused=!0),e.dynamicElements&&e.dynamicElements.length>0&&(e.PlacementElement.style.position="",e.PlacementElement.style.top="",g.removeUnwantedNodes(e.PlacementElement,e.dynamicElements)),t.adProperties.ReplayBarHolder?(t.adProperties.ReplayBarHolder.changeLinkText(e.IsAdPlayComplete),t.adProperties.ReplayBarHolder.showReplayBar(),t.solarContext.EndCallback.notify(),t.adProperties.ReplayBarHolder.isReplayBarVisible()||e.setStateAndDoAction(new y((!0)))):e.setStateAndDoAction(new y((!0)))})})},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/galaxy/states/WaitingForReplayState.ts","/src/renderer/inarticle/universe/galaxy/states")},{"../../../../../logging/LogManager":58,"../../../../../utility/Utility":275,"./CompleteState":147,"./ReplayAdState":160,"./State":162,_process:8,buffer:4,"es6-promise":5,timers:9}],170:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("es6-promise"),y=e("../../../../utility/Utility"),b=e("../../InlineSpaceGrabber"),v=e("../../SanookSpaceGrabber"),P=e("../../CornerSlotSpaceGrabber"),w=e("./Blackhole"),S=e("../../../../config/ConfigHolder"),C=e("./MissedOpportunityState"),A=e("../../../../logging/LogManager"),I=e("../../../../utility/DefferedPromise"),T=e("../.././AdcontentHolder"),B=e("../../../../video/MediaPlayer"),k=e("./WaitForAdvertisers"),E=e("../../IAcompanionHolder"),L=e("../../video/preroll/ContentManager"),D=e("../../../inarticle/model/Behaviours"),O=function(){function e(e,t,i,n,r,o,a,s,l,d,c){this.cssSelector=e,this.placementId=t,this.dimId=i,this.width=n,this.height=r,this.network=o,this.channel=a,this.publisher=s,this.suppliedBehaviour=l,this.scrollTrigger=d,this.adOppTrigger=c,this.logger=A.getLogger("Universe:BigBang")}return e.prototype.getName=function(){return g.StateName.BigBangState},e.prototype.doAction=function(e){return h(this,void 0,m.Promise,function(){var t,i,n=this;return f(this,function(r){try{e.IsSanook?t=new v(this.cssSelector,document,window,this.width,this.height):e.ShowCornerSlot?(y.getScrolledPixelsPromise(window,this.scrollTrigger).getPromise().then(function(){e.ScrollTriggerPromise.resolve()}),t=new P(document)):t=new b(this.cssSelector,document,window,this.width,this.height),y.createBrowserExitPromise(window).then(function(){e.TrackBrowserExitPromise.resolve()})["catch"](function(t){e.setStateAndDoAction(new w(g.StateName.BigBangState,t))}),i=document.getElementById(S.getIdPrefix()+e.PlacementId),i?t.grabInlinePlacement(i).then(function(i){var r;if(i.theNode){var o=i.theNode;e.PlacementElementPromise.resolve(i.theNode),r=e.ShowCornerSlot?n.addContentToCornerSlotPlacement(e,t,o):n.addContentToInlinePlacement(e,t,o,i.otherNodes),e.dynamicElements=i.otherNodes,r.then(function(r){e.MobilePlayableInteractionDetector.videoPlayableCallback().subscribe(function(t){e.InArticleTracker.fireChannelDebugTracker(t)}),n.logger.logInfo("Creating media player");var a=r.adContentHandler.getDivforMediaContent(),s=r.adContentHandler.getDivForStrip(),l=D.BehaviourParser.getBehaviours(n.suppliedBehaviour),d=B.createMediaPlayer(e.PlacementId,a,document,l.delaycloseButtonBy),c=r.adContentHandler.getAdComponent(),u=n.network,p=n.channel,h=n.publisher,f="97",g=new L(n.placementId,u,h,p,f,n.width.toString(),n.height.toString(),d,s,l,document,window,c,e.AdRemainingTimeCallback,r.adContentHandler.ClickOverlayDiv,r.adContentHandler.PlayBtnSpan,r.adContentHandler.PrerollMediaTitleDiv,e.InArticleTracker,r.adContentHandler.getContainerDiv());e.setStateAndDoAction(new k(o,d,r.adContentHandler,r.viewablityMonitorPromise.getPromise(),t,g,i.otherNodes))})}})["catch"](function(t){e.setStateAndDoAction(new C)}):e.setStateAndDoAction(new C)}catch(o){e.setStateAndDoAction(new w(g.StateName.BigBangState,o))}return[2,y.createPromise(void 0)]})})},e.prototype.addContentToInlinePlacement=function(e,t,i,n){var r=this;return new m.Promise(function(o,a){var s=!1;"true"===y.getNameParameter("zView",y.getTopWindowPageUrl())&&(s=!0),i.style.height="2px";var l={id:i.id,debugMode:s,IntervalForPullingViewablityMs:25};e.IaViewablePromise.getPromise().then(function(){r.adOppTrigger||e.AdOpportunityPromise.resolve(),e.TrackBrowserExitPromise.getPromise().then(function(){e.InArticleTracker.fireBrowserExitTrackerOnce()})}),m.Promise.race([e.ScrollPromise.getPromise(),e.AlreadyScrolledPromise.getPromise(),e.IaViewablePromise.getPromise()]).then(function(){r.adOppTrigger&&e.AdOpportunityPromise.resolve(),e.TrackBrowserExitPromise.getPromise().then(function(){e.InArticleTracker.fireBrowserExitTrackerOnce()})});var d=new I;e.ViewabilityDetector.getViewabilityMonitor(l).then(function(a){n&&n.length>0&&r.checkOtherNodesViewability(n,e),a.onViewableStateChange(function(){a.isViewable()&&(r.logger.logInfo("Fired viewable tracker before showAd"),e.IaViewablePromise.resolve())}),a.isViewable()&&(r.logger.logInfo("Fired viewable tracker before showAd 2"),e.IaViewablePromise.resolve()),d.resolve(a);var s=new E(document,i,e.PlacementId),l=new T(document,window,i,t,s,e.PlacementId),c={viewablityMonitorPromise:d,adContentHandler:l};o(c)})["catch"](function(e){r.logger.logError(y.errorMsg("vbDetector's getViewabilityMonitor catch called ",e))})})},e.prototype.addContentToCornerSlotPlacement=function(e,t,i){var n=this;return new m.Promise(function(r,o){e.ScrollTriggerPromise.getPromise().then(function(){e.AdOpportunityPromise.resolve(),e.TrackBrowserExitPromise.getPromise().then(function(){e.InArticleTracker.fireBrowserExitTrackerOnce()})});var a=new T(document,window,i,t,(void 0),e.PlacementId),s=new I,l=!1;"true"===y.getNameParameter("zView",y.getTopWindowPageUrl())&&(l=!0);var d={id:i.id,debugMode:l,IntervalForPullingViewablityMs:25};e.ViewabilityDetector.getViewabilityMonitor(d).then(function(e){s.resolve(e);var t={viewablityMonitorPromise:s,adContentHandler:a};r(t)})["catch"](function(e){n.logger.logError(y.errorMsg("vbDetector's getViewabilityMonitor catch called ",e))})})},e.prototype.checkOtherNodesViewability=function(e,t){var i=this;if(e&&e.length>0)try{var n=setInterval(function(){i.otherNodesViewabilityCheck(e)&&(i.logger.logInfo("Fired viewable tracker before showAd"),t.IaViewablePromise.resolve(),clearInterval(n))},100)}catch(r){}},e.prototype.otherNodesViewabilityCheck=function(e){for(var t=0;t<e.length;t++){var i=y.isElementVisibleInViewport(e[t],window,document);if(i)return i}},e.prototype.initializeViewability=function(e,t,i){},e}();t.exports=O}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/BigBangState.ts","/src/renderer/inarticle/universe/states")},{"../../../../config/ConfigHolder":23,"../../../../logging/LogManager":58,"../../../../utility/DefferedPromise":267,"../../../../utility/Utility":275,"../../../../video/MediaPlayer":282,"../../../inarticle/model/Behaviours":120,"../.././AdcontentHolder":106,"../../CornerSlotSpaceGrabber":107,"../../IAcompanionHolder":111,"../../InlineSpaceGrabber":116,"../../SanookSpaceGrabber":118,"../../video/preroll/ContentManager":189,"./Blackhole":171,"./MissedOpportunityState":173,"./State":175,"./WaitForAdvertisers":177,_process:8,buffer:4,"es6-promise":5,timers:9}],171:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("../../../../logging/LogManager"),y=e("../../../../utility/Utility"),b=e("es6-promise"),v=function(){function e(e,t){this.from=e,this.error=t,this.logger=m.getLogger("Universe:Blackhole")}return e.prototype.getName=function(){return g.StateName.Blackhole},e.prototype.doAction=function(e){return h(this,void 0,b.Promise,function(){return f(this,function(e){return this.logger.logError("We have a problem. Reached error state from "+g.StateName[this.from]+" with error "+this.error),[2,y.createPromise(void 0)]})})},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/Blackhole.ts","/src/renderer/inarticle/universe/states")},{"../../../../logging/LogManager":58,"../../../../utility/Utility":275,"./State":175,_process:8,buffer:4,"es6-promise":5,timers:9}],172:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("../../../../logging/LogManager"),y=e("../../../../utility/Utility"),b=e("es6-promise"),v=function(){function e(){this.logger=m.getLogger("Universe:EndState")}return e.prototype.getName=function(){return g.StateName.EndState},e.prototype.doAction=function(e){return h(this,void 0,b.Promise,function(){return f(this,function(e){return this.logger.logInfo("End of universe"),[2,y.createPromise(void 0)]})})},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/EndState.ts","/src/renderer/inarticle/universe/states")},{"../../../../logging/LogManager":58,"../../../../utility/Utility":275,"./State":175,_process:8,buffer:4,"es6-promise":5,timers:9}],173:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("../../../../utility/Utility"),y=e("es6-promise"),b=function(){function e(){}return e.prototype.getName=function(){return g.StateName.MissedOpportunityState},e.prototype.doAction=function(e){return h(this,void 0,y.Promise,function(){return f(this,function(t){return e.MissedOpportunityPromise.resolve(),e.InArticleTracker.fireMissedOpportunityTrackerOnce(),[2,m.createPromise(void 0)]})})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/MissedOpportunityState.ts","/src/renderer/inarticle/universe/states")},{"../../../../utility/Utility":275,"./State":175,_process:8,buffer:4,"es6-promise":5,timers:9}],174:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("../galaxy/states/StateContext"),y=e("../galaxy/star/states/StateContext"),b=e("../../../../logging/LogManager"),v=e("./Blackhole"),P=e("../../../../utility/Utility"),w=e("es6-promise"),S=e("../galaxy/states/BeginState"),C=e("../galaxy/star/states/BeginState"),A=e("../../video/AdPlayer"),I=e("./EndState"),T=e("../../model/Behaviours"),B=e("../../model/Behaviours"),k=e("../../../../video/VideoPlayList"),E=function(){function e(e,t,i,n,r,o,a,s,l,d){this.element=e,this.adData=t,this.hBHelper=i,this.stopRendererPromise=n,this.mediaPlayerPromise=r,this.adContentHandler=o,this.viewablityMonitorPromise=a,this.inlineSGrabber=s,this.contentManager=l,this.otherNodes=d,this.logger=b.getLogger("Universe:RenderAdState")}return e.prototype.getName=function(){return g.StateName.RenderAdState},e.prototype.doAction=function(e){return h(this,void 0,w.Promise,function(){var t,i,n,r,o,a,s,l,d,c,u,p=this;return f(this,function(h){try{t=P.isNullOrUndefined(this.adData)&&P.isNullOrUndefined(this.adData[0])?B.BehaviourParser.getBehaviours(this.adData[0].behaviour):void 0,t?(i=A.createPlayerDiv("WrapperAdPlayers-"+e.PlacementId,this.adContentHandler.getMainPlayerDiv(),document),n=A.createPlayerDiv("GuranteedAdPlayers-"+e.PlacementId,i,document),r=A.createPlayerDiv("NonGuranteedAdPlayers-"+e.PlacementId,i,document),o=void 0,o=this.hasContentAds(this.adData)||t.adCount>1?this.contentManager.getContentPlayer():new w.Promise(function(e){e(void 0)}),a=void 0,s=void 0,l=t.maxInarticleWidth?t.maxInarticleWidth:640,e.ShowCornerSlot&&("undefined"!=typeof t.adSlotPosition&&(l=t.adSlotPosition.width),a=t.AspectRatioWidth,s=t.AspectRatioHeight),d=new k,c=new y(e,d,this.hBHelper,this.adData,i,n,r,new C(this.element,this.inlineSGrabber,l,a,s),this.element,this.inlineSGrabber,l),u=new m(e,d,this.element,this.adContentHandler,this.inlineSGrabber,this.mediaPlayerPromise,this.hBHelper,this.viewablityMonitorPromise,i,this.stopRendererPromise,o,c,new S,this.otherNodes),u.doAction(),e.CompletePromise.subscribe(function(){P.isNullOrUndefined(p.adData)&&P.isNullOrUndefined(p.adData[0])?B.BehaviourParser.getBehaviours(p.adData[0].behaviour):void 0;e.setStateAndDoAction(new I)})):e.setStateAndDoAction(new v(this.getName(),"Failed while getting behaviours"))}catch(f){e.setStateAndDoAction(new v(this.getName(),"Internal failure "+f))}return[2,P.createPromise(void 0)]})})},e.prototype.hasContentAds=function(e){for(var t in e)if(e[t]&&e.hasOwnProperty(t)&&e[t].behaviour&&("preroll"===e[t].behaviour[T.VIDEO_AD_POSITION][0]||"midroll"===e[t].behaviour[T.VIDEO_AD_POSITION][0]))return!0;return!1},e}();t.exports=E}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/RenderAdState.ts","/src/renderer/inarticle/universe/states")},{"../../../../logging/LogManager":58,"../../../../utility/Utility":275,"../../../../video/VideoPlayList":284,"../../model/Behaviours":120,"../../video/AdPlayer":178,"../galaxy/star/states/BeginState":132,"../galaxy/star/states/StateContext":139,"../galaxy/states/BeginState":146,"../galaxy/states/StateContext":163,"./Blackhole":171,"./EndState":172,"./State":175,_process:8,buffer:4,"es6-promise":5,timers:9}],175:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.BigBangState=0]="BigBangState",e[e.Blackhole=1]="Blackhole",e[e.MissedOpportunityState=2]="MissedOpportunityState",e[e.WaitForAdvertisers=3]="WaitForAdvertisers",e[e.RenderAdState=4]="RenderAdState",e[e.EndState=5]="EndState"}(p=i.StateName||(i.StateName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/State.ts","/src/renderer/inarticle/universe/states")},{_process:8,buffer:4,timers:9}],176:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../../logging/LogManager"),g=e("../../../../utility/SubscribableCallback"),m=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,h,m,y,b,v,P,w,S,C,A,I,T,B,k,E,L,D,O,R,N,_){var x=this;this.behaviours=e,this.inarticleTracker=t,this.adOpportunityPromise=i,this.noDemandPromise=n,this.adReadyPromise=r,this.missedOpportunityPromise=o,this.placementElementPromise=a,this.trackBrowserExitPromise=s,this.iaViewablePromise=l,this.adsToShowPromise=d,this.initialAdPromise=c,this.impressionPromise=u,this.clickPromise=p,this.renderedPromise=h,this.placementId=m,this.vbDetector=y,this.stopRendererPromise=b,this.isSanook=v,this.completePromise=P,this.iaUnitClosedPromise=w,this.state=S,this.mobilePlayableInteractionDetector=C,this.autoPlayerDetector=A,this.showCornerSlot=I,this.scrollTriggerPromise=T,this.stopreloadPromise=B,this.reloadCallback=k,this.reloadCount=E,this.firstScrollPromise=L,this.alreadyScrolledPromise=D,this.adopptrigger=O,this.playpausePromise=R,this.inarticleopenedPromise=N,this.otherNodes=_,this.logger=f.getLogger("Universe:StateContext"),this.stopRenderer=!1,this.adRemainingTimeCallback=new g,this.reloadFlag=!1,this.stopRendererPromise.getPromise().then(function(){x.stopRenderer=!0,B.resolve(!1),n.resolve()})}return Object.defineProperty(e.prototype,"InitialAdPromise",{get:function(){return this.initialAdPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadCount",{get:function(){return this.reloadCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadCallback",{get:function(){return this.reloadCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Behaviours",{get:function(){return this.behaviours},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InArticleTracker",{get:function(){return this.inarticleTracker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdOpportunityPromise",{get:function(){return this.adOpportunityPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoDemandPromise",{get:function(){return this.noDemandPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CompletePromise",{get:function(){return this.completePromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementElementPromise",{get:function(){return this.placementElementPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdReadyPromise",{get:function(){return this.adReadyPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IaViewablePromise",{get:function(){return this.iaViewablePromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionPromise",{get:function(){return this.impressionPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClickPromise",{get:function(){return this.clickPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RenderedPromise",{get:function(){return this.renderedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdsToShowPromise",{get:function(){return this.adsToShowPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StopRendererPromise",{get:function(){return this.stopRendererPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MissedOpportunityPromise",{get:function(){return this.missedOpportunityPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TrackBrowserExitPromise",{get:function(){return this.trackBrowserExitPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewabilityDetector",{get:function(){return this.vbDetector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementId",{get:function(){return this.placementId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdRemainingTimeCallback",{get:function(){return this.adRemainingTimeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSanook",{get:function(){return this.isSanook},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MobilePlayableInteractionDetector",{get:function(){return this.mobilePlayableInteractionDetector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AutoPlayerDetector",{get:function(){return this.autoPlayerDetector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ShowCornerSlot",{get:function(){return this.showCornerSlot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScrollTriggerPromise",{get:function(){return this.scrollTriggerPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicElements",{get:function(){return this.otherNodes},set:function(e){this.otherNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IAUnitClosedPromise",{get:function(){return this.iaUnitClosedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StopReloadPromise",{get:function(){return this.stopreloadPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScrollPromise",{get:function(){return this.firstScrollPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AlreadyScrolledPromise",{get:function(){return this.alreadyScrolledPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdOppTrigger",{get:function(){return this.adopptrigger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayPausePromise",{get:function(){return this.playpausePromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InarticleOpened",{get:function(){return this.inarticleopenedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsAdReloaded",{get:function(){return this.reloadFlag},set:function(e){this.reloadFlag=e},enumerable:!0,configurable:!0}),e.prototype.setReloadCount=function(e){this.reloadCount=e},e.prototype.setState=function(e){this.logger.logInfo("Universe State changing from "+h.StateName[this.state.getName()]+" to "+h.StateName[e.getName()]),this.state=e},e.prototype.doAction=function(){this.stopRenderer||(this.logger.logInfo("Universe performing State action "+h.StateName[this.state.getName()]),this.state.doAction(this))},e.prototype.setStateAndDoAction=function(e){this.setState(e),this.doAction()},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/StateContext.ts","/src/renderer/inarticle/universe/states")},{"../../../../logging/LogManager":58,"../../../../utility/SubscribableCallback":274,"./State":175,_process:8,buffer:4,timers:9}],177:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("./RenderAdState"),g=e("../../../../logging/LogManager"),m=e("./Blackhole"),y=e("../../../../utility/Utility"),b=function(){function e(e,t,i,n,r,o,a){this.element=e,this.mediaPlayerPromise=t,this.adContentHandler=i,this.viewablityMonitorPromise=n,this.inlineSGrabber=r,this.contentManager=o,this.otherNodes=a,this.logger=g.getLogger("Universe:WaitForAdvertisers")}return e.prototype.getName=function(){return h.StateName.WaitForAdvertisers},e.prototype.doAction=function(e){var t=this;try{e.InitialAdPromise.getPromise().then(function(i){t.logger.logInfo("received ad list, of size "+i.adData),i.adData.length<=0?(e.NoDemandPromise.resolve(),e.InArticleTracker.fireNoDemandTrackerOnce(),e.setStateAndDoAction(new m(t.getName(),"Empty adData list. Should not have reached here."))):e.setStateAndDoAction(new f(t.element,i.adData,i.hBHelper,i.stopRendererPromise,t.mediaPlayerPromise,t.adContentHandler,t.viewablityMonitorPromise,t.inlineSGrabber,t.contentManager,t.otherNodes));
})}catch(i){e.setStateAndDoAction(new m(this.getName(),"Internal failure "+i))}return y.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/universe/states/WaitForAdvertisers.ts","/src/renderer/inarticle/universe/states")},{"../../../../logging/LogManager":58,"../../../../utility/Utility":275,"./Blackhole":171,"./RenderAdState":174,"./State":175,_process:8,buffer:4,timers:9}],178:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../model/Behaviours"),f=function(){function e(t,i,n){this.pdmId=t,this.pDiv=e.createPlayerDiv(t,n,document),this.behaviour=h.BehaviourParser.getBehaviours(i)}return Object.defineProperty(e.prototype,"Behaviours",{get:function(){return this.behaviour},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayableAdDiv",{get:function(){return this.pDiv},enumerable:!0,configurable:!0}),e.createPlayerDiv=function(e,t,i){var n=i.createElement("div");return n.id=e,n.style.width="100%",n.style.height="100%",t.appendChild(n),n},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/AdPlayer.ts","/src/renderer/inarticle/video")},{"../model/Behaviours":120,_process:8,buffer:4,timers:9}],179:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("es6-promise"),g=e("../../../logging/LogManager"),m=e("./LeaveBehind"),y=e("../../../config/ConfigHolder");!function(e){e[e.LEFT_RIGHT=0]="LEFT_RIGHT",e[e.TOP_BOTTOM=1]="TOP_BOTTOM"}(h=i.LBAnimationDirection||(i.LBAnimationDirection={}));var b=function(){function e(t,i,n,r,o,a,s,l,d,c,u){this.playList=t,this.lbConfig=i,this.containerDiv=n,this.placeHolderDiv=r,this.slotPosition=o,this.cornerSlotTitleHolder=a,this.lbratio=s,this.iconWrapperElement=l,this.playButtonOverlayDiv=d,this.showAdTitle=c,this.isUnitVisible=u,this.geckoLogger=g.getLogger("CornerSlotHolder"),this.isViewable=!1,this.lbState=m.LeaveBehindState.HIDDEN,this.animDirection=h.LEFT_RIGHT,e.LEAVE_4BY3_RATIO=this.lbratio,this.leaveBehindSize=this.calculateLeaveBehindSize(this.lbConfig.LBSize),this.showInTopCorner="TL"===this.slotPosition||"TR"===this.slotPosition,this.showInLeftCorner="BL"===this.slotPosition||"TL"===this.slotPosition,this.lbOffset=this.lbConfig.LBOffset&&"number"==typeof this.lbConfig.LBOffset?this.lbConfig.LBOffset:0}return e.prototype.setPositionAfterHideLBAnim=function(e){this.animDirection===h.LEFT_RIGHT?this.showInLeftCorner?e.style.left="0px":e.style.right="0px":this.showInTopCorner?e.style.top="0px":e.style.bottom="0px"},e.prototype.positionAndShowTitleDiv=function(){if(this.cornerSlotTitleHolder){var e=this.cornerSlotTitleHolder.getTitleDiv();e.style.display="inline-block",e.style.position="absolute",e.style.marginTop="8px",e.style.top="auto",e.style.left="10px",this.showTitle()}},e.prototype.showTitle=function(){this.cornerSlotTitleHolder&&this.showAdTitle&&this.cornerSlotTitleHolder.showTitle()},e.prototype.hideTitle=function(){this.cornerSlotTitleHolder&&this.cornerSlotTitleHolder.hideTitleDiv()},e.prototype.hideLeaveBehind=function(){var t=this;return new f.Promise(function(i,n){t.lbState=m.LeaveBehindState.HIDDEN;var r,o=t.containerDiv,a=t.animDirection===h.LEFT_RIGHT?0:t.lbOffset;r=t.animDirection===h.LEFT_RIGHT?t.animationIntervalLeftRight(e.ANIMATION_INTERVAL_HIDE,a,t.lbConfig.noAnimation):t.animationIntervalTopBottom(e.ANIMATION_INTERVAL_HIDE,a,t.lbConfig.noAnimation),r.then(function(){t.setPositionAfterHideLBAnim(o),t.containerDiv.className="",t.placeHolderDiv.style.display="none",t.iconWrapperElement.classList.remove("zg-lbplaybuttonoverlay"),t.lbConfig.noAnimation||(t.hideTitle(),t.isViewable=!1,i(!0))})["catch"](function(e){t.geckoLogger.logError(e),n()}),t.lbConfig.noAnimation&&(t.setPositionAfterHideLBAnim(o),t.containerDiv.className="",t.placeHolderDiv.style.display="none",t.iconWrapperElement.classList.remove("zg-lbplaybuttonoverlay"),t.hideTitle(),t.isViewable=!1,i(!0))})},e.prototype.resize=function(){this.playList.resize(this.leaveBehindSize.width,this.leaveBehindSize.height)},e.prototype.mouseOverHover=function(e){var t=this,i=this.leaveBehindSize.width,n=this.leaveBehindSize.height,r=y.getLBMouseoverWidth(),o=y.getLBMouseoverHeight(),a=function(){t.lbState===m.LeaveBehindState.SHOWN&&t.leaveBehindSize.width<=r&&(e.style.width=r+"px",e.style.height=o+"px",t.playList.resize(r,o))},s=function(){t.lbState===m.LeaveBehindState.SHOWN&&t.leaveBehindSize.width<=r&&(e.style.width=i+"px",e.style.height=n+"px",t.playList.resize(i,n))};e.addEventListener("mouseover",a.bind(this)),e.addEventListener("mouseout",s.bind(this))},e.prototype.showLeaveBehind=function(){var t=this;return new f.Promise(function(i,n){t.lbState=m.LeaveBehindState.SHOWN;var r=t.containerDiv;t.playList.resize(t.leaveBehindSize.width,t.leaveBehindSize.height),r.style.height=t.leaveBehindSize.height+"px",r.style.width=t.leaveBehindSize.width+"px",t.playButtonOverlayDiv.style.top="50%",t.playButtonOverlayDiv.style.left="50%",t.playButtonOverlayDiv.style.webkitTransform="translateX(-50%) translateY(-50%)",t.playButtonOverlayDiv.style.transform="translateX(-50%) translateY(-50%);",t.containerDiv.className="zg-leaveBehind",t.iconWrapperElement.classList.add("zg-lbplaybuttonoverlay"),t.positionAndShowTitleDiv(),t.showInLeftCorner?(t.containerDiv.style.cssFloat="left",t.animDirection===h.LEFT_RIGHT?r.style.left=-t.leaveBehindSize.width+"px":t.containerDiv.style.left="0%"):(t.containerDiv.style.cssFloat="right",t.animDirection===h.LEFT_RIGHT?r.style.right=-t.leaveBehindSize.width+"px":t.containerDiv.style.right="0%"),t.showInTopCorner?t.animDirection===h.LEFT_RIGHT?t.containerDiv.style.top=t.lbOffset>0?t.lbOffset+"px":"0%":(t.containerDiv.style.top="0%",r.style.top=-t.leaveBehindSize.height+"px"):t.animDirection===h.LEFT_RIGHT?t.containerDiv.style.bottom=t.lbOffset>0?t.lbOffset+"px":"0%":(t.containerDiv.style.bottom="0%",r.style.bottom=-t.leaveBehindSize.height+"px"),t.lbConfig.LBMouseover&&t.mouseOverHover(t.containerDiv),t.placeHolderDiv.style.display="block";var o,a=t.animDirection===h.LEFT_RIGHT?-t.leaveBehindSize.width:-t.leaveBehindSize.height,s=t.isUnitVisible?1:t.lbConfig.noAnimation;o=t.animDirection===h.LEFT_RIGHT?t.animationIntervalLeftRight(e.ANIMATION_INTERVAL_SHOW,a,s):t.animationIntervalTopBottom(e.ANIMATION_INTERVAL_SHOW,a,s),o.then(function(){t.isViewable=!0,i()})["catch"](function(e){t.geckoLogger.logError(e),n()})})},e.prototype.resizeLeaveBehind=function(e){},e.prototype.animationIntervalTopBottom=function(t,i,n){var r=this,o=n?this.lbOffset:i;return clearInterval(this.animinterval),new f.Promise(function(i,a){r.animinterval=setInterval(function(){o=r.lbState===m.LeaveBehindState.SHOWN?n?o:o+e.ANIM_STEP:o-e.ANIM_STEP,(o>=r.lbOffset||o<=-r.leaveBehindSize.height)&&(clearInterval(r.animinterval),i()),r.showInTopCorner?r.containerDiv.style.top=o+"px":r.containerDiv.style.bottom=o+"px"},t)})},e.prototype.animationIntervalLeftRight=function(t,i,n){var r=this,o=n?0:i;return clearInterval(this.animinterval),new f.Promise(function(i,a){r.animinterval=setInterval(function(){o=r.lbState===m.LeaveBehindState.SHOWN?n?o:o+e.ANIM_STEP:o-e.ANIM_STEP,(o>=0||o<=-r.leaveBehindSize.width)&&(clearInterval(r.animinterval),i()),r.showInLeftCorner?r.containerDiv.style.left=o+"px":r.containerDiv.style.right=o+"px"},t)})},e.prototype.calculateLeaveBehindSize=function(t){var i=e.LEAVE_4BY3_RATIO;return{width:t,height:t*i}},e.prototype.getCurrentState=function(){return this.lbState},e}();b.ANIMATION_INTERVAL_SHOW=25,b.ANIMATION_INTERVAL_HIDE=25,b.ANIM_STEP=12,b.LEAVE_4BY3_RATIO=.75,i.CornerSlotHolder=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/CornerSlotHolder.ts","/src/renderer/inarticle/video")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"./LeaveBehind":181,_process:8,buffer:4,"es6-promise":5,timers:9}],180:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("../../../utility/Utility"),g=e("../../../config/ConfigHolder"),m=e("../../../video/player/ParallelTagGenerator"),y=e("../../../logging/LogManager"),b=e("../../../video/player/VideoPlayer"),v=e("./AdPlayer"),P=function(e){function t(t,i,n){var r=e.call(this,t.placmentId+"_"+i+"_"+i,t.behaviour,n)||this;return r.playerData=t,r.geckoLogger=y.getLogger("GuaranteedPlayer"),r}return h(t,e),t.prototype.createGuranteedPlayer=function(e,t,i,n,r,o,a,s){var l=this;this.geckoLogger.logInfo(" creating Guranteed Player : "+this.playerData.adId+" ");var d=this.playerData.domDestination;d.style.display="none";var c=this.playerData.content,u="";c.videoAd?c.videoAd.xmlData&&(u=c.videoAd.xmlData):u="<VAST></Vast>";var p=!1;if(this.Behaviours.parallelism&&!f.isNullOrUndefined(this.playerData.maxNonGuranteed)){var h=this.Behaviours.parallelism;p=this.playerData.isFoc||1===h}var g=this.HBResponseChecker(this.playerData.placmentId,u,e,s),m=g.hbrespXML,y=g.adTagXML;u=y;var v=this.createGuranteedPlayerConfig(u,m,this.Behaviours,p,this.playerData,r,o),P=function(e){l.geckoLogger.logInfo(" onAdError from contructor of configurator : "+l.pdmId+" "),l.pDiv.style.display="none"},w=new b;return w.createAd(this.pdmId,v,window,P,t,a)},t.prototype.createGuranteedPlayerConfig=function(e,t,i,n,r,o,a){var s=!0,l=[],d=1!==i.SoundOnload,c=0===i.ClicksOnlyOnAd&&0===i.fullscreenIcon||i.onclickFullscreen;(0===i.ClicksOnlyOnAd&&1===i.fullscreenIcon||0===i.ClicksOnlyOnAd&&2===i.fullscreenIcon||1===i.ClicksOnlyOnAd)&&(c=!1);var u=i.landingPageOnClick,p=0===i.ClicksOnlyOnAd,h=0===i.ClicksOnlyOnAd,y={type:i.type,adtag:e,width:o,height:a,playAdOnReady:i.playAdOnReady,landingPageOnClick:u,onclickFullscreen:c,landingPageOnEsc:h,muteOnLoad:d,viewability:i.viewability,landingPageOnExit:p,debugToken:i.debugToken,hideControls:!0,clientIP:r.clientIP?r.clientIP:""};if(t&&(y.hbEnable=!0,y.hbrespXML=t),n){if(f.isNullOrUndefined(r)){s=!1;var b=g.getAdServerVastUrl(),v={nid:r.network,pubid:r.publisher,chanid:r.channel,dimid:r.dimension,parallelism:i.parallelism?i.parallelism:0,maxParallelCalls:i.maxParallelCalls?i.maxParallelCalls:10,maxParallelismtriggered:i.maxParallelismtriggered,ptimeout:i.ptimeout?i.ptimeout:3,dtimeout:i.dtimeout?i.dtimeout:void 0,adExpressUrl:b,noOfTagsInitlizedAfterErr:i.noOfTagsInitlizedAfterErr?i.noOfTagsInitlizedAfterErr:1,thirdPartyClickURL:r.thirdPartyClickURL,thirdPartyImprURL:r.thirdPartyImprURL,behaviour:i,adTag:e,muteOnLoad:1!==i.SoundOnload};t&&(v.hbEnable=!0,v.hbrespXML=t),l.push(v)}var P=m.generateParallelConfig(l,f.getTopWindowPageUrl(),s,o,a);P&&(y.parallel=P)}return y},t.prototype.HBResponseChecker=function(e,t,i,n){var r;try{if(i&&t){var o=i.getResponse(i.getWinningSlotId());o&&(o.VastUrl?t=t.replace(/http:\/\/dummyurlforrubicon.com\//,o.VastUrl):o.VastXml&&t.indexOf("dummyurlforrubicon.com")!==-1&&(r=o.VastXml))}r||t.indexOf("dummyurlforrubicon.com")===-1||n("DUMMYURL_NOT_REPLACED")}catch(a){this.geckoLogger.logInfo("Failed in HBResponseChecker ")}return{hbrespXML:r,adTagXML:t}},t}(v);t.exports=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/GuaranteedPlayer.ts","/src/renderer/inarticle/video")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"../../../utility/Utility":275,"../../../video/player/ParallelTagGenerator":285,"../../../video/player/VideoPlayer":287,"./AdPlayer":178,_process:8,buffer:4,timers:9}],181:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.SHOWN=0]="SHOWN",e[e.HIDDEN=1]="HIDDEN"}(p=i.LeaveBehindState||(i.LeaveBehindState={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/LeaveBehind.ts","/src/renderer/inarticle/video")},{_process:8,buffer:4,timers:9}],182:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../../logging/LogManager"),g=e("./LeaveBehind"),m=e("../../../config/ConfigHolder"),y=e("../../../utility/DOM"),b=function(){function e(e,t,i,n,r,o,a,s){this.playList=e,this.iaTitleHolder=t,this.lbConfig=i,this.containerDiv=n,this.placeHolderDiv=r,this.iconWrapperElement=o,this.playButtonOverlayDiv=a,this.placementElement=s,this.geckoLogger=f.getLogger("LeaveBehindHolder"),this.isViewable=!1,this.lbState=g.LeaveBehindState.HIDDEN,this.unitHeight=0,this.originalWidth=0,this.originalHeight=0,this.leaveBehindSize=this.calculateLeaveBehindSize(this.lbConfig.LBSize),this.lbConfig.LBMobile&&this.createGreyBg(),this.unitHeight=this.containerDiv.clientHeight}return e.prototype.hideLeaveBehind=function(){var t=this;return new h.Promise(function(i,n){t.lbState=g.LeaveBehindState.HIDDEN;var r=t.containerDiv;t.lbConfig.LBMobile?i(!0):(t.animationInterval(e.ANIMATION_INTERVAL_DOWN,0).then(function(){r.style.bottom="0px",t.containerDiv.className="",t.placeHolderDiv.style.display="none",t.iconWrapperElement.classList.remove("zg-lbplaybuttonoverlay"),t.showTitle(),t.lbConfig.noAnimation||i(!0)})["catch"](function(e){t.geckoLogger.logError(e),n()}),t.lbConfig.noAnimation&&(r.style.bottom="0px",t.containerDiv.className="",t.showTitle(),t.placeHolderDiv.style.display="none",i(!0)),t.isViewable=!0)})},e.prototype.resize=function(){this.playList.resize(this.leaveBehindSize.width,this.leaveBehindSize.height)},e.prototype.showTitle=function(){this.iaTitleHolder&&this.iaTitleHolder.getTitleDiv()&&(this.iaTitleHolder.getTitleDiv().style.display="block")},e.prototype.hideTitle=function(){this.iaTitleHolder&&this.iaTitleHolder.getTitleDiv()&&(this.iaTitleHolder.getTitleDiv().style.display="none")},e.prototype.mouseOverHover=function(e,t){var i=this,n=e.clientWidth,r=e.clientHeight,o=0;t&&"number"==typeof t&&(o=t);var a=function(){i.lbState===g.LeaveBehindState.SHOWN&&i.leaveBehindSize.width<=m.getLBMouseoverWidth()&&(e.style.width=m.getLBMouseoverWidth()+"px",e.style.height=m.getLBMouseoverHeight()+o+"px",i.playButtonOverlayDiv.style.width=m.getLBMouseoverWidth()+"px",i.playButtonOverlayDiv.style.height=m.getLBMouseoverHeight()+"px",i.playList.resize(m.getLBMouseoverWidth(),m.getLBMouseoverHeight()))},s=function(){i.lbState===g.LeaveBehindState.SHOWN&&i.leaveBehindSize.width<=m.getLBMouseoverWidth()&&(e.style.width=n+"px",e.style.height=r+o+"px",i.playButtonOverlayDiv.style.width=n+"px",i.playButtonOverlayDiv.style.height=r+"px",i.playList.resize(n,r))};e.addEventListener("mouseover",a.bind(this)),e.addEventListener("mouseout",s.bind(this))},e.prototype.showLeaveBehind=function(){var t=this;return new h.Promise(function(i,n){t.lbState=g.LeaveBehindState.SHOWN;var r=t.containerDiv;t.lbConfig.LBMobile||(t.playList.resize(t.leaveBehindSize.width,t.leaveBehindSize.height),r.style.height=t.leaveBehindSize.height+"px",r.style.width=t.leaveBehindSize.width+"px",t.containerDiv.className="zg-leaveBehind"),t.lbConfig.LBPosition?(t.containerDiv.style.cssFloat="left",t.containerDiv.style.left="0%"):(t.containerDiv.style.cssFloat="right",t.containerDiv.style.right="0%"),t.lbConfig.LBMouseover&&t.mouseOverHover(t.containerDiv,t.lbConfig.LBOffset),t.lbConfig.LBOffset?r.style.height=t.leaveBehindSize.height+t.lbConfig.LBOffset+"px":t.leaveBehindSize.height=t.leaveBehindSize.height,r.style.bottom=-t.leaveBehindSize.height+"px",t.placeHolderDiv.style.display="block",t.playButtonOverlayDiv.style.width=t.leaveBehindSize.width+"px",t.playButtonOverlayDiv.style.height=t.leaveBehindSize.height+"px",t.iconWrapperElement.classList.add("zg-lbplaybuttonoverlay"),t.lbConfig.LBMobile?i():(t.animationInterval(e.ANIMATION_INTERVAL_UP,-t.leaveBehindSize.height).then(function(){i()})["catch"](function(e){t.geckoLogger.logError(e),n()}),t.hideTitle(),t.isViewable=!1)})},e.prototype.resizeLeaveBehind=function(e,t,i){if(this.unitHeight||(this.unitHeight=this.containerDiv.clientHeight,this.originalWidth=this.containerDiv.clientWidth,this.originalHeight=this.containerDiv.clientHeight,i&&(this.unitHeight=this.unitHeight-i)),t&&(this.AdContentDiv=t),e=e>100?100:e,e=e<35&&e!==-1?35:e,this.lbConfig.LBMobile&&e>=35){var n=Math.floor(this.unitHeight*(e/100));n=n<=115?115:n;var r=16*Math.floor(n/9);this.containerDiv.className="zg-leaveBehind",this.containerDiv.style.left="0%",this.containerDiv.style.right="0%",this.containerDiv.style.top="0%",this.containerDiv.style.margin="0 auto",this.AdContentDiv.style.width=r+"px",this.AdContentDiv.style.margin="0 auto",this.playList.resize(r,n),this.greyBgDiv.style.height=n+"px",this.greyBgDiv.style.display="",this.hideTitle()}e===-1&&(this.containerDiv.className="",this.greyBgDiv.style.display="none",this.AdContentDiv.style.width="",this.AdContentDiv.style.margin="",this.playList.resize(this.originalWidth,this.originalHeight),this.showTitle())},e.prototype.animationInterval=function(t,i){var n=this,r=this.lbConfig.noAnimation?0:i;return clearInterval(this.animinterval),new h.Promise(function(i,o){n.animinterval=setInterval(function(){r=n.lbState===g.LeaveBehindState.SHOWN?n.lbConfig.noAnimation?r:r+e.BOTTOM_DIFF:r-e.BOTTOM_DIFF,(r>=0||r<=-n.leaveBehindSize.height)&&(clearInterval(n.animinterval),i()),n.containerDiv.style.bottom=r+"px"},t)})},e.prototype.calculateLeaveBehindSize=function(t){var i=e.LEAVE_4BY3_RATIO;return t>160&&(i=e.LEAVE_16BY9_RATIO),{width:t,height:t*i}},e.prototype.getCurrentState=function(){return this.lbState},e.prototype.createGreyBg=function(){var e=this.lbConfig.LBBgColor?"background:"+this.lbConfig.LBBgColor+";":"background: url("+m.geMobileLbBgUrl()+") repeat scroll 0% 0% rgb(160, 160, 160);box-shadow:rgb(103, 103, 103) 0px 2px;";this.greyBgDiv=y.Util.createDivElement(document,"grey-bg"),this.greyBgDiv.style.display="none",this.greyBgDiv.style.cssText=e+"top:0;left:0; position: fixed; width: 100%; transform: translate3d(0, 0, 0); backface-visibility: hidden; z-index:99999;",this.placementElement&&this.placementElement.parentNode&&this.placementElement.parentNode.insertBefore(this.greyBgDiv,this.placementElement)},e}();b.ANIMATION_INTERVAL_UP=40,b.ANIMATION_INTERVAL_DOWN=25,b.BOTTOM_DIFF=10,b.LEAVE_16BY9_RATIO=.5625,b.LEAVE_4BY3_RATIO=.75,i.LeaveBehindHolder=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/LeaveBehindHolder.ts","/src/renderer/inarticle/video")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"../../../utility/DOM":266,"./LeaveBehind":181,_process:8,buffer:4,"es6-promise":5,timers:9}],183:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("es6-promise"),g=e("../../../logging/LogManager"),m=e("../../../utility/Utility");!function(e){e[e.SHOWN=0]="SHOWN",e[e.HIDDEN=1]="HIDDEN"}(h=i.LeaveBehindState||(i.LeaveBehindState={}));var y=function(){function e(e,t,i,n,r){this.playList=e,this.iaTitleHolder=t,this.lbConfig=i,this.containerDiv=n,this.placeHolderDiv=r,this.geckoLogger=g.getLogger("LeaveBehindSanookHolder"),this.isViewable=!1,this.lbState=h.HIDDEN,this.leaveBehindSize={width:350,height:210}}return e.prototype.hideLeaveBehind=function(){var e=this;return new f.Promise(function(t,i){e.lbState=h.HIDDEN,e.placeHolderDiv.style.display="none";e.containerDiv;e.showTitle(),t(!0),e.isViewable=!0})},e.prototype.showTitle=function(){this.iaTitleHolder&&(this.iaTitleHolder.getFooterDiv().style.display="block")},e.prototype.hideTitle=function(){this.iaTitleHolder&&(this.iaTitleHolder.getFooterDiv().style.display="none")},e.prototype.resize=function(){this.playList.resize(this.leaveBehindSize.width,this.leaveBehindSize.height)},e.prototype.showLeaveBehind=function(){var e=this;return new f.Promise(function(t,i){m.scorllAboveInline().then(function(){e.lbState=h.SHOWN;var i=e.containerDiv;e.placeHolderDiv.style.display="block",e.playList.resize(e.leaveBehindSize.width,e.leaveBehindSize.height),i.style.height=e.leaveBehindSize.height+"px",i.style.width=e.leaveBehindSize.width+"px",e.containerDiv.className+=" sanook-main",e.containerDiv.className+=" sanook-leaveBehind",i.style.bottom="400px",e.hideTitle(),e.isViewable=!1,t()})["catch"](function(t){e.geckoLogger.logError(t),i()})})},e.prototype.resizeLeaveBehind=function(e){},e.prototype.getCurrentState=function(){return this.lbState},e}();i.LeaveBehindSanookHolder=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/LeaveBehindSanookHolder.ts","/src/renderer/inarticle/video")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],184:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/BrowserUtils"),f=e("../../../detector/OsType"),g=e("../../../utility/DOM"),m=e("../../../detector/BrowserType"),y=e("../../../logging/LogManager"),b=function(){function e(e,t,i){var n=this;this.playPromise=e,this.geckoLogger=y.getLogger("MobileBrowserHelper"),this.stopListening=!1,h.getOS()!==f.Android&&h.getOS()!==f.WindowsPhone&&h.getOS()!==f.IOS||(h.getBrowser()===m.Chrome?g.Util.addWindowEvent(window,"touchend",function(){n.touchStartHandler(n.stopListening,n.playPromise,t,n.geckoLogger)}):g.Util.addWindowEvent(window,"touchstart",function(){n.touchStartHandler(n.stopListening,n.playPromise,t,n.geckoLogger)})),i.subscribe(function(e){n.stopListening=e})}return e.prototype.touchStartHandler=function(e,t,i,n){e||t.getPromise().then(function(){n.logInfo("touchStartHandler called, calling play"),i.play()})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/MobileBrowserHelper.ts","/src/renderer/inarticle/video")},{"../../../detector/BrowserType":29,"../../../detector/OsType":31,"../../../logging/LogManager":58,"../../../utility/BrowserUtils":264,"../../../utility/DOM":266,_process:8,buffer:4,timers:9}],185:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../logging/LogManager"),f=e("./AdPlayer"),g=e("../../../utility/Utility"),m=e("../../../config/ConfigHolder"),y=e("../../../video/player/ParallelTagGenerator"),b=e("../model/Behaviours"),v=e("../../../video/player/VideoPlayer"),P=e("../model/Behaviours"),w=function(){function e(e){this.adData=e,this.geckoLogger=h.getLogger("NonGuaranteedPlayer")}return e.prototype.createNonGuaranteedPlayer=function(e,t,i,n,r){var o=this;this.geckoLogger.logInfo(" Creating Non Guranteed Player ");var a=this.adData[0].placmentId+"_NonGuaranteed",s=this.adData[0].behaviour[b.DEBUG_TOKEN]?this.adData[0].behaviour[b.DEBUG_TOKEN][0]:"",l=this.adData[0].behaviour.dtimeout?P.BehaviourParser.getBehaviours(this.adData[0].behaviour).dtimeout:void 0,d=this.adData[0].behaviour.ptimeout?P.BehaviourParser.getBehaviours(this.adData[0].behaviour).ptimeout:3;this.nonGuaranteedPlayerDiv=f.createPlayerDiv(a,t,document),this.hide();var c=this.createNonGuranteedPlayerConfig(this.adData,i,n),u={type:"auto",width:i,height:n,adtag:"<VAST></VAST>",playAdOnReady:!1,muteOnLoad:!0,debugToken:s,parallel:c,demandPartnerTimeout:l,selectionDelayMs:d,clientIP:this.adData[0].clientIP},p=function(e,t,i){o.geckoLogger.logError("AdError callback called :: "+e)},h=new v;return h.createAd(a,u,window,p,e,r)},Object.defineProperty(e.prototype,"AdPlayableDiv",{get:function(){return this.nonGuaranteedPlayerDiv},enumerable:!0,configurable:!0}),e.prototype.show=function(){this.nonGuaranteedPlayerDiv&&(this.nonGuaranteedPlayerDiv.style.display="block",this.nonGuaranteedPlayerDiv.style.visibility="visible",this.nonGuaranteedPlayerDiv.style.position="",this.nonGuaranteedPlayerDiv.style.left="",this.nonGuaranteedPlayerDiv.style.top="")},e.prototype.hide=function(){this.nonGuaranteedPlayerDiv&&(this.nonGuaranteedPlayerDiv.style.position="fixed",this.nonGuaranteedPlayerDiv.style.visibility="hidden",this.nonGuaranteedPlayerDiv.style.left="-99999px",this.nonGuaranteedPlayerDiv.style.top="-99999px")},e.prototype.createNonGuranteedPlayerConfig=function(e,t,i){for(var n=[],r=!0,o=0,a=e.length;o<a;o++)if(g.isNullOrUndefined(e[o])){var s=e[o],l=P.BehaviourParser.getBehaviours(s.behaviour),d=void 0,c=s.content,u="";c.videoAd?c.videoAd.xmlData&&(u=c.videoAd.xmlData):u="<VAST></Vast>",d=m.getAdServerVastUrl();var p={nid:s.network,pubid:s.publisher,chanid:s.channel,dimid:s.dimension,parallelism:l.parallelism?l.parallelism:0,maxParallelCalls:l.maxParallelCalls?l.maxParallelCalls:10,maxParallelismtriggered:l.maxParallelismtriggered,ptimeout:l.ptimeout?l.ptimeout:3,dtimeout:l.dtimeout?l.dtimeout:void 0,adExpressUrl:d,noOfTagsInitlizedAfterErr:l.noOfTagsInitlizedAfterErr?l.noOfTagsInitlizedAfterErr:1,thirdPartyClickURL:s.thirdPartyClickURL,thirdPartyImprURL:s.thirdPartyImprURL,behaviour:l,muteOnLoad:1!==l.SoundOnload,adTag:u};n.push(p)}var h=y.generateParallelConfig(n,g.getTopWindowPageUrl(),r,t,i);return h},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/NonGuaranteedPlayer.ts","/src/renderer/inarticle/video")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"../../../utility/Utility":275,"../../../video/player/ParallelTagGenerator":285,"../../../video/player/VideoPlayer":287,"../model/Behaviours":120,"./AdPlayer":178,_process:8,buffer:4,timers:9}],186:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("es6-promise"),g=e("../../../utility/SubscribableCallback");!function(e){e[e.SHOWN=0]="SHOWN",e[e.HIDDEN=1]="HIDDEN"}(h=i.ReplayBarState||(i.ReplayBarState={}));var m=function(){function e(e,t){var i=this;this.adContentHandler=e,this.rbConfig=t,this.rbState=h.HIDDEN,this.replayLinkCallback=new g,this.replayLinkHandler=function(){i.hideReplayBar().then(function(){i.replayLinkCallback.notify()})},this.replayBarDiv=this.adContentHandler.getReplayBarDiv(),this.replayBarDiv.childNodes[0].innerHTML="<b>"+t.advertisementText+"</b>";var n=this.replayBarDiv.childNodes[1];n.innerHTML="<b>"+t.replayLinkText+"</b>",n.addEventListener("click",this.replayLinkHandler,!0)}return e.prototype.isReplayEnabled=function(){return 0===this.rbConfig.removeReplayStrip},e.prototype.hideReplayBar=function(){var e=this;return new f.Promise(function(t,i){try{e.replayBarDiv.style.display="none",e.rbState=h.HIDDEN,t()}catch(n){i()}})},e.prototype.showReplayBar=function(){var e=this;return new f.Promise(function(t,i){try{0===e.rbConfig.removeReplayStrip&&(e.replayBarDiv.style.display="block",e.rbState=h.SHOWN),t()}catch(n){i()}})},e.prototype.showResumeBar=function(){var e=this;return new f.Promise(function(t,i){try{0===e.rbConfig.removeResumeStrip&&(e.replayBarDiv.style.display="block",e.rbState=h.SHOWN),t()}catch(n){i()}})},e.prototype.changeLinkText=function(e){var t=e?this.rbConfig.replayLinkText:this.rbConfig.resumeLinkText;this.replayBarDiv.childNodes[1].innerHTML="<b>"+t+"</b>"},e.prototype.getReplayLinkCallback=function(){return this.replayLinkCallback},e.prototype.isReplayBarVisible=function(){return this.rbState===h.SHOWN},e}();i.ReplayBarHolder=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/ReplayBarHolder.ts","/src/renderer/inarticle/video")},{"../../../utility/SubscribableCallback":274,_process:8,buffer:4,"es6-promise":5,timers:9}],187:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/DOM"),f=function(){function e(e,t,i){this.doc=e,this.placementElement=t,this.containerDiv=i}return e.prototype.createThumbnailDiv=function(e,t){this.containerDiv.style.position="relative",this.thumbnailDiv=h.Util.createDivElement(this.doc,"ad-thumbnail-div-"+this.placementElement.id),this.thumbnailDiv.className="zg-thumbnail";var i=15*e/100,n=i/16*9;this.thumbnailDiv.style.width=i+"px",this.thumbnailDiv.style.height=n+"px",this.thumbnailDiv.style.cssFloat="right",this.thumbnailDiv.style.right="1%";var r=h.Util.createImageElement(this.doc,"ad-thumbnail-img-"+this.placementElement.id);r.src=t.thumbnail,r.width=i,r.height=n,this.thumbnailDiv.appendChild(r),this.thumbnailDiv.appendChild(this.addThumbnailText()),this.containerDiv.appendChild(this.thumbnailDiv)},e.prototype.addThumbnailText=function(){return this.thumbnailText=h.Util.createSpanElement(this.doc,"ad-thumbnailText-span-"+this.placementElement.id),this.thumbnailText.innerHTML="Video starts soon ",this.thumbnailText.className="zg-thumbnailText",this.thumbnailText},e.prototype.hideThumbnailDiv=function(){this.thumbnailDiv.style.display="none"},e.prototype.updateRemainingTimeInThumbnail=function(e){this.thumbnailText&&(e?this.thumbnailText.innerHTML="Video starts in "+e:this.thumbnailText.innerHTML="Video starts soon "),this.thumbnailText.clientWidth>this.thumbnailDiv.clientWidth&&this.hideThumbnailDiv()},e.prototype.showThumbnailDiv=function(){this.thumbnailDiv.style.display="block"},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/ThumbnailHolder.ts","/src/renderer/inarticle/video")},{"../../../utility/DOM":266,_process:8,buffer:4,timers:9}],188:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../video/player/Player"),f=function(){function e(){}return e.canReplay=function(e){return!(e.adType.toLowerCase()===h.ADTYPE.VPAID||e.selectedPlayer.toLowerCase()===h.PLAYERTYPE.FLASH)},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/VideoTypeHelper.ts","/src/renderer/inarticle/video")},{"../../../video/player/Player":286,_process:8,buffer:4,timers:9}],189:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../adserving/model/request/builder/AdServerRequestBuilder"),f=e("./ContentPlayer"),g=e("../../../../utility/DefferedPromise"),m=e("../../../../utility/GeckoMap"),y=e("../../../../utility/HTTPClient"),b=e("../../../../logging/LogManager"),v=e("../../../../video/position/VideoAdPositioningHelper"),P=e("./ParseResponse"),w=e("../../../../utility/Utility"),S=e("es6-promise"),C=e("../../../../adserving/AdServer"),A=e("../../../../adserving/model/request/MasterCapability"),I=e("../../../../detector/capability/CapabilityDetector"),T=e("../../../../detector/PageProperties"),B=e("../../../../adserving/model/request/TagProperties"),k=e("../../../../detector/PagePropertyProvider"),E=e("../../../../config/ConfigHolder"),L=e("../../../../adserving/AdServerConfig"),D="content",O=5e3,R=function(){
function e(e,t,i,n,r,o,a,s,l,d,c,u,p,h,f,m,y,v,P){this.placementId=e,this.network=t,this.publisher=i,this.channel=n,this.dimId=r,this.width=o,this.height=a,this.mediaPlayerPromise=s,this.divForStrip=l,this.behaviour=d,this.doc=c,this.win=u,this.placementElement=p,this.adRemainingTimeCallback=h,this.clickOverlayDiv=f,this.playBtnSpan=m,this.prerollTitleDiv=y,this.inArticleTracker=v,this.adContainerDiv=P,this.geckoLogger=b.getLogger("ContentManager"),this.responseReceivedPromise=new g,this.pgPropProvider=new k.PagePropertyProvider(window,document,(!1))}return e.prototype.getContentPlayer=function(){var e=this;return this.getResponseFromAdserver(),new S.Promise(function(t,i){var n=setTimeout(function(){e.geckoLogger.logInfo("Timed our waiting for content adserver response");var i="PREROLL:CNTTIMEOUT:";e.inArticleTracker.fireChannelDebugTracker(i),t(void 0)},O);e.responseReceivedPromise.getPromise().then(function(i){clearTimeout(n),e.mediaPlayerPromise.then(function(n){var r=new f(n,e.behaviour,i,e.doc,e.win,e.divForStrip,e.placementElement,e.adRemainingTimeCallback,e.clickOverlayDiv,e.playBtnSpan,e.prerollTitleDiv,e.placementId,e.adContainerDiv);t(r)})})})},e.prototype.getAdServingPlacement=function(){var e=new h.PlacementBuilder(this.placementId,this.network,this.publisher,this.channel,this.dimId,this.width,this.height);return e=e.addRenderer(D,{},{}),e.withKeyword(""),this.behaviour.midrollSeconds>0?e.withMaxNonGuranteed(10):e.withMaxNonGuranteed(4),e.build()},e.prototype.getId=function(){return this.placementId},e.prototype.getResponseFromAdserver=function(){var e=w.getTopWindowProtocol(),t=e?"https://":"http://",i=new y.HTTPClient(""),n=new m;n.set(this.placementId,this);var r=(new h.PagePropertiesBuilder).withPageUrl(T.compareAndGetPageUrl(this.pgPropProvider)).withRefererUrl(T.getPageRef(this.pgPropProvider)).build();this.geckoLogger.logDebug("PageProperties created.");var o=new B("","","");this.geckoLogger.logDebug("TagProperties created.");var a=t+E.get10KBImagePath(),s=new I.Detector(a,parseInt(E.getBroadBandDetectionTimeOut(),10));this.geckoLogger.logDebug("Capability Detector Initialized");var l=new A(s.isCookieSupport());this.geckoLogger.logDebug("Master Capability created.");var d=new C(n,o,r,l,i,this.constructAdServerConfig(t));this.geckoLogger.logDebug("AdServer created."),d.loadAds()},e.prototype.constructAdServerConfig=function(e){var t=e+E.getAdServerUrl();return"https://"===e&&(t=e+E.getSecureAdServerUrl()),new L(t,E.getAdRequestPath())},e.prototype.parseAdContents=function(e){var t=[];try{for(var i=0,n=e.length;i<n;i++){var r=e[i],o=[],a=r.AdContent.xmlData,s=w.parseXML(a),l=P.getExtensionParams(s),d=P.getDuration(s),c=P.getVastMediaDetails(s),u="",p="",h=c[0];if(h&&(h.mediaURL&&(u=h.mediaURL),h.type&&(p=h.type)),l){var f=v.getMediaArray(l.CP_AD_META,l,d,u,p);o=f?f:[]}else this.geckoLogger.logDebug("creativeProp are undefined");t.push(o)}}catch(g){this.geckoLogger.logError(w.errorMsg(" xml parsing error ",g))}return t},e.prototype.handleAdResponse=function(e){this.contentDetailsMap=new m;for(var t=[],i=this.parseAdContents(e.Creatives),n=0,r=i.length;n<r;n++)if(t=i[n]){var o=Math.floor(Math.random()*t.length),a=t[o],s="MediaDetails_"+n;a&&(a.key=s,this.contentDetailsMap.set(s,a))}this.responseReceivedPromise.resolve(this.contentDetailsMap)},e}();t.exports=R}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/preroll/ContentManager.ts","/src/renderer/inarticle/video/preroll")},{"../../../../adserving/AdServer":10,"../../../../adserving/AdServerConfig":11,"../../../../adserving/model/request/MasterCapability":13,"../../../../adserving/model/request/TagProperties":17,"../../../../adserving/model/request/builder/AdServerRequestBuilder":18,"../../../../config/ConfigHolder":23,"../../../../detector/PageProperties":32,"../../../../detector/PagePropertyProvider":33,"../../../../detector/capability/CapabilityDetector":35,"../../../../logging/LogManager":58,"../../../../utility/DefferedPromise":267,"../../../../utility/GeckoMap":268,"../../../../utility/HTTPClient":269,"../../../../utility/Utility":275,"../../../../video/position/VideoAdPositioningHelper":288,"./ContentPlayer":190,"./ParseResponse":191,_process:8,buffer:4,"es6-promise":5,timers:9}],190:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../utility/SubscribableCallback"),f=e("./ThumbnailStrip"),g=e("../../MediaTitleHolder"),m=e("../../../../utility/BrowserUtils"),y=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p){var m=this;this.mediaPlayer=e,this.behaviour=t,this.contentDetailsMap=i,this.doc=n,this.win=r,this.divForStrip=o,this.placementElement=a,this.adRemainingTimeCallback=s,this.clickOverlayDiv=l,this.playBtnSpan=d,this.adContainerDiv=p,this.activeContentClickedCallback=new h,this.contentClickedCallback=new h,this.playBtnClickedCallback=new h,this.selectedMediaDetailsCallback=new h,this.mediaDetails={videoTitle:"",sponsoredBy:"Sponsored By ZINC",videoContentURL:"",mediaType:"",containerTitle:"",thumbnail:"",key:"none",props:void 0},this.thumbnailStripObj=new f(this.divForStrip,this.doc,window,this.contentDetailsMap,this.placementElement.offsetWidth,this.selectedMediaDetailsCallback,this.adRemainingTimeCallback,this.mediaPlayer.getOnTimeSubscribable(),u),this.thumbnailStripObj.updateThumbnailAdRemainingTime(),this.clickOverlayDiv.addEventListener("click",function(){m.playBtnClickedCallback.notify(m.mediaDetails)}),this.mediaTitleHolder=new g(n,c,u)}return e.prototype.hasContent=function(){return!!this.thumbnailStripObj.getSelectedThumbnailMediaDetails()},e.prototype.setMediaTitleHeaders=function(){var e=this,t=this.thumbnailStripObj.getSelectedThumbnailMediaDetails();t&&(this.mediaDetails=t),this.mediaTitleHolder.showCaption(this.mediaDetails),this.selectedMediaDetailsCallback&&this.selectedMediaDetailsCallback.subscribe(function(t){e.mediaDetails!==t&&(e.isContentActive&&e.deactivateContent(),e.mediaDetails=t),e.mediaDetails===t&&e.isContentActive?e.activeContentClickedCallback.notify(t):e.contentClickedCallback.notify(t),e.hideClickButtonOverlay(),e.MediaPlayer.showPauseIcon(),t&&e.mediaTitleHolder.showCaption(e.mediaDetails)})},e.prototype.hideTitleHeaders=function(){this.mediaTitleHolder.hideCaption()},Object.defineProperty(e.prototype,"IsContentActive",{get:function(){return this.isContentActive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DivHeight",{get:function(){return this.thumbnailStripObj.getDivHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ContentClickedCallback",{get:function(){return this.contentClickedCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ActiveContentClickedCallback",{get:function(){return this.activeContentClickedCallback},enumerable:!0,configurable:!0}),e.prototype.getActiveContentPlayable=function(){return this.mediaPlayer.getPlayableMedia()},Object.defineProperty(e.prototype,"StartAutoPLayCallback",{get:function(){return this.playBtnClickedCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayBtnClickedCallback",{get:function(){return this.playBtnClickedCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MediaPlayer",{get:function(){return this.mediaPlayer},enumerable:!0,configurable:!0}),e.prototype.showClickButtonOverlay=function(e){e?(this.clickOverlayDiv&&(this.clickOverlayDiv.style.display="block"),this.playBtnSpan.style.display="block"):(this.playBtnSpan.style.display="none",this.clickOverlayDiv.style.display="none")},e.prototype.hideClickButtonOverlay=function(){this.clickOverlayDiv&&(this.clickOverlayDiv.style.display="none")},e.prototype.showTimeRemainingDiv=function(){this.thumbnailStripObj.showTimeRemainingDiv()},e.prototype.activateContent=function(e){var t=this.thumbnailStripObj.getSelectedThumbnailMediaDetails();if(t)return this.mediaDetails=t,this.mediaPlayer.setMediaDetails(t),this.isContentActive=!0,this.activeContentKey=t.key,this.activeContentProperties=t.props,e&&this.mediaTitleHolder.showCaption(t),this.mediaPlayer.getPlayableMedia()},e.prototype.activateThumbnailStrip=function(e){this.thumbnailStripObj.activateThumbstrip(e)},e.prototype.deactivateContent=function(){this.isContentActive=!1,this.thumbnailStripObj&&this.mediaPlayer.getMediaDetails()&&this.thumbnailStripObj.removeThumbnail(this.mediaPlayer.getMediaDetails().key)},e.prototype.deactivateThumbnailStrip=function(){},e.prototype.getBehaviour=function(){try{var e=m.isMobileDevice(),t=m.isTablet(this.win);(e||t)&&(this.behaviour.NoLB=1,this.behaviour.soundIcon=0)}catch(i){}return this.behaviour},e.prototype.getActiveContentProperties=function(){return this.activeContentProperties},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/preroll/ContentPlayer.ts","/src/renderer/inarticle/video/preroll")},{"../../../../utility/BrowserUtils":264,"../../../../utility/SubscribableCallback":274,"../../MediaTitleHolder":117,"./ThumbnailStrip":193,_process:8,buffer:4,timers:9}],191:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../utility/Utility"),f="Extensions",g="Extension",m="CreativeProperties",y="InLine",b="Duration",v="Linear",P=function(){function e(){}return e.getDuration=function(t){var i=t.documentElement.getElementsByTagName(b),n=e.parseNodeText(i[0]);return e.parseDuration(n)},e.getExtensionParams=function(t){var i=t.documentElement.getElementsByTagName(f);if(i)return e.getExtensionNodeParams(i[0])},e.getVastMediaDetails=function(t){var i=t.documentElement.getElementsByTagName(y);return e.getMediaFiles(i[0])},e.getMediaFiles=function(t){var i,n,r,o,a,s,l,d=[];if(t){var c=e.childByName(t,"Creatives");if(c){var u=e.childByName(c,"Creative");if(u){a=u.childNodes;for(var p=0;p<a.length;p++)switch(a[p].nodeName){case v:i=e.childsByName(a[p],"MediaFiles");for(var h=0,f=i.length;h<f;h++){o=i[h],s=e.childByName(a[p],b),l=e.parseDuration(e.parseNodeText(s)),n=e.childsByName(o,"MediaFile");for(var g=0,m=n.length;g<m;g++){r=n[g];var y={delivery:"progressive",type:"video/mp4",width:"0",height:"0"};y.mediaURL=e.parseNodeText(r),y.delivery=r.getAttribute("delivery"),y.codec=r.getAttribute("codec"),y.type=r.getAttribute("type"),y.bitrate=r.getAttribute("bitrate"),y.minBitrate=r.getAttribute("minBitrate"),y.maxBitrate=r.getAttribute("maxBitrate"),y.width=r.getAttribute("width"),y.height=r.getAttribute("height"),y.maintainAspectRatio=!!r.getAttribute("maintainAspectRatio"),y.apiFramework=r.getAttribute("apiFramework")||"vast",y.duration=l,d.push(y)}}}}}}return d},e.parseDuration=function(e){var t,i,n,r,o;return null==e?-1:(t=e.split(":"),3!==t.length?-1:(o=t[2].split("."),r=parseInt(o[0],10),2===o.length&&(r+=parseFloat("0."+o[1])),n=60*parseInt(t[1],10),i=60*parseInt(t[0],10)*60,isNaN(i)||isNaN(n)||isNaN(r)?-1:i+n+r))},e.getExtensionNodeParams=function(t){var i={CP_ADID:"",CP_ADVID:"",CP_CAMID:"",CP_CHANID:"",CP_DIMID:"",CP_FCV:"",CP_NID:"",CP_PUBID:"",CP_AD_META:""},n=e.childsByName(t,g);if(h.isNullOrUndefined(t.childNodes)&&n.length>0)for(var r=0,o=n.length;r<o;r++){var a=e.childsByName(n[r],m);h.isNullOrUndefined(a)&&a.length>0&&(i=e.getCreativeProp(a))}return i},e.childsByName=function(e,t){for(var i,n=[],r=e.childNodes,o=0,a=r.length;o<a;o++)i=r[o],i.nodeName===t&&n.push(i);return n},e.childByName=function(e,t){var i,n,r,o;for(o=e.childNodes,n=0,r=o.length;n<r;n++)if(i=o[n],i.nodeName===t)return i},e.parseNodeText=function(e){return e&&(e.textContent||e.text)},e.getCreativeProp=function(t){for(var i,n,r,o,a=t,s={},l="",d=0,c=a.length;d<c;d++){r=a[d],o=r.childNodes;for(var u=0,p=o.length;u<p;u++)if(i=o[u],"#comment"!==i.nodeName&&"#text"!==i.nodeName)if(s[i.nodeName]={},i.childElementCount>0){var f={};n=i.childNodes;for(var g=0;g<n.length;g++)"#text"!==n[g].nodeName&&(l=e.parseNodeText(n[g]),l=h.isNullOrUndefined(l)&&""!==l?l.trim():"",f[n[g].nodeName]=l);s[i.nodeName]=f}else l=e.parseNodeText(i),l=h.isNullOrUndefined(l)&&""!==l?l.trim():"",s[i.nodeName]=l}return s},e}();t.exports=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/preroll/ParseResponse.ts","/src/renderer/inarticle/video/preroll")},{"../../../../utility/Utility":275,_process:8,buffer:4,timers:9}],192:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../utility/DOM"),f=e("../../../../utility/BrowserUtils"),g=e("../../../../config/ConfigHolder"),m=4,y="#000000",b="Starts soon...",v="rgba(51, 51, 51, 0.3)",P="rgba(0, 0, 0, 0.7)",w="Starts in ",S="Now Playing ",C=function(){function e(e,t,i,n,r,o,a){var s=this;this.thumbnailSelectedCallback=e,this.mediaDetails=t,this.win=i,this.divWidth=r,this.divHeight=o,this.clickHandler=function(e){s.thumbnailSelectedCallback.notify(s)},this.touchendHandler=function(e){s.thumbnailSelectedCallback.notify(s)},this.isTouchSupported=f.isMobileDevice(),this.createThumbnailDiv(n,a)}return e.parseDuration=function(e){var t=new Date(1e3*e);return t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds()},e.prototype.createThumbnailDiv=function(t,i){this.thumbnailDiv=h.Util.createDivElement(t,i),this.thumbnailDiv.style.width=this.divWidth+"px",this.thumbnailDiv.style.height=this.divHeight+"px",this.thumbnailDiv.style.position="relative",this.thumbnailDiv.style.cssFloat="left",this.thumbnailDiv.style.cursor="pointer",this.thumbnailDiv.style.overflow="hidden",this.thumbnailDiv.style.border=m+"px solid "+y,this.thumbnailDiv.style.fontFamily="Roboto",this.thumbnailDiv.style.color="#ffffff",this.thumbnailDiv.style.boxSizing="content-box",this.thumbnailDiv.title=this.mediaDetails.videoTitle,this.isTouchSupported?this.thumbnailDiv.addEventListener("touchend",this.touchendHandler,!0):this.thumbnailDiv.addEventListener("click",this.clickHandler,!0);var n=h.Util.createImageElement(t,i+"-img");n.src=this.mediaDetails.thumbnail,n.width=this.divWidth,n.height=this.divHeight,n.style.width=this.divWidth+"px",n.style.height=this.divHeight+"px",this.thumbnailDiv.appendChild(n),this.thumbnailTitle=h.Util.createDivElement(t,i+"-title-div");var r=h.Util.createSpanElement(t,i+"-title-span");r.innerHTML=this.mediaDetails.videoTitle,r.style.lineHeight="1.4em",r.style.height="100%",r.style.paddingTop="5px",r.style.position="absolute",r.style.textOverflow="ellipsis",this.thumbnailTitle.style.position="absolute",this.thumbnailTitle.style.bottom="0px",this.thumbnailTitle.style.left="0px",this.thumbnailTitle.style.fontSize="14px",this.thumbnailTitle.style.overflow="hidden",this.thumbnailTitle.appendChild(r);var o=this.divHeight/3;this.thumbnailTitle.style.height=o+5+"px",this.thumbnailTitle.style.textOverflow="ellipsis",this.thumbnailTitle.style.width=this.divWidth+"px",this.thumbnailTitle.style.backgroundColor=P,this.thumbnailDiv.appendChild(this.thumbnailTitle),this.mediaDetails.duration&&(this.thumbnailDuration=h.Util.createSpanElement(t,i+"-duration-span"),this.thumbnailDuration.innerHTML=e.parseDuration(this.mediaDetails.duration),this.thumbnailDuration.style.position="absolute",this.thumbnailDuration.style.right="2px",this.thumbnailDuration.style.fontSize="10px",this.thumbnailDuration.style.backgroundColor=v,this.thumbnailDuration.style.padding="2px",this.thumbnailDiv.appendChild(this.thumbnailDuration)),this.thumbnailDiv.appendChild(this.createAndGetTimeRemainingDiv(t,i,this.divHeight)),this.playButtonOverlay=this.addPlayButtonOverlay(this.thumbnailDiv,t,i)},e.prototype.createAndGetTimeRemainingDiv=function(e,t,i){return this.thumbnailTimeRemaining=h.Util.createDivElement(e,t+"-timeRemaining-div"),this.thumbnailTimeRemaining.style.position="absolute",this.thumbnailTimeRemaining.style.top="0px",this.thumbnailTimeRemaining.style.right="0px",this.thumbnailTimeRemaining.style.bottom="0px",this.thumbnailTimeRemaining.style.left="0px",this.thumbnailTimeRemaining.style.fontSize="14px",this.thumbnailTimeRemaining.style.backgroundColor=v,this.thumbnailTimeRemaining.style.textAlign="center",this.thumbnailTimeRemaining.style.display="none",this.thumbnailTimeRemainingText=h.Util.createDivElement(e,t+"-timeRemainingText-div"),this.thumbnailTimeRemainingText.style.position="relative",this.thumbnailTimeRemainingText.style.top="50%",this.thumbnailTimeRemainingText.style.webkitTransform="translateY(-50%)",this.thumbnailTimeRemainingText.style.transform="translateY(-50%)",this.thumbnailTimeRemaining.appendChild(this.thumbnailTimeRemainingText),this.thumbnailTimeRemaining},e.prototype.addPlayButtonOverlay=function(e,t,i){var n=h.Util.createDivElement(t,"tbPlBtn"+i),r=h.Util.createSpanElement(t,"tbPlSp"+i);r.style.margin="0 auto",r.style.position="relative",r.style.bottom="0px",r.style.display="inline-block";var o=h.Util.createImageElement(t,"tbPlImg"+i);o&&(o.src=g.getPlayButtonUrl(),o.width=32,o.height=32);var a=h.Util.createSpanElement(t,"tbClkWatchSp"+i);a.style.margin="0 auto",a.style.position="relative",a.style.top="0px",a.style.display="inline-block",a.style.webkitTransform="scale(0.7)",a.style.transform="scale(0.7)";var s=h.Util.createImageElement(t,"tbClkWatchImg"+i);return s&&(s.src=g.getClickToWatchTextButtonUrl()),n.style.position="absolute",n.style.textAlign="center",n.style.top="50%",n.style.left="50%",n.style.display="inherit",n.classList.add("zg-playbuttonoverlay"),a.appendChild(s),n.appendChild(a),r.appendChild(o),n.appendChild(r),e.appendChild(n),n},e.prototype.showThumbnailDiv=function(){this.thumbnailDiv.style.display="block"},e.prototype.hideThumbnailDiv=function(){this.thumbnailDiv.style.display="none"},e.prototype.showTimeRemainingDiv=function(){this.thumbnailDiv.style.borderColor="rgb(0, 102, 153)",this.thumbnailTitle.style.display="none",this.thumbnailDuration.style.display="none",this.thumbnailTimeRemaining.style.display="block",this.playButtonOverlay.style.top="60%"},e.prototype.hideTimeRemainingDiv=function(){this.thumbnailDiv.style.borderColor=y,this.thumbnailTitle.style.display="block",this.thumbnailDuration.style.display="block",this.thumbnailTimeRemaining.style.display="none"},e.prototype.updateRemainingTime=function(t,i){if(t){var n=e.parseDuration(t),r=w;i&&(r=S),this.thumbnailTimeRemainingText.innerHTML=r+n}else this.thumbnailTimeRemainingText.innerHTML=b;this.playButtonOverlay.style.display="none"},e.prototype.getThumbnailDiv=function(){return this.thumbnailDiv},e.prototype.getMediaDetails=function(){return this.mediaDetails},e.prototype.removeUserEventListeners=function(){this.isTouchSupported?this.thumbnailDiv.removeEventListener("touchend",this.touchendHandler,!0):this.thumbnailDiv.removeEventListener("click",this.clickHandler,!0)},e}();t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/preroll/Thumbnail.ts","/src/renderer/inarticle/video/preroll")},{"../../../../config/ConfigHolder":23,"../../../../utility/BrowserUtils":264,"../../../../utility/DOM":266,_process:8,buffer:4,timers:9}],193:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../../utility/GeckoMap"),f=e("./Thumbnail"),g=e("../../../../utility/BrowserUtils"),m=e("../../../../utility/SubscribableCallback"),y=e("../../../../logging/LogManager"),b=3,v=2,P=4,w=function(){function e(t,i,n,r,o,a,s,l,d){var c=this;this.divForStrip=t,this.doc=i,this.win=n,this.selectedMediaDetailsCallback=a,this.adRemainingTimeCallback=s,this.onTimeCallback=l,this.placementId=d,this.geckoLogger=y.getLogger("ThumbnailStrip"),this.overlayDivForSelectedThumbnail=this.doc.createElement("div"),this.overlayDivForSelectedThumbnail.id="unselectable_div-"+this.placementId,this.thumbnailMap=new h,this.thumbnailSelectedCallback=new m,this.maxThumbnailsAllowed=e.getMaxThumbnailsAllowed(n),this.thumbnailWidth=e.calculateThumbnailWidth(o,this.maxThumbnailsAllowed)-2*P,this.divHeight=this.thumbnailWidth/16*9,this.thumbnailSelectedCallback.subscribe(function(e){c.selectedThumbnail&&c.selectedThumbnail.hideTimeRemainingDiv(),e===c.selectedThumbnail&&e.showTimeRemainingDiv(),c.selectedThumbnail=e,c.selectedMediaDetailsCallback.notify(c.selectedThumbnail.getMediaDetails()),e.showTimeRemainingDiv()}),this.addThumbnails(r),this.appendThumbnailsToStrip(1)}return e.prototype.disableClickForThumbnail=function(){this.selectedThumbnail&&(this.overlayDivForSelectedThumbnail.style.width=this.selectedThumbnail.getThumbnailDiv().clientWidth+"px",this.overlayDivForSelectedThumbnail.style.height=this.selectedThumbnail.getThumbnailDiv().clientHeight+"px",this.selectedThumbnail.getThumbnailDiv().appendChild(this.overlayDivForSelectedThumbnail),this.overlayDivForSelectedThumbnail.className="zg-unselectable")},e.prototype.activateThumbstrip=function(e){this.appendThumbnailsToStrip(e)},e.prototype.getDivHeight=function(){return this.divHeight},e.prototype.updateThumbnailAdRemainingTime=function(){var e=this;this.adRemainingTimeCallback.subscribe(function(t){e.selectedThumbnail&&e.selectedThumbnail.updateRemainingTime(t,!1)}),this.onTimeCallback.subscribe(function(t){if(e.selectedThumbnail){var i=t.duration-t.position;e.selectedThumbnail.updateRemainingTime(i,!0)}})},e.prototype.selectFirstThumbnailInStrip=function(){var e=this.thumbnailMap.getKeys();e.length>0&&e[0]?(this.selectedThumbnail=this.thumbnailMap.get(e[0]),this.selectedThumbnail&&this.selectedThumbnail.getThumbnailDiv()):this.selectedThumbnail=void 0},e.prototype.showTimeRemainingDiv=function(){this.selectedThumbnail&&this.selectedThumbnail.showTimeRemainingDiv()},e.prototype.addThumbnails=function(e){if(e){for(var t=e.getKeys(),i=0,n=t;i<n.length;i++){var r=n[i],o=e.get(r);if(o){var a=new f(this.thumbnailSelectedCallback,o,this.win,this.doc,this.thumbnailWidth,this.divHeight,r+"_"+this.placementId);this.thumbnailMap.set(r,a)}}this.divForStrip.style.position="inherit"}else this.geckoLogger.logError(" contentDetailsMap of mediaDetails is undefined ")},e.getMaxThumbnailsAllowed=function(e){var t=v,i=g.isMobileDevice(),n=g.isTablet(e);return i&&!n||(t=b),i&&!n&&(t=v),t},e.calculateThumbnailWidth=function(e,t){var i=100/t,n=e*i/100;return n},e.prototype.appendThumbnailsToStrip=function(e){var t=this.thumbnailMap.getKeys(),i=Math.min(this.maxThumbnailsAllowed,t.length);i=Math.min(i,e);var n=this.divForStrip.childNodes.length;t.splice(0,n);for(var r=0,o=t;r<o.length;r++){var a=o[r];if(n===i)break;var s=this.thumbnailMap.get(a);s&&(this.divForStrip.appendChild(s.getThumbnailDiv()),this.divForStrip.style.height=s.getThumbnailDiv().clientHeight+"px",n++)}},e.prototype.getThumbnail=function(e){return this.thumbnailMap.get(e)},e.prototype.showOnlySelectedThumbnail=function(e){var t=this.getThumbnails(),i=this.thumbnailMap.get(e);if(i){for(var n=0;n<t.length;n++){var r=t[n];if(r){var o=r.getMediaDetails();o.key===e?r.getThumbnailDiv().style.display="block":r.getThumbnailDiv().style.display="none"}}this.divForStrip.style.display="block",this.divForStrip.style.height=i.getThumbnailDiv().clientHeight+"px"}},e.prototype.getThumbnails=function(){var e=this.thumbnailMap.getValues(),t=Math.min(this.maxThumbnailsAllowed,e.length);return e.splice(0,t)},e.prototype.removeThumbnail=function(e){var t=this.thumbnailMap.get(e);if(t){var i=t.getThumbnailDiv();i.parentElement===this.divForStrip&&(t.removeUserEventListeners(),this.divForStrip.removeChild(i),this.thumbnailMap.remove(e),this.selectedThumbnail===t&&(this.selectedThumbnail=void 0))}},e.prototype.getSelectedThumbnailMediaDetails=function(){return this.selectedThumbnail||this.selectFirstThumbnailInStrip(),this.selectedThumbnail?this.selectedThumbnail.getMediaDetails():void 0},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inarticle/video/preroll/ThumbnailStrip.ts","/src/renderer/inarticle/video/preroll")},{"../../../../logging/LogManager":58,"../../../../utility/BrowserUtils":264,"../../../../utility/GeckoMap":268,"../../../../utility/SubscribableCallback":274,"./Thumbnail":192,_process:8,buffer:4,timers:9}],194:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./model/InviewStyle"),f=e("../display/BannerHelper"),g=e("../display/HtmlHelper"),m=e("../model/CreativeTypeConstants"),y=e("es6-promise"),b=e("../../utility/DOM"),v=e("../../utility/Utility"),P=e("../../logging/LogManager"),w=e("../../config/ConfigHolder"),S=e("../../utility/DOM"),C=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p){var m=this;this.doc=e,this.win=t,this.adData=i,this.placementId=n,this.ivConfig=r,this.impressionPromise=o,this.clickPromise=a,this.elementTOWatchPromise=s,this.renderedPromise=l,this.closeCallback=d,this.impressionSubscribableCallback=c,this.viewabableSubscribableCallback=u,this.clickSubscribableCallback=p,this.geckoLogger=P.getLogger("AdcontentHolder"),this.bannerHelper=new f,this.htmlHelper=new g,this.openInfo=function(){if(!m.isSecure){var e=window.open("","_blank");e.location=w.getInViewInfoUrl()}},this.openFeedback=function(){if(!m.isSecure){var e=window.open("","_blank");e.location=w.getInViewFeedbackUrl()}},this.closeInview=function(){m.closeCallback.notify()},this.isSecure=v.getTopWindowProtocol(),this.geckoLogger=P.getAdLogger(this.adData[0].adId,this.adData[0].creativeType,this.adData[0].network,this.adData[0].channel,v.getTopWindowPageUrl(),"Inview : AdcontentHolder"),this.creativeType=this.adData[0].creativeType,this.inviewStyle=new h,this.placement=this.adData[0].domDestination,this.placement.style.display="block";var y={prop1:"right",prop2:"bottom",prop3:0,prop4:r.IVwidth};"BR"===r.IVPosition?(y.prop1="right",y.prop2="bottom"):"BL"===r.IVPosition?(y.prop1="left",y.prop2="bottom"):"TL"===r.IVPosition?(y.prop1="left",y.prop2="top"):"TR"===r.IVPosition&&(y.prop1="right",y.prop2="top"),y.prop3=r.IVOffset,y.prop4=r.noAnimation?0:r.IVwidth,this.inviewStyle.applyCSS(this.win,this.doc,this.adData[0].domDestination.id,y,this.placementId,r.IVwidth,r.IVheight),this.container=S.Util.createDivElement(this.doc,"zz-container-"+this.placementId),this.container.className="zg-inview-"+this.placementId,this.container.style.display="block";var C=b.Util.createDivElement(this.doc,"zz-ttl-"+this.placementId);C.className="zz-ttl-"+this.placementId;var A=b.Util.createSpanElement(this.doc,"zz-ttlNm-"+this.placementId);A.className="zz-ttlNm-"+this.placementId,A.innerHTML="Ads By ZEDO",A.onclick=this.openInfo;var I=b.Util.createSpanElement(this.doc,"zz-ttlInf-"+this.placementId);I.className="zz-ttlInf-"+this.placementId,I.onclick=this.openFeedback,this.titleCloseSpan=b.Util.createSpanElement(this.doc,"zz-ttlClose-"+this.placementId),this.titleCloseSpan.className="zz-ttlClose-"+this.placementId,this.titleCloseSpan.id="zz-ttlClose-"+this.placementId,this.titleCloseSpan.onclick=this.closeInview,C.appendChild(A),C.appendChild(I),C.appendChild(this.titleCloseSpan),this.container.appendChild(C);var T=b.Util.createDivElement(this.doc,"zz-adcontainer-"+this.placementId);T.className="zz-adcontainer-"+this.placementId,T.appendChild(this.placement),this.container.appendChild(T),this.doc.body.appendChild(this.container)}return Object.defineProperty(e.prototype,"ContainerDiv",{get:function(){return this.container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CloseElement",{get:function(){return this.titleCloseSpan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementDiv",{get:function(){return this.placement},enumerable:!0,configurable:!0}),e.prototype.addContent=function(e,t,i,n){var r=this,o=new y.Promise(function(t,o){var a=n?n:r.adData;n&&(r.geckoLogger=P.getAdLogger(a[0].adId,a[0].creativeType,a[0].network,a[0].channel,v.getTopWindowPageUrl(),"Inview : AdcontentHolder"),r.creativeType=a[i].creativeType,a[i].domDestination=r.placement),r.geckoLogger.logDebug(" creating bannerHelper object to renderer ad ");var s,l,d=a[i].content;if(r.creativeType=a[i].creativeType,r.creativeType===m.STD_BANNER&&(s=r.bannerHelper.transform(d.bannerAd)),r.creativeType===m.HTML&&(l=r.htmlHelper.transform(d.htmlAd)),s||l){var c;if(r.creativeType===m.STD_BANNER&&s)c=r.bannerHelper.showAd(a[i],s);else{if(r.creativeType!==m.HTML||!l)return r.geckoLogger.logError("ad creative type not compatible"),void o("ad creative type not compatible");c=r.htmlHelper.showAd(a[i],l,e)}c&&(r.impressionSubscribableCallback.notify(a[i].tracking),r.viewabableSubscribableCallback.notify(r.container),c.adRendered.then(function(){r.renderedPromise.resolve(),r.geckoLogger.logDebug(" ad rendered successfully resolving promise");var e={adRendered:r.renderedPromise.getPromise(),impression:c.impression,click:r.clickPromise.getPromise()};t(e),c.click.then(function(){r.clickSubscribableCallback.notify(a[i].tracking)})}))}});return o},e}();t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/AdcontentHolder.ts","/src/renderer/inview")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,"../../utility/Utility":275,"../display/BannerHelper":100,"../display/HtmlHelper":102,"../model/CreativeTypeConstants":210,"./model/InviewStyle":202,_process:8,buffer:4,"es6-promise":5,timers:9}],195:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("../inview/InviewFacade"),g=function(e){function t(t,i,n,r,o,a,s,l,d,c,u,p,h){return e.call(this,t,i,n,r,o,a,s,l,d,c,u,p,h)||this}return h(t,e),t}(f);g.NAME="InviewDisplay",t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/InviewDisplayFacade.ts","/src/renderer/inview")},{"../inview/InviewFacade":197,_process:8,buffer:4,timers:9}],196:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.PUB_IMPRESSION="PUB_IMPRESSION",e.PUB_CLICK="PUB_CLICK"}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/InviewEvent.ts","/src/renderer/inview")},{_process:8,buffer:4,timers:9}],197:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./InviewRenderer"),f=e("../../utility/DefferedPromise"),g=e("../../utility/SubscribableCallback"),m=e("es6-promise"),y=e("./../decorators/ViewabilityTrackingRendererDecorator"),b=function(){function e(t,i,n,r,o,a,s,l,d,c,u,p,b){var v=this;this.noDemandPromise=new f,this.adReadyPromise=new f,this.adOpportunityPromise=new f,this.adCompletePromise=new f,this.iaUnitClosedPromise=new f,this.viewabableSubscribableCallback=new g;
var P=new m.Promise(function(e,t){v.signalDestReady=e});e.ADSERVERNAME=d,this.mySlave=new y(P,new h(t,i,n,r,o,a,s,l,this.noDemandPromise,this.adReadyPromise,this.adOpportunityPromise,d,c,this.viewabableSubscribableCallback,u,p,b))}return e.prototype.cancel=function(){},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.getInviewFacadeName=function(){return h.NAME},e.prototype.getVersion=function(){return this.mySlave.getVersion()},e.prototype.getPlacementElement=function(){return this.mySlave.getPlacementElement()},e.prototype.isSupported=function(){return this.mySlave.isSupported()},e.prototype.getName=function(){return this.mySlave.getName()},e.prototype.getAdserverName=function(){return e.ADSERVERNAME},e.prototype.isOnByDefault=function(){return this.mySlave.isOnByDefault()},e.prototype.getCapability=function(){return this.mySlave.getCapability()},e.prototype.getBehaviourForRequest=function(){return this.mySlave.getBehaviourForRequest()},e.prototype.getBehaviourForHB=function(){return this.mySlave.getBehaviourForHB()},e.prototype.getBehaviourForRenderer=function(e,t){return this.mySlave.getBehaviourForRenderer(e,t)},e.prototype.getNoDemandPromise=function(){return this.mySlave.getNoDemandPromise()},e.prototype.getAdReadyPromise=function(){return this.mySlave.getAdReadyPromise()},e.prototype.getAdOpportunityPromise=function(){return this.mySlave.getAdOpportunityPromise()},e.prototype.getMissedOpportunityPromise=function(){return this.mySlave.getMissedOpportunityPromise()},e.prototype.getReloadCallback=function(){return this.mySlave.getReloadCallback()},e.prototype.reloadAd=function(e,t,i){return this.mySlave.reloadAd(e,t,i)},e.prototype.showAd=function(e,t,i){var n=this,r=this.mySlave.showAd(e,t,i);return this.viewabableSubscribableCallback.subscribe(function(e){console.log("viewable impression from inview called  "+e),n.signalDestReady(e)}),r},e.prototype.transform=function(e,t){return this.mySlave.transform(e,t)},e}();b.NAME="Inview",t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/InviewFacade.ts","/src/renderer/inview")},{"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"./../decorators/ViewabilityTrackingRendererDecorator":99,"./InviewRenderer":199,_process:8,buffer:4,"es6-promise":5,timers:9}],198:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../logging/LogManager"),g=function(){function e(e,t,i,n,r,o){this.ivConfig=e,this.containerDiv=t,this.placeHolderDiv=i,this.placementId=n,this.delayclosebuttonby=r,this.titleCloseSpan=o,this.geckoLogger=f.getLogger("InviewHolder"),this.isViewable=!1,this.ivSize=this.calculateivSize(this.ivConfig.IVwidth,this.ivConfig.IVheight)}return e.prototype.hideInview=function(){var t=this;return new h.Promise(function(i,n){t.animationInterval(e.ANIMATION_INTERVAL_DOWN,0,t.ivConfig.IVPosition,"hide").then(function(){t.ivConfig.noAnimation?t.containerDiv.style.display="none":setTimeout(function(){t.containerDiv.style.display="none"},1e3),i(!0)})["catch"](function(e){t.geckoLogger.logError(e),n()}),t.isViewable=!1})},e.prototype.showInview=function(){var t=this;return new h.Promise(function(i,n){var r=t.placeHolderDiv;r.style.height=t.ivSize.height+"px",r.style.width=t.ivSize.width+"px",t.placeHolderDiv.style.display="block",t.ivConfig.noAnimation?(t.showclosebutton(),i()):t.animationInterval(e.ANIMATION_INTERVAL_UP,t.ivSize.width,t.ivConfig.IVPosition,"show").then(function(){t.showclosebutton(),i()})["catch"](function(e){t.geckoLogger.logError(e),n()}),t.isViewable=!0})},e.prototype.animationInterval=function(e,t,i,n){var r=this;return new h.Promise(function(n,o){r.animinterval=setInterval(function(){clearInterval(r.animinterval),"BR"===i||"TR"===i?(r.geckoLogger.logDebug("rightleft"+t),r.containerDiv.style.transform="translateX(-"+t+"px)"):"BL"!==i&&"TL"!==i||(r.containerDiv.style.transform="translateX("+t+"px)"),n()},e)})},e.prototype.showclosebutton=function(){var e=this;return new h.Promise(function(t,i){e.closedelay=setInterval(function(){clearInterval(e.closedelay),e.titleCloseSpan.style.display="block",t()},1e3*e.delayclosebuttonby)})},e.prototype.calculateivSize=function(e,t){return{width:e,height:t}},e}();g.ANIMATION_INTERVAL_UP=50,g.ANIMATION_INTERVAL_DOWN=50,g.BOTTOM_DIFF=10,t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/InviewHolder.ts","/src/renderer/inview")},{"../../logging/LogManager":58,_process:8,buffer:4,"es6-promise":5,timers:9}],199:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("../../logging/LogManager"),g=e("../../utility/BrowserUtils"),m=e("../../utility/DefferedPromise"),y=e("./model/Behaviours"),b=e("./model/Behaviours"),v=e("./InviewTrackers"),P=e("./model/Behaviours"),w=e("./states/StateContext"),S=e("./states/BigBangState"),C=e("../../utility/SubscribableCallback"),A=.1,I=!1,T=function(){function e(t,i,n,r,o,a,s,l,d,c,u,p,h,g,y,A,I){var T=this;this.noDemandPromise=d,this.adReadyPromise=c,this.adOpportunityPromise=u,this.viewabableSubscribableCallback=g,this.adCount=y,this.reloadCount=A,this.reloadTimer=I,this.geckoLogger=f.getLogger("InviewRenderer"),this.behavior=new b.Behaviours,this.behaviorHolder=new P.BehavioursHolder,this.impressionPromise=new m,this.clickPromise=new m,this.elementToWatchPromise=new m,this.renderedPromise=new m,this.adsToShowPromise=new C,this.missedOpportunityPromise=new m,this.BlockedPromise=new m,this.trackBrowserExitPromise=new m,this.scrollTriggerPromise=new m,this.adCompletePromise=new m,this.placementElementPromise=new m,this.iaUnitClosedPromise=new m,this.reloadCallback=new C,this.impressionSubscribableCallback=new C,this.clickSubscribableCallback=new C,this.adsReloadedCallback=new C,this.adAlreadyShown=!1,e.NAME=h,e.ADSERVERNAME=p;var B=this.behaviorHolder.getBehaviours();this.preparedBehaviours=this.createBehaviourPayLoad(t,B);var k=new m;this.inviewTracker=new v(i),this.impressionSubscribableCallback.subscribe(function(e){e.fireMultiImpressionTrackers().then(function(){T.geckoLogger.logInfo("Impression trackers successfully fired")})["catch"](function(){T.geckoLogger.logInfo("Failed to fire one or more Impression trackers")}),T.inviewTracker.firePubImpressionTrackerOnce()}),this.clickSubscribableCallback.subscribe(function(e){e.fireMultiClickTrackers().then(function(){T.geckoLogger.logInfo("click trackers successfully fired")})["catch"](function(){T.geckoLogger.logInfo("Failed to fire one or more click trackers")}),T.inviewTracker.firePubClickTracker()}),this.stateContext=new w(this.preparedBehaviours,this.inviewTracker,d,this.trackBrowserExitPromise,this.adsToShowPromise,this.impressionPromise,this.clickPromise,this.elementToWatchPromise,this.renderedPromise,u,this.scrollTriggerPromise,n,k,l,new S,this.BlockedPromise,this.impressionSubscribableCallback,this.viewabableSubscribableCallback,this.clickSubscribableCallback,this.reloadCallback,this.adsReloadedCallback,A,this.iaUnitClosedPromise,0,I,this.adAlreadyShown),this.stateContext.doAction()}return e.prototype.cancel=function(){},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.getVersion=function(){return A},e.prototype.getName=function(){return e.NAME},e.prototype.getAdserverName=function(){return e.ADSERVERNAME},e.prototype.getCapability=function(){return{}},e.prototype.isOnByDefault=function(){return I},e.prototype.getBehaviourForHB=function(){var e={};return e},e.prototype.getBehaviourForRequest=function(){return this.preparedBehaviours},e.prototype.getBehaviourForRenderer=function(e,t){var i={};try{i=this.compareBehaviours(e,t,this.behaviorHolder)}catch(n){this.geckoLogger.logError(h.errorMsg(" getBehaviourForRenderer catch called ",n))}return i},e.prototype.getNoDemandPromise=function(){return this.noDemandPromise},e.prototype.getAdReadyPromise=function(){return this.adReadyPromise},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getMissedOpportunityPromise=function(){return this.missedOpportunityPromise},e.prototype.getReloadCallback=function(){return this.reloadCallback},e.prototype.getPlacementElement=function(){return this.placementElementPromise},e.prototype.createBehaviourPayLoad=function(e,t){var i={};try{if(h.isNullOrUndefined(e)){for(var n in e)if(e.hasOwnProperty(n)&&n){if(h.isNullOrUndefined(t[n])&&!this.validatePropertyWithDefaultValues(e[n],t[n]))throw new Error("Invalid- values for publisherBehaviour property "+n);h.isNullOrUndefined(e[n][0])&&""!==e[n][0].trim()?i[n]=e[n]:(h.isNullOrUndefined(e[n][0])&&""===e[n][0].trim()||h.isNullOrUndefined(e[n])&&!h.isNullOrUndefined(e[n][0]))&&h.isNullOrUndefined(t[n])&&(i[n]=t[n].getDefaultValues())}}else e={};for(var r in t)t.hasOwnProperty(r)&&r&&t[r].getDefaultValues().length>0&&!h.isNullOrUndefined(e[r])&&(i[r]=t[r].getDefaultValues())}catch(o){throw this.geckoLogger.logError(h.errorMsg(" Invalid values by publisher ",o)),new Error("Invalid values for publisherBehaviour property "+o)}return i},e.prototype.compareBehaviours=function(e,t,i){var n={};for(var r in e)if(e.hasOwnProperty(r)&&r){var o=e[r].length>1,a=!h.isNullOrUndefined(t[r]),s=!a&&t[r].length>1,l=i.getBehaviour(r);if(h.isNullOrUndefined(l)||(n[r]=e[r]),h.isNullOrUndefined(l)){if(!this.validatePropertyWithDefaultValues(e[r],l))throw new Error("Invalid values for "+r);if(a)if(o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else{if(!h.isNullOrUndefined(e[r])||!h.isNullOrUndefined(l))throw new Error("Not possible values for "+r);n[r]=e[r]}else if(s&&o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else if(o&&1===t[r].length&&h.inArray(e[r],t[r][0]))n[r]=t[r];else{if(1!==t[r].length||1!==e[r].length||t[r][0]!==e[r][0])throw new Error("Not possible values for  "+r);n[r]=e[r]}}}return n},e.prototype.validatePropertyWithDefaultValues=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n]){if(t.getAllValidValues().length<1){i=!0;continue}if(i=h.inArray(t.getAllValidValues(),e[n]),i===!0)continue;break}return i},e.prototype.checkBannerAd=function(e){if(void 0!==e.click&&void 0!==e.url)return{target:e.target,defText:e.defText,defAltText:e.defAltText,click:e.click,url:e.url}},e.prototype.checkHtmlAd=function(e){if(void 0!==e.jsData||void 0!==e.htmlData)return{jsData:e.jsData,htmlData:e.htmlData}},e.prototype.transform=function(e,t){var i=this.checkBannerAd(e),n=void 0,r=this.checkHtmlAd(e);t||(t={});var o={bannerAd:i,videoAd:n,htmlAd:r};return o},e.prototype.reloadAd=function(e,t,i){var n=new m,r=new m,o=new m,a=new m;this.stateContext.UpdateReloadCountCallback.notify(this.stateContext.ReloadCount-1),this.adsToShowPromise.notify({adData:e,hBHelper:t});var s=y.BehaviourParser.getBehaviours(e[0].behaviour);return this.inviewTracker.initializeTrackers(s.pubImpTracker,s.pubclickTracker),{impression:r.getPromise(),adRendered:o.getPromise(),click:n.getPromise(),viewable:a.getPromise()}},e.prototype.showAd=function(e,t,i){this.adsToShowPromise.notify({adData:e,hBHelper:t});var n=y.BehaviourParser.getBehaviours(e[0].behaviour);return this.inviewTracker.initializeTrackers(n.pubImpTracker,n.pubclickTracker),{impression:this.impressionPromise.getPromise(),adRendered:this.renderedPromise.getPromise(),click:this.clickPromise.getPromise(),elementToWatch:this.elementToWatchPromise.getPromise()}},e.prototype.isSupported=function(){return!g.isSmartPhone(window)},e}();t.exports=T}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/InviewRenderer.ts","/src/renderer/inview")},{"../../logging/LogManager":58,"../../utility/BrowserUtils":264,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"./InviewTrackers":200,"./model/Behaviours":201,"./states/BigBangState":203,"./states/StateContext":208,_process:8,buffer:4,timers:9}],200:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../eventtracker/EventConstants"),g=e("../../utility/DefferedPromise"),m=e("../model/TrackerConstants"),y=e("./InviewEvent"),b=function(){function e(e){var t=this;this.eventTracker=e,this.noDemandOneTimePromise=new g,this.trackerParamPromise=new g,this.browserExitOneTimePromise=new g,this.adOpportunityOneTimePromise=new g,this.pubImpressionOneTimePromise=new g,this.pubClickOneTimePromise=new g,this.blockedOneTimePromise=new g,this.browserExitOneTimePromise.getPromise().then(function(){t.eventTracker.setStage(m.StageName.USER_CLOSE_BROWSER),t.eventTracker.emit(f.USER_CLOSE_BROWSER)}),this.noDemandOneTimePromise.getPromise().then(function(){t.eventTracker.emit(f.NO_DEMAND)})}return e.prototype.initializeTrackers=function(e,t){this.eventTracker.setTracker(y.PUB_IMPRESSION,e),this.eventTracker.setTracker(y.PUB_CLICK,t)},e.prototype.fireBrowserExitTrackerOnce=function(){return this.browserExitOneTimePromise.resolve(),this.browserExitOneTimePromise.getPromise()},e.prototype.fireNoDemandTrackerOnce=function(){return this.noDemandOneTimePromise.resolve(),this.noDemandOneTimePromise.getPromise()},e.prototype.fireChannelDebugTracker=function(e){var t=this;this.eventTracker.getMarcoProcessor().setAI(e),this.eventTracker.emit(f.CHANNEL_DEBUG).then(function(){t.eventTracker.getMarcoProcessor().setAI("")})},e.prototype.fireAdOpportunityTrackersOnce=function(){var e=this;return this.adOpportunityOneTimePromise.resolve(),new h.Promise(function(t,i){e.adOpportunityOneTimePromise.getPromise().then(function(){e.eventTracker.setStage(m.StageName.ADD_OPPORTUNITY),e.eventTracker.emit(f.ADD_OPPORTUNITY).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.firePubImpressionTrackerOnce=function(){var e=this;return this.pubImpressionOneTimePromise.resolve(),new h.Promise(function(t,i){e.pubImpressionOneTimePromise.getPromise().then(function(){e.eventTracker.emit(y.PUB_IMPRESSION).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.firePubClickTracker=function(){var e=this;return this.pubClickOneTimePromise.resolve(),new h.Promise(function(t,i){e.pubClickOneTimePromise.getPromise().then(function(){e.eventTracker.emit(y.PUB_CLICK,void 0,!1).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireblockedTrackersOnce=function(){var e=this;return this.blockedOneTimePromise.resolve(),new h.Promise(function(t,i){e.blockedOneTimePromise.getPromise().then(function(){e.eventTracker.emit(f.BLOCKED).then(function(){t()})["catch"](function(e){i(e)})})})},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/InviewTrackers.ts","/src/renderer/inview")},{"../../eventtracker/EventConstants":42,"../../utility/DefferedPromise":267,"../model/TrackerConstants":212,"./InviewEvent":196,_process:8,buffer:4,"es6-promise":5,timers:9}],201:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/Utility"),f=e("../../model/TrackerConstants");i.PLACEMENT_ID="placementId",i.TYPE="type",i.WIDTH="width",i.HEIGHT="height",i.DEBUG_TOKEN="debugToken",i.DELAY_CLOSE_BUTTON_BY="delaycloseButtonBy",i.PUB_IMP_TRACKER="pubImpressionTracker",i.PUB_CLICK_TRACKER="pubclickTracker",i.NO_ANIMATION="noAnimation",i.IV_POSITION="IVPosition",i.IV_OFFSET="IVOffset",i.IV_PIXEL_SCROLLTRIGGER="pixelScrollTrigger",i.IV_MIN_WIDTH="IVMinWidth",i.IV_MIN_HEIGHT="IVMinHeight",i.AD_COUNT="adCount",i.REFRESH_TIME="refreshTime",i.DefaultBehaviour={};var g=function(){function e(){this.behaviours={},this.behaviours[i.DELAY_CLOSE_BUTTON_BY]=new m(i.DELAY_CLOSE_BUTTON_BY,["3"],[],this.makeChoice),this.behaviours[i.PUB_IMP_TRACKER]=new m(i.PUB_IMP_TRACKER,[],[],this.makeChoice),this.behaviours[i.PUB_CLICK_TRACKER]=new m(i.PUB_CLICK_TRACKER,[],[],this.makeChoice),this.behaviours[i.NO_ANIMATION]=new m(i.NO_ANIMATION,["0"],["0","1"],this.makeChoice),this.behaviours[i.IV_POSITION]=new m(i.IV_POSITION,["BR"],[],this.makeChoice),this.behaviours[i.IV_OFFSET]=new m(i.IV_OFFSET,["0"],[],this.makeChoice),this.behaviours[i.IV_PIXEL_SCROLLTRIGGER]=new m(i.IV_PIXEL_SCROLLTRIGGER,["0"],[],this.makeChoice),this.behaviours[i.IV_MIN_WIDTH]=new m(i.IV_MIN_WIDTH,[],[],this.makeChoice),this.behaviours[i.IV_MIN_HEIGHT]=new m(i.IV_MIN_HEIGHT,[],[],this.makeChoice),this.behaviours[i.AD_COUNT]=new m(i.AD_COUNT,[],[],this.makeChoice),this.behaviours[i.REFRESH_TIME]=new m(i.REFRESH_TIME,[],[],this.makeChoice)}return e.prototype.makeChoice=function(){},e.prototype.getBehaviours=function(){return this.behaviours},e.prototype.getBehaviour=function(e){return this.behaviours[e]},e}();i.BehavioursHolder=g;var m=function(){function e(e,t,i,n){this.name=e,this.defaultValues=t,this.allValidValues=i,this.makeChoiceCallback=n}return e.prototype.getName=function(){return this.name},e.prototype.getAllValidValues=function(){return this.allValidValues},e.prototype.getDefaultValues=function(){return this.defaultValues},e.prototype.makeChoiseAndGetValue=function(e,t){return this.makeChoiceCallback?this.makeChoiceCallback(e,t):""},e}();i.BehavioursParam=m;var y=function(){function e(){}return e}();i.Behaviours=y;var b=function(){function e(){}return e.getBehaviours=function(e){e.type?e.type[0]:"";return{type:h.isNullOrUndefined(e[i.TYPE])?e[i.TYPE][0]:"auto",width:h.isNullOrUndefined(e[i.WIDTH])?parseInt(e[i.WIDTH][0],10):300,height:h.isNullOrUndefined(e[i.HEIGHT])?parseInt(e[i.HEIGHT][0],10):393,noAnimation:h.isNullOrUndefined(e[i.NO_ANIMATION])?parseInt(e[i.NO_ANIMATION][0],10):0,debugToken:h.isNullOrUndefined(e[i.DEBUG_TOKEN])?e[i.DEBUG_TOKEN][0]:"",delaycloseButtonBy:h.isNullOrUndefined(e[i.DELAY_CLOSE_BUTTON_BY])?parseInt(e[i.DELAY_CLOSE_BUTTON_BY][0],10):3,IVPosition:h.isNullOrUndefined(e[i.IV_POSITION])?e[i.IV_POSITION][0]:"BR",IVOffset:h.isNullOrUndefined(e[i.IV_OFFSET])?parseInt(e[i.IV_OFFSET][0],10):0,pixelScrollTrigger:h.isNullOrUndefined(e[i.IV_PIXEL_SCROLLTRIGGER])?parseInt(e[i.IV_PIXEL_SCROLLTRIGGER][0],10):0,pubclickTracker:e[f.PublisherTracker.Click],pubImpTracker:e[f.PublisherTracker.Impression],IVMinWidth:h.isNullOrUndefined(e[i.IV_MIN_WIDTH])?parseInt(e[i.IV_MIN_WIDTH][0],10):0,IVMinHeight:h.isNullOrUndefined(e[i.IV_MIN_HEIGHT])?parseInt(e[i.IV_MIN_HEIGHT][0],10):0,adCount:h.isNullOrUndefined(e[i.AD_COUNT])?parseInt(e[i.AD_COUNT][0],10):0,refreshTime:h.isNullOrUndefined(e[i.REFRESH_TIME])?parseInt(e[i.REFRESH_TIME][0],10):1}},e}();i.BehaviourParser=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/model/Behaviours.ts","/src/renderer/inview/model")},{"../../../utility/Utility":275,"../../model/TrackerConstants":212,_process:8,buffer:4,timers:9}],202:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/CSS"),f=e("../../../logging/LogManager"),g=e("../../../config/ConfigHolder"),m=function(){function e(){this.geckoLogger=f.getLogger("InviewStyle")}return e.prototype.applyCSS=function(e,t,i,n,r,o,a){var s=Number(a)+Number(21);this.geckoLogger.logInfo("Apply CSS called");var l="#"+i+" { float: none; } #"+i+" > div { float: none; }.zg-inview-"+r+"{position: fixed; z-index: 2147483647; transition: transform 1s ease; -webkit-transition: transform 1s ease; -o-transition: transform 1s ease;-ms-transition: transform 1s ease; "+n.prop1+":-"+n.prop4+"px; "+n.prop2+":"+n.prop3+"px;width:"+o+"px;height:"+s+"px;background-color:white;}.zg-adsByZINCClass-"+r+"{ display: none; height: 15px; bottom: 1px; text-align: center; line-height:100%;background: transparent none repeat scroll 0% 0%;margin: 0px; font-size: 12px ! important; color: rgb(0, 0, 0); font-weight: normal; font-family: roboto,sans-serif;}.zz-ttlNm-"+r+" {position:absolute;width:77px;font-family:Arial,sans-serif;margin:5px;font-size:10px;color:#fff; height:21px;float:0px;cursor:pointer;} .zz-ttlInf-"+r+" {background-image: url("+g.getInViewZincFeedbackIconUrl()+");position:absolute;width:17px; height:21px;cursor:pointer;background-repeat:no-repeat; margin-left: 77px;} .zz-ttlClose-"+r+" {background-image: url("+g.getInViewCloseBtnUrl()+");cursor: pointer;position:relative;width:21px;height:21px;float:right;display:none;} .zz-ttl-"+r+"{position:relative;float:right;width:"+o+"px;height:21px;background-image: url("+g.getInViewSliderBackgroundImgUrl()+");background-repeat:repeat-x;font-family:verdana;color:rgb(255,255,255);font-weight:bold;font-size:9px;}.zz-adcontainer-"+r+"{width:"+o+"px;height:"+a+"px;overflow:hidden;}.zg-advertisementClass-"+r+" { height: 15px; font-size: 12px ! important; font-weight: normal; text-align: center; color: rgb(0, 0, 0);}transition: 0.6s ease-in-out;-webkit-transition: 0.6s ease-in-out;-o-transition: 0.6s ease-in-out;-ms-transition: 0.6s ease-in-out; margin: 0 auto;  }";h.Util.addCSSRule(l,"",t,e)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/model/InviewStyle.ts","/src/renderer/inview/model")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"../../../utility/CSS":265,_process:8,buffer:4,timers:9}],203:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("es6-promise"),y=e("../../../utility/Utility"),b=e("./Blackhole"),v=e("../../../logging/LogManager"),P=e("./WaitForAdvertisers"),w=function(){function e(){this.logger=v.getLogger("Inview:Universe:BigBang")}return e.prototype.getName=function(){return g.StateName.BigBangState},e.prototype.doAction=function(e){return h(this,void 0,m.Promise,function(){var t;return f(this,function(i){try{y.createBrowserExitPromise(window).then(function(){e.TrackBrowserExitPromise.resolve()})["catch"](function(t){e.setStateAndDoAction(new b(g.StateName.BigBangState,t))}),t=!1,"true"===y.getNameParameter("zView",y.getTopWindowPageUrl())&&(t=!0),e.TrackBrowserExitPromise.getPromise().then(function(){e.InViewTracker.fireBrowserExitTrackerOnce()}),this.logger.logInfo("Creating media player"),e.setStateAndDoAction(new P)}catch(n){e.setStateAndDoAction(new b(g.StateName.BigBangState,n))}return[2,y.createPromise(void 0)]})})},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/states/BigBangState.ts","/src/renderer/inview/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./Blackhole":204,"./State":207,"./WaitForAdvertisers":209,_process:8,buffer:4,"es6-promise":5,timers:9}],204:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("../../../logging/LogManager"),y=e("../../../utility/Utility"),b=e("es6-promise"),v=function(){function e(e,t){this.from=e,this.error=t,this.logger=m.getLogger("Inview:Universe:Blackhole")}return e.prototype.getName=function(){return g.StateName.Blackhole},e.prototype.doAction=function(e){return h(this,void 0,b.Promise,function(){return f(this,function(e){return this.logger.logError("We have a problem. Reached error state from "+g.StateName[this.from]+" with error "+this.error),[2,y.createPromise(void 0)]})})},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/states/Blackhole.ts","/src/renderer/inview/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./State":207,_process:8,buffer:4,"es6-promise":5,timers:9}],205:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("../../../logging/LogManager"),y=e("../../../utility/Utility"),b=e("es6-promise"),v=function(){function e(){this.logger=m.getLogger("Inview:Universe:EndState")}return e.prototype.getName=function(){return g.StateName.EndState},e.prototype.doAction=function(e){return h(this,void 0,b.Promise,function(){return f(this,function(e){return this.logger.logInfo("End of Inview universe"),[2,y.createPromise(void 0)]})})},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/states/EndState.ts","/src/renderer/inview/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./State":207,_process:8,buffer:4,"es6-promise":5,timers:9}],206:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("../../../logging/LogManager"),y=e("./Blackhole"),b=e("../../../utility/Utility"),v=e("es6-promise"),P=e("../../../utility/SubscribableCallback"),w=e("../model/Behaviours"),S=e("./EndState"),C=e("../AdcontentHolder"),A=e("../InviewHolder"),I=21,T=function(){function e(e,t){this.adData=e,this.hBHelper=t,this.logger=m.getLogger("Universe:RenderAdState"),this.closeCallback=new P}return e.prototype.getName=function(){return g.StateName.RenderAdState},e.prototype.doAction=function(e){return h(this,void 0,v.Promise,function(){var t,i,n,r,o,a,s,l,d,c,u,p,h,g=this;return f(this,function(f){return t=w.BehaviourParser.getBehaviours(this.adData[0].behaviour),i={left:100,IVwidth:this.adData[0].width,IVheight:this.adData[0].height,noAnimation:t.noAnimation,IVPosition:"undefined"!=typeof t.IVPosition&&null!==t.IVPosition?t.IVPosition:"BR",IVOffset:"undefined"!=typeof t.IVOffset&&null!==t.IVOffset?t.IVOffset:0},n=b.getScreenWidthandHeight(),r=t.IVMinWidth||this.adData[0].width,o=t.IVMinHeight||Number(this.adData[0].height)+Number(t.IVOffset)+Number(I),
a=Number(this.adData[0].height)+Number(t.IVOffset)+Number(I),t.IVMinWidth>0&&n.width<r||t.IVMinHeight>0&&(n.height<o||n.height<a)?(e.BlockedPromiseTracker.resolve(),e.InViewTracker.fireblockedTrackersOnce(),e.setStateAndDoAction(new S)):n.width<r||n.height<o?(e.BlockedPromiseTracker.resolve(),e.InViewTracker.fireblockedTrackersOnce(),e.setStateAndDoAction(new S)):(s=new C(document,window,this.adData,e.PlacementId,i,e.ImpressionPromise,e.ClickPromise,e.ElementToWatch,e.RenderedPromise,this.closeCallback,e.ImpressionSubscriber,e.ViewableImpressionSubscriber,e.ClickSubscriber),l=0,d=1e3*t.refreshTime,c=0,u=0,p=t.adCount<this.adData.length?t.adCount:this.adData.length,p=t.adCount>10?10:p,h=function(n,r,o){o&&(p=t.adCount<n.length?t.adCount:n.length,p=t.adCount>10?10:p,l=0),s.addContent(r,e.ViewabilityDetector,l,n).then(function(o){try{n[l]&&(n[l].domDestination.contentDocument.body.style.margin="0px",n[l].domDestination.contentDocument.body.style.padding="0px")}catch(a){console.log(a.message)}o.click.then(function(){e.ClickPromise.resolve()}),o.impression.then(function(){e.ImpressionPromise.resolve(),e.TrackBrowserExitPromise.reject()});var f=new A(i,s.ContainerDiv,s.PlacementDiv,e.PlacementId,t.delaycloseButtonBy,s.CloseElement);e.setAdShownCount(e.AdShownCount+1),f.showInview(),g.closeCallback.subscribe(function(){clearTimeout(c),clearTimeout(u),f.hideInview(),e.IAUnitClosedPromise.resolve(!0)});try{e.CompletePromise.getPromise().then(function(){e.setStateAndDoAction(new S)})}catch(a){e.setStateAndDoAction(new y(g.getName(),"Internal failure "+a))}if(l++,p>0&&l<p&&e.AdShownCount<t.adCount?c=setTimeout(function(){clearTimeout(c),h(n,r,!1)},d):clearTimeout(c),l>=p&&e.AdShownCount<t.adCount&&e.ReloadCount>0){var m=(new Date).getTime(),b=(m-e.AdRequestTime)/1e3;b<e.ReloadTimer?setTimeout(function(){e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.ReloadCallback.notify()},1e3*(e.ReloadTimer-b)):(e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.ReloadCallback.notify())}else clearTimeout(u)})["catch"](function(t){console.log("internal failure"),e.setStateAndDoAction(new y(g.getName(),"Internal failure "+t)),e.doAction()})},e.AdsReloadedCallback.subscribe(function(e){u=setTimeout(function(){clearTimeout(u),h(e.adData,e.hBHelper,!0)},d)}),h(this.adData,this.hBHelper,!1)),[2,b.createPromise(void 0)]})})},e}();t.exports=T}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/states/RenderAdState.ts","/src/renderer/inview/states")},{"../../../logging/LogManager":58,"../../../utility/SubscribableCallback":274,"../../../utility/Utility":275,"../AdcontentHolder":194,"../InviewHolder":198,"../model/Behaviours":201,"./Blackhole":204,"./EndState":205,"./State":207,_process:8,buffer:4,"es6-promise":5,timers:9}],207:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.BigBangState=0]="BigBangState",e[e.Blackhole=1]="Blackhole",e[e.MissedOpportunityState=2]="MissedOpportunityState",e[e.WaitForAdvertisers=3]="WaitForAdvertisers",e[e.RenderAdState=4]="RenderAdState",e[e.EndState=5]="EndState"}(p=i.StateName||(i.StateName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/states/State.ts","/src/renderer/inview/states")},{_process:8,buffer:4,timers:9}],208:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../logging/LogManager"),g=e("../../../utility/SubscribableCallback"),m=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,h,m,y,b,v,P,w,S,C,A,I,T,B){var k=this;this.behaviours=e,this.inviewTracker=t,this.noDemandPromise=i,this.trackBrowserExitPromise=n,this.adsToShowPromise=r,this.impressionPromise=o,this.clickPromise=a,this.elementToWatch=s,this.renderedPromise=l,this.adOpportunityPromise=d,this.scrollTriggerPromise=c,this.placementId=u,this.completePromise=p,this.vbDetector=h,this.state=m,this.BlockedPromise=y,this.impressionSubscribableCallback=b,this.viewabableSubscribableCallback=v,this.clickSubscribableCallback=P,this.reloadCallback=w,this.adsReloadedCallback=S,this.reloadCount=C,this.iaUnitClosedPromise=A,this.adShownCount=I,this.reloadTimer=T,this.adAlreadyShown=B,this.logger=f.getLogger("Universe:StateContext"),this.stopRenderer=!1,this.updateReloadCountCallback=new g,this.adRequestTime=0,this.updateAdRequestTimeCallback=new g,this.updateReloadCountCallback.subscribe(function(e){k.reloadCount=e}),this.updateAdRequestTimeCallback.subscribe(function(e){k.adRequestTime=e})}return Object.defineProperty(e.prototype,"Behaviours",{get:function(){return this.behaviours},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InViewTracker",{get:function(){return this.inviewTracker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoDemandPromise",{get:function(){return this.noDemandPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ElementToWatch",{get:function(){return this.elementToWatch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CompletePromise",{get:function(){return this.completePromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionPromise",{get:function(){return this.impressionPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClickPromise",{get:function(){return this.clickPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RenderedPromise",{get:function(){return this.renderedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdsToShowPromise",{get:function(){return this.adsToShowPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TrackBrowserExitPromise",{get:function(){return this.trackBrowserExitPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ScrollTriggerPromise",{get:function(){return this.scrollTriggerPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdOpportunityPromise",{get:function(){return this.adOpportunityPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BlockedPromiseTracker",{get:function(){return this.BlockedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementId",{get:function(){return this.placementId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewabilityDetector",{get:function(){return this.vbDetector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionSubscriber",{get:function(){return this.impressionSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ViewableImpressionSubscriber",{get:function(){return this.viewabableSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClickSubscriber",{get:function(){return this.clickSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadCallback",{get:function(){return this.reloadCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdsReloadedCallback",{get:function(){return this.adsReloadedCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadCount",{get:function(){return this.reloadCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReloadTimer",{get:function(){return this.reloadTimer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdShownCount",{get:function(){return this.adShownCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UpdateReloadCountCallback",{get:function(){return this.updateReloadCountCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IAUnitClosedPromise",{get:function(){return this.iaUnitClosedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdRequestTime",{get:function(){return this.adRequestTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UpdateAdRequestTimeCallback",{get:function(){return this.updateAdRequestTimeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdAlreadyShown",{get:function(){return this.adAlreadyShown},set:function(e){this.adAlreadyShown=e},enumerable:!0,configurable:!0}),e.prototype.setAdShownCount=function(e){this.adShownCount=e},e.prototype.setState=function(e){this.logger.logInfo("Universe State changing from "+h.StateName[this.state.getName()]+" to "+h.StateName[e.getName()]),this.state=e},e.prototype.doAction=function(){this.stopRenderer||(this.logger.logInfo("Universe performing State action "+h.StateName[this.state.getName()]),this.state.doAction(this))},e.prototype.setStateAndDoAction=function(e){this.setState(e),this.doAction()},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/states/StateContext.ts","/src/renderer/inview/states")},{"../../../logging/LogManager":58,"../../../utility/SubscribableCallback":274,"./State":207,_process:8,buffer:4,timers:9}],209:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t)).next())})},f=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:i(0),"throw":i(1),"return":i(2)}},g=e("./State"),m=e("./RenderAdState"),y=e("../../../logging/LogManager"),b=e("./Blackhole"),v=e("./EndState"),P=e("../../../utility/Utility"),w=e("es6-promise"),S=function(){function e(){this.logger=y.getLogger("Universe:WaitForAdvertisers")}return e.prototype.getName=function(){return g.StateName.WaitForAdvertisers},e.prototype.doAction=function(e){return h(this,void 0,w.Promise,function(){var t,i,n=this;return f(this,function(r){try{t=e.Behaviours.pixelScrollTrigger[0],i=t?parseInt(t,10):-1,P.getScrolledPixelsPromise(window,i).getPromise().then(function(){e.ScrollTriggerPromise.resolve(),e.AdOpportunityPromise.resolve(),e.InViewTracker.fireAdOpportunityTrackersOnce()}),e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.AdsToShowPromise.subscribe(function(t){if(n.logger.logInfo("received ad list, of size "+t.adData),t.adData)if(1===t.adData.length&&t.adData[0].isFoc)if(e.AdShownCount<Number(e.Behaviours.adCount[0])&&e.ReloadCount>0){var i=(new Date).getTime(),r=(i-e.AdRequestTime)/1e3;r<e.ReloadTimer?setTimeout(function(){e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.ReloadCallback.notify()},1e3*(e.ReloadTimer-r)):(e.UpdateAdRequestTimeCallback.notify((new Date).getTime()),e.ReloadCallback.notify())}else e.NoDemandPromise.resolve(),e.ImpressionPromise.reject(),e.InViewTracker.fireNoDemandTrackerOnce(),n.logger.logInfo("Foc Ad"),e.setStateAndDoAction(new v);else e.AdOpportunityPromise.getPromise().then(function(){e.AdAlreadyShown?e.AdsReloadedCallback.notify({adData:t.adData,hBHelper:t.hBHelper}):(e.AdAlreadyShown=!0,e.setStateAndDoAction(new m(t.adData,t.hBHelper)))})["catch"](function(t){e.setStateAndDoAction(new v)});else e.NoDemandPromise.resolve(),e.InViewTracker.fireNoDemandTrackerOnce(),e.setStateAndDoAction(new b(n.getName(),"Empty adData list. Should not have reached here."))})}catch(o){e.setStateAndDoAction(new b(this.getName(),"Internal failure "+o))}return[2,P.createPromise(void 0)]})})},e}();t.exports=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/inview/states/WaitForAdvertisers.ts","/src/renderer/inview/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./Blackhole":204,"./EndState":205,"./RenderAdState":206,"./State":207,_process:8,buffer:4,"es6-promise":5,timers:9}],210:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.VAST="VAST",e.IFRAME="IFrame",e.TPADSERVER="TPAdServer",e.SLIDER="Slider",e.CLICK_TRACK="ClickTrack",e.VIDEO="Video",e.RICH_MEDIA="Rich Media",e.RTB="Rtb",e.MEDIATION="Mediation",e.POPUP="Pop-Up",e.TEXTLINK="Text Link",e.THIRD_PARTY="3rd Party",e.STD_BANNER="Std Banner",e.AD_FLASH="Ad Flash",e.JAVA="Java",e.HTML="HTML",e.FLASH="Flash"}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/model/CreativeTypeConstants.ts","/src/renderer/model")},{_process:8,buffer:4,timers:9}],211:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility");i.CSS_SELECTOR="cssSelector",i.PLACEMENT_MACRO="placementMacro",i.NO_IMPRESSION="noImpression",i.NO_PREF="NoPref",i.DefaultBehaviour={};var f=function(){function e(){this.behaviours={},this.behaviours[i.CSS_SELECTOR]=new g(i.CSS_SELECTOR,[],[],this.makeChoice),this.behaviours[i.PLACEMENT_MACRO]=new g(i.PLACEMENT_MACRO,["%ZZDIVID%"],[],this.makeChoice),this.behaviours[i.NO_IMPRESSION]=new g(i.NO_IMPRESSION,[],["true","false"],this.makeChoice)}return e.prototype.makeChoice=function(){},e.prototype.getBehaviours=function(){return this.behaviours},e.prototype.getBehaviour=function(e){return this.behaviours[e]},e}();i.BehavioursHolder=f;var g=function(){function e(e,t,i,n){this.name=e,this.defaultValues=t,this.allValidValues=i,this.makeChoiceCallback=n}return e.prototype.getName=function(){return this.name},e.prototype.getAllValidValues=function(){return this.allValidValues},e.prototype.getDefaultValues=function(){return this.defaultValues},e.prototype.getAllValidValuesWithoutNoPref=function(){return h.removeStringFromArray(this.allValidValues,i.NO_PREF)},e.prototype.makeChoiseAndGetValue=function(e,t){return this.makeChoiceCallback?this.makeChoiceCallback(e,t):""},e}();i.BehavioursParam=g;var m=function(){function e(){}return e}();i.Behaviours=m;var y=function(){function e(){}return e.getBehaviours=function(e){return{cssSelector:h.isNullOrUndefined(e[i.CSS_SELECTOR])?e[i.CSS_SELECTOR][0]:"",placementMacro:h.isNullOrUndefined(e[i.PLACEMENT_MACRO])?e[i.PLACEMENT_MACRO][0]:"%ZZDIVID%",noImpression:h.isNullOrUndefined(e[i.NO_IMPRESSION])?e[i.NO_IMPRESSION][0]:void 0}},e}();i.BehaviourParser=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/model/DisplayBehaviours.ts","/src/renderer/model")},{"../../utility/Utility":275,_process:8,buffer:4,timers:9}],212:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.Impression="pubImpressionTracker",e.Click="pubClickTracker"}(p=i.PublisherTracker||(i.PublisherTracker={}));var h;!function(e){e.ADD_OPPORTUNITY="ADD_OPPORTUNITY",e.USER_CLOSE_BROWSER="USER_CLOSE_BROWSER"}(h=i.StageName||(i.StageName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/model/TrackerConstants.ts","/src/renderer/model")},{_process:8,buffer:4,timers:9}],213:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../display/BannerHelper"),f=e("../display/HtmlHelper"),g=e("../model/CreativeTypeConstants"),m=e("es6-promise"),y=e("../../utility/Utility"),b=e("../../logging/LogManager"),v=e("../../utility/DefferedPromise"),P=e("../../config/ConfigHolder"),w=function(){function e(e,t,i,n){var r=this;this.doc=e,this.win=t,this.adData=i,this.rendererData=n,this.geckoLogger=b.getLogger("AdcontentHolder"),this.bannerHelper=new h,this.htmlHelper=new f,this.loadPromise=new v,this.onloadHandler=function(e){r.adData.domDestination.contentWindow.document.body.style.margin="0px",r.adData.domDestination.contentWindow.document.close(),r.loadPromise.resolve()},this.geckoLogger=b.getAdLogger(this.adData.adId,this.adData.creativeType,this.adData.network,this.adData.channel,y.getTopWindowPageUrl(),"PoliteSwipeUp : AdcontentHolder"),this.geckoLogger.logDebug(" cloning adData, appending iframe to div"),i.domDestination.style.display="block",this.clonedAdData=y.merge(i,{}),this.creativeType=i.creativeType,this.clonedAdData.dimsuffix="px",this.clonedAdData.width=i.width,this.clonedAdData.height=i.height;var o=this.clonedAdData.domDestination;this.container=e.createElement("div"),this.container.id=i.placmentId+"pswipeUp_Container",o&&(o.parentNode.appendChild(this.container),this.container.appendChild(o))}return e.prototype.onLoadPromise=function(){return this.loadPromise.getPromise()},e.prototype.addContent=function(e,t){var i=this,n=new m.Promise(function(n,r){i.geckoLogger.logDebug(" creating bannerHelper object to renderer ad ");var o,a;if(i.creativeType===g.STD_BANNER&&(o=i.bannerHelper.transform(i.rendererData.bannerAd)),i.creativeType===g.HTML&&(a=i.htmlHelper.transform(i.rendererData.htmlAd)),o||a){i.clonedAdData.domDestination.addEventListener("load",i.onloadHandler);var s;i.creativeType===g.STD_BANNER&&o&&(s=i.bannerHelper.showAd(i.clonedAdData,o)),i.creativeType===g.HTML&&a&&(s=i.htmlHelper.showAd(i.clonedAdData,a,e));var l=new v;if(s){s.viewable=l.getPromise();var d={id:i.container.id,debugMode:"true"===P.getViewabilityDebug(),IntervalForPullingViewablityMs:parseInt(P.getViewabilityPollingInterval(),10)};t.getViewabilityMonitor(d).then(function(e){e.onAdViewableImpression(function(){l.resolve()})}),s.adRendered.then(function(){i.geckoLogger.logDebug(" ad rendered successfully resolving promise"),n(s)})}}});return n},e.prototype.onAdContainerViewable=function(e){var t={id:this.container.id,debugMode:"true"===P.getViewabilityDebug(),IntervalForPullingViewablityMs:parseInt(P.getViewabilityPollingInterval(),10)};return y.trackIfElementIsVisible(e,t)},e.prototype.onTimePercentViewable=function(e,t,i){var n={id:this.container.id,debugMode:"true"===P.getViewabilityDebug(),IntervalForPullingViewablityMs:parseInt(P.getViewabilityPollingInterval(),10)};return e.getTimePercentViewabilityPromise(n,t,i)},e.prototype.getWrapperElement=function(){var e=this.container.parentElement;if(e)return e;var t=new HTMLElement;return t},e.prototype.getAdComponent=function(){return this.container},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/AdcontentHolder.ts","/src/renderer/politeswipeup")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DefferedPromise":267,"../../utility/Utility":275,"../display/BannerHelper":100,"../display/HtmlHelper":102,"../model/CreativeTypeConstants":210,_process:8,buffer:4,"es6-promise":5,timers:9}],214:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/CSS"),f=function(){function e(){}return e.scaleIFrameContent=function(e,t,i,n,r,o){var a=e.contentWindow.document.body,s=t.innerHeight<t.innerWidth?o/n:r/i;e.style.width=r+"px",e.style.height=o+"px",a.style.display="inline-table",h.Util.setPrefixedStyle(a,"transform-origin","0px 0px"),h.Util.setPrefixedStyle(a,"transform","scale("+s+")")},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/BehaviourHelper.ts","/src/renderer/politeswipeup")},{"../../utility/CSS":265,_process:8,buffer:4,timers:9}],215:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../utility/CSS"),g=e("../../logging/LogManager"),m=e("./BehaviourHelper"),y=function(){function e(e,t,i,n,r){this.bottomSpaceGrabber=e,this.width=t,this.height=i,this.viewablePercent=n,this.win=r,this.geckoLogger=g.getLogger("BottomPageHolder")}return e.prototype.attach=function(e,t){var i=this;this.geckoLogger.logDebug(" attached adcontent to bottom space");var n=this.bottomSpaceGrabber.getPositioning(this.viewablePercent);this.geckoLogger.logDebug(n.toString());var r=t.getAdComponent(),o=new h.Promise(function(t,o){r.style.width=n.totalWidth+"px",r.style.height=n.totalHeight+"px",m.scaleIFrameContent(r.childNodes[0],i.win,i.width,i.height,n.totalWidth,n.totalHeight),r.style.position="fixed",f.Util.setPrefixedStyle(r,"transform","translate3d(0,0,0)"),f.Util.setPrefixedStyle(r,"backface-visibility","hidden"),r.style.zIndex="2147483647",r.style.top=i.win.innerHeight+"px",r.style.left=n.topLeft.x+"px",r.appendChild(e.getCloseButton(n)),t()});return o},e.prototype.applyTransition=function(e){this.geckoLogger.logDebug("applying transition to adcontent");var t=e.getAdComponent(),i=this.bottomSpaceGrabber.getPositioning(this.viewablePercent);f.Util.setPrefixedStyle(t,"transition","top .5s linear"),t.style.top=i.topLeft.y+"px"},e.prototype.checkIfTransitionIsFinished=function(e,t){var i=new h.Promise(function(i,n){e.target===t&&(f.Util.setPrefixedStyle(t,"transition","top .5s ease"),i())});return i},e.prototype.adjustPositionAndDimensions=function(e){this.geckoLogger.logDebug("adjusting position on resize for bottom page holder");var t=e.getAdComponent(),i=this.bottomSpaceGrabber.getPositioning(this.viewablePercent);t.style.width=i.totalWidth+"px",t.style.height=i.totalHeight+"px",t.style.top=i.topLeft.y+"px",t.style.left=i.topLeft.x+"px",m.scaleIFrameContent(t.childNodes[0],this.win,this.width,this.height,i.totalWidth,i.totalHeight)},e.prototype.shrink=function(e,t){this.viewablePercent=e;var i=this.bottomSpaceGrabber.getPositioning(e),n=this.bottomSpaceGrabber.getCalculatedTop(e,i.totalWidth,i.totalHeight);f.Util.setPrefixedStyle(t.getAdComponent(),"transition","top .5s linear"),t.getAdComponent().style.top=n+"px"},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/BottomPageHolder.ts","/src/renderer/politeswipeup")},{"../../logging/LogManager":58,"../../utility/CSS":265,"./BehaviourHelper":214,_process:8,buffer:4,"es6-promise":5,timers:9}],216:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("../../logging/LogManager"),g=function(){function e(e,t,i,n,r){this.win=e,this.tagWidth=t,this.tagHeight=i,this.minWidth=n,this.maxWidth=r,this.geckoLogger=f.getLogger("BottomSpaceGrabber")}return e.prototype.getPositioning=function(e){this.geckoLogger.logDebug(" returning position for bottom space");var t=Math.min(this.win.innerWidth,this.maxWidth),i=h.computeInRatio(this.tagWidth,this.tagHeight,t),n=Math.round(i*e/100),r=h.computeTopLeftGivenBottomCentre(t,n,this.win.innerWidth/2,this.win.innerHeight);return this.geckoLogger.logDebug("topLeft.x = "+r.x+", topLeft.y = "+r.y+", actualWidth = "+t+" actualHeight = "+i+", visibleHeight = "+n),{topLeft:{x:r.x,y:r.y},visibleHeight:n,visibleWidth:t,totalWidth:t,totalHeight:i}},e.prototype.getCalculatedTop=function(e,t,i){var n=100-e;return this.win.innerHeight-this.win.innerWidth*i/t*(100-n)/100},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/BottomSpaceGrabber.ts","/src/renderer/politeswipeup")},{"../../logging/LogManager":58,"../../utility/Utility":275,_process:8,buffer:4,timers:9}],217:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DOM"),f=e("../../config/ConfigHolder"),g=e("../../logging/LogManager"),m=function(){function e(e,t,i,n,r,o){var a=this;this.id=e,this.doc=t,this.win=i,this.width=n,this.height=r,this.closeClicked=o,this.geckoLogger=g.getLogger("CloseButtonHolder"),this.intendedStateVisible=!1,this.geckoLogger.logDebug("closeBtn width = "+this.width+" height = "+this.height+" "),this.closeDivElement=h.Util.createDivElement(this.doc,this.id+"_closeDiv"),this.closeDivElement.style.width=this.width+"px",this.closeDivElement.style.height=this.height+"px";var s=h.Util.createImageElement(this.doc,this.id+"_img");s.alt="Close",s.height=this.height,s.width=this.width,s.src=f.getSwipeUpCloseBtn(),this.closeDivElement.appendChild(s),this.closeDivElement.onclick=function(){a.closeClicked()}}return e.prototype.getCloseButton=function(e){var t=this.calculateToRight(e,this.width,this.height).bottomRight;return this.geckoLogger.logDebug("calculated bottomRight : x = "+t.x+" y = "+t.y+" "),this.closeDivElement.style.position="absolute",this.closeDivElement.style.display="none",this.closeDivElement.style.top="-"+this.height+"px",this.closeDivElement.style.right="0px",this.closeDivElement},e.prototype.showCloseBtn=function(e){var t=this;this.intendedStateVisible=!0,setTimeout(function(){t.intendedStateVisible&&(t.closeDivElement.style.display="block")},e)},e.prototype.hideCloseBtn=function(){this.intendedStateVisible=!1,this.closeDivElement.style.display="none"},e.prototype.calculateToRight=function(e,t,i){var n=e.topLeft.y-this.height,r=e.topLeft.x+e.totalWidth-this.width;return{bottomRight:{y:n,x:r}}},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/CloseButtonHolder.ts","/src/renderer/politeswipeup")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,_process:8,buffer:4,timers:9}],218:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../logging/LogManager"),g=e("./BehaviourHelper"),m=e("../../utility/DefferedPromise"),y=function(){function e(e,t,i,n){this.inlineSpaceGrabber=e,this.width=t,this.height=i,this.win=n,this.geckoLogger=f.getLogger("InlineHolder"),this.checkPosition=function(e,t){var i=e.getWrapperElement(),n=i.offsetTop;n<=0&&t.resolve()}}return e.prototype.attach=function(e){var t=this,i=new h.Promise(function(i,n){try{e.getWrapperElement().style.overflow="visible",e.getWrapperElement().style.width="100%",t.gracefulAttach(e)&&(t.geckoLogger.logInfo("gracefulAttach with adComponent"),i()),t.geckoLogger.logDebug("attaching adcontent to inline space"),t.interval=setInterval(function(){t.gracefulAttach(e)&&(t.geckoLogger.logInfo("gracefulAttach with adComponent after interval"),i(),clearInterval(t.interval))},25)}catch(r){n(r)}});return i},e.prototype.attachOnClose=function(e){var t=this,i=new h.Promise(function(i,n){e.getWrapperElement().style.overflow="visible",e.getWrapperElement().style.width="100%",t.merge(e),i()});return i},e.prototype.takeControl=function(e){var t=this,i=new m,n={checkPosition:function(){e.getWrapperElement().getBoundingClientRect().top<=0&&(t.win.removeEventListener("scroll",n.checkPosition),i.resolve())}};return this.win.addEventListener("scroll",n.checkPosition),i.getPromise()},e.prototype.gracefulAttach=function(e){this.bringCloser(e);var t=(e.getAdComponent(),e.getWrapperElement().getBoundingClientRect().top),i=e.getAdComponent().getBoundingClientRect().top;return Math.abs(i-t)<5&&(this.merge(e),!0)},e.prototype.merge=function(e){var t=e.getAdComponent(),i=this.inlineSpaceGrabber.getInlinePosition(e.getWrapperElement());e.getWrapperElement().style.transition="height 1.5s",e.getWrapperElement().style.height=i.height+"px",t.style.transition="none",t.style.overflow="hidden",t.style.position="relative",t.style.zIndex="",t.style.top="",t.style.left="",t.style.margin="0px "+i.left+"px",g.scaleIFrameContent(t.childNodes[0],this.win,this.width,this.height,i.width,i.height),this.geckoLogger.logDebug("done moving, merged bottom with inline"),clearInterval(this.interval)},e.prototype.bringCloser=function(e){var t=e.getWrapperElement().getBoundingClientRect().top,i=e.getAdComponent().getBoundingClientRect().top,n=e.getAdComponent();this.geckoLogger.logInfo("myTop :  "+t+" adTop : "+i),n.style.transition="top 0.5s",n.style.top=t+"px"},e.prototype.adjustDimensions=function(e){this.geckoLogger.logDebug("adjusting position on resize after attaching inline");var t=this.inlineSpaceGrabber.getInlinePosition(e.getWrapperElement()),i=e.getAdComponent();e.getWrapperElement().style.height=t.height+"px",i.style.width=t.width+"px",i.style.height=t.height+"px",i.style.margin="0px "+t.left+"px",i.style.position="relative",g.scaleIFrameContent(i.childNodes[0],this.win,this.width,this.height,t.width,t.height)},e}();i.InlineHolder=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/InlineHolder.ts","/src/renderer/politeswipeup")},{"../../logging/LogManager":58,"../../utility/DefferedPromise":267,"./BehaviourHelper":214,_process:8,buffer:4,"es6-promise":5,timers:9}],219:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DOM"),f=e("../../logging/LogManager"),g=e("../../config/ConfigHolder"),m=e("../../utility/Utility"),y=function(){function e(e,t,i,n,r){this.placementId=e,this.doc=t,this.win=i,this.tagWidth=n,this.tagHeight=r,this.geckoLogger=f.getLogger("InlineSpaceGrabber")}return e.prototype.getInlinePosition=function(e){var t=this.doc.getElementById(e.id),i=t.parentNode.offsetWidth,n=Math.min(i,Number(g.getPoliteSwipeUpMaxWidth())),r=m.computeInRatio(this.tagWidth,this.tagHeight,n);return this.geckoLogger.logDebug("Width of Article  = "+i),{left:(i-n)/2,width:n,height:r}},e.prototype.grabInlinePlacement=function(e){this.geckoLogger.logDebug("Searching right place and appending element into it. Returning promise ...");
var t=parseInt(g.getGracefulBacktrackNumberOfChecks(),10),i=parseInt(g.getGracefulBacktrackStartingTime(),10),n=h.Util.createDivElement(document,e.id+"_wrapper");return n.style.width="0px",n.style.height="0px",e.appendChild(n),h.Util.insertElementAt(this.placementId,n,t,i)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/InlineSpaceGrabber.ts","/src/renderer/politeswipeup")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DOM":266,"../../utility/Utility":275,_process:8,buffer:4,timers:9}],220:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./BottomSpaceGrabber"),f=e("./CloseButtonHolder"),g=e("./AdcontentHolder"),m=e("./BottomPageHolder"),y=e("./InlineHolder"),b=e("../../utility/Utility"),v=e("es6-promise"),P=e("../../logging/LogManager"),w=e("../../config/ConfigHolder"),S=e("./StatDisplay"),C=e("../../utility/DefferedPromise"),A=e("./TopDockerV2"),I=e("./TopDockerV3"),T=e("./model/Behaviours"),B=e("./model/Behaviours"),k=e("../../utility/AnyPromise"),E=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,h,f,g,m){var y=this;this.doc=e,this.win=t,this.adData=i,this.rendererData=n,this.behaviour=r,this.clickPromise=o,this.impressionPromise=a,this.adRendereredPromise=s,this.viewablePromise=l,this.gAdLogger=d,this.pSwipeUpTracker=c,this.touchStartPromise=u,this.firstScrollPromise=p,this.alreadyScrolledPromise=h,this.hBHelper=f,this.vbDetector=g,this.adOpportunityPromise=m,this.shrinkPromise=new C,this.placeToBottom=!1,this.geckoLogger=P.getLogger("PSwipeUpController"),this.stopResizeFlag=!1,this.isPortraitInline=!0,this.version="v3",this.closePromise=new C,this.inlineVisiblePromise=new C,this.iaViewablePromise=new C,this.bottomViewablePromise=new C,this.browserExitPromise=new C,this.pageExitPromise=new C,this.exitBeforeInViewPromise=new C,this.adNotReadyPromise=new C,this.transitionFinishedHandler=function(e){var t=y.adContentHandler.getAdComponent();y.bottomHolder.checkIfTransitionIsFinished(e,t).then(function(){y.geckoLogger.logDebug("transition done and resolved"),y.behaviour.showCloseBtn&&y.closeBtn.showCloseBtn(y.behaviour.delayClose),t.removeEventListener("transitionend",y.transitionFinishedHandler),y.bottomViewablePromise.getPromise().then(function(){y.pSwipeUpTracker.fireAdShownTrackersOnce()}),y.behaviour.bottomUnit instanceof T.Shrink?setTimeout(function(){y.behaviour.bottomUnit instanceof T.Shrink&&y.shrinkPromise.resolve(y.behaviour.bottomUnit.shrinkToPercent)},y.behaviour.bottomUnit.shrinkAfterMs):y.behaviour.bottomUnit instanceof B.Attach&&setTimeout(function(){y.inlineVisiblePromise.resolve()},y.behaviour.bottomUnit.attachAfterMs)})},this.resizeHandlerBottomHolder=function(){y.gAdLogger.logDebug("resizeHandlerBottomHolder "),y.stopResizeFlag||y.bottomHolder.adjustPositionAndDimensions(y.adContentHandler)},this.resizeHandlerInlineHolder=function(){var e=y.win.innerHeight>y.win.innerWidth,t=e!==y.isPortraitInline;y.isPortraitInline=e,!t&&y.topDocker.dockingState()||y.inlineHolder.adjustDimensions(y.adContentHandler)},i.domDestination.style.display="block",this.geckoLogger=P.getAdLogger(this.adData.adId,this.adData.creativeType,this.adData.network,this.adData.channel,b.getTopWindowPageUrl(),"PSwipeUpController")}return e.prototype.initialise=function(e,t){var i=this,n=Number(w.getPoliteSwipeUpMaxWidth()),r=Number(w.getPoliteSwipeUpMinWidth()),o=Number(w.getPoliteSwipeUpCloseBtnWidth()),a=Number(w.getPoliteSwipeUpCloseBtnHeight()),s=P.comparePassPhrase(b.getNameParameter(w.getLogPassPhrase(),b.getTopWindowPageUrl()));this.statDisplay=new S(s,50,50,this.win,(new Date).getTime()),this.statDisplay.show("Created Stat Display"),this.bottomViewablePromise.getPromise().then(function(){i.iaViewablePromise.reject(),i.pSwipeUpTracker.fireAdBottomViewableTrackersOnce()}),this.iaViewablePromise.getPromise().then(function(){i.bottomViewablePromise.reject(),i.pSwipeUpTracker.fireAdIAViewableTrackersOnce()});try{this.gAdLogger.logDebug(" Grab Inline Placement Done"),this.statDisplay.show("Grab Inline Placement Done"),this.placementElement=e,this.placementElement.appendChild(this.adData.domDestination),this.adContentHandler=new g(this.doc,this.win,this.adData,this.rendererData),"v2"===this.version?this.topDocker=new A(this.adContentHandler,this.win,this.doc,t):this.topDocker=new I(this.adContentHandler,this.win,this.doc),this.inlineHolder=new y.InlineHolder(t,this.adData.width,this.adData.height,this.win),this.bottomSpaceG=new h(this.win,this.adData.width,this.adData.height,r,n),this.closeBtn=new f(this.adData.placmentId,this.doc,this.win,o,a,this.closeHandler.bind(this)),this.bottomHolder=new m(this.bottomSpaceG,this.adData.width,this.adData.height,this.behaviour.slideInPercent,this.win),this.closePromise.getPromise().then(function(){i.shrinkPromise.reject(),i.inlineVisiblePromise.reject(),i.attachInlineHandler(i.inlineHolder.attachOnClose(i.adContentHandler))}),this.inlineVisiblePromise.getPromise().then(function(){i.shrinkPromise.reject(),i.attachInlineHandler(i.inlineHolder.attach(i.adContentHandler))}),this.shrinkPromise.getPromise().then(function(e){i.bottomHolder.shrink(e,i.adContentHandler)})}catch(l){console.log(l)}this.adOpportunityPromise.getPromise().then(function(){i.touchStartHandler()})},e.prototype.getTouchPromise=function(){return this.touchStartPromise},e.prototype.attachInlineHandler=function(e){var t=this;e.then(function(){t.stopResizeFlag=!0,t.gAdLogger.logDebug("resolved inlineAttachPromise"),t.closeBtn.hideCloseBtn(),t.win.removeEventListener("resize",t.resizeHandlerBottomHolder),t.win.removeEventListener("orientationchange",t.resizeHandlerBottomHolder),t.win.addEventListener("resize",t.resizeHandlerInlineHolder),t.win.addEventListener("orientationchange",t.resizeHandlerInlineHolder),t.gAdLogger.logDebug(" Attached to inline space"),t.handOverToInline()})["catch"](function(e){t.gAdLogger.logError(" Failed to attaching to inline space ")})},e.prototype.handOverToInline=function(){var e=this,t=this.inlineHolder.takeControl(this.adContentHandler);t.then(function(){e.gAdLogger.logDebug(" Inline Holder out of view, activate the topdocker");var t=e.topDocker.activate();t.then(function(){e.gAdLogger.logDebug(" re attach to inline holder"),e.handOverToInline()})})["catch"](function(t){e.gAdLogger.logError(" Failed to trigger out of view")})},e.prototype.closeHandler=function(){this.pSwipeUpTracker.fireAdCloseTrackersOnce(),this.closePromise.resolve()},e.prototype.startBrowserExitTracking=function(){var e=this;b.createBrowserExitPromise(this.win).then(function(){e.browserExitPromise.resolve()})["catch"](function(t){e.browserExitPromise.reject(),e.gAdLogger.logError(" Failed to initialize browser exit tracking: "+t)}),this.browserExitPromise.getPromise().then(function(){e.pageExitPromise.resolve(),e.impressionPromise.getPromise().then(function(){e.exitBeforeInViewPromise.resolve()})}),this.pageExitPromise.getPromise().then(function(){e.pSwipeUpTracker.firePageExitTrackersOnce()}),this.exitBeforeInViewPromise.getPromise().then(function(){e.pSwipeUpTracker.fireExitBeforeAdInViewTrackersOnce()})},e.prototype.touchStartHandler=function(){var e=this;this.startBrowserExitTracking(),this.adNotReadyPromise.getPromise().then(function(){e.pSwipeUpTracker.fireAdNotReadyTrackersOnce()}),k.anyone([this.bottomViewablePromise.getPromise(),this.iaViewablePromise.getPromise()]).then(function(){e.adNotReadyPromise.reject(),e.exitBeforeInViewPromise.reject(),e.browserExitPromise.reject()});var t=this.adContentHandler.getWrapperElement(),i={id:t.id,debugMode:"true"===w.getViewabilityDebug(),IntervalForPullingViewablityMs:parseInt(w.getViewabilityPollingInterval(),10)};b.trackIfElementIsVisible(this.vbDetector,i).then(function(){e.adNotReadyPromise.resolve()}),b.isElementVisibleInViewport(t,this.win,this.doc)&&this.adNotReadyPromise.resolve(),this.placeToBottom===!1&&(this.statDisplay.show("touchStartHandler"),this.placeToBottom=!0,this.win.removeEventListener("touchstart",this.touchStartHandler),this.impressionPromise.resolve(),this.pSwipeUpTracker.firePubImpressionTrackerOnce(),this.pageExitPromise.reject(),this.adContentHandler.addContent(this.hBHelper,this.vbDetector).then(function(t){t.adRendered.then(function(){e.adRendereredPromise.resolve(),e.pSwipeUpTracker.fireAdRenderedTrackersOnce()}),t.click.then(function(){e.clickPromise.resolve(),e.pSwipeUpTracker.firePubClickTrackerOnce()}),t.viewable&&t.viewable.then(function(){e.adData.tracking.fireViewabilityTrackers()}),e.adContentHandler.onLoadPromise().then(function(){e.bottomHolder.attach(e.closeBtn,e.adContentHandler).then(function(){e.statDisplay.show("Attched to bottom space"),e.adContentHandler.onAdContainerViewable(e.vbDetector).then(function(){e.bottomViewablePromise.resolve()}),e.adContentHandler.onTimePercentViewable(e.vbDetector,e.behaviour.adInViewTrackerPercent,e.behaviour.adInViewTrackerTimeMs).then(function(){e.pSwipeUpTracker.fireAdInView2secsPlusTrackersOnce()}),e.adContentHandler.getAdComponent().addEventListener("transitionend",e.transitionFinishedHandler),e.statDisplay.show("applyTransition"),e.bottomHolder.applyTransition(e.adContentHandler),e.win.addEventListener("resize",e.resizeHandlerBottomHolder),e.win.addEventListener("orientationchange",e.resizeHandlerBottomHolder)})}),e.placementElement.style.width=""+e.adData.width+e.adData.dimsuffix,e.placementElement.style.height="10px";var i=e.adContentHandler.getWrapperElement(),n={id:i.id,debugMode:"true"===w.getViewabilityDebug(),IntervalForPullingViewablityMs:25};return new v.Promise(function(i,r){e.vbDetector.getViewabilityMonitor(n).then(function(e){i({monitor:e,holderViewable:t.viewable})})["catch"](function(e){r(e)})})}).then(function(t){var i=t.monitor,n=t.holderViewable,r=function(){e.inlineVisiblePromise.resolve(),i.stopViewabilityMonitor(),e.bottomViewablePromise.reject()};e.inlineVisiblePromise.getPromise().then(function(){n&&n.then(function(){e.iaViewablePromise.resolve()})}),i.onViewableStateChange(function(){i.isViewable()&&(e.pSwipeUpTracker.fireSwipedUpTrackersOnce(),r())}),i.onUnmesurable(function(){r()}),i.isViewable()&&e.adContentHandler.onLoadPromise().then(function(){r()})})["catch"](function(t){e.gAdLogger.logError(" Failed to attaching to bottom space = "+t)}))},e}();t.exports=E}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/PSwipeUpController.ts","/src/renderer/politeswipeup")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/AnyPromise":262,"../../utility/DefferedPromise":267,"../../utility/Utility":275,"./AdcontentHolder":213,"./BottomPageHolder":215,"./BottomSpaceGrabber":216,"./CloseButtonHolder":217,"./InlineHolder":218,"./StatDisplay":225,"./TopDockerV2":226,"./TopDockerV3":227,"./model/Behaviours":228,_process:8,buffer:4,"es6-promise":5,timers:9}],221:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.AD_SHOWN="ADSHOWN",e.AD_CLOSE="close",e.AD_SWIPEUP="ADSWIPED",e.PUB_IMPRESSION="PUB_IMPRESSION",e.PUB_CLICK="PUB_CLICK",e.AD_BOTTOM_VIEWABLE="ADBOTTOMVIEWABLE",e.AD_IA_VIEWABLE="ADIAVIEWABLE",e.AD_IV_2SECSPLUS="AVIEWSP",e.AD_RENDERED="AREND",e.EXIT_BEFORE_ADINVIEW="EXITB",e.AD_NOT_READY="ADNR"}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/PSwipeUpEvent.ts","/src/renderer/politeswipeup")},{_process:8,buffer:4,timers:9}],222:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./PSwipeUpRenderer"),f=e("../decorators/BasicTrackingRendererDecorator"),g=e("es6-promise"),m=e("../decorators/FOCRendererDecorator"),y=e("../../utility/DefferedPromise"),b=function(){function e(e,t,i,n,r,o,a,s,l){var d=this;this.noDemandPromise=new y,this.adReadyPromise=new y,this.adOpportunityPromise=new y,this.missedOpportunityPromise=new y,this.adCompletePromise=new y,this.iaUnitClosedPromise=new y;new g.Promise(function(e,t){d.signalDestReady=e});this.mySlave=new f(new m(new h(e,t,i,n,r,o,a,s,l,this.noDemandPromise,this.adOpportunityPromise,this.missedOpportunityPromise,this.adReadyPromise),this.noDemandPromise,this.adReadyPromise))}return e.prototype.cancel=function(){},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.getPSwipeUpFacadeName=function(){return h.NAME},e.prototype.getVersion=function(){return this.mySlave.getVersion()},e.prototype.getReloadCallback=function(){return this.mySlave.getReloadCallback()},e.prototype.isSupported=function(){return this.mySlave.isSupported()},e.prototype.getName=function(){return this.mySlave.getName()},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.isOnByDefault=function(){return this.mySlave.isOnByDefault()},e.prototype.getCapability=function(){return this.mySlave.getCapability()},e.prototype.getBehaviourForHB=function(){return this.mySlave.getBehaviourForHB()},e.prototype.getPlacementElement=function(){return this.mySlave.getPlacementElement()},e.prototype.getBehaviourForRequest=function(){return this.mySlave.getBehaviourForRequest()},e.prototype.getBehaviourForRenderer=function(e,t){return this.mySlave.getBehaviourForRenderer(e,t)},e.prototype.getNoDemandPromise=function(){return this.mySlave.getNoDemandPromise()},e.prototype.getAdReadyPromise=function(){return this.mySlave.getAdReadyPromise()},e.prototype.getAdOpportunityPromise=function(){return this.mySlave.getAdOpportunityPromise()},e.prototype.getMissedOpportunityPromise=function(){return this.mySlave.getMissedOpportunityPromise()},e.prototype.reloadAd=function(e,t,i){return this.signalDestReady(e[0].domDestination),this.mySlave.showAd(e,t,i)},e.prototype.showAd=function(e,t,i){return this.signalDestReady(e[0].domDestination),this.mySlave.showAd(e,t,i)},e.prototype.transform=function(e,t){return this.mySlave.transform(e,t)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/PSwipeUpFacade.ts","/src/renderer/politeswipeup")},{"../../utility/DefferedPromise":267,"../decorators/BasicTrackingRendererDecorator":96,"../decorators/FOCRendererDecorator":97,"./PSwipeUpRenderer":223,_process:8,buffer:4,"es6-promise":5,timers:9}],223:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("./PSwipeUpController"),g=e("../../logging/LogManager"),m=e("./PSwipeUpTracker"),y=e("../../utility/BrowserUtils"),b=e("../../detector/OsType"),v=e("../../utility/DefferedPromise"),P=e("./PSwipeUpEvent"),w=e("./model/Behaviours"),S=e("./model/Behaviours"),C=e("./model/Behaviours"),A=e("./InlineSpaceGrabber"),I=e("../../config/ConfigHolder"),T=e("../model/TrackerConstants"),B=e("../../utility/AnyPromise"),k=e("../../utility/SubscribableCallback"),E=.1,L=!0,D=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p){var h=this;this.suppliedBehaviour=e,this.touchStartPromise=a,this.firstScrollPromise=s,this.alreadyScrolledPromise=l,this.noDemandPromise=d,this.adOpportunityPromise=c,this.missedOpportunityPromise=u,this.adReadyPromise=p,this.geckoLogger=g.getLogger("PSwipeupRenderer"),this.behavior=new w.Behaviours,this.PswipeUpGrabElePromise=new v,this.adCompletePromise=new v,this.placementElementPromise=new v,this.iaUnitClosedPromise=new v,this.reloadCallback=new k,this.pswipeUpTracker=new m(t),a.getPromise().then(function(){});var f=e.cssSelector[0];this.inlineSpaceGrabber=new A(f,document,window,n,r);var y=document.getElementById(I.getIdPrefix()+i);y&&this.inlineSpaceGrabber.grabInlinePlacement(y).then(function(e){h.PswipeUpGrabElePromise.resolve({placement:e,spaceGrabber:h.inlineSpaceGrabber}),B.anyone([h.touchStartPromise.getPromise(),h.firstScrollPromise.getPromise(),h.alreadyScrolledPromise.getPromise()]).then(function(){h.adOpportunityPromise.resolve(),h.pswipeUpTracker.fireAdOpportunityTrackerOnce()})})["catch"](function(e){h.geckoLogger.logError(e),h.pswipeUpTracker.fireMissedOpportunityTrackerOnce(),h.missedOpportunityPromise.resolve(),h.noDemandPromise.resolve()})}return e.prototype.cancel=function(){},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.getReloadCallback=function(){return this.reloadCallback},e.prototype.getVersion=function(){return E},e.prototype.getName=function(){return e.NAME},e.prototype.getAdserverName=function(){return this.getName()},e.prototype.getCapability=function(){return{}},e.prototype.getBehaviourForHB=function(){return{}},e.prototype.getBehaviourForRequest=function(){var e=h.merge(this.suppliedBehaviour,C.DefaultBehaviour);return e},e.prototype.getBehaviourForRenderer=function(e,t){var i=h.merge(e,C.DefaultBehaviour);return h.merge(t,i)},e.prototype.getNoDemandPromise=function(){return this.noDemandPromise},e.prototype.getAdReadyPromise=function(){return this.adReadyPromise},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getMissedOpportunityPromise=function(){return this.missedOpportunityPromise},e.prototype.getPlacementElement=function(){return this.placementElementPromise},e.prototype.isOnByDefault=function(){return L},e.prototype.checkBannerAd=function(e){if(void 0!==e.click&&void 0!==e.url)return{target:e.target,defText:e.defText,defAltText:e.defAltText,click:e.click,url:e.url}},e.prototype.checkHtmlAd=function(e){if(void 0!==e.jsData||void 0!==e.htmlData)return{jsData:e.jsData,htmlData:e.htmlData}},e.prototype.transform=function(e,t){var i=this.checkBannerAd(e),n=void 0,r=this.checkHtmlAd(e);t||(t={});var o={bannerAd:i,videoAd:n,htmlAd:r,adShownTrackerUrl:[t[P.AD_SHOWN]],adSwipedUpTrackerUrl:[t[P.AD_SWIPEUP]],adCloseTrackerUrl:[t[P.AD_CLOSE]],adInView2secsPlusTrackerUrl:[t[P.AD_IV_2SECSPLUS]],adRenderedTrackerUrl:[t[P.AD_RENDERED]],exitBeforeAdInViewTrackerUrl:[t[P.EXIT_BEFORE_ADINVIEW]],adNotReadyTrackerUrl:[t[P.AD_NOT_READY]]};return o},e.prototype.reloadAd=function(e,t){var i=new v,n=new v,r=new v,o=new v;return{impression:n.getPromise(),adRendered:r.getPromise(),click:i.getPromise(),viewable:o.getPromise()}},e.prototype.showAd=function(e,t,i){var n=new v,r=new v,o=new v,a=new v;this.geckoLogger.logDebug(" showAd : Creating PSwipeUpController object");var s=e[0].content,l=g.getAdLogger(e[0].placmentId,this.getName(),e[0].network,e[0].channel,h.getTopWindowPageUrl(),"PSwipeUpAd"),d=["http://m1.zedo.com/log/p.gif?a=2633725;c=826005746;x=3840;n=826;e=i;i=0;s=1185;z=[timestamp]"],c=["http://m1.zedo.com/log/p.gif?a=2633724;c=826005745;x=3840;n=826;e=i;i=0;s=1185;z=[timestamp]"];this.pswipeUpTracker.initializeTrackers(s.adShownTrackerUrl,s.adSwipedUpTrackerUrl,s.adCloseTrackerUrl,e[0].behaviour[T.PublisherTracker.Impression],e[0].behaviour[T.PublisherTracker.Click],d,c,s.adInView2secsPlusTrackerUrl,s.adRenderedTrackerUrl,s.exitBeforeAdInViewTrackerUrl,s.adNotReadyTrackerUrl);var u=new f(document,window,e[0],s,S.BehaviourParser.getBehaviours(e[0].behaviour),n,r,o,a,l,this.pswipeUpTracker,this.touchStartPromise,this.firstScrollPromise,this.alreadyScrolledPromise,t,i,this.adOpportunityPromise);return this.PswipeUpGrabElePromise.getPromise().then(function(e){u.initialise(e.placement,e.spaceGrabber)}),{impression:r.getPromise(),adRendered:o.getPromise(),click:n.getPromise(),viewable:a.getPromise()}},e.prototype.isSupported=function(){if(y.getOS()===b.WindowsPhone)return!1;if(y.getOS()===b.IOS)return!0;if(y.getOS()===b.Android){var e=y.getAndroidVersion();return null!==e&&e>=4.2}return!1},e}();D.NAME="pswipeup",t.exports=D}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/PSwipeUpRenderer.ts","/src/renderer/politeswipeup")},{"../../config/ConfigHolder":23,"../../detector/OsType":31,"../../logging/LogManager":58,"../../utility/AnyPromise":262,"../../utility/BrowserUtils":264,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"../model/TrackerConstants":212,"./InlineSpaceGrabber":219,"./PSwipeUpController":220,"./PSwipeUpEvent":221,"./PSwipeUpTracker":224,"./model/Behaviours":228,_process:8,buffer:4,timers:9}],224:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../logging/LogManager"),f=e("es6-promise"),g=e("./PSwipeUpEvent"),m=e("../../eventtracker/EventConstants"),y=e("../../utility/DefferedPromise"),b=e("../model/TrackerConstants"),v="AD_SWIPEUP",P="AD_SHOWN",w=function(){function e(e){this.eventTracker=e,this.geckoLogger=h.getLogger("SwipeUpTrackers"),this.trackers={},this.adBottomViewableOneTimePromise=new y,this.adIAViewableOneTimePromise=new y,this.adShownOneTimePromise=new y,this.adSwipedUpOneTimePromise=new y,this.adCloseOneTimePromise=new y,this.pubImpressionOneTimePromise=new y,this.pubClickOneTimePromise=new y,this.missedOpportunityOneTimePromise=new y,this.adOpportunityOneTimePromise=new y,this.adInView2SecsPlusOneTimePromise=new y,this.adRenderedOneTimePromise=new y,this.exitBeforeAdInViewOneTimePromise=new y,this.pageExitOneTimePromise=new y,this.adNotReadyOneTimePromise=new y}return e.prototype.initializeTrackers=function(e,t,i,n,r,o,a,s,l,d,c){this.eventTracker.setTracker(g.AD_SHOWN,e),this.eventTracker.setTracker(g.AD_CLOSE,i),this.eventTracker.setTracker(g.AD_SWIPEUP,t),this.eventTracker.setTracker(g.PUB_IMPRESSION,n),this.eventTracker.setTracker(g.PUB_CLICK,r),this.eventTracker.setTracker(g.AD_BOTTOM_VIEWABLE,o),this.eventTracker.setTracker(g.AD_IA_VIEWABLE,a),this.eventTracker.setTracker(g.AD_IV_2SECSPLUS,s),this.eventTracker.setTracker(g.AD_RENDERED,l),this.eventTracker.setTracker(g.EXIT_BEFORE_ADINVIEW,d),this.eventTracker.setTracker(g.AD_NOT_READY,c)},e.prototype.fireAdBottomViewableTrackersOnce=function(){var e=this;return this.adBottomViewableOneTimePromise.resolve(),new f.Promise(function(t,i){e.adBottomViewableOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_BOTTOM_VIEWABLE).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdIAViewableTrackersOnce=function(){var e=this;return this.adIAViewableOneTimePromise.resolve(),new f.Promise(function(t,i){e.adIAViewableOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_IA_VIEWABLE).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdShownTrackersOnce=function(){var e=this;return this.adShownOneTimePromise.resolve(),new f.Promise(function(t,i){e.adShownOneTimePromise.getPromise().then(function(){e.eventTracker.setStage(P),e.eventTracker.emit(g.AD_SHOWN).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireSwipedUpTrackersOnce=function(){var e=this;return this.adSwipedUpOneTimePromise.resolve(),new f.Promise(function(t,i){e.adSwipedUpOneTimePromise.getPromise().then(function(){e.eventTracker.setStage(v),e.eventTracker.emit(g.AD_SWIPEUP).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdCloseTrackersOnce=function(){var e=this;return this.adCloseOneTimePromise.resolve(),new f.Promise(function(t,i){e.adCloseOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_CLOSE).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.firePubImpressionTrackerOnce=function(){var e=this;return this.pubImpressionOneTimePromise.resolve(),new f.Promise(function(t,i){e.pubImpressionOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.PUB_IMPRESSION).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.firePubClickTrackerOnce=function(){var e=this;return this.pubClickOneTimePromise.resolve(),new f.Promise(function(t,i){e.pubClickOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.PUB_CLICK,void 0,!1).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireMissedOpportunityTrackerOnce=function(){var e=this;return this.missedOpportunityOneTimePromise.resolve(),new f.Promise(function(t,i){e.missedOpportunityOneTimePromise.getPromise().then(function(){e.eventTracker.emit(m.MISSED_OPPORTUNITY).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdOpportunityTrackerOnce=function(){var e=this;return this.adOpportunityOneTimePromise.resolve(),new f.Promise(function(t,i){e.adOpportunityOneTimePromise.getPromise().then(function(){e.eventTracker.setStage(b.StageName.ADD_OPPORTUNITY),e.eventTracker.emit(m.ADD_OPPORTUNITY).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdInView2secsPlusTrackersOnce=function(){var e=this;return this.adInView2SecsPlusOneTimePromise.resolve(),new f.Promise(function(t,i){e.adInView2SecsPlusOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_IV_2SECSPLUS).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdRenderedTrackersOnce=function(){var e=this;return this.adRenderedOneTimePromise.resolve(),new f.Promise(function(t,i){e.adRenderedOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_RENDERED).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireExitBeforeAdInViewTrackersOnce=function(){var e=this;return this.exitBeforeAdInViewOneTimePromise.resolve(),new f.Promise(function(t,i){e.exitBeforeAdInViewOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.EXIT_BEFORE_ADINVIEW).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.firePageExitTrackersOnce=function(){var e=this;return this.pageExitOneTimePromise.resolve(),new f.Promise(function(t,i){e.pageExitOneTimePromise.getPromise().then(function(){e.eventTracker.setStage(b.StageName.USER_CLOSE_BROWSER),e.eventTracker.emit(m.USER_CLOSE_BROWSER).then(function(){t()})["catch"](function(e){i(e)})})})},e.prototype.fireAdNotReadyTrackersOnce=function(){var e=this;return this.adNotReadyOneTimePromise.resolve(),new f.Promise(function(t,i){e.adNotReadyOneTimePromise.getPromise().then(function(){e.eventTracker.emit(g.AD_NOT_READY).then(function(){t()})["catch"](function(e){i(e)})})})},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/PSwipeUpTracker.ts","/src/renderer/politeswipeup")},{"../../eventtracker/EventConstants":42,"../../logging/LogManager":58,"../../utility/DefferedPromise":267,"../model/TrackerConstants":212,"./PSwipeUpEvent":221,_process:8,buffer:4,"es6-promise":5,timers:9}],225:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/CSS"),f=e("../../logging/LogManager"),g="zStatTable",m=function(){function e(e,t,i,n,r){if(this.enabled=e,this.width=t,this.height=i,this.win=n,this.baseTime=r,this.geckoLogger=f.getLogger("ConsoleHolder"),e){var o=".stat-table{line-height:18px;font-family: 'Roboto','sans-serif';font-size:13px;border-collapse: collapse;background-color: grey;color: white;border-radius: 10px;}";o+=".stat-table td,th {padding: 10px 5px;display: table-cell;text-align: left;vertical-align: middle; border-radius: 2px} ",o+=" table.stat-table tr {border-bottom: 1px solid #444141;}",h.Util.addCSSRule(o,"zzStatDisplayWidget",this.win.document,this.win),this.createAndPositionElement()}}return e.prototype.createAndPositionElement=function(){this.geckoLogger.logDebug("create and position statdisplay"),this.statComponent=this.win.document.createElement("div"),this.statComponent.id="statDisplay",this.statComponent.style.position="fixed",this.statComponent.style.display="block",this.statComponent.style.zIndex="2147483647644",this.statComponent.style.top="40px",this.statComponent.style.right="0",this.win.document.body.appendChild(this.statComponent);var e=this.win.document.createElement("table");e.setAttribute("id",g),e.className="stat-table",this.statComponent.appendChild(e)},e.prototype.show=function(e){if(this.enabled){var t=document.getElementById(g),i=t.insertRow(0),n=i.insertCell(0),r=i.insertCell(1);n.innerText="+ "+((new Date).getTime()-this.baseTime),r.innerText=e}},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/StatDisplay.ts","/src/renderer/politeswipeup")},{"../../logging/LogManager":58,"../../utility/CSS":265,_process:8,buffer:4,timers:9}],226:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DefferedPromise"),f=e("../../logging/LogManager"),g=function(){function e(e,t,i,n){var r=this;this.adContentHandler=e,this.win=t,this.doc=i,this.inlineSpaceGrabber=n,this.calledOnce=!1,this.isDocked=!1,this.pageYOffsetWhenDocked=0,this.version="v3",this.targetVer="v3",this.geckoLogger=f.getLogger("TopDockerV2"),this.dockHolder=function(e,t){var i=r.getAdWrapTopView();r.adContentHandler.getWrapperElement().style.overflow="visible";var n=r.inlineSpaceGrabber.getInlinePosition(r.adContentHandler.getWrapperElement());i<=0&&i+n.height>=0?r.isDocked?r.changeHeight(n,i):(r.dock(),r.isDocked=!0):(r.isDocked&&(r.undock(n,i>0),r.isDocked=!1),r.adContentHandler.getWrapperElement().getBoundingClientRect().top>0&&(t(),r.geckoLogger.logDebug("deactivating top docker"),e.resolve()))},this.adComp=e.getAdComponent()}return e.prototype.activate=function(){var e=this;this.geckoLogger.logDebug("activating top docker");var t=new h,i={resetListener:function(){e.win.removeEventListener("scroll",i.checkPosition)},checkPosition:function(){e.dockHolder(t,i.resetListener)}};return this.win.addEventListener("scroll",i.checkPosition),t.getPromise()},e.prototype.getAdWrapTopView=function(){var e=this.adContentHandler.getWrapperElement(),t=e.offsetTop;return 0!==this.win.pageYOffset&&(this.pageYOffsetWhenDocked=this.win.pageYOffset),t-this.pageYOffsetWhenDocked},e.prototype.dock=function(){this.adComp.style.position="fixed",this.adComp.style.top="0px"},e.prototype.undock=function(e,t){this.adComp.style.position="relative",this.adComp.style.top="",t?(this.adComp.style.width=e.width+"px",this.adComp.style.height=e.height+"px"):this.adComp.style.height="1px"},e.prototype.changeHeight=function(e,t){this.adComp.style.height=e.height+t+"px"},e.prototype.dockingState=function(){return this.isDocked},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/TopDockerV2.ts","/src/renderer/politeswipeup")},{"../../logging/LogManager":58,"../../utility/DefferedPromise":267,_process:8,buffer:4,timers:9}],227:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/DefferedPromise"),f=e("../../logging/LogManager"),g=function(){function e(e,t,i){var n=this;this.adContentHandler=e,this.win=t,this.doc=i,this.isDocked=!1,this.geckoLogger=f.getLogger("TopDockerV3"),
this.scrollEffect=function(e,t){var i=n.wrapperElement.getBoundingClientRect();n.containerElement.getBoundingClientRect().top>0&&i.top>0&&(t(),n.geckoLogger.logDebug("deactivating top docker"),e.resolve());var r=0-i.top,o=n.containerElement.getBoundingClientRect().top,a=Math.abs(r-o);r<i.height&&i.top<0?a>10&&(n.adContentHandler.getWrapperElement().style.overflow="hidden",n.containerElement.style.top=r+"px",n.containerElement.style.transition="top .7s ease"):n.containerElement.style.top="0px"},this.containerElement=this.adContentHandler.getAdComponent(),this.wrapperElement=this.adContentHandler.getWrapperElement()}return e.prototype.activate=function(){var e=this;this.isDocked=!0,this.geckoLogger.logDebug("activating top docker");var t=new h,i={resetListener:function(){e.win.removeEventListener("scroll",i.checkPosition)},checkPosition:function(){e.scrollEffect(t,i.resetListener)}};return this.win.addEventListener("scroll",i.checkPosition),t.getPromise()},e.prototype.dockingState=function(){return this.isDocked},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/TopDockerV3.ts","/src/renderer/politeswipeup")},{"../../logging/LogManager":58,"../../utility/DefferedPromise":267,_process:8,buffer:4,timers:9}],228:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/Utility"),f=e("../../model/TrackerConstants");i.DefaultBehaviour={slideinPercent:["51"],showCloseAfterMs:["2000"],bottomUnit:["{}"],showCloseBtn:["true"],adInViewTrackerPercent:["75"],adInViewTrackerTimeMs:["2000"]};var g=function(){function e(){}return e}();i.Behaviours=g;var m=function(){function e(e){this.attachAfterMs=e}return e}();i.Attach=m;var y=function(){function e(e,t){this.shrinkAfterMs=e,this.shrinkToPercent=t}return e}();i.Shrink=y;var b=function(){function e(){}return e.getBehaviours=function(e){var t=new y(3e3,20),i=JSON.parse(e.bottomUnit[0]);return h.isNullOrUndefined(i.shrinkAfterMs&&h.isNullOrUndefined(i.shrinkToPercent))?t=new y(i.shrinkAfterMs,i.shrinkToPercent):h.isNullOrUndefined(i.attachAfterMs)&&(t=new m(i.attachAfterMs)),{placementId:e.cssSelector[0],slideInPercent:parseInt(e.slideinPercent[0],10),delayClose:parseInt(e.showCloseAfterMs[0],10),showCloseBtn:e.showCloseBtn[0],bottomUnit:t,pubClickTracker:e[f.PublisherTracker.Click],pubImpressionTracker:e[f.PublisherTracker.Impression],adInViewTrackerPercent:parseInt(e.adInViewTrackerPercent[0],10),adInViewTrackerTimeMs:parseInt(e.adInViewTrackerTimeMs[0],10)}},e}();i.BehaviourParser=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/politeswipeup/model/Behaviours.ts","/src/renderer/politeswipeup/model")},{"../../../utility/Utility":275,"../../model/TrackerConstants":212,_process:8,buffer:4,timers:9}],229:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){}return e.getAdSlotPositionValues=function(e,t){var i=["TL","TR","BR","BL"],n=t;return!isNaN(n)&&parseInt(n,10)>0&&i.indexOf(e)>-1?{position:e,width:parseInt(n,10)}:void 0},e}();i.AdSlotPositionProperty=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/positioning/AdSlotPositionProperty.ts","/src/renderer/positioning")},{_process:8,buffer:4,timers:9}],230:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./model/Behaviours"),f=function(){function e(e){this.adData=e}return e.prototype.getBehaviour=function(e){if(1===this.adData.length)return h.BehaviourParser.getBehaviours(this.adData[0].behaviour);var t=this.adData.filter(function(t){return t.adId===e}),i=t.length>0?t[0]:void 0;return i?h.BehaviourParser.getBehaviours(i.behaviour):void 0},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/BehaviourProvider.ts","/src/renderer/vpaid")},{"./model/Behaviours":237,_process:8,buffer:4,timers:9}],231:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=function(){function e(){}return e.prototype.addButtonsToPlayer=function(e,t,i,n){return new h.Promise(function(e,t){e()})},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/VPaidButtonListener.ts","/src/renderer/vpaid")},{_process:8,buffer:4,"es6-promise":5,timers:9}],232:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./states/StateContext"),f=e("./states/BeginState"),g=e("../../utility/DefferedPromise"),m=e("./../watchnengage/WnEDelegator"),y=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,y,b,v){this.eventtracker=e,this.noDemandPromise=o,this.adReadyPromise=a,this.onadClosePromise=v,this.startAdPromise=new g;var P=new g,w=new g;this.delegator=new m(this.eventtracker,r,p[0].behaviour,P,w,this.onadClosePromise),this.wneview=this.delegator.delegate(),this.stateContext=new h(this.wneview,this.eventtracker,t,i,n,r,o,a,s,l,d,this.startAdPromise,c,u,p,new f(y,b),v)}return e.prototype.startAd=function(){this.startAdPromise.resolve()},e.prototype.closeAd=function(){console.log("closeAdcalled")},e.prototype.loadContent=function(){console.log("loadContent")},e.prototype.resume=function(){this.stateContext.PlayableCallback.subscribe(function(e){e&&e.resume()})},e.prototype.pause=function(){this.stateContext.PlayableCallback.subscribe(function(e){e&&e.pause()})},e.prototype.stop=function(){this.stateContext.PlayableCallback.subscribe(function(e){e&&e.stop()})},e.prototype.mute=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.mute(e)})},e.prototype.seek=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.seek(e)})},e.prototype.setVolume=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.setVolume(e)})},e.prototype.resize=function(e,t){this.stateContext.PlayableCallback.subscribe(function(i){i&&i.resize(e,t)})},e.prototype.play=function(){this.stateContext.PlayableCallback.subscribe(function(e){e&&e.play()})},e.prototype.start=function(){this.stateContext.PlayableCallback.subscribe(function(e){e&&e.start()})},e.prototype.close=function(){this.stateContext.PlayableCallback.subscribe(function(e){e&&e.close()})},e.prototype.setMedia=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.setMedia(e)})},e.prototype.onAdReady=function(e){this.adReadyPromise.getPromise().then(function(){e()})},e.prototype.onAdInteraction=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdInteraction(e)})},e.prototype.onError=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onError(e)})},e.prototype.onAdError=function(e){this.noDemandPromise.getPromise().then(function(){e("No ads to serve")})},e.prototype.onBeforePlay=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onBeforePlay(e)})},e.prototype.onPlay=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onPlay(e)})},e.prototype.onPause=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onPause(e)})},e.prototype.onBuffer=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onBuffer(e)})},e.prototype.onBeforeComplete=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onBeforeComplete(e)})},e.prototype.onComplete=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onComplete(e)})},e.prototype.onVolume=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onVolume(e)})},e.prototype.onFullscreen=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onFullscreen(e)})},e.prototype.onResize=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onResize(e)})},e.prototype.onSeek=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onSeek(e)})},e.prototype.onTime=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onTime(e)})},e.prototype.onClick=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onClick(e)})},e.prototype.onMuteChange=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onMuteChange(e)})},e.prototype.onAdVideoFirstQuartile=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdVideoFirstQuartile(e)})},e.prototype.onAdVideoMidpoint=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdVideoMidpoint(e)})},e.prototype.onAdVideoThirdQuartile=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdVideoThirdQuartile(e)})},e.prototype.onAdCompanions=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdCompanions(e)})},e.prototype.onNonLinearAd=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onNonLinearAd(e)})},e.prototype.onAdClick=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdClick(e)})},e.prototype.onAdTime=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdTime(e)})},e.prototype.onAdStarted=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.onAdStarted(e)})},e.prototype.onAdImpression=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.getOnAdImpressionSubscribable().subscribe(e)})},e.prototype.onAdStopped=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.getOnAdStoppedSubscribable().subscribe(e)})},e.prototype.onAdSkipped=function(e){this.stateContext.PlayableCallback.subscribe(function(t){t&&t.getOnAdSkippedSubscribable().subscribe(e)})},e.prototype.addButton=function(e,t,i,n,r,o,a,s,l){this.stateContext.AdPlayerConfigurator.subscribe(function(d){d&&d.addButton(e,t,i,n,r,o,a,s,l)})},e.prototype.showButton=function(e){this.stateContext.AdPlayerConfigurator.subscribe(function(t){t&&t.showButton(e)})},e.prototype.hideButton=function(e){this.stateContext.AdPlayerConfigurator.subscribe(function(t){t&&t.hideButton(e)})},e.prototype.deleteButton=function(e){this.stateContext.AdPlayerConfigurator.subscribe(function(t){t&&t.deleteButton(e)})},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/VPaidPlayable.ts","/src/renderer/vpaid")},{"../../utility/DefferedPromise":267,"./../watchnengage/WnEDelegator":254,"./states/BeginState":239,"./states/StateContext":247,_process:8,buffer:4,timers:9}],233:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("../../logging/LogManager"),g=e("../../utility/DefferedPromise"),m=e("./model/Behaviours"),y=e("./model/Behaviours"),b=e("./VPaidPlayable"),v=e("./VpaidSBRPlayable"),P=e("./VPaidTrackers"),w=e("./model/Behaviours"),S=e("../../config/ConfigHolder"),C=e("./model/Behaviours"),A=e("../../utility/SubscribableCallback"),I=.1,T=!1,B=function(){function e(t,i,n,r,o,a,s,l){this.eventtracker=i,this.placementId=n,this.width=r,this.height=o,this.playableCallback=a,this.name=s,this.adservername=l,this.geckoLogger=f.getLogger("VPaidRenderer"),this.noDemandPromise=new g,this.adReadyPromise=new g,this.adOpportunityPromise=new g,this.missedOpportunityPromise=new g,this.impressionPromise=new g,this.clickPromise=new g,this.renderedPromise=new g,this.iaViewablePromise=new g,this.placementElementPromise=new g,this.behaviorHolder=new y.BehavioursHolder,this.adCompletePromise=new g,this.iaUnitClosedPromise=new g,this.onadClosePromise=new g,this.reloadCallback=new A;var d=this.behaviorHolder.getBehaviours();this.preparedBehaviours=this.createBehaviourPayLoad(t,d),this.vpaidTrackers=new P(i),e.ADSERVER_NAME=this.adservername,e.NAME=this.name}return e.prototype.getVersion=function(){return I},e.prototype.getName=function(){return e.NAME},e.prototype.getAdserverName=function(){return e.ADSERVER_NAME},e.prototype.getIAUnitClosedPromise=function(){return this.iaUnitClosedPromise},e.prototype.getAdStoppedPromise=function(){return this.adCompletePromise},e.prototype.getReloadCallback=function(){return this.reloadCallback},e.prototype.getCapability=function(){return{}},e.prototype.isOnByDefault=function(){return T},e.prototype.getBehaviourForHB=function(){var e={};return e[C.VIDEO_AD_POSITION]=this.preparedBehaviours[C.VIDEO_AD_POSITION],e},e.prototype.getBehaviourForRequest=function(){return this.preparedBehaviours},e.prototype.transform=function(e,t){var i=this.checkInarticleVideoAd(e),n={videoAd:i};return n},e.prototype.reloadAd=function(e,t,i){return{impression:this.impressionPromise.getPromise(),adRendered:this.renderedPromise.getPromise(),click:this.clickPromise.getPromise(),viewable:this.iaViewablePromise.getPromise()}},e.prototype.showAd=function(e,t){var i=this.placementId;h.isNullOrUndefined(this.preparedBehaviours[w.VPAID_DIV_ID])&&(i=this.preparedBehaviours[w.VPAID_DIV_ID][0]);var n=document.getElementById(S.getIdPrefix()+i);if(n)if(e[0].isFoc)this.noDemandPromise.resolve(),this.vpaidTrackers.fireNoDemandTrackerOnce(),this.playableCallback(void 0);else{var r=m.BehaviourParser.getBehaviours(this.preparedBehaviours);if("VpaidSBR"!==this.name){var o=new b(this.eventtracker,this.name,this.preparedBehaviours,this.vpaidTrackers,n,this.noDemandPromise,this.adReadyPromise,t,this.impressionPromise,this.clickPromise,this.renderedPromise,i,e,r.width,r.height,this.onadClosePromise);this.playableCallback(o)}else{var o=new v(this.eventtracker,this.name,this.preparedBehaviours,this.vpaidTrackers,n,this.noDemandPromise,this.adReadyPromise,t,this.impressionPromise,this.clickPromise,this.renderedPromise,i,e,r.width,r.height,this.onadClosePromise);this.playableCallback(o)}}else this.geckoLogger.logError("Failed to find div for : "+i);return{impression:this.impressionPromise.getPromise(),adRendered:this.renderedPromise.getPromise(),click:this.clickPromise.getPromise(),viewable:this.iaViewablePromise.getPromise()}},e.prototype.cancel=function(){},e.prototype.getBehaviourForRenderer=function(e,t){var i={};try{i=this.compareBehaviours(e,t,this.behaviorHolder)}catch(n){this.geckoLogger.logError(h.errorMsg(" getBehaviourForRenderer catch called ",n))}return i},e.prototype.getNoDemandPromise=function(){return this.noDemandPromise},e.prototype.getAdReadyPromise=function(){return this.adReadyPromise},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getMissedOpportunityPromise=function(){return this.missedOpportunityPromise},e.prototype.isSupported=function(){return!0},e.prototype.createBehaviourPayLoad=function(e,t){var i={};try{for(var n in e)e.hasOwnProperty(n)&&n&&h.isNullOrUndefined(e[n][0])&&""!==e[n][0].trim()&&(i[n]=e[n]);for(var r in t)t.hasOwnProperty(r)&&r&&t[r].getDefaultValues().length>0&&!h.isNullOrUndefined(e[r])&&(i[r]=t[r].getDefaultValues())}catch(o){throw this.geckoLogger.logError(h.errorMsg(" Invalid values by publisher ",o)),new Error("Invalid values for publisherBehaviour property "+o)}return i},e.prototype.checkInarticleVideoAd=function(e){if(void 0!==e.xmlData)return{xmlData:e.xmlData}},e.prototype.compareBehaviours=function(e,t,i){var n={};for(var r in e)if(e.hasOwnProperty(r)&&r){var o=e[r].length>1,a=!h.isNullOrUndefined(t[r]),s=!a&&t[r].length>1,l=i.getBehaviour(r);if(h.isNullOrUndefined(l)||(n[r]=e[r]),h.isNullOrUndefined(l)){if(!this.validatePropertyWithDefaultValues(e[r],l))throw new Error("Invalid values for "+r);if(a)if(o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else{if(!h.isNullOrUndefined(e[r])||!h.isNullOrUndefined(l))throw new Error("Not possible values for "+r);n[r]=e[r]}else if(s&&o&&h.isNullOrUndefined(l))n[r]=[l.makeChoiseAndGetValue(e,t)];else if(o&&1===t[r].length&&h.inArray(e[r],t[r][0]))n[r]=t[r];else{if(1!==t[r].length||1!==e[r].length||t[r][0]!==e[r][0])throw new Error("Not possible values for  "+r);n[r]=e[r]}}}return n},e.prototype.getPlacementElement=function(){return this.placementElementPromise},e.prototype.validatePropertyWithDefaultValues=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n]){if(t.getAllValidValues().length<1){i=!0;continue}if(i=h.inArray(t.getAllValidValues(),e[n]),i===!0)continue;break}return i},e}();B.NAME="VPaidRenderer",B.ADSERVER_NAME="Inarticle",t.exports=B}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/VPaidRenderer.ts","/src/renderer/vpaid")},{"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"./VPaidPlayable":232,"./VPaidTrackers":235,"./VpaidSBRPlayable":236,"./model/Behaviours":237,_process:8,buffer:4,timers:9}],234:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("../vpaid/VPaidRenderer"),g=function(e){function t(t,i,n,r,o,a,s,l){return e.call(this,t,i,n,r,o,a,s,l)||this}return h(t,e),t}(f);g.NAME="VpaidSBR",g.ADSERVER_NAME="watchnengage",t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/VPaidSBRRenderer.ts","/src/renderer/vpaid")},{"../vpaid/VPaidRenderer":233,_process:8,buffer:4,timers:9}],235:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../eventtracker/EventConstants"),f=e("../../utility/DefferedPromise"),g=function(){function e(e){var t=this;this.eventTracker=e,this.noDemandOneTimePromise=new f,this.parallelReqOneTimePromise=new f,this.parallelReqOneTimePromise.getPromise().then(function(){t.eventTracker.emit(h.PARALLEL_REQUESTS)}),this.noDemandOneTimePromise.getPromise().then(function(){t.eventTracker.emit(h.NO_DEMAND)})}return e.prototype.fireParallelRequestsTrackerOnce=function(){return this.parallelReqOneTimePromise.resolve(),this.parallelReqOneTimePromise.getPromise()},e.prototype.fireNoDemandTrackerOnce=function(){return this.noDemandOneTimePromise.resolve(),this.noDemandOneTimePromise.getPromise()},e.prototype.fireChannelDebugTracker=function(e){var t=this;this.eventTracker.getMarcoProcessor().setAI(e),this.eventTracker.emit(h.CHANNEL_DEBUG).then(function(){t.eventTracker.getMarcoProcessor().setAI("")})},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/VPaidTrackers.ts","/src/renderer/vpaid")},{"../../eventtracker/EventConstants":42,"../../utility/DefferedPromise":267,_process:8,buffer:4,timers:9}],236:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("../vpaid/VPaidPlayable"),g=function(e){function t(t,i,n,r,o,a,s,l,d,c,u,p,h,f,g,m){var y=e.call(this,t,i,n,r,o,a,s,l,d,c,u,p,h,f,g,m)||this;return y.onAdClosedPromise=m,y}return h(t,e),t.prototype.onAdStopped=function(e){this.onAdClosedPromise.getPromise().then(function(){e(void 0)})},t.prototype.onAdSkipped=function(e){this.onAdClosedPromise.getPromise().then(function(){e("")})},t}(f);t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/VpaidSBRPlayable.ts","/src/renderer/vpaid")},{"../vpaid/VPaidPlayable":232,_process:8,buffer:4,timers:9}],237:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/Utility");i.TYPE="type",i.WIDTH="width",i.HEIGHT="height",i.PLAY_AD_ON_READY="playAdOnReady",i.MUTE_ON_LOAD="muteOnLoad",i.SOUND_ON_LOAD="SoundOnload",i.HIDECONTROLS="hideControls",i.AUTOPLAY="autoplay",i.DEBUG_TOKEN="debugToken",i.NO_OFTAGS_INITIALIZED_AFTER_ERROR="noOfTagsInitlizedAfterErr",i.PARALLELISM="parallelism",i.MAX_PARALLEL_CALLS="maxParallelCalls",i.MAX_PARALLELISM_TRIGGERED="maxParallelismtriggered",i.PTIMEOUT="ptimeout",i.DTIMEOUT="dtimeout",i.NO_PREF="NoPref",i.VPAID_DIV_ID="vpaidDivId",i.VIDEO_AD_POSITION="videoAdPosition",i.DefaultBehaviour={};var f=function(){function e(){this.behaviours={},this.behaviours[i.PARALLELISM]=new g(i.PARALLELISM,["0"],["0","1"],this.makeChoice),this.behaviours[i.MAX_PARALLEL_CALLS]=new g(i.MAX_PARALLEL_CALLS,[],[],this.makeChoice),this.behaviours[i.MAX_PARALLELISM_TRIGGERED]=new g(i.MAX_PARALLELISM_TRIGGERED,[],[],this.makeChoice),this.behaviours[i.VIDEO_AD_POSITION]=new g(i.VIDEO_AD_POSITION,["preroll","outstream"],["preroll","outstream","NoPref"],this.makeChoiceForNoVideoAdPosition),this.behaviours[i.PTIMEOUT]=new g(i.PTIMEOUT,[],[],this.makeChoice),this.behaviours[i.DTIMEOUT]=new g(i.DTIMEOUT,[],[],this.makeChoice),this.behaviours[i.SOUND_ON_LOAD]=new g(i.SOUND_ON_LOAD,["0"],["0","1","NoPref"],this.makeChoiceForSoundOnload)}return e.prototype.makeChoice=function(){},e.prototype.makeChoiceForSoundOnload=function(e,t){if(h.isNullOrUndefined(t[i.SOUND_ON_LOAD])){if(e[i.SOUND_ON_LOAD].length>1&&t[i.SOUND_ON_LOAD].length>=1)return t[i.SOUND_ON_LOAD][0]}else if(e[i.SOUND_ON_LOAD].length>=1)return e[i.SOUND_ON_LOAD][0];return"0"},e.prototype.makeChoiceForNoVideoAdPosition=function(e,t){if(h.isNullOrUndefined(t[i.VIDEO_AD_POSITION])){if(e[i.VIDEO_AD_POSITION].length>1&&t[i.VIDEO_AD_POSITION].length>=1)return t[i.VIDEO_AD_POSITION][0]}else if(e[i.VIDEO_AD_POSITION].length>=1)return"oustream";return"oustream"},e.prototype.getBehaviours=function(){return this.behaviours},e.prototype.getBehaviour=function(e){return this.behaviours[e]},e}();i.BehavioursHolder=f;var g=function(){function e(e,t,i,n){this.name=e,this.defaultValues=t,this.allValidValues=i,this.makeChoiceCallback=n}return e.prototype.getName=function(){return this.name},e.prototype.getAllValidValues=function(){return this.allValidValues},e.prototype.getDefaultValues=function(){return this.defaultValues},e.prototype.getAllValidValuesWithoutNoPref=function(){return h.removeStringFromArray(this.allValidValues,i.NO_PREF)},e.prototype.makeChoiseAndGetValue=function(e,t){return this.makeChoiceCallback?this.makeChoiceCallback(e,t):""},e}();i.BehavioursParam=g;var m=function(){function e(){}return e}();i.Behaviours=m;var y=function(){function e(){}return e.getBehaviours=function(e){e.type?e.type[0]:"";return{placementId:h.isNullOrUndefined(e[i.VPAID_DIV_ID])?e[i.VPAID_DIV_ID][0]:"",type:h.isNullOrUndefined(e[i.TYPE])?e[i.TYPE][0]:"auto",width:h.isNullOrUndefined(e[i.WIDTH])?parseInt(e[i.WIDTH][0],10):700,height:h.isNullOrUndefined(e[i.HEIGHT])?parseInt(e[i.HEIGHT][0],10):393,playAdOnReady:!!h.isNullOrUndefined(e[i.PLAY_AD_ON_READY])&&"true"===e[i.PLAY_AD_ON_READY][0],muteOnLoad:!h.isNullOrUndefined(e[i.MUTE_ON_LOAD])||"true"===e[i.MUTE_ON_LOAD][0],soundOnload:h.isNullOrUndefined(e[i.SOUND_ON_LOAD])?parseInt(e[i.SOUND_ON_LOAD][0],10):0,hideControls:!h.isNullOrUndefined(e[i.HIDECONTROLS])||"true"===e[i.HIDECONTROLS][0],autoplay:!h.isNullOrUndefined(e[i.AUTOPLAY])||"true"===e[i.AUTOPLAY][0],debugToken:h.isNullOrUndefined(e[i.DEBUG_TOKEN])?e[i.DEBUG_TOKEN][0]:"",noOfTagsInitlizedAfterErr:h.isNullOrUndefined(e[i.NO_OFTAGS_INITIALIZED_AFTER_ERROR])?parseInt(e[i.NO_OFTAGS_INITIALIZED_AFTER_ERROR][0],10):1,parallelism:h.isNullOrUndefined(e[i.PARALLELISM])?parseInt(e[i.PARALLELISM][0],10):0,maxParallelCalls:h.isNullOrUndefined(e[i.MAX_PARALLEL_CALLS])?parseInt(e[i.MAX_PARALLEL_CALLS][0],10):25,maxParallelismtriggered:h.isNullOrUndefined(e[i.MAX_PARALLELISM_TRIGGERED])?parseInt(e[i.MAX_PARALLELISM_TRIGGERED][0],10):10,ptimeout:h.isNullOrUndefined(e[i.PTIMEOUT])?parseInt(e[i.PTIMEOUT][0],10):3e3,vAdPos:h.isNullOrUndefined(e[i.VIDEO_AD_POSITION])?e[i.VIDEO_AD_POSITION][0]:"oustream",dtimeout:h.isNullOrUndefined(e[i.DTIMEOUT])?1e3*parseInt(e[i.DTIMEOUT][0],10):void 0}},e}();i.BehaviourParser=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/model/Behaviours.ts","/src/renderer/vpaid/model")},{"../../../utility/Utility":275,_process:8,buffer:4,timers:9}],238:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("./PlayingAdState"),y=e("../VPaidButtonListener"),b=e("./../../watchnengage/model/WnEStyle"),v=function(){function e(e,t,i,n,r){this.playable=e,this.adObject=t,this.behaviour=i,this.configurator=n,this.lookingForAnAdState=r,this.geckoLogger=g.getLogger("AdSetupState")}return e.prototype.getName=function(){return h.StateName.AdSetupState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.adObject.adId+":"+this.adObject.mediaURL},e.prototype.doAction=function(e){var t=this;e.IsSBR&&(b.applyCss(window,document),e.WnView.createPlaceHolderStructure(this.adObject));var i=new y,n=!1;return i.addButtonsToPlayer(this.configurator,this.adObject.adType,this.behaviour,this.playable.isMute()).then(function(){e.ImpressionPromise.resolve(),"undefined"!=typeof t.adObject.CreativeProperties&&null!==t.adObject.CreativeProperties&&(n=!0),e.RenderedPromise.resolve(),e.setStateAndDoAction(new m(e,t.playable))})["catch"](function(e){t.geckoLogger.logError(f.errorMsg("iaViewabilityMonitor inside mergedBehaviorsPromise catch called ",e))}),f.createPromise(void 0)},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/AdSetupState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"../VPaidButtonListener":231,"./../../watchnengage/model/WnEStyle":259,"./PlayingAdState":245,"./State":246,_process:8,buffer:4,timers:9}],239:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("./LookingForAnAdState"),y=function(){function e(e,t){this.width=e,this.height=t,this.geckoLogger=g.getLogger("BeginState"),this.mediaWidthForRatio=16,this.mediaHeightForRatio=9}return e.prototype.getName=function(){return h.StateName.BeginState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return""},e.prototype.doAction=function(e){try{e.setStateAndDoAction(new m(e.AdData,e.PlacementDiv,e.VPaidTrackers,this.width,this.height))}catch(t){this.geckoLogger.logError(f.errorMsg("initialise() catch called ",t))}return f.createPromise(void 0)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/BeginState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./LookingForAnAdState":241,"./State":246,_process:8,buffer:4,timers:9}],240:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=function(){function e(e){this.wneview=e,this.geckoLogger=g.getLogger("CompleteState"),this.wneview&&this.wneview.showQuestionAndAnswerForm()}return e.prototype.getName=function(){return h.StateName.CompleteState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){return f.createPromise(void 0)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/CompleteState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./State":246,_process:8,buffer:4,timers:9}],241:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("../../../utility/DefferedPromise"),y=e("./LookingForGuaranteedAdState"),b=e("./LookingForNonGuaranteedAdState"),v=e("./NoDemandState"),P={GUARANTEED:"guranteed",NONGUARANTEED:"nonGuranteed"},w=function(){function e(e,t,i,n,r){this.adData=e,this.playerWidth=n,this.playerHeight=r,this.geckoLogger=g.getLogger("LookingForAnAdState"),this.guranteedAdCounter=0,this.isNonGuaranteedStarted=!1,this.onParallelInitializedPromise=new m,this.playPromise=new m;var o=this.filterAds(e);this.guaranteedAds=o.guaranteedAds,this.nonGuarantueedAds=o.nonGuranteedAds,this.nonGuarantueedAds.length>0&&(this.lookingForNonGuaranteedState=new b(this.nonGuarantueedAds,this.onParallelInitializedPromise,this,t,this.playPromise,this.playerWidth,this.playerHeight)),this.onParallelInitializedPromise.getPromise().then(function(){i.fireParallelRequestsTrackerOnce()}),this.geckoLogger.logInfo("Total guaranteed count"+this.guaranteedAds.length),this.geckoLogger.logInfo("Total non-guaranteed count"+this.nonGuarantueedAds.length)}return e.prototype.getName=function(){return h.StateName.LookingForAnAdState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){return this.guranteedAdCounter<this.guaranteedAds.length?(this.geckoLogger.logInfo("Attempting guaranteed ad number"+this.guranteedAdCounter+1),e.setState(new y(this.guranteedAdCounter,this.guaranteedAds[this.guranteedAdCounter],this.onParallelInitializedPromise,this,this.playPromise,this.playerWidth,this.playerHeight)),this.guranteedAdCounter++):this.nonGuarantueedAds.length>0?this.isNonGuaranteedStarted?e.setState(new v):(this.geckoLogger.logInfo("Attempting non guaranteed ads"),this.isNonGuaranteedStarted=!0,e.setState(this.lookingForNonGuaranteedState)):e.setState(new v),
e.doAction(),f.createPromise(void 0)},e.prototype.filterAds=function(e){for(var t=[],i=[],n=0,r=e.length;n<r;n++)if(f.isNullOrUndefined(e[n])){var o=e[n];o.buyType===P.NONGUARANTEED?i.push(o):t.push(o)}return{guaranteedAds:t,nonGuranteedAds:i}},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/LookingForAnAdState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/DefferedPromise":267,"../../../utility/Utility":275,"./LookingForGuaranteedAdState":242,"./LookingForNonGuaranteedAdState":243,"./NoDemandState":244,"./State":246,_process:8,buffer:4,timers:9}],242:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("../video/GuaranteedPlayer"),y=e("./WaitingForStartAdState"),b=e("../../../utility/SubscribableCallback"),v=function(){function e(e,t,i,n,r,o,a){this.guaranteedAdCounter=e,this.adData=t,this.onParallelInitializedPromise=i,this.lookingForAnAdState=n,this.playPromise=r,this.playerWidth=o,this.playerHeight=a,this.geckoLogger=g.getLogger("LookingForGuaranteedAdState")}return e.prototype.getName=function(){return h.StateName.LookingForGuaranteedState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.adData.adId},e.prototype.doAction=function(e){var t=this;try{var i=e.BehaviourProvider.getBehaviour(this.adData.adId);if(i){var n=new b,r=n.subscribe(function(i){t.geckoLogger.logError("Guaranteed Player failed, trying the next ad"),e.setStateAndDoAction(t.lookingForAnAdState)}),o=new m(this.adData,this.guaranteedAdCounter,e.PlacementDiv,i),a=o.createGuranteedPlayer(e.HBHelper,this.onParallelInitializedPromise,e.PlacementDiv,this.guaranteedAdCounter,this.playerWidth,this.playerHeight,n);a.configPromise.then(function(i){t.geckoLogger.logInfo(" AdReady : "+i.getId()+" "),e.AdReadyPromise.resolve(),a.playablePromise.then(function(o){r(),e.setStateAndDoAction(new y(i,o,t.playPromise,a.adDetailsCallback,n,t.onParallelInitializedPromise,t.lookingForAnAdState))})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from playable ",i)),e.setStateAndDoAction(t.lookingForAnAdState)})})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from configurator",i)),e.setStateAndDoAction(t.lookingForAnAdState)})}else e.setStateAndDoAction(this.lookingForAnAdState)}catch(s){this.geckoLogger.logError(f.errorMsg(" Error creating guaranteed player",s)),e.setStateAndDoAction(this.lookingForAnAdState)}return f.createPromise(void 0)},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/LookingForGuaranteedAdState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/SubscribableCallback":274,"../../../utility/Utility":275,"../video/GuaranteedPlayer":250,"./State":246,"./WaitingForStartAdState":249,_process:8,buffer:4,timers:9}],243:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("./WaitingForStartAdState"),y=e("../video/NonGuaranteedPlayer"),b=e("../../../utility/SubscribableCallback"),v=function(){function e(e,t,i,n,r,o,a){var s=this;this.adData=e,this.onParallelInitializedPromise=t,this.lookingForAnAdState=i,this.playPromise=r,this.playerWidth=o,this.playerHeight=a,this.geckoLogger=g.getLogger("LookingForNonGuaranteedAdState"),this.errorFromPlayerFlag=!1,this.errorSubsCallback=new b;try{this.nonGuaranteedPlayer=new y(this.adData),this.errorUnsubscribe=this.errorSubsCallback.subscribe(function(e){s.errorFromPlayerFlag=!0}),this.player=this.nonGuaranteedPlayer.createNonGuaranteedPlayer(this.onParallelInitializedPromise,n,this.playerWidth,this.playerHeight,this.errorSubsCallback)}catch(l){this.geckoLogger.logError(f.errorMsg(" Error while creating the non guaranteed player",l))}}return e.prototype.getName=function(){return h.StateName.LookingForNonGuaranteedState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this;return this.nonGuaranteedPlayer?(this.errorFromPlayerFlag?(this.geckoLogger.logError("Non Guaranteed Player failed, trying the next ad"),e.setStateAndDoAction(this.lookingForAnAdState)):(this.errorUnsubscribe(),this.errorUnsubscribe=this.errorSubsCallback.subscribe(function(i){t.geckoLogger.logError("Non Guaranteed Player failed in action, trying the next ad"),e.setStateAndDoAction(t.lookingForAnAdState)})),this.nonGuaranteedPlayer.show(),this.player.configPromise.then(function(i){t.geckoLogger.logInfo(" AdReady : "+i.getId()+" "),e.AdReadyPromise.resolve(),t.player.playablePromise.then(function(n){t.errorUnsubscribe(),e.setStateAndDoAction(new m(i,n,t.playPromise,t.player.adDetailsCallback,t.errorSubsCallback,t.onParallelInitializedPromise,t.lookingForAnAdState))})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from playable ",i)),e.setStateAndDoAction(t.lookingForAnAdState)})})["catch"](function(i){t.geckoLogger.logError(f.errorMsg(" Error from configurator",i)),e.setStateAndDoAction(t.lookingForAnAdState)})):(this.geckoLogger.logError("Moving to next state since non guaranteed player not created"),e.setStateAndDoAction(this.lookingForAnAdState)),f.createPromise(void 0)},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/LookingForNonGuaranteedAdState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/SubscribableCallback":274,"../../../utility/Utility":275,"../video/NonGuaranteedPlayer":251,"./State":246,"./WaitingForStartAdState":249,_process:8,buffer:4,timers:9}],244:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=function(){function e(){this.geckoLogger=g.getLogger("NoDemandState")}return e.prototype.getName=function(){return h.StateName.NoDemandState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){return e.PlayableCallback.notify(void 0),e.NoDemandPromise.resolve(),e.VPaidTrackers.fireNoDemandTrackerOnce(),f.createPromise(void 0)},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/NoDemandState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./State":246,_process:8,buffer:4,timers:9}],245:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("./CompleteState"),y=function(){function e(e,t){var i=this;this.context=e,this.playable=t,this.geckoLogger=g.getLogger("PlayingAdState"),this.isFullscreen=!1,this.playable.onAdClick(function(){i.geckoLogger.logInfo("AdClickHandler called"),e.ClickPromise.resolve()})}return e.prototype.getName=function(){return h.StateName.PlayingAdState},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.getStateSpecificCallbackPairs=function(e){var t=[];return t.push({onSubscribeMethod:this.playable.getOnAdSkippedSubscribable(),callbackMethod:function(){e.IsSBR?e.setStateAndDoAction(new m(e.WnView)):e.setStateAndDoAction(new m)}}),t.push({onSubscribeMethod:this.playable.getOnAdStoppedSubscribable(),callbackMethod:function(){e.IsSBR?e.setStateAndDoAction(new m(e.WnView)):e.setStateAndDoAction(new m)}}),t},e.prototype.doAction=function(e){return console.log("playing ad state"),f.createPromise(void 0)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/PlayingAdState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./CompleteState":240,"./State":246,_process:8,buffer:4,timers:9}],246:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e[e.BeginState=0]="BeginState",e[e.LookingForAnAdState=1]="LookingForAnAdState",e[e.LookingForGuaranteedState=2]="LookingForGuaranteedState",e[e.LookingForNonGuaranteedState=3]="LookingForNonGuaranteedState",e[e.NoDemandState=4]="NoDemandState",e[e.WaitingForStartAdState=5]="WaitingForStartAdState",e[e.TryingAdState=6]="TryingAdState",e[e.AdSetupState=7]="AdSetupState",e[e.PlayingAdState=8]="PlayingAdState",e[e.PauseAdState=9]="PauseAdState",e[e.AdCompleteState=10]="AdCompleteState",e[e.CompleteState=11]="CompleteState"}(p=i.StateName||(i.StateName={}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/State.ts","/src/renderer/vpaid/states")},{_process:8,buffer:4,timers:9}],247:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../logging/LogManager"),g=e("../BehaviourProvider"),m=e("../../../utility/SubscribableCallback"),y=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p,y,b,v,P){var w=this;this.wneview=e,this.eventtracker=t,this.name=i,this.behaviours=n,this.vpaidTrackers=r,this.placementDiv=o,this.noDemandPromise=a,this.adReadyPromise=s,this.hbHelper=l,this.impressionPromise=d,this.clickPromise=c,this.startAdPromise=u,this.renderedPromise=p,this.placementId=y,this.adData=b,this.state=v,this.onAdClosedPromise=P,this.logger=f.getLogger("StateContext"),this.playableCallback=new m,this.configuratorCallback=new m,this.timeOutAction=function(){w.logger.logInfo("Timing out in state : "+w.state.getName()),w.VPaidTrackers.fireChannelDebugTracker("VPAID-CONTEXT-TIMEOUT:"+h.StateName[w.state.getName()]+":"+(w.state.timeoutDetails()?w.state.timeoutDetails():""))},this.behaviourProvider=new g(b),this.setState(v),this.doAction()}return Object.defineProperty(e.prototype,"AdClosePromise",{get:function(){return this.onAdClosedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Behaviours",{get:function(){return this.behaviours},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSBR",{get:function(){return"VpaidSBR"===this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EventTracker",{get:function(){return this.eventtracker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"VPaidTrackers",{get:function(){return this.vpaidTrackers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NoDemandPromise",{get:function(){return this.noDemandPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdReadyPromise",{get:function(){return this.adReadyPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ImpressionPromise",{get:function(){return this.impressionPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClickPromise",{get:function(){return this.clickPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RenderedPromise",{get:function(){return this.renderedPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementId",{get:function(){return this.placementId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlacementDiv",{get:function(){return this.placementDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HBHelper",{get:function(){return this.hbHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StartAdPromise",{get:function(){return this.startAdPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BehaviourProvider",{get:function(){return this.behaviourProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayableCallback",{get:function(){return this.playableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdPlayerConfigurator",{get:function(){return this.configuratorCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AdData",{get:function(){return this.adData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WnView",{get:function(){return this.wneview},enumerable:!0,configurable:!0}),e.prototype.setState=function(e){this.logger.logInfo("State changing from "+h.StateName[this.state.getName()]+" to "+h.StateName[e.getName()]),this.state=e},e.prototype.doAction=function(){if(this.logger.logInfo("performing State action "+h.StateName[this.state.getName()]),this.stateTimeout&&clearTimeout(this.stateTimeout),this.prevStateSpecificCallback)for(var e in this.prevStateSpecificCallback)this.prevStateSpecificCallback.hasOwnProperty(e)&&this.prevStateSpecificCallback[e]&&this.prevStateSpecificCallback[e]();this.prevStateSpecificCallback=[];var t=this.state.getStateSpecificCallbackPairs(this);if(t)for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var n=t[i];this.prevStateSpecificCallback.push(n.onSubscribeMethod.subscribe(n.callbackMethod))}this.state.canTimeout()&&(this.stateTimeout=setTimeout(this.timeOutAction,5e3)),this.state.doAction(this)},e.prototype.setStateAndDoAction=function(e){this.setState(e),this.doAction()},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/StateContext.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/SubscribableCallback":274,"../BehaviourProvider":230,"./State":246,_process:8,buffer:4,timers:9}],248:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("./AdSetupState"),y=e("../../../video/player/Player"),b=function(){function e(e,t,i,n,r,o,a){this.configurator=e,this.playable=t,this.playPromise=i,this.adDetailsCallback=n,this.errorSubsCallback=r,this.onParallelInitializedPromise=o,this.lookingForAnAdState=a,this.geckoLogger=g.getLogger("Galaxy: TryingAdState"),this.callAdPlayableCallback=!0}return e.prototype.getName=function(){return h.StateName.TryingAdState},e.prototype.canTimeout=function(){return!0},e.prototype.timeoutDetails=function(){return this.playable.getId()},e.prototype.getStateSpecificCallbackPairs=function(e){var t=this,i=[];return i.push({onSubscribeMethod:this.playable.getOnAdImpressionSubscribable(),callbackMethod:function(i){t.geckoLogger.logInfo(" onAdImpression : "+t.playable.getId()+",  "+i.CreativeProperties.CP_ADID);var n=e.BehaviourProvider.getBehaviour(i.CreativeProperties.CP_ADID);n?(e.setState(new m(t.playable,i,n,t.configurator,t.lookingForAnAdState)),e.doAction()):t.geckoLogger.logError("No behavour for the adid "+i.CreativeProperties.CP_ADID)}}),i.push({onSubscribeMethod:this.errorSubsCallback,callbackMethod:function(i){t.geckoLogger.logError("Player failed with error "+i),e.setStateAndDoAction(t.lookingForAnAdState)}}),i.push({onSubscribeMethod:this.adDetailsCallback,callbackMethod:function(e){e.selectedPlayer===y.PLAYERTYPE.HTML5&&(t.geckoLogger.logInfo("calling play on Html5 player "),setTimeout(function(){t.geckoLogger.logInfo("adSelected play called "),t.playable.play()},500))}}),i},e.prototype.doAction=function(e){var t=this;return this.onParallelInitializedPromise.getPromise().then(function(){t.geckoLogger.logDebug("onParallelInitialized : "),e.VPaidTrackers.fireParallelRequestsTrackerOnce()}),this.playable.onPlay(function(){t.geckoLogger.logInfo("Play called")}),this.geckoLogger.logDebug("Begin play"),this.playable.start(),this.playPromise.resolve(),f.createPromise(void 0)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/TryingAdState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"../../../video/player/Player":286,"./AdSetupState":238,"./State":246,_process:8,buffer:4,timers:9}],249:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./State"),f=e("../../../utility/Utility"),g=e("../../../logging/LogManager"),m=e("./TryingAdState"),y=function(){function e(e,t,i,n,r,o,a){this.configurator=e,this.playable=t,this.playPromise=i,this.adDetailsCallback=n,this.errorSubsCallback=r,this.onParallelInitializedPromise=o,this.lookingForAnAdState=a,this.geckoLogger=g.getLogger("WaitingForStartAdState")}return e.prototype.getName=function(){return h.StateName.WaitingForStartAdState},e.prototype.getStateSpecificCallbackPairs=function(e){},e.prototype.canTimeout=function(){return!1},e.prototype.timeoutDetails=function(){},e.prototype.doAction=function(e){var t=this;return e.PlayableCallback.notify(this.playable),e.AdPlayerConfigurator.notify(this.configurator),e.StartAdPromise.getPromise().then(function(){e.setStateAndDoAction(new m(t.configurator,t.playable,t.playPromise,t.adDetailsCallback,t.errorSubsCallback,t.onParallelInitializedPromise,t.lookingForAnAdState))}),f.createPromise(void 0)},e}();t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/states/WaitingForStartAdState.ts","/src/renderer/vpaid/states")},{"../../../logging/LogManager":58,"../../../utility/Utility":275,"./State":246,"./TryingAdState":248,_process:8,buffer:4,timers:9}],250:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/Utility"),f=e("../../../config/ConfigHolder"),g=e("../../../video/player/ParallelTagGenerator"),m=e("../../../logging/LogManager"),y=e("../../../video/player/VideoPlayer"),b=e("./PlayerHelper"),v=function(){function e(e,t,i,n){this.playerData=e,this.behaviour=n,this.geckoLogger=m.getLogger("GuaranteedPlayer"),this.pdmId=e.placmentId+"_"+t+"_"+t,this.pDiv=b.createPlayerDiv(this.pdmId,i,document)}return e.prototype.createGuranteedPlayer=function(e,t,i,n,r,o,a){var s=this;this.geckoLogger.logInfo(" creating Guranteed Player : "+this.playerData.adId+" ");var l=this.playerData.domDestination;l.style.display="none";var d=this.playerData.content,c="";d.videoAd?d.videoAd.xmlData&&(c=d.videoAd.xmlData):c="<VAST></Vast>";var u=!1;if(this.behaviour.parallelism&&!h.isNullOrUndefined(this.playerData.maxNonGuranteed)){var p=this.behaviour.parallelism;u=this.playerData.isFoc||1===p}var f=this.HBResponseChecker(this.playerData.placmentId,c,e),g=f.hbrespXML,m=f.adTagXML;c=m;var b=this.createGuranteedPlayerConfig(c,g,this.behaviour,u,this.playerData,r,o),v=function(e){s.geckoLogger.logInfo(" onAdError from contructor of configurator : "+s.pdmId+" "),s.pDiv.style.display="none"},P=new y;return P.createAd(this.pdmId,b,window,v,t,a)},e.prototype.createGuranteedPlayerConfig=function(e,t,i,n,r,o,a){var s=!0,l=[],d=1!==i.soundOnload,c={type:i.type,adtag:e,width:o,height:a,playAdOnReady:i.playAdOnReady,muteOnLoad:d,debugToken:i.debugToken,hideControls:!0};if(t&&(c.hbEnable=!0,c.hbrespXML=t),n){if(h.isNullOrUndefined(r)){s=!1;var u=f.getAdServerVastUrl(),p={nid:r.network,pubid:r.publisher,chanid:r.channel,dimid:r.dimension,parallelism:i.parallelism?i.parallelism:0,maxParallelCalls:i.maxParallelCalls?i.maxParallelCalls:10,maxParallelismtriggered:i.maxParallelismtriggered,ptimeout:i.ptimeout?i.ptimeout:3,dtimeout:i.dtimeout?i.dtimeout:void 0,adExpressUrl:u,noOfTagsInitlizedAfterErr:i.noOfTagsInitlizedAfterErr?i.noOfTagsInitlizedAfterErr:1,thirdPartyClickURL:r.thirdPartyClickURL,thirdPartyImprURL:r.thirdPartyImprURL,behaviour:i,adTag:e,muteOnLoad:1!==i.soundOnload};t&&(p.hbEnable=!0,p.hbrespXML=t),l.push(p)}var m=g.generateParallelConfig(l,h.getTopWindowPageUrl(),s,o,a);m&&(c.parallel=m)}return c},e.prototype.HBResponseChecker=function(e,t,i){var n;try{if(i&&t){var r=i.getResponse(i.getWinningSlotId());r&&(r.VastUrl?t=t.replace(/http:\/\/dummyurlforrubicon.com\//,r.VastUrl):r.VastXml&&t.indexOf("dummyurlforrubicon.com")!==-1&&(n=r.VastXml))}}catch(o){this.geckoLogger.logInfo("Failed in HBResponseChecker ")}return{hbrespXML:n,adTagXML:t}},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/video/GuaranteedPlayer.ts","/src/renderer/vpaid/video")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"../../../utility/Utility":275,"../../../video/player/ParallelTagGenerator":285,"../../../video/player/VideoPlayer":287,"./PlayerHelper":252,_process:8,buffer:4,timers:9}],251:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../logging/LogManager"),f=e("./PlayerHelper"),g=e("../../../utility/Utility"),m=e("../../../config/ConfigHolder"),y=e("../../../video/player/ParallelTagGenerator"),b=e("../model/Behaviours"),v=e("../../../video/player/VideoPlayer"),P=e("../model/Behaviours"),w=function(){function e(e){this.adData=e,this.geckoLogger=h.getLogger("NonGuaranteedPlayer")}return e.prototype.createNonGuaranteedPlayer=function(e,t,i,n,r){var o=this;this.geckoLogger.logInfo(" Creating Non Guranteed Player ");var a=this.adData[0].placmentId+"_NonGuaranteed",s=this.adData[0].behaviour[b.DEBUG_TOKEN]?this.adData[0].behaviour[b.DEBUG_TOKEN][0]:"",l=this.adData[0].behaviour.dtimeout?P.BehaviourParser.getBehaviours(this.adData[0].behaviour).dtimeout:void 0,d=this.adData[0].behaviour.ptimeout?P.BehaviourParser.getBehaviours(this.adData[0].behaviour).ptimeout:3;this.nonGuaranteedPlayerDiv=f.createPlayerDiv(a,t,document),this.hide();var c={type:"auto",width:i,height:n,adtag:"<VAST></VAST>",playAdOnReady:!1,muteOnLoad:!0,debugToken:s,demandPartnerTimeout:l,selectionDelayMs:d},u=this.createNonGuranteedPlayerConfig(this.adData,i,n);c.parallel=u;var p=function(e,t,i){o.geckoLogger.logError("AdError callback called :: "+e)},h=new v;return h.createAd(a,c,window,p,e,r)},e.prototype.show=function(){this.nonGuaranteedPlayerDiv&&(this.nonGuaranteedPlayerDiv.style.display="block",this.nonGuaranteedPlayerDiv.style.visibility="visible",this.nonGuaranteedPlayerDiv.style.position="",this.nonGuaranteedPlayerDiv.style.left="",this.nonGuaranteedPlayerDiv.style.top="")},e.prototype.hide=function(){this.nonGuaranteedPlayerDiv&&(this.nonGuaranteedPlayerDiv.style.position="fixed",this.nonGuaranteedPlayerDiv.style.visibility="hidden",this.nonGuaranteedPlayerDiv.style.left="-99999px",this.nonGuaranteedPlayerDiv.style.top="-99999px")},e.prototype.createNonGuranteedPlayerConfig=function(e,t,i){for(var n=[],r=!0,o=0,a=e.length;o<a;o++)if(g.isNullOrUndefined(e[o])){var s=e[o],l=P.BehaviourParser.getBehaviours(s.behaviour),d=void 0,c=s.content,u="";c.videoAd?c.videoAd.xmlData&&(u=c.videoAd.xmlData):u="<VAST></Vast>",d=m.getAdServerVastUrl();var p={nid:s.network,pubid:s.publisher,chanid:s.channel,dimid:s.dimension,parallelism:l.parallelism?l.parallelism:0,maxParallelCalls:l.maxParallelCalls?l.maxParallelCalls:10,maxParallelismtriggered:l.maxParallelismtriggered,ptimeout:l.ptimeout?l.ptimeout:3,dtimeout:l.dtimeout?l.dtimeout:void 0,adExpressUrl:d,noOfTagsInitlizedAfterErr:l.noOfTagsInitlizedAfterErr?l.noOfTagsInitlizedAfterErr:1,thirdPartyClickURL:s.thirdPartyClickURL,thirdPartyImprURL:s.thirdPartyImprURL,behaviour:l,muteOnLoad:1!==l.soundOnload,adTag:u};n.push(p)}var h=y.generateParallelConfig(n,g.getTopWindowPageUrl(),r,t,i);return h},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/video/NonGuaranteedPlayer.ts","/src/renderer/vpaid/video")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"../../../utility/Utility":275,"../../../video/player/ParallelTagGenerator":285,"../../../video/player/VideoPlayer":287,"../model/Behaviours":237,"./PlayerHelper":252,_process:8,buffer:4,timers:9}],252:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){}return e.createPlayerDiv=function(e,t,i){var n=i.createElement("div");return n.id=e,n.style.width="100%",n.style.height="100%",t.appendChild(n),n},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/vpaid/video/PlayerHelper.ts","/src/renderer/vpaid/video")},{_process:8,buffer:4,timers:9}],253:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f=e("../../logging/LogManager"),g=e("../../utility/DefferedPromise"),m=e("./WnEngageController"),y=e("./model/Behaviours"),b=e("./model/Behaviours"),v=e("./WnEngageTracker"),P=e("../../utility/SubscribableCallback"),w=.1,S=!1,C=function(){function e(e,t,i,n,r){this.suppliedBehaviour=e,this.eventtracker=t,this.placementId=i,this.width=n,this.height=r,this.impressionPromise=new g,this.clickPromise=new g,this.renderedPromise=new g,this.iaViewablePromise=new g,this.adOpportunityPromise=new g,this.behaviorHolder=new y.BehavioursHolder,this.reloadCallback=new P,this.geckoLogger=f.getLogger("WatchnEngageRender");this.behaviorHolder.getBehaviours();this.wneTrackers=new v(t)}return e.prototype.getVersion=function(){return w},e.prototype.getName=function(){return e.NAME},e.prototype.getAdserverName=function(){return e.ADSERVER_NAME},e.prototype.getCapability=function(){return{}},e.prototype.isOnByDefault=function(){return S},e.prototype.getBehaviourForHB=function(){return{}},e.prototype.getBehaviourForRequest=function(){var e=h.merge(this.suppliedBehaviour,b.DefaultBehaviour);return e},e.prototype.getBehaviourForRenderer=function(e,t){var i=h.merge(e,b.DefaultBehaviour);return h.merge(t,i)},e.prototype.transform=function(e,t){var i=this.checkVideoAd(e),n={videoAd:i};return n},e.prototype.reloadAd=function(e,t,i){return{impression:this.impressionPromise.getPromise(),adRendered:this.renderedPromise.getPromise(),click:this.clickPromise.getPromise(),viewable:this.iaViewablePromise.getPromise()}},e.prototype.showAd=function(e,t){this.geckoLogger.logDebug("AD is present from adserver");var i=document.createElement("div");return i.style.height="3px",i.style.width="100%",i.style.background="red",document.body.appendChild(i),e[0]&&e[0].domDestination&&(e[0].domDestination.style.display="none"),this.wnEController=new m(window,window.document,e,t,this.wneTrackers,this.adOpportunityPromise,this.eventtracker),{impression:this.impressionPromise.getPromise(),adRendered:this.renderedPromise.getPromise(),click:this.clickPromise.getPromise(),viewable:this.iaViewablePromise.getPromise()}},e.prototype.checkVideoAd=function(e){if(void 0!==e.xmlData)return{xmlData:e.xmlData}},e.prototype.isSupported=function(){return!0},e.prototype.cancel=function(){this.geckoLogger.logDebug("")},e.prototype.getNoDemandPromise=function(){return new g},e.prototype.getAdReadyPromise=function(){return new g},e.prototype.getMissedOpportunityPromise=function(){return new g},e.prototype.getAdOpportunityPromise=function(){return this.adOpportunityPromise},e.prototype.getAdStoppedPromise=function(){return new g},e.prototype.getPlacementElement=function(){return new g},e.prototype.getIAUnitClosedPromise=function(){return new g},e.prototype.getReloadCallback=function(){return this.reloadCallback},e}();C.NAME="watchnengage",C.ADSERVER_NAME="watchnengage",t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/WatchnEngageRender.ts","/src/renderer/watchnengage")},{"../../logging/LogManager":58,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../utility/Utility":275,"./WnEngageController":255,"./WnEngageTracker":256,"./model/Behaviours":257,_process:8,buffer:4,timers:9}],254:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./views/Picto"),f=e("./model/Behaviours"),g=function(){function e(e,t,i,n,r,o){this.eventTracker=e,this.parentDivElement=t,this.behaviours=i,this.answerCorrectPromise=n,this.continuetoAppPromise=r,this.adClosePromise=o}return e.prototype.selectView=function(e){var t=new h(this.eventTracker,this.parentDivElement,f.BehaviourParser.getBehaviours(this.behaviours),this.answerCorrectPromise,this.continuetoAppPromise,this.adClosePromise);return t},e.prototype.delegate=function(){return this.selectView(this.behaviours)},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/WnEDelegator.ts","/src/renderer/watchnengage")},{"./model/Behaviours":257,"./views/Picto":261,_process:8,buffer:4,timers:9}],255:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./WnEDelegator"),f=e("../../utility/DefferedPromise"),g=e("./model/PlayerManager"),m=e("./model/WnEStyle"),y=e("./model/Behaviours"),b=e("../../utility/SubscribableCallback"),v=e("../../utility/DOM"),P=e("../../logging/LogManager"),w=e("./../../config/ConfigHolder"),S=function(){function e(e,t,i,n,r,o,a){var s=this;this.win=e,this.doc=t,this.adData=i,this.hBHelper=n,this.wnEngageTrackers=r,this.adOpportunityPromise=o,this.eventTracker=a,this.mraidReadyPromise=new f,this.mraidViewablePromise=new f,this.playablePromise=new f,this.onParallelInitializedPromise=new f,this.onOnadImpressionPromise=new f,this.errorSubsCallback=new b,this.playableCallback=new b,this.geckoLogger=P.getLogger("WnEngageController"),this.isMraid=!1,this.answerCorrectPromise=new f,this.continuetoAppPromise=new f,this.adclosePromise=new f,this.replayVideo=function(){s.playerManager.hidebutton("replayButton_"+s.adData[0].placmentId),s.playerManager.seek(0),s.playerManager.play(),s.doc.getElementById("FormContainer").style.display="none"},this.noAdtoServe=function(){s.doc.getElementById("errorCaption").style.opacity="1",s.doc.getElementById("errorCaption").style.transition="opacity 1s linear",
s.wnEngageTrackers.fireNoDemandTrackerOnce(),setTimeout(function(){this.isMraid&&mraid.close(),this.doc.getElementById("loadingText-"+this.placementId).style.display="none"},3e3)},this.isMraidReady=function(){s.loggerDiv.innerHTML+="ismraidReady<br>",mraid.removeEventListener("ready",s.isMraidReady),s.startmraid(s.win)},this.initMraid=function(e){s.loggerDiv.innerHTML+=mraid.getState()+"==>initMraid<br>","loading"===mraid.getState()?mraid.addEventListener("ready",s.isMraidReady):s.startmraid(s.win)},this.callPlay=function(){s.playerManager.startAd(),setTimeout(function(){"PLAYING"!==this.playerManager.getState()&&(this.loadingText.style.display="none",this.loadingCanvas.style.display="")},1e3)},this.checkifReady=function(){s.loggerDiv.innerHTML+="checkifReady<br>",s.loggerDiv.innerHTML+=mraid.getState()+"<br>","loading"===mraid.getState()?s.initMraid(window):s.startmraid(s.win)},this.startmraid=function(e){s.loggerDiv.innerHTML+="startmraid",s.wnEngageTrackers.fireChannelDebugTracker(encodeURIComponent("ver:"+mraid.getVersion()+";host:"+s.win.location+";viewable:"+mraid.isViewable())),mraid.useCustomClose(!0),mraid.addEventListener("stateChange",function(e){"hidden"===e&&s.geckoLogger.logDebug("Interstitial has become hidden which means interstitial was closed.")}),mraid.setOrientationProperties({allowOrientationChange:!1,forceOrientation:"landscape"}),s.doc.body.style.backgroundColor="#000",setTimeout(function(){s.loadingText.style.display="none",s.loadingCanvas.style.display="block"},2e3),mraid.isViewable()?mraid.addEventListener("viewableChange",s.viewableChangeAfterdisplay):mraid.addEventListener("viewableChange",s.isInterstitialDisplayed),s.loggerDiv.innerHTML+="viewable"+mraid.isViewable(),mraid.isViewable()?s.callPlay():setTimeout(function(){"PLAYING"!==this.playerManager.getState()&&(this.loadingText.style.display="none",this.loadingCanvas.style.display="")},1e3)},this.isInterstitialDisplayed=function(e){e&&(mraid.removeEventListener("viewableChange",s.isInterstitialDisplayed),s.mraidViewablePromise.resolve())},this.viewableChangeAfterdisplay=function(e){mraid.removeEventListener("viewableChange",s.viewableChangeAfterdisplay)};var l=y.BehaviourParser.getBehaviours(this.adData[0].behaviour),d=this.createDivStructure(this.adData[0].placmentId,l),c=this.win.screen.width,u=this.win.screen.height,p=function(){};try{this.checkifReady()}catch(m){}try{mraid.getVersion(),mraid.addEventListener("error",function(e,t){s.loggerDiv.innerHTML+="message::"+e+"  action::"+t}),this.isMraid=!0,this.loggerDiv.innerHTML+="ismraid:"+this.isMraid}catch(m){}this.errorSubsCallback.subscribe(function(){s.noAdtoServe()}),this.playerManager=new g(d.id,this.adData,c,u,l,this.hBHelper,p,this.win,this.onParallelInitializedPromise,this.errorSubsCallback,this.playableCallback);var v=this.playerManager.getPlayer();this.playerManager.onadReady(function(){s.wnEngageTrackers.fireAdOpportunityTrackerOnce()}),this.playerManager.addbutton(w.getInarticleReplayBtn(),"replay","replayButton_"+this.adData[0].placmentId,"bottomright","20px","10px","50px","50px",this.replayVideo),this.playerManager.hidebutton("replayButton_"+this.adData[0].placmentId),this.mraidViewablePromise.getPromise().then(function(){try{s.playerManager.startAd(),s.loadingDiv.style.display="none"}catch(e){s.geckoLogger.logDebug(e.message)}}),this.delegator=new h(this.eventTracker,d,i[0].behaviour,this.answerCorrectPromise,this.continuetoAppPromise,this.adclosePromise),this.wneview=this.delegator.delegate(),v.ImpressionPromise.then(function(e){s.loadingDiv.style.display="none",s.loadingCanvas.style.display="none",window.matchMedia("(orientation: landscape)").matches&&s.playerManager.resize(s.win.innerWidth,s.win.innerHeight),s.wneview.startInitialing(mraid),s.wneview.createPlaceHolderStructure(e),mraid.isViewable()&&(s.playerManager.mute(!1),s.playerManager.setVolume(100))}),this.playerManager.onadComplete(function(){s.playerManager.showbutton("replayButton_"+s.adData[0].placmentId),s.loggerDiv.innerHTML+="calling q&a form";var e=s.containerDiv.children[4].firstElementChild;e.style.position="absolute",e.style.zIndex="2",e.style.display="block",s.wneview.showQuestionAndAnswerForm(),s.answerCorrectPromise.getPromise().then(function(){s.playerManager.hidebutton("replayButton_"+s.adData[0].placmentId)}),s.continuetoAppPromise.getPromise().then(function(){mraid&&mraid.close()})}),this.playerManager.onAdTime(function(e){1===Math.ceil(e.position)&&(s.doc.getElementById("watchCaption").style.opacity="1",s.doc.getElementById("watchCaption").style.transition="opacity 2s linear"),e.position>parseInt(l.OverlayTextTime,10)&&(s.doc.getElementById("watchCaption").style.opacity="0",s.doc.getElementById("watchCaption").style.transition="visibility 0s 2s, opacity 2s linear")}),this.playerManager.onAdError(function(){s.noAdtoServe()}),this.loadingDiv.addEventListener("click",function(){try{s.loadingDiv.style.display="none",s.loggerDiv.innerHTML+="loadingdiv click",s.playerManager.startAd()}catch(e){s.loggerDiv.innerHTML+=e.message}}),this.loadingCanvas.addEventListener("click",function(){try{s.loggerDiv.innerHTML+="loadingcanvas click",s.playerManager.startAd()}catch(e){s.loggerDiv.innerHTML+=e.message}})}return e.prototype.createDivStructure=function(e,t){m.applyCss(window,document,e),this.containerDiv=v.Util.createDivElement(this.doc,"containerDiv-"+e),this.doc.body.appendChild(this.containerDiv),this.loadingDiv=v.Util.createDivElement(this.doc,"loadingDiv-"+e),this.containerDiv.appendChild(this.loadingDiv),this.loadingText=document.createElement("p"),this.loadingText.id="loadingText-"+e,this.loadingText.innerHTML=t.loadingText,this.loadingDiv.appendChild(this.loadingText),this.loggerDiv=v.Util.createDivElement(this.doc,"loggerDiv"),this.containerDiv.appendChild(this.loggerDiv),this.loadingCanvas=document.createElement("canvas"),this.loadingCanvas.id="mCanvas",this.loadingCanvas.style.display="none",this.loadingCanvas.style.transform="translateX(280px)",this.loadingCanvas.setAttribute("width","80"),this.loadingCanvas.setAttribute("height","80");var i=v.Util.createDivElement(this.doc,"watchCaption");i.innerHTML=t.overlayText,this.containerDiv.appendChild(i);var n=v.Util.createDivElement(this.doc,"errorCaption");n.innerHTML="No Ad to Serve",this.containerDiv.appendChild(n),this.loadingDiv.appendChild(this.loadingCanvas);var r=this.doc.getElementById("mCanvas");if(null!=r){var o=r.getContext("2d");null!=o&&(o.beginPath(),o.moveTo(0,0),o.lineTo(65,40),o.lineTo(0,80),o.fill())}return this.containerDiv},e}();t.exports=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/WnEngageController.ts","/src/renderer/watchnengage")},{"../../logging/LogManager":58,"../../utility/DOM":266,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"./../../config/ConfigHolder":23,"./WnEDelegator":254,"./model/Behaviours":257,"./model/PlayerManager":258,"./model/WnEStyle":259,_process:8,buffer:4,timers:9}],256:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../eventtracker/EventConstants"),f=e("../../utility/DefferedPromise"),g=e("../model/TrackerConstants"),m=function(){function e(e){var t=this;this.eventTracker=e,this.noDemandOneTimePromise=new f,this.parallelReqOneTimePromise=new f,this.adOpportunityOneTimePromise=new f,this.parallelReqOneTimePromise.getPromise().then(function(){t.eventTracker.emit(h.PARALLEL_REQUESTS)}),this.noDemandOneTimePromise.getPromise().then(function(){t.eventTracker.emit(h.NO_DEMAND)}),this.adOpportunityOneTimePromise.getPromise().then(function(){t.eventTracker.setStage(g.StageName.ADD_OPPORTUNITY),t.eventTracker.emit(h.ADD_OPPORTUNITY)})}return e.prototype.fireNoDemandTrackerOnce=function(){return this.noDemandOneTimePromise.resolve(),this.noDemandOneTimePromise.getPromise()},e.prototype.fireChannelDebugTracker=function(e){var t=this;this.eventTracker.getMarcoProcessor().setAI(encodeURIComponent(e)),this.eventTracker.emit(h.CHANNEL_DEBUG).then(function(){t.eventTracker.getMarcoProcessor().setAI("")})},e.prototype.fireAdOpportunityTrackerOnce=function(){return this.adOpportunityOneTimePromise.resolve(),this.adOpportunityOneTimePromise.getPromise()},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/WnEngageTracker.ts","/src/renderer/watchnengage")},{"../../eventtracker/EventConstants":42,"../../utility/DefferedPromise":267,"../model/TrackerConstants":212,_process:8,buffer:4,timers:9}],257:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/Utility");i.TYPE="type",i.WIDTH="width",i.HEIGHT="height",i.PLAY_AD_ON_READY="playAdOnReady",i.MUTE_ON_LOAD="muteOnLoad",i.SOUND_ON_LOAD="SoundOnload",i.HIDECONTROLS="hideControls",i.AUTOPLAY="autoplay",i.DEBUG_TOKEN="debugToken",i.NO_OFTAGS_INITIALIZED_AFTER_ERROR="noOfTagsInitlizedAfterErr",i.PARALLELISM="parallelism",i.MAX_PARALLEL_CALLS="maxParallelCalls",i.MAX_PARALLELISM_TRIGGERED="maxParallelismtriggered",i.PTIMEOUT="ptimeout",i.DTIMEOUT="dtimeout",i.NO_PREF="NoPref",i.VPAID_DIV_ID="vpaidDivId",i.VIDEO_AD_POSITION="videoAdPosition",i.VIEW_SELECTION="ViewSelection",i.CTA_TEXT="Visit Adverstiser",i.LOADING_TEXT="Guess the brand",i.OVERLAY_TEXT="Win a Reward, Watch video and Answer questions",i.DefaultBehaviour={};var f=function(){function e(){this.behaviours={},this.behaviours[i.PARALLELISM]=new g(i.PARALLELISM,["0"],["0","1"],this.makeChoice),this.behaviours[i.MAX_PARALLEL_CALLS]=new g(i.MAX_PARALLEL_CALLS,[],[],this.makeChoice),this.behaviours[i.MAX_PARALLELISM_TRIGGERED]=new g(i.MAX_PARALLELISM_TRIGGERED,[],[],this.makeChoice),this.behaviours[i.VIDEO_AD_POSITION]=new g(i.VIDEO_AD_POSITION,["preroll","outstream"],["preroll","outstream","NoPref"],this.makeChoiceForNoVideoAdPosition),this.behaviours[i.PTIMEOUT]=new g(i.PTIMEOUT,[],[],this.makeChoice),this.behaviours[i.DTIMEOUT]=new g(i.DTIMEOUT,[],[],this.makeChoice),this.behaviours[i.SOUND_ON_LOAD]=new g(i.SOUND_ON_LOAD,["0"],["0","1","NoPref"],this.makeChoiceForSoundOnload),this.behaviours[i.VIEW_SELECTION]=new g(i.VIEW_SELECTION,["picto"],[],this.makeChoiceForNoVideoAdPosition)}return e.prototype.makeChoice=function(){},e.prototype.makeChoiceForSoundOnload=function(e,t){if(h.isNullOrUndefined(t[i.SOUND_ON_LOAD])){if(e[i.SOUND_ON_LOAD].length>1&&t[i.SOUND_ON_LOAD].length>=1)return t[i.SOUND_ON_LOAD][0]}else if(e[i.SOUND_ON_LOAD].length>=1)return e[i.SOUND_ON_LOAD][0];return"0"},e.prototype.makeChoiceForNoVideoAdPosition=function(e,t){if(h.isNullOrUndefined(t[i.VIDEO_AD_POSITION])){if(e[i.VIDEO_AD_POSITION].length>1&&t[i.VIDEO_AD_POSITION].length>=1)return t[i.VIDEO_AD_POSITION][0]}else if(e[i.VIDEO_AD_POSITION].length>=1)return"oustream";return"oustream"},e.prototype.getBehaviours=function(){return this.behaviours},e.prototype.getBehaviour=function(e){return this.behaviours[e]},e}();i.BehavioursHolder=f;var g=function(){function e(e,t,i,n){this.name=e,this.defaultValues=t,this.allValidValues=i,this.makeChoiceCallback=n}return e.prototype.getName=function(){return this.name},e.prototype.getAllValidValues=function(){return this.allValidValues},e.prototype.getDefaultValues=function(){return this.defaultValues},e.prototype.getAllValidValuesWithoutNoPref=function(){return h.removeStringFromArray(this.allValidValues,i.NO_PREF)},e.prototype.makeChoiseAndGetValue=function(e,t){return this.makeChoiceCallback?this.makeChoiceCallback(e,t):""},e}();i.BehavioursParam=g;var m=function(){function e(){}return e}();i.Behaviours=m;var y=function(){function e(){}return e.getBehaviours=function(e){e.type?e.type[0]:"";return{placementId:h.isNullOrUndefined(e[i.VPAID_DIV_ID])?e[i.VPAID_DIV_ID][0]:"",type:h.isNullOrUndefined(e[i.TYPE])?e[i.TYPE][0]:"auto",width:h.isNullOrUndefined(e[i.WIDTH])?parseInt(e[i.WIDTH][0],10):700,height:h.isNullOrUndefined(e[i.HEIGHT])?parseInt(e[i.HEIGHT][0],10):393,playAdOnReady:!!h.isNullOrUndefined(e[i.PLAY_AD_ON_READY])&&"true"===e[i.PLAY_AD_ON_READY][0],muteOnLoad:!h.isNullOrUndefined(e[i.MUTE_ON_LOAD])||"true"===e[i.MUTE_ON_LOAD][0],soundOnload:h.isNullOrUndefined(e[i.SOUND_ON_LOAD])?parseInt(e[i.SOUND_ON_LOAD][0],10):0,hideControls:!h.isNullOrUndefined(e[i.HIDECONTROLS])||"true"===e[i.HIDECONTROLS][0],autoplay:!h.isNullOrUndefined(e[i.AUTOPLAY])||"true"===e[i.AUTOPLAY][0],debugToken:h.isNullOrUndefined(e[i.DEBUG_TOKEN])?e[i.DEBUG_TOKEN][0]:"",noOfTagsInitlizedAfterErr:h.isNullOrUndefined(e[i.NO_OFTAGS_INITIALIZED_AFTER_ERROR])?parseInt(e[i.NO_OFTAGS_INITIALIZED_AFTER_ERROR][0],10):1,parallelism:h.isNullOrUndefined(e[i.PARALLELISM])?parseInt(e[i.PARALLELISM][0],10):0,maxParallelCalls:h.isNullOrUndefined(e[i.MAX_PARALLEL_CALLS])?parseInt(e[i.MAX_PARALLEL_CALLS][0],10):25,maxParallelismtriggered:h.isNullOrUndefined(e[i.MAX_PARALLELISM_TRIGGERED])?parseInt(e[i.MAX_PARALLELISM_TRIGGERED][0],10):10,ptimeout:h.isNullOrUndefined(e[i.PTIMEOUT])?parseInt(e[i.PTIMEOUT][0],10):3e3,vAdPos:h.isNullOrUndefined(e[i.VIDEO_AD_POSITION])?e[i.VIDEO_AD_POSITION][0]:"oustream",dtimeout:h.isNullOrUndefined(e[i.DTIMEOUT])?1e3*parseInt(e[i.DTIMEOUT][0],10):void 0,overlayText:h.isNullOrUndefined(e.overlayText)?e.overlayText[0]:i.OVERLAY_TEXT,OverlayTextTime:h.isNullOrUndefined(e.OverlayTextTime)?e.OverlayTextTime[0]:"7",clkmacro:h.isNullOrUndefined(e.clkmacro)?e.clkmacro[0]:"",showlogs:h.isNullOrUndefined(e.showlogs)?e.showlogs[0]:"",loadingText:h.isNullOrUndefined(e.loadingText)?e.loadingText[0]:i.LOADING_TEXT,optout:h.isNullOrUndefined(e.optout)?e.optout[0]:"",ViewSelection:h.isNullOrUndefined(e.ViewSelection)?e.ViewSelection[0]:"",ctaText:h.isNullOrUndefined(e.ctaText)?e.ctaText[0]:i.CTA_TEXT,question:h.isNullOrUndefined(e.question)?e.question[0]:"",answer:h.isNullOrUndefined(e.answer)?e.answer[0]:"",hint:h.isNullOrUndefined(e.hint)?e.hint[0]:""}},e}();i.BehaviourParser=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/model/Behaviours.ts","/src/renderer/watchnengage/model")},{"../../../utility/Utility":275,_process:8,buffer:4,timers:9}],258:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../video/player/VideoPlayer"),f=e("../../../utility/Utility"),g=e("../model/Behaviours"),m=e("../../../config/ConfigHolder"),y=e("../../../video/player/ParallelTagGenerator"),b=e("../../../logging/LogManager"),v=e("../../../utility/DefferedPromise"),P={GUARANTEED:"guranteed",NONGUARANTEED:"nonGuranteed"},w=function(){function e(e,t,i,n,r,o,a,s,l,d,c){this.placementId=e,this.dataModel=t,this.playerWidth=i,this.playerHeight=n,this.behaviour=r,this.hBHelper=o,this.errCallback=a,this.window=s,this.onParallelInitializedPromise=l,this.errorSubsCallback=d,this.playableCallback=c,this.geckoLogger=b.getLogger("PlayerManager"),this.impressionPromise=new v;var u=this.filterAds(t);u.guaranteedAds[0];this.pConfig=this.createPlayerConfig(u.guaranteedAds[0],u.nonGuranteedAds.concat())}return e.prototype.createPlayerConfig=function(e,t){var i=e?e:t[0],n="";if(i&&i.content){var r=i.content;r.videoAd&&r.videoAd.xmlData&&(n=r.videoAd.xmlData)}else n="<VAST></Vast>";var o=!1;if(this.behaviour.parallelism&&!f.isNullOrUndefined(i.maxNonGuranteed)){var a=this.behaviour.parallelism;o=!i||i.isFoc||1===a}var s=i?this.HBResponseChecker(i.placmentId,n,this.hBHelper):{hbrespXML:void 0,adTagXML:""},l=s.hbrespXML,d=(s.adTagXML,1!==this.behaviour.soundOnload),c={type:this.behaviour.type,adtag:n,width:this.playerWidth,height:this.playerHeight,playAdOnReady:this.behaviour.playAdOnReady,muteOnLoad:d,debugToken:this.behaviour.debugToken,clickToPlayOnComplete:!1,hideControls:!0};if(l&&(c.hbEnable=!0,c.hbrespXML=l),o){var u=this.createParallelConfig(t,this.playerWidth,this.playerHeight);u&&(c.parallel=u)}return c},e.prototype.createParallelConfig=function(e,t,i){for(var n=[],r=!0,o=0,a=e.length;o<a;o++)if(f.isNullOrUndefined(e[o])){var s=e[o],l=g.BehaviourParser.getBehaviours(s.behaviour),d=void 0,c=s.content,u="";c.videoAd?c.videoAd.xmlData&&(u=c.videoAd.xmlData):u="<VAST></Vast>",d=m.getAdServerVastUrl();var p={nid:s.network,pubid:s.publisher,chanid:s.channel,dimid:s.dimension,parallelism:l.parallelism?l.parallelism:0,maxParallelCalls:l.maxParallelCalls?l.maxParallelCalls:10,maxParallelismtriggered:l.maxParallelismtriggered,ptimeout:l.ptimeout?l.ptimeout:3,dtimeout:l.dtimeout?l.dtimeout:void 0,adExpressUrl:d,noOfTagsInitlizedAfterErr:l.noOfTagsInitlizedAfterErr?l.noOfTagsInitlizedAfterErr:1,thirdPartyClickURL:s.thirdPartyClickURL,thirdPartyImprURL:s.thirdPartyImprURL,behaviour:l,muteOnLoad:1!==l.soundOnload,adTag:u};n.push(p)}var h=y.generateParallelConfig(n,f.getTopWindowPageUrl(),r,t,i);return h},e.prototype.HBResponseChecker=function(e,t,i){var n;try{if(i&&t){var r=i.getResponse(i.getWinningSlotId());r&&(r.VastUrl?t=t.replace(/http:\/\/dummyurlforrubicon.com/,r.VastUrl):r.VastXml&&t.indexOf("dummyurlforrubicon.com")!==-1&&(n=r.VastXml))}}catch(o){this.geckoLogger.logInfo("Failed in HBResponseChecker ")}return{hbrespXML:n,adTagXML:t}},e.prototype.filterAds=function(e){for(var t=[],i=[],n=0,r=e.length;n<r;n++)if(f.isNullOrUndefined(e[n])){var o=e[n];o.buyType===P.NONGUARANTEED?i.push(o):t.push(o)}return{guaranteedAds:t,nonGuranteedAds:i}},e.prototype.startAd=function(){var e=this;this.Gplayer.configPromise.then(function(t){e.Gplayer.playablePromise.then(function(t){t.start(),t.getOnAdImpressionSubscribable().subscribe(function(t){e.impressionPromise.resolve(t)})})})},e.prototype.getPlayer=function(){var e=new h;return this.Gplayer=e.createAd(this.placementId,this.pConfig,this.window,this.errCallback,this.onParallelInitializedPromise,this.errorSubsCallback),{ImpressionPromise:this.impressionPromise.getPromise()}},e.prototype.onadComplete=function(e){this.Gplayer.playablePromise.then(function(t){t&&t.getOnAdStoppedSubscribable().subscribe(function(){e()})})},e.prototype.onAdTime=function(e){this.Gplayer.playablePromise.then(function(t){t&&t.onAdTime(e)})},e.prototype.onAdError=function(e){this.Gplayer.playablePromise.then(function(t){t.onError(e)})},e.prototype.onAdClick=function(e){this.Gplayer.playablePromise.then(function(t){t.onAdClick(e)})},e.prototype.resize=function(e,t){this.Gplayer.playablePromise.then(function(i){i.resize(e,t)})},e.prototype.getState=function(){var e=3;return this.Gplayer.playablePromise.then(function(t){e=t.getState()}),e},e.prototype.play=function(){this.Gplayer.playablePromise.then(function(e){e.play()})},e.prototype.pause=function(){this.Gplayer.playablePromise.then(function(e){e.pause()})},e.prototype.seek=function(e){this.Gplayer.playablePromise.then(function(t){t.seek(e)})},e.prototype.mute=function(e){this.Gplayer.playablePromise.then(function(t){t.mute(e)})},e.prototype.setVolume=function(e){this.Gplayer.playablePromise.then(function(t){t.setVolume(e)})},e.prototype.hidebutton=function(e){this.Gplayer.configPromise.then(function(t){t.hideButton(e)})},e.prototype.showbutton=function(e){this.Gplayer.configPromise.then(function(t){t.showButton(e)})},e.prototype.onadReady=function(e){this.Gplayer.configPromise.then(function(t){e()})},e.prototype.addbutton=function(e,t,i,n,r,o,a,s,l){var d=this,c=i,u=window;u[c]=function(){try{void 0!==l&&l()}catch(e){d.geckoLogger.logError(e)}},this.Gplayer.configPromise.then(function(l){l.addButton(e,t,c,i,n,r,o,a,s)})},e}();t.exports=w}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/model/PlayerManager.ts","/src/renderer/watchnengage/model")},{"../../../config/ConfigHolder":23,"../../../logging/LogManager":58,"../../../utility/DefferedPromise":267,"../../../utility/Utility":275,"../../../video/player/ParallelTagGenerator":285,"../../../video/player/VideoPlayer":287,"../model/Behaviours":257,_process:8,buffer:4,timers:9}],259:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/CSS"),f=function(){function e(){}return e.applyCss=function(e,t,i){var n="#loadingDiv-"+i+"{padding-top: 100px; background: rgb(241, 241, 241); width: 100%;height: 100%;position: absolute; overflow: hidden; z-index: 3;}\n        #loadingText-"+i+"{font-size:70px;margin: 0px;text-transform: capitalize;color: rgb(210, 139, 157);font-weight: bold;}#pictostyleDiv{position: relative;height: 150px;left: -5px;\n        background: rgb(255, 255, 255);top: -2px;}#taptoSelectDiv{position: absolute;top: 108px;\n        height: auto;padding: 17px 21px;color: white;width: 30%;text-align: center;margin: 0px auto;left: -5px;\n        right: 0px;border-radius: 29px;}#taptoSelectSpan{display: inline-block;\n        position: relative;top: -11px;width: 100%;font-weight: bold;font-size: 17px;color: rgb(120, 120, 120);}\n        #answerDiv{ padding-bottom: 15px;padding-top: 5px;position: absolute;top: 23px;height: auto;display: inline-block;width: 100%;text-align: center;background: rgb(255, 180, 64);left: 0px;}\n        #hintDiv{width: 36px;text-align: center;background: rgb(255, 126, 121);border-radius: 20px;\n        color: rgb(255, 255, 255);position: absolute;display: inline-block;top: -14px;\n        box-shadow: rgba(0, 0, 0, 0.55) 1px 1px 1px 0px;padding: 3px 5px;height: 20px;line-height: 20px;left: "+.87*e.innerWidth+"px;}\n        #hintTextDiv{position: absolute;top: 76px;transform: translateX(-50%);left: 50%;display: none;}\n        #shuffledSelectDiv{position: absolute;top: 137px;width: 100%;text-align: center;background: white;padding: 8px 0px;box-shadow: rgb(105, 104, 104) 0px -8px 3px -4;}\n        #FormContainer{display:none;background: rgb(255, 255, 255);\n        left: 0px;position:absolute;width:100%;margin:auto;top:0px;padding-left:5px;z-index:999;}\n        #containerDiv-"+i+'{width:100%;height:100%;}#loggerDiv{ position:fixed;\n        height: 35%;overflow: scroll;bottom: 0px;left: 0px;width: 50%;color: rgb(255, 255, 255);z-index: 999999;background: blue;}#question{font-size: 32px;\n        margin: 0px;color: rgb(120, 120, 120);padding-top: 30px;font-weight: bold;text-align: center;}input[id^="ans_"] {text-transform: uppercase;-webkit-appearance: none;width: 27px;\n        background:#fff;color: #fff;height: 29px;border-radius: 10px;\n        box-shadow: -1px 2px 1px -1px rgba(0,0,0,0.55);margin-left: 4px;border: 1px solid grey;text-align: center;font-size: 21px;padding: 0px;}input[id^="option"] {\n        text-transform: uppercase;-webkit-appearance: none;width: 30px;\n        background: rgba(255,180,64,1);color: #fff;height: 35px;border-radius: 10px;\n        box-shadow: -1px 2px 1px -1px rgba(0,0,0,0.55);margin-left: 4px;border: 1px solid grey;text-align: center;font-size: 28px;padding: 0px;\n        }.hide{visibility:hidden !important;}.yellowbackground{background:rgba(255,180,64,1) !important;} .redbackground{background:rgba(255,125,121,1) !important}\n        #GreetContainer{position:absolute;top: 0px;right: 0px;bottom: 0px;left: 0px;text-align: center;background: #000;}#GreetVisitCenter{background: rgb(255, 180, 64);\n        width: 60%;margin: auto;padding-top: 5%;padding-bottom: 2%;z-index: 9999999;position: relative;top: 5%;}#GreetVisitAdvertiser{margin-top: 10px;height: 35px;max-width: 200px;\n        background: teal;border: none;color: white;font-size: 16px;}\n        #GreetMessage{color: rgb(255, 252, 221);text-align: center;font-size: 19px;margin: 0px;text-transform: capitalize;}\n        #GreetMessage1{margin: 0px;color: rgb(255, 252, 221);font-size: 19px;\n        padding-top: 12px;font-weight: bold;}#skipImg{width: 25px;height: 25px;right: 2%;position: absolute;top: 10%;z-index: 9999999;display:none;}\n        #watchCaption,#errorCaption {position:absolute;top:50px;padding:5px;left:0px;width:auto;z-index: 99;background: #4A4A4A; opacity: 0;color:#FFF;}\n        #promptContainer{ position: absolute;top: 0px;right: 0px;bottom: 0px;left: 0px;text-align: center;background:transparent;}\n        #promptMessageBox{width: 30%;margin: auto;padding-top: 5%;padding-bottom: 2%;z-index:\n        9999999;position: relative;top: 146px;display: inline-block;box-shadow: rgba(0, 0, 0, 0.55) 3px 3px 3px -1}#promptTextDiv{position: absolute;\n        text-align: center;top: 0px;width: 100%;background: rgb(255, 126, 121);\n        height: 20px;line-height: 20px;color: rgb(255, 255, 255);box-shadow: rgba(0, 0, 0, 0.55) -1px 3px 3px -}#clueDiv{position: absolute;\n        width: 100%;text-align: center;line-height: 20px;background: white;height: 20px;top: 22px;color: rgb(120, 120, 120);}#promptclosebutton{\n        position: absolute;top: 0px;right: 3%;height: 20px;\n        width: 20px;text-align: center;line-height: 20px;font-size: 24px;color: rgb(255, 255, 255);transform: rotate(45deg);z-index: 2147483647;}\n        @keyframes pulse-in {from, 50%, to {transform: scale3d(1, 1, 1); } 25% {transform: scale3d(0.8, 0.8, 0.8); } to {transform: scale3d(1, 1, 1); }}\n        .pulsatingeffect {\n            animation-name: pulse-in;\n            animation-iteration-count: infinite;\n            animation-duration: 1.5s;\n            animation-fill-mode: both;\n        }';h.Util.addCSSRule(n,"",t,e)},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/model/WnEStyle.ts","/src/renderer/watchnengage/model")},{"../../../utility/CSS":265,_process:8,buffer:4,timers:9}],260:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){}return e.getQuestionAnswerandHint=function(e){var t=e.CreativeProperties.CP_AD_META,i=new DOMParser,n={question:"",answer:"",hint:""},r=i.parseFromString(t,"text/xml");return"undefined"!=typeof r.getElementsByTagName("ADMETA_WNE_QUESTION")&&(n.question=r.getElementsByTagName("ADMETA_WNE_QUESTION")[0].childNodes[0].nodeValue,n.answer=r.getElementsByTagName("ADMETA_WNE_ANSWER")[0].childNodes[0].nodeValue),"undefined"!=typeof r.getElementsByTagName("ADMETA_WNE_HINT")&&"undefined"!=typeof r.getElementsByTagName("ADMETA_WNE_HINT")[0]&&(n.hint=r.getElementsByTagName("ADMETA_WNE_HINT")[0].childNodes[0].nodeValue),n},e.shuffle=function(e){var t,i,n,r=[];for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),r[n]=t,i=e[n],e[n]=e[t],e[t]=i;return e},e.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},e.pixelFire=function(e){if(""!==e){var t=document.createElement("img");t.src=e}},e.addClass=function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)},e.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(this.hasClass(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i,"")}},e.prototype.checkifAllAnswered=function(){},e.prototype.checkFirst3Char=function(){},e.prototype.validatePictostyleAnswer=function(){},e.prototype.validateAnswer=function(){},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/model/WneUtility.ts","/src/renderer/watchnengage/model")},{_process:8,buffer:4,timers:9}],261:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../../utility/SubscribableCallback"),f=e("es6-promise"),g=e("../../../utility/DOM"),m=e("./../model/WneUtility"),y=e("../../../eventtracker/EventConstants"),b=e("./../../../config/ConfigHolder"),v=function(){function e(e,t,i,n,r,o){this.eventTracker=e,this.parentDivEl=t,this.behaviours=i,this.answerCorrectPromise=n,this.continuetoAppPromise=r,this.adClosePromise=o,this.noofwrongattempts=0,this.noofprompts=0,this.firstCorrectAttempt=!1,this.totalAttemptTracker="",this.correctAnsTracker="",this.answerAttemptTracker="",this.closeTracker="",this.clickThrough="",this.hideHint=function(){document.getElementById("hintTextDiv").style.display="none"}}return e.prototype.startInitialing=function(e){this.mraid=e,e.useCustomClose(!0),e.setOrientationProperties({allowOrientationChange:!1,forceOrientation:"landscape"}),e.addEventListener("stateChange",this.stateChange),e.addEventListener("error",this.errorHandler)},e.prototype.createPlaceHolderStructure=function(e){var t=this;this.FormContainer=g.Util.createDivElement(document,"FormContainer");var i=g.Util.createDivElement(document,"FormCenter"),n=g.Util.createDivElement(document,"questionDiv"),r=document.createElement("p");r.id="question";var o={question:"",answer:"",hint:""};try{o=m.getQuestionAnswerandHint(e)}catch(a){}try{this.question=this.behaviours.question||o.question,this.answer=this.behaviours.answer||o.answer,this.hint=this.behaviours.hint||o.hint,this.clickTrackers=e.clickTrackers,this.clickThrough=e.clickThrough,r.innerHTML=this.question,"undefined"!=typeof e.customTrackers&&"undefined"!=typeof e.customTrackers.ANSATTEMPT&&""!==e.customTrackers.ANSATTEMPT&&(this.answerAttemptTracker=e.customTrackers.ANSATTEMPT[0]),"undefined"!=typeof e.customTrackers&&"undefined"!=typeof e.customTrackers.CORRANS&&""!==e.customTrackers.CORRANS&&(this.correctAnsTracker=e.customTrackers.CORRANS[0]),"undefined"!=typeof e.customTrackers&&"undefined"!=typeof e.customTrackers.TOTATTEMPT&&""!==e.customTrackers.TOTATTEMPT&&(this.totalAttemptTracker=e.customTrackers.TOTATTEMPT[0]),"undefined"!=typeof e.customTrackers&&"undefined"!=typeof e.customTrackers.CLA&&""!==e.customTrackers.CLA&&(this.closeTracker=e.customTrackers.CLA[0])}catch(a){}var s=g.Util.createDivElement(document,"pictostyleDiv"),l=g.Util.createDivElement(document,"taptoSelectDiv"),d=g.Util.createSpanElement(document,"taptoSelectSpan");d.innerHTML="Tap to Select";var c=g.Util.createDivElement(document,"answerDiv"),u=g.Util.createDivElement(document,"hintDiv");u.innerHTML="Hint&#63;";var p=g.Util.createDivElement(document,"hintTextDiv");""!==this.hint&&(p.innerHTML="Hint: "+this.hint.toUpperCase());var h=g.Util.createDivElement(document,"shuffledSelectDiv");this.FormContainer.appendChild(i),i.appendChild(n),n.appendChild(r),i.appendChild(s),s.appendChild(l),l.appendChild(d),s.appendChild(c),""!==this.hint&&(s.appendChild(u),s.appendChild(p)),s.appendChild(h),i.appendChild(s),this.parentDivEl.appendChild(this.FormContainer);for(var f=this.answer.split(""),a=0;a<f.length;a++)f[a]=f[a].toUpperCase();for(var y=f[0],v=m.shuffle(f.slice(0)),P=v.indexOf(y),w=0;w<this.answer.length;w++){var S=document.createElement("input");S.id="ans_"+w,S.type="button",S.setAttribute("readonly","true"),S.value=f[w],S.addEventListener("click",function(e){t.removeAnswer(e,v)}),c.appendChild(S)}u.addEventListener("click",function(){t.showHint()}),s.appendChild(h);for(var w=0;w<this.answer.length;w++){var S=document.createElement("input");S.id="option"+w,S.type="button",S.setAttribute("readonly","true"),S.value=v[w],S.addEventListener("click",function(e){t.addAnswer(e)}),h.appendChild(S)}m.addClass(document.getElementById("option"+P),"pulsatingeffect");var C=g.Util.createImageElement(document,"skipImg");document.body.appendChild(C),C.src=b.getWNECloseBtn(),C.onclick=function(){t.mraid?t.mraid.close():document.getElementById("GreetContainer")&&(document.getElementById("GreetContainer").style.display="none",
C.style.display="none"),t.adClosePromise.resolve()}},e.prototype.showHint=function(){document.getElementById("hintTextDiv").style.display="block"},e.prototype.removeAnswer=function(e,t){var i,n=e.target.value;m.removeClass(e.target,"yellowbackground");for(var r=0;r<t.length;r++)if(n===t[r]&&m.hasClass(document.getElementById("option"+r),"hide")){i=r;break}"undefined"!=typeof i&&m.removeClass(document.getElementById("option"+i),"hide")},e.prototype.addAnswer=function(e){var t=e.target.value;if(""!==t){for(var i=0;i<this.answer.length;i++){var n=document.getElementById("ans_"+i).value;if(!m.hasClass(document.getElementById("ans_"+i),"yellowbackground")){if(n===t){if(!this.firstCorrectAttempt){""!==this.answerAttemptTracker&&m.pixelFire(this.answerAttemptTracker+"ai="+n),this.firstCorrectAttempt=!0;try{this.fireChannelDebugTracker(n)}catch(e){}}m.addClass(document.getElementById("ans_"+i),"yellowbackground"),m.addClass(e.target,"hide");for(var r=0;r<this.answer.length;r++)m.hasClass(document.getElementById("option"+r),"redbackground")&&(document.getElementById("option"+r).className="");this.noofwrongattempts=0,this.hidePrompt();break}this.noofwrongattempts++,m.addClass(e.target,"redbackground"),this.noofwrongattempts%3===0&&(this.noofprompts<3?(this.currentAns=this.getCurrentPictoAnswer(),""!==this.currentAns&&""!==this.totalAttemptTracker&&(this.totalAttemptTracker+="ai="+this.currentAns),""!==this.totalAttemptTracker&&m.pixelFire(this.totalAttemptTracker),this.showPrompt()):document.getElementById("skipImg").style.display="block",this.noofprompts++);break}}this.validatePictostyleAnswer()}},e.prototype.hidePrompt=function(){document.getElementById("promptContainer")&&(document.getElementById("promptContainer").style.display="none")},e.prototype.showPrompt=function(){var e,t=this;if(document.getElementById("promptContainer"))document.getElementById("promptContainer").style.display="block";else{e=g.Util.createDivElement(document,"promptContainer");var i=g.Util.createDivElement(document,"promptMessageBox"),n=g.Util.createDivElement(document,"promptTextDiv");n.innerHTML="Answer is";var r=g.Util.createDivElement(document,"clueDiv");r.innerHTML=this.answer.toUpperCase();var o=g.Util.createDivElement(document,"promptclosebutton");o.innerHTML="&#43;",o.addEventListener("click",function(){t.hidePrompt()}),i.appendChild(n),i.appendChild(r),i.appendChild(o),e.appendChild(i),document.body.appendChild(e)}},e.prototype.checkifAllAnswered=function(){for(var e=0;e<this.answer.length;e++)if(!m.hasClass(document.getElementById("ans_"+e),"yellowbackground"))return!1;return!0},e.prototype.getCurrentPictoAnswer=function(){for(var e="",t="",i=0;i<this.answer.length;i++)m.hasClass(document.getElementById("ans_"+i),"yellowbackground")&&(t=document.getElementById("ans_"+i).value,""!==t&&(e+=t));return e},e.prototype.showGreeting=function(){var e=this,t=g.Util.createDivElement(document,"GreetContainer"),i=g.Util.createDivElement(document,"GreetMessageBox"),n=document.createElement("p");n.id="GreetMessage",n.innerHTML="Congratulations !";var r=document.createElement("p");r.id="GreetMessage1","undefined"!=typeof this.answer&&""!==this.answer&&(r.innerHTML=this.answer+" is the correct answer"),n.style.color="#FFFCDD",n.style.fontWeight="",n.style.fontSize="19px";var o=g.Util.createDivElement(document,"GreetVisitCenter");o.style.background="rgb(255, 180, 64)",o.style.top="5%",o.style.width="60%";var a=g.Util.createDivElement(document,"VisitAdvertiserdiv");a.style.display="inline-block",a.style.marginRight="2%";var s=document.createElement("button");s.id="GreetVisitAdvertiser",document.getElementById("skipImg")&&(document.getElementById("skipImg").style.display="block"),s.innerHTML=this.behaviours.ctaText,s.onclick=function(t){try{if(""!==e.behaviours.clkmacro&&m.pixelFire(e.behaviours.clkmacro),e.clickTrackers.length>0)for(var i=0;i<e.clickTrackers.length;i++)""!==e.clickTrackers[i]&&m.pixelFire(e.clickTrackers[i])}catch(t){}try{t.preventDefault(),""!==e.clickThrough&&window.open(e.clickThrough,"_blank")}catch(t){}return!1};var l=g.Util.createDivElement(document,"buttonsContainer"),d=g.Util.createDivElement(document,"VisitApp");d.style.display="inline-block";var c=document.createElement("button");c.id="GreetVisitApp";var u=g.Util.createAnchorElement(document,"GreetVisitAppHref");u.innerHTML="Continue to App",u.onclick=function(){""!==e.closeTracker&&m.pixelFire(e.closeTracker),e.continuetoAppPromise.resolve()},document.body.appendChild(t),i.appendChild(n),i.appendChild(r),o.appendChild(i),c.appendChild(u),a.appendChild(s),a.appendChild(s),l.appendChild(a),d.appendChild(c),l.appendChild(d),d.style.display="none",t.appendChild(o),o.appendChild(l)},e.prototype.validatePictostyleAnswer=function(){this.checkifAllAnswered()&&(this.showGreeting(),this.answerCorrectPromise.resolve(),document.getElementById("skipImg")&&(document.getElementById("skipImg").style.display="block"),document.getElementById("FormCenter").style.display="none",this.currentAns=this.getCurrentPictoAnswer(),""!==this.correctAnsTracker&&(this.correctAnsTracker+="ai="+this.currentAns,m.pixelFire(this.correctAnsTracker)),this.fireChannelDebugTracker(this.currentAns))},e.prototype.fireChannelDebugTracker=function(e){var t=this;this.eventTracker.getMarcoProcessor().setAI(encodeURIComponent(e)),this.eventTracker.emit(y.CHANNEL_DEBUG).then(function(){t.eventTracker.getMarcoProcessor().setAI("")})},e.prototype.showQuestionAndAnswerForm=function(){this.question&&""!==this.question&&this.answer&&""!==this.answer?this.FormContainer.style.display="block":(this.answerCorrectPromise.resolve(),this.showGreeting())},e.prototype.stateChange=function(e){},e.prototype.errorHandler=function(){},e.prototype.addOppPromise=function(){return new f.Promise(function(){})},e.prototype.noDemandPromise=function(){return new f.Promise(function(){})},e.prototype.changeDebug=function(){return new h},e}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/renderer/watchnengage/views/Picto.ts","/src/renderer/watchnengage/views")},{"../../../eventtracker/EventConstants":42,"../../../utility/DOM":266,"../../../utility/SubscribableCallback":274,"./../../../config/ConfigHolder":23,"./../model/WneUtility":260,_process:8,buffer:4,"es6-promise":5,timers:9}],262:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=function(){function e(){}return e.anyone=function(e){return new h.Promise(function(t,i){h.Promise.all(e.map(function(e){return new h.Promise(function(t,i){e.then(function(e){return i(e)})["catch"](function(e){return t(e)})})})).then(function(e){return i(e)})["catch"](function(e){return t(e)})})},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/AnyPromise.ts","/src/utility")},{_process:8,buffer:4,"es6-promise":5,timers:9}],263:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.maxWidthForTablet=450,e.maxSmartphoneHeight=740,e.maxSmartphoneWidth=420}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/BrowserConstants.ts","/src/utility")},{_process:8,buffer:4,timers:9}],264:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../detector/BrowserType"),f=e("../detector/OsType"),g=e("./BrowserConstants"),m=e("./PlatFormDetails"),y=function(){function e(){}return e.createNonFriendlyIFrame=function(e,t,i){var n=document.createElement("iframe");return n.id=e,n.src=t,n.frameBorder="0",n.frameSpacing="0",i.appendChild(n),n.scrolling="no",n},e.createFriendlyIFrame=function(e,t,i,n){var r=document.createElement("iframe");return r.id=e,r.frameBorder="0",r.frameSpacing="0",r.style.width=i+"px",r.style.height=n+"px",r.style.margin="0px",r.style.padding="0px",r.scrolling="no",r.src='javascript:"<html><body style=background:transparent;\'><script>  let inDapIF = true; </script></body></html>"',t&&t.appendChild(r),r},e.createElement=function(e,t){document.createElement(t)},e.getOS=function(){return/(Android)/i.test(navigator.userAgent)?f.Android:/(iPad|iPhone)/g.test(navigator.userAgent)?f.IOS:/(Windows Phone)/i.test(navigator.userAgent)?f.WindowsPhone:f.UNKNOWN},e.isAndroidDefaultBrowser=function(){return e.getOS()===f.Android&&4.2===e.getAndroidVersion()},e.isiPad=function(){return/(iPad)/g.test(navigator.userAgent)},e.isiOS8OrBelow=function(){if(e.getOS()===f.IOS){var t=navigator.userAgent.match(/OS ([\d+][_][\d+]([_][\d])?) like Mac OS X/);return null==t||parseFloat(t[1])<9}return!1},e.isMobile=function(t){return(e.getOS()===f.Android||e.getOS()===f.IOS||e.getOS()===f.WindowsPhone)&&!e.isTablet(t)},e.isTablet=function(t){if(e.deviceCategory){var i=m.PlatformType[e.deviceCategory];return i===m.PlatformType.Tablet}var n=Math.min(t.screen.width,t.innerWidth),r=Math.min(t.screen.height,t.innerHeight);return(n>g.maxSmartphoneHeight&&r>g.maxSmartphoneWidth||r>g.maxSmartphoneHeight&&n>g.maxSmartphoneWidth)&&e.isMobileDevice()},e.isSmartPhone=function(t){if(e.deviceCategory){var i=m.PlatformType[e.deviceCategory];return i===m.PlatformType.SmartPhone}return e.isMobile(t)},e.isMobileDevice=function(){return!!(e.isMobileCheck.Android()||e.isMobileCheck.BlackBerry()||e.isMobileCheck.iOS()||e.isMobileCheck.Opera()||e.isMobileCheck.Windows())},e.getAndroidVersion=function(){var e=navigator.userAgent.match(/Android\s+([\d\.]+)/);return null!==e?parseFloat(e[1]):null},e.getBrowser=function(){var e=h.UNKNOWN;return/(CriOS|Chrome)/i.test(navigator.userAgent)?e=h.Chrome:/(UCBrowser)/i.test(navigator.userAgent)?e=h.UCBrowser:/(Firefox|FxiOS)/i.test(navigator.userAgent)?e=h.Firefox:/(MSIE)/i.test(navigator.userAgent)?e=h.IE:/(IEMobile)/i.test(navigator.userAgent)?e=h.IEMobile:/(Opera|OPiOS|OPR)/i.test(navigator.userAgent)?e=h.Opera:/(Safari)/i.test(navigator.userAgent)&&e!==h.Chrome&&e!==h.Firefox&&e!==h.Opera&&e!==h.IE&&e!==h.IEMobile?e=h.Safari:/(Mobile)/i.test(navigator.userAgent)&&e===h.Safari&&(e=h.MobileSafari),e},e.isSecureDomain=function(){return"https:"===parent.top.window.location.protocol},e.setResponseDetails=function(t,i,n,r,o,a,s){e.browserName=t,e.browserVersion=i,e.OsName=n,e.OsVersion=r,e.deviceCategory=o,e.manufacturer=a,e.modelVersion=s},e.getResponseDetails=function(){var t;return t={browserName:e.browserName,browserVersion:e.browserVersion,osName:e.OsName,osVersion:e.OsVersion,deviceCategory:e.deviceCategory,manufacturer:e.manufacturer,modelVersion:e.modelVersion}},e}();y.isMobileCheck={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)}},t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/BrowserUtils.ts","/src/utility")},{"../detector/BrowserType":29,"../detector/OsType":31,"./BrowserConstants":263,"./PlatFormDetails":272,_process:8,buffer:4,timers:9}],265:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){var t=function(){function e(){}return e.getPrefixedStyle=function(e,t,i){var n=["-moz-","-ms-","-o-","-webkit-"],r="";if(i)for(var o=0,a=n.length;o<a;o++)r+=n[o]+e+":"+n[o]+t+";";else for(var o=0,a=n.length;o<a;o++)r+=n[o]+e+":"+t+";";return r+=e+":"+t},e.setPrefixedStyle=function(e,t,i){var n=["moz","ms","o","webkit"],r=t;do{var o=r.substr(r.indexOf("-")+1,1);r=r.replace(r[0],r[0].toUpperCase()).replace("-"+o,o.toUpperCase())}while(r.indexOf("-")>0);for(var a=e.style,s=0,l=n.length;s<l;s++)a[n[s]+r]=i;a[t]=i},e.addClass=function(e,t){if(e.classList)for(var i=0,n=t.length;i<n;i++)e.classList.add(t[i]);else for(var i=0,n=t.length;i<n;i++)e.className+=" "+t[i]},e.addCSSRule=function(e,t,i,n){var r=i.createElement("style");r.id=t,r.type="text/css",i.getElementsByTagName("head")[0].appendChild(r);var o=r;if(o.styleSheet)o.styleSheet.cssText=e;else{var a=i.createTextNode(e);r.appendChild(a)}},e.removeClass=function(e,t){if(e.classList)for(var i=0,n=t.length;i<n;i++)e.classList.remove(t[i]);else for(var i=0,n=t.length;i<n;i++)e.className=e.className.replace(new RegExp("(^|\\b)"+t[i].split(" ").join("|")+"(\\b|$)","gi")," ");"undefined"!=typeof e.classList&&0===e.classList.length&&e.removeAttribute("class")},e}();e.Util=t}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/CSS.ts","/src/utility")},{_process:8,buffer:4,timers:9}],266:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("./Utility"),g=e("./NodeSelector"),m=e("./MultiNodeSelector"),y=e("es6-promise");!function(e){var t=function(){function t(){}return t.isElementExist=function(e,t){return!e.getElementById(t)},t.createDivElement=function(e,t){var i=e.getElementById(t);return i||(i=e.createElement("div"),i.id=t),i},t.createIframeElement=function(e,t){var i=e.getElementById(t);return i||(i=e.createElement("iframe"),i.id=t),i},t.createImageElement=function(e,t){var i=e.getElementById(t);return i||(i=document.createElement("img"),i.id=t),i},t.createSpanElement=function(e,t){var i=e.getElementById(t);return i||(i=e.createElement("span"),i.id=t),i},t.createAnchorElement=function(e,t){var i=e.getElementById(t);return i||(i=e.createElement("a"),i.id=t),i},t.setAttributes=function(e,t){for(var i=0,n=t.length;i<n;i++)""!==t[i].Name&&e.setAttribute(t[i].Name,t[i].Value)},t.addWindowEvent=function(e,t,i){if(e){e.addEventListener&&e.addEventListener(t,i,!0);var n=e;n.attachEvent&&n.attachEvent("on"+t,i)}},t.addElementEvent=function(e,t,i){if(e){e.addEventListener&&e.addEventListener(t,i,!0);var n=e;n.attachEvent&&n.attachEvent("on"+t,i)}},t.removeWindowEvent=function(e,t,i){if(e){e.removeEventListener&&e.removeEventListener(t,i,!0);var n=e;n.detachEvent&&n.detachEvent("on"+t,i)}},t.listenVisibilityChange=function(e,t){e.addEventListener("visibilitychange",function(){t(e.visibilityState)})},t.insertMultiElementsAt=function(t,i,n,r){return new y.Promise(function(o,a){var s=new m.MultiNodeSelector(t,document);e.Util.insertElement(s,t,i,n,r).then(function(e){if(e.allNodes){for(var t=[],n=s.getTargetRangedNodes(e.allNodes),r=0;r<n.length;r++)if(null!==n[r]&&null!==n[r].parentNode){var a=document.createElement("div");a.id=i.id+"_"+r;var l=n[r].parentNode;if(null!==l){l.insertBefore(a,n[r].nextSibling);var d=document.getElementById(a.id);null!==d&&t.push(d)}}o({theNode:e.theNode,otherNodes:t})}else o({theNode:e.theNode})})["catch"](function(e){a(e)})})},t.insertElementAt=function(t,i,n,r){return new y.Promise(function(o,a){var s=new g.NodeSelector(t,document);e.Util.insertElement(s,t,i,n,r).then(function(e){o(e.theNode)})["catch"](function(e){a(e)})})},t.insertElement=function(e,t,i,n,r){return new y.Promise(function(t,o){var a=null;e.isSelectorValid()?f.executeRepeatedly(e.checkRequiredContent,n,r).then(function(){var s=e.getTargetParentNode();"undefined"!=typeof s&&null!==s?e.isAppendBeforeTargetParent()&&s.parentNode?(s.parentNode.insertBefore(i,s),a=document.getElementById(i.id),t({theNode:a,allNodes:void 0})):f.executeRepeatedly(e.checkTargetNodeExists,n,r).then(function(){var n=e.getTargetNode(),r=n.targetNode,l=n.allNodes;e.getIsSimpleDivSelector()?r&&r.parentNode?(r.parentNode.insertBefore(i,r.nextSibling),a=document.getElementById(i.id),t({theNode:a,allNodes:void 0})):s&&s.parentNode&&(s.appendChild(i),a=document.getElementById(i.id),t({theNode:a,allNodes:void 0})):"undefined"!=typeof r&&null!==r&&r.parentNode?(r.parentNode.insertBefore(i,r.nextSibling),a=document.getElementById(i.id),t({theNode:a,allNodes:l})):o("Element within placement not rendered or does not exist")})["catch"](function(e){o(e)}):o("Placement does not exist")})["catch"](function(e){o(e)}):o("Cannot find placement. Attribute name and value are required.")})},t.removeElementEvent=function(e,t,i){if(e){e.removeEventListener&&e.removeEventListener(t,i,!0);var n=e;n.detachEvent&&n.detachEvent("on"+t,i)}},t}();e.Util=t;var i=function(){function e(e,t){this.name=e,this.value=t}return Object.defineProperty(e.prototype,"Name",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Value",{get:function(){return this.value},enumerable:!0,configurable:!0}),e}();e.Attribute=i}(h||(h={})),t.exports=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/DOM.ts","/src/utility")},{"./MultiNodeSelector":270,"./NodeSelector":271,"./Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],267:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=function(){function e(){var e=this;this.promise=new h.Promise(function(t,i){e.res=t,e.rej=i})}return e.prototype.getPromise=function(){return this.promise},e.prototype.resolve=function(e){this.res(e)},e.prototype.reject=function(e){this.rej(e)},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/DefferedPromise.ts","/src/utility")},{_process:8,buffer:4,"es6-promise":5,timers:9}],268:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){this.tupleArray=[]}return e.prototype.get=function(e){var t=this.findTuple(e);if(!(t<0))return this.tupleArray[t][1]},e.prototype.set=function(e,t){var i=this.findTuple(e);return i<0&&(this.tupleArray.push([e,t]),i=this.findTuple(e)),this.tupleArray[i][1]=t,t},e.prototype.getKeys=function(){for(var e=[],t=this.tupleArray.length,i=0;i<t;i++)e.push(this.tupleArray[i][0]);return e},e.prototype.getValues=function(){for(var e=[],t=this.tupleArray.length,i=0;i<t;i++)e.push(this.tupleArray[i][1]);return e},e.prototype.findTuple=function(e){for(var t=this.tupleArray.length,i=0;i<t;i++)if(this.tupleArray[i][0]===e)return i;return-1},e.prototype.remove=function(e){var t=this.findTuple(e);t>=0&&this.tupleArray.splice(t,1)},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/GeckoMap.ts","/src/utility")},{_process:8,buffer:4,timers:9}],269:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("./Utility"),g=e("es6-promise");!function(e){var t=function(){function t(e){this.charset=e}return t.prototype.invokeRequest=function(t,i){return i.logInfo("invokeRequest "+t),new g.Promise(function(n,r){var o,a=new e.XHRHandler,s=new e.XDomainRequestHandler;a.isSupported()?(i.logInfo("XHRHandler supported sending request"),a.get(t,n,r)):s.isSupported()?(i.logInfo("XDomainRequestHandler supported sending request"),s.get(t,n,r)):r(new Error("Got Error from server "+o.status+", "+o.error))})},t}();e.HTTPClient=t;var i=function(){function e(){}return e.prototype.xhr=function(){var e;if(e=new XMLHttpRequest,"withCredentials"in e)return e},e.prototype.isSupported=function(){return!!this.xhr()},e.prototype.getWithoutCredentials=function(e,t,i){var n=this;try{var r;r=this.xhr(),r.open("GET",e,!0),r.send(),r.onError=function(t){n.onError(e,t,i)},r.onreadystatechange=function(){4===r.readyState&&(r.responseText?t(r.responseText):i(new Error("XHRHandler::Got Error from server "+r.responseText)))}}catch(o){i(new Error("XHRHandler:: Got Error from server "+o))}},e.prototype.onError=function(e,t,i){i(new Error("XHRHandler::onError Got Error from server  "+e))},e.prototype.get=function(e,t,i){var n,r=this,o=f.getWindowTop(window);if("https:"===o.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{n=this.xhr(),n.open("GET",e,!0),n.withCredentials=!0,n.send(),n.onError=function(t){r.onError(e,t,i)},n.onreadystatechange=function(){4===n.readyState&&(n.responseText?t(n.responseText):r.getWithoutCredentials(e,t,i))}}catch(a){i(new Error("Error in getting url"))}},e}();e.XHRHandler=i;var n=function(){function e(){this.win=f.getWindowTop(window)}return e.prototype.xdr=function(){var e;return this.win.XDomainRequest&&(e=new this.win.XDomainRequest),e},e.prototype.isSupported=function(){return!!this.xdr()},e.prototype.get=function(e,t,i){var n,r,o=this;(r="function"==typeof this.win.ActiveXObject?new this.win.ActiveXObject("Microsoft.XMLDOM"):void 0)||i(new Error("XDomainRequestHandler: Microsoft.XMLDOM format not supported"));try{n=this.xdr(),n.open("GET",e),n.send(),n.onerror=function(t){o.onError(e,t,i)},n.ontimeout=function(t){o.onError(e,t,i)},n.onload=function(){t(n.responseText)}}catch(a){i(new Error("XDomainRequestHandler:: Got Error from server "+a))}},e.prototype.onError=function(e,t,i){i(new Error("XHRHandler::onError Got Error from server  "+e))},e}();e.XDomainRequestHandler=n}(h||(h={})),t.exports=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/HTTPClient.ts","/src/utility")},{"./Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],270:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./NodeSelector"),g=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.docu=i;var r=t.trim().split(" ");return r.length>=6&&(n.maxSelector=f.NodeSelector.getPosition(r[5])),n}return h(t,e),t.findMaxPosition=function(e,t,i){var n;return n=t.isPercentage?Math.round(t.position*i.length/100):t.position,n>e?n<i.length?n-=1:n=i.length-1:n=e,n},t.prototype.getTargetRangedNodes=function(e){if(this.maxSelector){for(var i=f.NodeSelector.findTargetPosition(this.isPercentage,this.selector.position,e),n=t.findMaxPosition(i,this.maxSelector,e),r=[],o=i;o<n;o++)"undefined"!=typeof e[o]&&r.push(e[o]);return this.geckoLogger.logDebug("returning targetnodes for start and end "+r.length),r}return[]},t}(f.NodeSelector);i.MultiNodeSelector=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/MultiNodeSelector.ts","/src/utility")},{"./NodeSelector":271,_process:8,buffer:4,timers:9}],271:[function(e,t,i){(function(t,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./Utility"),f=e("../logging/LogManager"),g=function(){function e(t,i){var n=this;this.doc=i,this.isPercentage=!1,this.isSimpleDivSelector=!1,this.geckoLogger=f.getLogger("NodeSelector"),this.checkRequiredContent=function(){try{if(isNaN(n.selector.position))return n.geckoLogger.logInfo("position not found : "+n.selector.position+" : existing "),n.targetParentNode=null,!0;var t=e.getBaseSelector(n.selector.attributeName,n.selector.elementType,n.selector.attributeValue),i=n.doc.querySelector(t);if(i){var r=e.constructSelectorQuery(n.selector.attributeName,n.selector.elementType,n.selector.attributeValue,n.selector.childNodes,n.isSimpleDivSelector);if(n.targetParentNode=i,n.targetNodes=n.doc.querySelectorAll(r),n.isSimpleDivSelector)return!0;var o=0;return o=n.targetNodes.length,!n.isPercentage&&o<=n.selector.position?(n.geckoLogger.logInfo("content length is smaller than selector position"),n.targetParentNode=null,!0):o>0}}catch(a){return n.geckoLogger.logInfo("Error when finding targetParentNode"),n.geckoLogger.logError(""+a),n.targetParentNode=null,!0}return!1},this.checkTargetNodeExists=function(){if(n.isSimpleDivSelector)return!0;var t=e.findTargetPosition(n.isPercentage,n.selector.position,n.targetNodes);return"undefined"!=typeof n.targetNodes[t]&&null!==n.targetNodes[t]};var r=this.parseSelector(t),o=this.getAttributeNameAndValue(r[1]),a=e.getPosition(r[3]);this.selector={elementType:r[0],attributeName:o[0],attributeValue:o[1],childNodes:this.getChildNodes(r[2]),position:a.position},this.isPercentage=a.isPercentage}return e.prototype.isAppendBeforeTargetParent=function(){return this.appendBeforeTargetParent},e.prototype.isSelectorValid=function(){return!h.isEmptyString(this.selector.attributeName)&&!h.isEmptyString(this.selector.attributeValue)},e.prototype.parseSelector=function(e){var t=e.trim();t.indexOf(" ")<0&&(t="div id "+t,this.isSimpleDivSelector=!0);var i=t.split(" "),n=i[0],r="undefined"!=typeof i[1]?i[1]:"";r="undefined"!=typeof i[2]?r+" "+i[2]:"";var o="undefined"!=typeof i[3]?i[3]:"",a="undefined"!=typeof i[4]?i[4]:"";return""===o&&""===a&&(this.isSimpleDivSelector=!0),[n,r,o,a]},e.prototype.getAttributeNameAndValue=function(e){var t=e.split(" "),i="",n="";return t.length>0&&(i=t[0],n=t[1],"class"===i&&(n=n.replace(/[|]/g,"."))),[i,n]},e.prototype.getChildNodes=function(e){var t=null===e&&"undefined"==typeof e?"":e;return""!==t&&(t.indexOf("#")!==-1?(t="",this.appendBeforeTargetParent=!0):t=t.replace(/[|]/g,">")),t},e.getPosition=function(e){var t=-1,i=!1;return"*"===e||h.isUndefined(e)||""===e?t=-1:e.indexOf("p")!==-1?(i=!0,t=parseInt(e,10)):(t=Number(e),t>0&&t--),{position:t,isPercentage:i}},e.getBaseSelector=function(e,t,i){var n="";if("class"===e||"id"===e){var r="class"===e?".":"#";n=t+r+i}else n=t+"["+e+"="+i+"]";return n},e.constructSelectorQuery=function(t,i,n,r,o){var a=e.getBaseSelector(t,i,n);return r?a+">"+r:a+">*"},e.findTargetPosition=function(e,t,i){var n=t;return e&&(n=Math.round(t*i.length/100),n>0&&n<=i.length&&(n=Number(n)-1)),t<0&&(n=Math.floor(i.length/2),n>0&&n<=i.length&&(n=Number(n)-1)),n},e.prototype.getTargetParentNode=function(){return this.targetParentNode},e.prototype.getIsSimpleDivSelector=function(){return this.isSimpleDivSelector},e.prototype.getTargetNode=function(){var t,i;return t=e.findTargetPosition(this.isPercentage,this.selector.position,this.targetNodes),i=this.targetNodes[t],{targetNode:i,allNodes:this.targetNodes}},e}();i.NodeSelector=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/NodeSelector.ts","/src/utility")},{"../logging/LogManager":58,"./Utility":275,_process:8,buffer:4,timers:9}],272:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){var t;!function(e){e[e.Console=0]="Console",e[e.Desktop=1]="Desktop",e[e.Mediahub=2]="Mediahub",e[e.Mobile=3]="Mobile",e[e.Others=4]="Others",e[e.Smallscreen=5]="Smallscreen",e[e.SmartPhone=6]="SmartPhone",e[e.smartwatch=7]="smartwatch",e[e.Tablet=8]="Tablet",e[e.Tv=9]="Tv"}(t=e.PlatformType||(e.PlatformType={}))}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/PlatFormDetails.ts","/src/utility")},{_process:8,buffer:4,timers:9}],273:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=function(){function e(){var e=this;this.successSubscribers=[],this.failureSubscribers=[],this.calls=[],this.lastCall=new h.Promise(function(t,i){e.toResolve=t,e.toReject=i}),this.calls.push(this.lastCall)}return e.prototype.then=function(e,t){for(var i=0,n=this.calls;i<n.length;i++){var r=n[i];void 0!==e&&(this.onFulfilledFn=e,r.then(e)),void 0!==t&&(this.onRejectedFn=t,r["catch"](t))}},e.prototype["catch"]=function(e){for(var t=0,i=this.calls;t<i.length;t++){var n=i[t];void 0!==e&&n["catch"](e)}},e.prototype.resolve=function(e){this.toResolve(e),this.createNewAndPush(this.lastCall,this.calls)},e.prototype.reject=function(e){this.toReject(e),this.createNewAndPush(this.lastCall,this.calls)},e.prototype.createNewAndPush=function(e,t){var i=this;e=new h.Promise(function(e,t){i.toResolve=e,i.toReject=t}),e.then(this.onFulfilledFn),e["catch"](this.onRejectedFn),t.push(e)},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/RetroCallback.ts","/src/utility")},{_process:8,buffer:4,"es6-promise":5,timers:9}],274:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p=function(){function e(){this.functionMap={},this.firstNotifyResolved=!1,this.subscribeIdSeq=0}return e.prototype.subscribe=function(e){var t=this;this.subscribeIdSeq++,this.firstNotifyResolved,this.functionMap[this.subscribeIdSeq]=e;var i=this.subscribeIdSeq;return function(){t.functionMap[i]&&delete t.functionMap[i]}},e.prototype.notify=function(e){this.firstNotifyResolved=!0;for(var t in this.functionMap)if(this.functionMap.hasOwnProperty(t)&&this.functionMap[t])try{this.functionMap[t](e)}catch(i){console.warn(i)}},e}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/SubscribableCallback.ts","/src/utility")},{_process:8,buffer:4,timers:9}],275:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("./DefferedPromise"),g=e("./BrowserUtils"),m=e("../detector/OsType"),y=function(){function e(){}return e.getNameParameter=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=i.exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},e.merge=function(e,t){return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},e.errorMsg=function(t,i){var n="";return n=e.isNullOrUndefined(i)&&e.isNullOrUndefined(i.message)?t+""+i.message:t,n=n?n:""},e.getScrolledPixelsPromise=function(e,t){var i=e.scrollY||e.pageYOffset,n=new f,r=function(){i=e.scrollY||e.pageYOffset,i>=t&&(e.removeEventListener("scroll",r,!0),n.resolve())};return i>=t?n.resolve():e.addEventListener("scroll",r,!0),n},e.isNullOrUndefined=function(e){return null!==e&&"undefined"!=typeof e},e.isEmptyString=function(e){return"string"==typeof e&&""===e.trim()},e.isEmptyObject=function(e){return"object"==typeof e&&0===Object.keys(e).length},e.isUndefined=function(e){return"undefined"==typeof e},e.isObject=function(e){return"object"==typeof e},e.isValidObject=function(t){
return e.isNullOrUndefined(t)&&"object"==typeof t},e.isInvalidOREmpty=function(t){return!e.isValidObject(t)||0===t.length},e.isValidNumber=function(e){var t=e;return!isNaN(t)},e.isValidUrl=function(e){var t=e.match(/^[a-zA-Z0-9]{2,}(:\/\/)[a-zA-Z0-9\.-\/:]+/g);return null!==t&&t.length>0},e.fireImagePixel=function(t){return new h.Promise(function(i,n){var r=new Image;r.addEventListener("load",function(){i()}),r.addEventListener("error",function(){n(Error("Failed to fire image pixel= "+t))}),e.isValidUrl(t)?r.src=t:n(Error("Invalid image pixel URL = "+t))})},e.fireImagePixels=function(t){var i=[];if(!t)return new h.Promise(function(e,t){t()});for(var n=0,r=t;n<r.length;n++){var o=r[n];i.push(e.fireImagePixel(o))}return h.Promise.all(i)},e.loadFile=function(e,t){return new h.Promise(function(i,n){var r=t.createElement("script");r.addEventListener("load",function(){i()}),r.addEventListener("error",function(){n(Error("Failed to load File url "+e))}),r.type="text/javascript",r.async=!0,r.src=e,t.getElementsByTagName("head")[0].appendChild(r)})},e.computeInRatio=function(e,t,i){return Math.round(i*t/e)},e.computeTopLeftGivenBottomCentre=function(e,t,i,n){return{x:i-Math.round(e/2),y:n-Math.round(t)}},e.executeRepeatedly=function(e,t,i){return new h.Promise(function(n,r){var o=0,a=setInterval(function(){o++,o===t?(clearInterval(a),n()):e()&&(clearInterval(a),n())},i)})},e.executeRepeatedlyWithDeceleration=function(e,t,i){var n=new f,r=function(i,o){--i>=0?e()?n.resolve():window.setTimeout(function(){r(i,o)},++o*t):n.resolve()};return r(i,0),n.getPromise()},e.getCurrentTime=function(){return(new Date).getTime()},e.getTopWindowProtocol=function(){var t=e._getWindowTop;return"https:"===t.location.protocol},e.getTopWindowPageUrl=function(){var t=e._getWindowTop;return t.location.href},e.getTopWindowReferrerUrl=function(){var t=e._getWindowTop;return t.document.referrer},e.getWindowTop=function(e){var t=function(e){try{return!(!e.document.location||!e.parent.document.location)}catch(t){return!1}},i=function(e){return e.frameElement&&"IFRAME"===e.frameElement.tagName},n=function(e){return!!t(e)&&i(e)},r=function(){var e,t=0;do try{e=e?e.parent:window,t++}catch(i){}while(e!==window.top&&t<20);return t},o=function(){var e=r(),t=window,i=0;try{for(;n(t)&&i<e;)try{t=t.parent,i++}catch(o){}return t}catch(o){return window}};return o()},e.createBrowserExitPromise=function(e){return new h.Promise(function(t,i){try{var n=function(){t()};e.addEventListener("beforeunload",n,!0),g.getOS()!==m.UNKNOWN&&e.addEventListener("pagehide",n,!0)}catch(r){i(r)}})},e.inArray=function(e,t){return e.indexOf(t)>=0},e.trackIfElementIsVisible=function(e,t){return new h.Promise(function(i,n){e.getViewabilityMonitor(t).then(function(e){e.onViewableStateChange(function(){e.isViewable()&&(e.stopViewabilityMonitor(),i())})})["catch"](function(e){n(e)})})},e.isElementVisibleInViewport=function(e,t,i){var n=e.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(t.innerHeight||i.documentElement.clientHeight)&&n.right<=(t.innerWidth||i.documentElement.clientWidth)},e.isElementAboveViewport=function(e,t,i){var n=e.getBoundingClientRect();return n.top<0&&!this.isElementVisibleInViewport(e,t,i)},e.trackIfElementIsNotVisible=function(t,i,n){return new h.Promise(function(r,o){try{var a=setInterval(function(){e.isElementVisibleInViewport(t,i,n)||(r(),clearInterval(a))},10)}catch(s){console.log(s.message)}})},e.getElementVisibliltyPercent=function(e){var t=e.getBoundingClientRect(),i=e.clientHeight,n=e.clientWidth,r=Math.max(0,t.top),o=Math.max(0,t.left),a=Math.max(0,Math.min(window.innerHeight-r,t.bottom-r)),s=Math.max(0,Math.min(window.innerWidth-o,t.right-o));return{vw:Math.round(s/n*100),vh:Math.round(a/i*100)}},e.isElementVisibleMoreThanPercent=function(t,i){return new h.Promise(function(n,r){try{var o=setInterval(function(){e.getElementVisibliltyPercent(t).vh>i&&(n(),clearInterval(o))},10)}catch(a){console.log(a.message)}})},e.trackIfElementIsViewable=function(t,i,n){return new h.Promise(function(r,o){try{var a=setInterval(function(){e.isElementVisibleInViewport(t,i,n)&&(r(),clearInterval(a))},10)}catch(s){console.log(s.message)}})},e.trackIfElementIsVisibleForSeconds=function(t,i,n,r){return new h.Promise(function(o,a){var s=0,l=0,d=function(r){var l=(new Date).getTime();s=setInterval(function(){if((new Date).getTime()-l>r)return e.isElementVisibleInViewport(t,i,n)?o():a(),void clearInterval(s)},20)},c=function(){e.isElementVisibleInViewport(t,i,n)?d(r):(clearInterval(s),l=setTimeout(c,20))};c()})},e.scorllAboveInline=function(){return new h.Promise(function(e,t){var i=document.body.scrollTop;window.onscroll=function(){var n=document.body.scrollTop;n>i?e():t(Error("scrolled below Inline")),i=n}})},e.removeStringFromArray=function(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t){e.splice(i,1);break}return e},e.parseXML=function(t){var i=e.getWindowTop(window),n="";if(document.implementation&&document.implementation.createDocument)n=(new DOMParser).parseFromString(t,"text/xml");else{if(!i.ActiveXObject)throw"Failed in converting string to Xml ";n=new ActiveXObject("Microsoft.XMLDOM"),n.loadXML(t)}return n},e.getNodeElementValues=function(t,i,n){var r,o,a,s,l="",d=[];if(r=e.getChildsByName(t,i),"undefined"!=typeof r&&r.length>0)for(var c=0,u=r.length;c<u;c++)if(o=r[c],s=e.getChildByName(o,n)){a=s;for(var p=0,h=a.childNodes.length;p<h;p++)a.childNodes[p]&&(l=a.childNodes[p].textContent,d.push(l))}return d},e.getChildsByName=function(e,t){var i,n,r,o,a;for(n=[],a=e.childNodes,r=0,o=a.length;r<o;r++)i=a[r],i.nodeName===t&&n.push(i);return n},e.getChildByName=function(e,t){var i,n,r,o;for(o=e.childNodes,n=0,r=o.length;n<r;n++)if(i=o[n],i.nodeName===t)return i},e.createPromise=function(e){return new h.Promise(function(t){t(e)})},e.getScreenWidthandHeight=function(){var e,t;return"undefined"!=typeof window.innerWidth||"undefined"!=typeof window.screen.availWidth?(e=window.innerWidth||window.screen.availWidth,t=window.innerHeight||window.screen.availHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{width:e,height:t}},e.findClosest=function(e,t,i,n,r){if(e)for(var o=n?e.length-1:0;n?o>=0:o<e.length;n?o--:o++){var a=e[o].getBoundingClientRect().top+r;if(Math.abs(a)>t&&Math.abs(a)<i)return e[o]}},e.removeUnwantedNodes=function(e,t){e&&console.log(e.id);for(var i=0;i<t.length;i++){var n=t[i].parentNode;n&&(e?e.id!==t[i].id&&(t[i].style.width="",t[i].style.height=""):(t[i].style.width="",t[i].style.height=""))}},e.isFriendlyIframe=function(e){try{return!(!e.document.location||!e.parent.document.location)}catch(t){return!1}},e.isElementOutViewport=function(e,t){var i=e.getBoundingClientRect();return i.bottom<0||i.right<0||i.left>t.innerWidth||i.top>t.innerHeight},e}();y._base64KeyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",y._getWindowTop=y.getWindowTop(window),t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/Utility.ts","/src/utility")},{"../detector/OsType":31,"./BrowserUtils":264,"./DefferedPromise":267,_process:8,buffer:4,"es6-promise":5,timers:9}],276:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h,f=e("es6-promise"),g=e("./Utility");!function(e){var t=function(){function e(e,t){var i=this;this._provider=e,this._isPromiseResolved=!1;var n=e.provide(),r=new f.Promise(function(e,i){setTimeout(function(){i()},t)});this._valuePromise=f.Promise.race([r,n]),this._valuePromise.then(function(e){i._value=e,i._isPromiseResolved=!0})["catch"](function(e){i._isPromiseResolved=!0})}return e.prototype.getValue=function(){var e=this;return this._isPromiseResolved?new f.Promise(function(t,i){t(e._valuePromise)}):this._valuePromise},e}();e.ProcrastinatingCache=t;var i=function(){function e(e){this.provider=e}return e.prototype.getValue=function(){return g.isNullOrUndefined(this.value)||(this.value=this.provider.provide()),this.value},e}();e.LazyLoadingCache=i;var n=function(){function e(e,t){this._provider=e,this.duration=t}return e.prototype.getValue=function(){var e,t,i=this,n=!1,r=this._provider.provide(),o=new f.Promise(function(e,t){setTimeout(function(){t()},i.duration)});return e=f.Promise.race([o,r]),e.then(function(e){t=e,n=!0})["catch"](function(e){n=!0}),n?new f.Promise(function(t,i){t(e)}):e},e}();e.ProcrastinatingLazyLoadingCache=n;var r=function(){function e(e){this.provider=e,this.getValue()}return e.prototype.getValue=function(){return g.isNullOrUndefined(this.value)||(this.value=this.provider.provide()),this.value},e}();e.PrefetchCache=r}(h||(h={})),t.exports=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/utility/ZCache.ts","/src/utility")},{"./Utility":275,_process:8,buffer:4,"es6-promise":5,timers:9}],277:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("../utility/SubscribableCallback"),g=e("./player/Player"),m=e("./BasePlayer"),y=e("../logging/LogManager"),b=function(e){function t(t){var i=e.call(this,t)||this;return i.zadPlayer=t,i.onPlayCallback=new f,i.impressionCallback=new f,i.viewableImpressionCallback=new f,i.adCompanionCallback=new f,i.nonLinearAdCallback=new f,i.adClickCallback=new f,i.adSkippedCallback=new f,i.adTimeCallback=new f,i.adClosedCallback=new f,i.adCompleteCallback=new f,i.adStoppedCallback=new f,i.adUserCloseCallback=new f,i.adStartedCallback=new f,i.hasMoreAdsCallback=new f,i.adFirstQuartileCallback=new f,i.adMidQuartileCallback=new f,i.adThirdQuartileCallback=new f,i.adInteractionCallback=new f,i.geckoAdPlayerLogger=y.getLogger("AdPlayer"),i.isAdStopped=!1,i.replayAction=!1,i.showLastFrame=!0,i.registerCallbacks(t),i}return h(t,e),t.prototype.registerCallbacks=function(t){var i=this;e.prototype.registerCallbacks.call(this,t),t.onPlay=function(e){i.showLastFrame&&i.isAdStopped&&(i.isAdStopped=!1,t.seek(0)),i.geckoAdPlayerLogger.logDebug("onPlay : "+e),i.onPlayCallback.notify(e)},t.onAdImpression=function(e){try{i.geckoAdPlayerLogger.logDebug("AdImpression : adId = "+e.adId+" adType = "+e.adType+" mediaURL = "+e.mediaURL+" mediaType = "+e.mediaType+" "),e.adType.toLowerCase()!==g.ADTYPE.VPAID&&e.selectedPlayer.toLowerCase()!==g.PLAYERTYPE.FLASH||(i.showLastFrame=!1)}catch(t){i.geckoAdPlayerLogger.logError(t)}i.impressionCallback.notify(e)},t.onViewableImpression=function(e){i.geckoAdPlayerLogger.logDebug("onViewableImpression "),i.viewableImpressionCallback.notify()},t.onAdCompanions=function(e,t){i.geckoAdPlayerLogger.logDebug("AdCompanions "),i.adCompanionCallback.notify({adtag:e,companion:t})},t.onNonLinearAd=function(e,t){i.geckoAdPlayerLogger.logDebug("NonLinearAd "),i.nonLinearAdCallback.notify({adTag:e,nonleanierAd:t})},t.onAdClick=function(e,t){i.geckoAdPlayerLogger.logDebug("AdClick : pageClickThrough : "+t),i.adClickCallback.notify({adtag:e,page:t})},t.onAdSkipped=function(e){i.geckoAdPlayerLogger.logDebug("AdSkipped"),i.adSkippedCallback.notify(e)},t.onAdTime=function(e,t,n){i.adTimeCallback.notify({adtag:e,position:t,duration:n})},t.onAdComplete=function(e){i.geckoAdPlayerLogger.logDebug("AdComplete "),i.adCompleteCallback.notify(e)},t.onAdVideoFirstQuartile=function(){i.geckoAdPlayerLogger.logDebug("AdComplete "),i.adFirstQuartileCallback.notify()},t.onAdVideoMidpoint=function(){i.geckoAdPlayerLogger.logDebug("AdComplete "),i.adMidQuartileCallback.notify()},t.onAdVideoThirdQuartile=function(){i.geckoAdPlayerLogger.logDebug("AdComplete "),i.adThirdQuartileCallback.notify()},t.onAdInteraction=function(){i.geckoAdPlayerLogger.logDebug("AdComplete "),i.adInteractionCallback.notify()},t.onAdStopped=function(e){i.geckoAdPlayerLogger.logDebug("AdStopped "),i.showLastFrame&&(t.seek(t.getDuration()-1),t.pause()),i.isAdStopped=!0,i.adStoppedCallback.notify(e)},t.onAdStarted=function(e){i.geckoAdPlayerLogger.logDebug("AdStarted "),i.adStartedCallback.notify(e)},t.hasMoreAds=function(e){i.hasMoreAdsCallback.notify(e)}},t.prototype.onPlay=function(e){this.onPlayCallback.subscribe(e)},t.prototype.onAdCompanions=function(e){this.adCompanionCallback.subscribe(e)},t.prototype.onAdInteraction=function(e){this.adInteractionCallback.subscribe(e)},t.prototype.onAdVideoThirdQuartile=function(e){this.adThirdQuartileCallback.subscribe(e)},t.prototype.onAdVideoMidpoint=function(e){this.adMidQuartileCallback.subscribe(e)},t.prototype.onAdVideoFirstQuartile=function(e){this.adFirstQuartileCallback.subscribe(e)},t.prototype.onNonLinearAd=function(e){this.nonLinearAdCallback.subscribe(e)},t.prototype.onAdClick=function(e){this.adClickCallback.subscribe(e)},t.prototype.onAdTime=function(e){this.adTimeCallback.subscribe(e)},t.prototype.getOnAdSkippedSubscribable=function(){return this.adSkippedCallback},t.prototype.getOnAdStoppedSubscribable=function(){return this.adStoppedCallback},t.prototype.getOnAdClickSubscribable=function(){return this.adClickCallback},t.prototype.getOnAdImpressionSubscribable=function(){return this.impressionCallback},t.prototype.getOnViewableImpressionSubscribable=function(){return this.viewableImpressionCallback},t.prototype.close=function(){this.zadPlayer&&this.zadPlayer.closeAd()},t.prototype.start=function(){this.zadPlayer&&this.zadPlayer.startAd()},t.prototype.play=function(){this.zadPlayer&&this.zadPlayer.play()},t.prototype.skipAd=function(){this.zadPlayer&&this.zadPlayer.skipAd()},t.prototype.setMedia=function(e){console.log("Ad player doesn't support setMedia currently.. to setmedia need other player")},t.prototype.onAdStarted=function(e){this.adStartedCallback.subscribe(e)},t.prototype.getHasMoreAdsSubscribable=function(){return this.hasMoreAdsCallback},t.prototype.startNextAd=function(){this.zadPlayer&&this.zadPlayer.startNextAd()},t.prototype.getReadyAds=function(){try{if(this.zadPlayer)return this.zadPlayer.getReadyAds()}catch(e){return}},t}(m);t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/AdPlayer.ts","/src/video")},{"../logging/LogManager":58,"../utility/SubscribableCallback":274,"./BasePlayer":279,"./player/Player":286,_process:8,buffer:4,timers:9}],278:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./BasePlayerConfigurator"),g=e("../logging/LogManager"),m=function(e){function t(t,i,n){var r=e.call(this,t)||this;return r.zadPlayer=t,r.errorCallback=i,r.geckoAdPlayerLogger=g.getLogger("AdPlayerConfigurator"),t.onAdError=function(e,t,o){r.geckoAdPlayerLogger.logDebug("AdError : errorMassage = "+e+" errobj = "+o),i(e,t,o),n.notify(e)},r}return h(t,e),t}(f);t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/AdPlayerConfigurator.ts","/src/video")},{"../logging/LogManager":58,"./BasePlayerConfigurator":280,_process:8,buffer:4,timers:9}],279:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./player/Player"),f=e("../utility/SubscribableCallback"),g=e("../logging/LogManager"),m=function(){function e(e){this.zadPlayer=e,this.readyCallback=new f,this.playCallback=new f,this.pauseCallback=new f,this.errorCallback=new f,this.beforePlayCallback=new f,this.clickCallback=new f,this.timeCallback=new f,this.seekCallback=new f,this.resizeCallback=new f,this.fullscreeCallback=new f,this.volumeCallback=new f,this.completeCallback=new f,this.bufferCallback=new f,this.muteChangeCallback=new f,this.geckoLogger=g.getLogger("BasePlayer"),this.registerCallbacks(e)}return e.prototype.registerCallbacks=function(e){var t=this;e.onError=function(e,i){t.geckoLogger.logError("onError : "+e),t.errorCallback.notify({message:e,source:i})},e.onPlay=function(e){t.geckoLogger.logDebug("onPlay : "+e),t.playCallback.notify(e)},e.onPause=function(e){t.geckoLogger.logDebug("onPause : "+e),t.pauseCallback.notify(e)},e.onBuffer=function(e){t.geckoLogger.logDebug("onBuffer : "+e),t.bufferCallback.notify(e)},e.onComplete=function(e){t.geckoLogger.logDebug("onComplete"),t.completeCallback.notify(e)},e.onVolume=function(e){t.geckoLogger.logDebug("onVolume : "+e),t.volumeCallback.notify(e)},e.onFullscreen=function(e){t.geckoLogger.logDebug("onFullscreen : "+e),t.fullscreeCallback.notify(e)},e.onResize=function(e,i){t.geckoLogger.logDebug("onResize : width = "+e+" height "+i),t.resizeCallback.notify({width:e,height:i})},e.onMuteChange=function(e){t.geckoLogger.logDebug("onMuteChange : "+e),t.muteChangeCallback.notify(e)},e.onSeek=function(e,i){t.geckoLogger.logDebug("onSeek : position = "+e+" offset = "+i),t.seekCallback.notify({position:e,offset:i})},e.onTime=function(e,i){t.geckoLogger.logDebug("onTime : position = "+e+" duration = "+i),t.timeCallback.notify({position:e,duration:i})},e.onClick=function(e){t.geckoLogger.logDebug("onClick"),t.clickCallback.notify(e)}},e.prototype.setPoster=function(e){try{this.zadPlayer.playerObj.setConfig({poster:{url:e}})}catch(t){this.geckoLogger.logDebug("Not able to set the poster")}},e.prototype.getId=function(){return this.zadPlayer.id},e.prototype.resume=function(){this.geckoLogger.logDebug("called resume"),this.zadPlayer.play()},e.prototype.skipAd=function(){this.geckoLogger.logDebug("called skipAd"),this.zadPlayer.skipAd()},e.prototype.play=function(){this.geckoLogger.logDebug("called play"),this.zadPlayer.play()},e.prototype.start=function(){this.geckoLogger.logDebug("called start"),this.zadPlayer.play()},e.prototype.pause=function(){this.geckoLogger.logDebug("called pause"),this.zadPlayer.pause()},e.prototype.stop=function(){this.zadPlayer.stop()},e.prototype.mute=function(e){this.geckoLogger.logDebug("called mute with "+e),this.zadPlayer.mute(e)},e.prototype.isMute=function(){return this.zadPlayer.isMute()},e.prototype.seek=function(e){this.geckoLogger.logDebug("called seek to position "+e),this.zadPlayer.seek(e)},e.prototype.close=function(){this.zadPlayer.closeAd()},e.prototype.setMedia=function(e){this.zadPlayer.setMedia(e)},e.prototype.getDuration=function(){return this.zadPlayer.getDuration()},e.prototype.getPosition=function(){return this.zadPlayer.getPosition()},e.prototype.setVolume=function(e){this.geckoLogger.logDebug("called setVolume "+e),this.zadPlayer.setVolume(e)},e.prototype.getVolume=function(){return this.zadPlayer.getVolume()},e.prototype.isFullscreen=function(){return this.zadPlayer.isFullScreen()},e.prototype.getHeight=function(){return this.zadPlayer.getHeight()},e.prototype.getWidth=function(){return this.zadPlayer.getWidth()},e.prototype.getState=function(){var e=this.zadPlayer.getState();switch(e){case"PAUSED":return h.State.PAUSED;case"IDLE":return h.State.IDLE;case"BUFFERING":return h.State.BUFFERING;case"PLAYING":return h.State.PLAYING}return h.State.IDLE},e.prototype.resize=function(e,t){this.geckoLogger.logDebug("called resize : width = "+e+" height = "+t),this.zadPlayer.resize(e,t)},e.prototype.onError=function(e){this.errorCallback.subscribe(e)},e.prototype.onBeforePlay=function(e){this.beforePlayCallback.subscribe(e)},e.prototype.onPlay=function(e){this.playCallback.subscribe(e)},e.prototype.onPause=function(e){this.pauseCallback.subscribe(e)},e.prototype.onBuffer=function(e){this.bufferCallback.subscribe(e)},e.prototype.onBeforeComplete=function(e){this.beforePlayCallback.subscribe(e)},e.prototype.onComplete=function(e){this.completeCallback.subscribe(e)},e.prototype.onVolume=function(e){this.volumeCallback.subscribe(e)},e.prototype.onFullscreen=function(e){this.fullscreeCallback.subscribe(e)},e.prototype.onResize=function(e){this.resizeCallback.subscribe(e)},e.prototype.onSeek=function(e){this.seekCallback.subscribe(e)},e.prototype.onTime=function(e){this.timeCallback.subscribe(e)},e.prototype.onClick=function(e){this.clickCallback.subscribe(e)},e.prototype.onMuteChange=function(e){this.muteChangeCallback.subscribe(e)},e.prototype.getFullscreenCallback=function(){return this.fullscreeCallback},e.prototype.getCompleteCallback=function(){return this.completeCallback},e.prototype.getClickCallback=function(){return this.clickCallback},e.prototype.getPlayCallback=function(){return this.playCallback},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/BasePlayer.ts","/src/video")},{"../logging/LogManager":58,"../utility/SubscribableCallback":274,"./player/Player":286,_process:8,buffer:4,timers:9}],280:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../logging/LogManager"),f=e("../utility/Utility"),g=function(){function e(e){this.zadPlayer=e,this.geckoLogger=h.getLogger("BasePlayerConfigurator")}return e.prototype.getId=function(){return this.zadPlayer.id},e.prototype.addButton=function(e,t,i,n,r,o,a,s,l){this.zadPlayer.addButton(e,t,i,n,r,o,a,s,l)},e.prototype.addTextButton=function(e,t,i,n,r,o,a,s,l){this.zadPlayer.addTextButton(e,t,i,n,r,o,a,s,l)},e.prototype.hideButton=function(e){try{e&&this.zadPlayer.hideButton(e)}catch(t){this.geckoLogger.logError(f.errorMsg(" hideButton's catch called ",t))}},e.prototype.showButton=function(e){try{e&&this.zadPlayer.showButton(e)}catch(t){this.geckoLogger.logError(f.errorMsg(" showButton's catch called ",t))}},e.prototype.deleteButton=function(e){try{e&&this.zadPlayer.deleteButton(e)}catch(t){this.geckoLogger.logError(f.errorMsg(" deleteButton's catch called ",t))}},e.prototype.hideDefaultControls=function(){this.zadPlayer.hideDefaultControls()},e.prototype.showDefaultControls=function(){this.zadPlayer.showDefaultControls()},e}();t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/BasePlayerConfigurator.ts","/src/video")},{"../logging/LogManager":58,"../utility/Utility":275,_process:8,buffer:4,timers:9}],281:[function(e,t,i){(function(e,t,n,r,o,a,s,l,d,c,u){"use strict";i.VIDEO_TITLE_SPAN_CLASSNAME="zg-mediatitleclass"}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/MediaDetails.ts","/src/video")},{_process:8,buffer:4,timers:9}],282:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./player/VideoPlayer"),f=e("../logging/LogManager"),g=e("es6-promise"),m=e("../utility/BrowserUtils"),y=e("../utility/DOM"),b=e("../detector/OsType"),v=e("../config/ConfigHolder"),P=e("../detector/BrowserType"),w=e("../utility/SubscribableCallback"),S=e("../utility/DefferedPromise"),C="PauseButtonId",A="LbMediaCloseButtonId",I="LbMediaMuteButtonId",T="LbMediaUnmuteButtonId",B="MediaMuteButtonId",k="MediaUnmuteButtonId",E=function(){function e(e,t,i,n){var r=this;this.mediaDiv=e,this.player=t,this.config=i,this.geckoLogger=f.getLogger("MediaPlayer"),this.stopTouchListener=!1,this.onTimeSubscribableCallback=new w,this.pauseSubscribableCallback=new w,this.lbCloseSubscribableCallback=new w,this.lbMuteSubscribableCallback=new w,this.lbUnmuteSubscribableCallback=new w,this.muteSubscribableCallback=new w,this.unmuteSubscribableCallback=new w,this.delayClosePromise=new S,this.muted=!0,this.geckoLogger.logInfo("Creating a media player object and adding listeneres to it"),t.onPlay(function(){r.stopTouchListener=!0,r.impressionOccurred(n)}),t.onPause(function(e){var t=r.currentContentPlayerKey;console.log(" key "+t)}),t.onTime(function(e){r.onTimeSubscribableCallback.notify(e)}),m.getOS()!==b.Android&&m.getOS()!==b.WindowsPhone||(m.getBrowser()===P.Chrome?y.Util.addWindowEvent(window,"touchend",this.touchStartHandler.bind(this)):y.Util.addWindowEvent(window,"touchstart",this.touchStartHandler.bind(this))),this.addPauseButton(this.getPauseIconConfig()),this.addLBCloseButton(this.getCornerSlotCloseBtnConfig()),this.addLBMuteButton(this.getLBMuteButtonConfig()),this.addLBUnmuteButton(this.getLBUnMuteButtonConfig()),this.addMuteButton(this.getMuteButtonConfig()),this.addUnmuteButton(this.getUnmuteButtonConfig())}return Object.defineProperty(e.prototype,"PauseSubscribableCallback",{get:function(){return this.pauseSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LBCloseSubscribableCallback",{get:function(){return this.lbCloseSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LBMuteSubscribableCallback",{get:function(){return this.lbMuteSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LBUnmuteSubscribableCallback",{get:function(){return this.lbUnmuteSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MuteSubscribableCallback",{get:function(){return this.muteSubscribableCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UnmuteSubscribableCallback",{get:function(){return this.unmuteSubscribableCallback},enumerable:!0,configurable:!0}),e.prototype.setMediaDetails=function(e){try{this.mediaDetails=e;var t=[{src:e.videoContentURL,type:e.mediaType}];this.player.setMedia(t),this.currentContentPlayerKey=e.key,this.player.setPoster(e.thumbnail)}catch(i){this.geckoLogger.logError(i)}},e.prototype.impressionOccurred=function(e){var t=this;setTimeout(function(){t.delayClosePromise.resolve()},1e3*e)},e.prototype.showPauseIcon=function(){this.config.showButton&&this.config.showButton(C)},e.prototype.hidePauseIcon=function(){this.config.hideButton(C)},e.prototype.addPauseButton=function(e){var t=this,i=window;return new g.Promise(function(n,r){i.pauseButtonHandler=function(){try{t.pauseSubscribableCallback.notify()}catch(e){console.error(e)}};var o=e.buttonImgUrl,a=e.buttonClassName,s=(i.pauseButtonHandler,e.buttonPosition),l=e.buttonHpadding,d=e.buttonVpadding,c=e.buttonWidth,u=e.buttonHeight;t.config.addButton(o,a,"pauseButtonHandler",e.buttonId,s,l,d,c,u),t.config.hideButton(C),n(!0)})},e.prototype.showLBCloseIcon=function(){var e=this;this.config.showButton&&this.delayClosePromise.getPromise().then(function(){e.config.showButton(A)})},e.prototype.hideLBCloseIcon=function(){this.config.hideButton(A)},e.prototype.addLBCloseButton=function(e){var t=this,i=window;return new g.Promise(function(n,r){var o="lbMediaCloseButtonHandler";i[o]=function(){try{t.lbCloseSubscribableCallback.notify()}catch(e){console.error(e)}};var a=e.buttonImgUrl,s=e.buttonClassName,l=(i[o],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;t.config.addButton(a,s,o,e.buttonId,l,d,c,u,p),t.config.hideButton(A),n(!0)})},e.prototype.showLBMuteIcon=function(){this.config.showButton&&this.config.showButton(I)},e.prototype.hideLBMuteIcon=function(){this.config.hideButton(I)},e.prototype.addLBMuteButton=function(e){var t=this,i=window;return new g.Promise(function(n,r){var o="lbMediaMuteButtonHandler";i[o]=function(){try{t.lbMuteSubscribableCallback.notify()}catch(e){console.error(e)}};var a=e.buttonImgUrl,s=e.buttonClassName,l=(i[o],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;t.config.addButton(a,s,o,e.buttonId,l,d,c,u,p),t.config.hideButton(I),n(!0)})},e.prototype.showLBUnmuteIcon=function(){this.config.showButton&&this.config.showButton(T)},e.prototype.hideLBUnmuteIcon=function(){this.config.hideButton(T)},e.prototype.addLBUnmuteButton=function(e){var t=this,i=window;return new g.Promise(function(n,r){var o="lbMediaUnmuteButtonHandler";i[o]=function(){try{t.lbUnmuteSubscribableCallback.notify()}catch(e){console.error(e)}};var a=e.buttonImgUrl,s=e.buttonClassName,l=(i[o],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;t.config.addButton(a,s,o,e.buttonId,l,d,c,u,p),t.config.hideButton(T),n(!0)})},e.prototype.addMuteButton=function(e){var t=this,i=window;return new g.Promise(function(n,r){var o="MediaMuteButtonHandler";i[o]=function(){try{t.muteSubscribableCallback.notify()}catch(e){console.error(e)}};var a=e.buttonImgUrl,s=e.buttonClassName,l=(i[o],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;t.config.addButton(a,s,o,e.buttonId,l,d,c,u,p),t.config.hideButton(B),n(!0)})},e.prototype.showMuteIcon=function(){this.config.showButton&&this.config.showButton(B)},e.prototype.hideMuteIcon=function(){this.config.hideButton(B)},e.prototype.addUnmuteButton=function(e){var t=this,i=window;return new g.Promise(function(n,r){var o="MediaUnmuteButtonHandler";i[o]=function(){try{t.unmuteSubscribableCallback.notify()}catch(e){console.error(e)}};var a=e.buttonImgUrl,s=e.buttonClassName,l=(i[o],e.buttonPosition),d=e.buttonHpadding,c=e.buttonVpadding,u=e.buttonWidth,p=e.buttonHeight;t.config.addButton(a,s,o,e.buttonId,l,d,c,u,p),t.config.hideButton(k),n(!0)})},e.prototype.showUnmuteIcon=function(){this.config.showButton&&this.config.showButton(k)},e.prototype.hideUnmuteIcon=function(){this.config.hideButton(k)},e.prototype.updateMuteState=function(e){this.muted=e,this.muted?(this.config.showButton(B),this.config.hideButton(k)):(this.config.showButton(k),this.config.hideButton(B))},e.prototype.updateMuteStateLB=function(e){this.muted=e,this.muted?(this.config.showButton(I),this.config.hideButton(T)):(this.config.showButton(T),this.config.hideButton(I))},e.prototype.getMediaDetails=function(){return this.mediaDetails},e.prototype.touchStartHandler=function(){this.stopTouchListener||(this.geckoLogger.logInfo("touchStartHandler called for media player"),this.player.play(),this.player.pause())},e.prototype.getPauseIconConfig=function(){return{buttonId:C,buttonImgUrl:v.getPauseIcon(),buttonClassName:"pauseIcon",buttonPosition:"bottomleft",buttonHpadding:"5px",buttonVpadding:"12px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getCornerSlotCloseBtnConfig=function(){return{buttonId:A,buttonImgUrl:v.getInarticleCloseBtnLB(),buttonClassName:"lbclose",buttonPosition:"topright",buttonHpadding:"0px",buttonVpadding:"8px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getLBMuteButtonConfig=function(){return{buttonId:I,buttonImgUrl:v.getInbannerMuteBtneUrl(),buttonClassName:"lbmute",buttonPosition:"bottomright",buttonHpadding:"0px",buttonVpadding:"12px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getLBUnMuteButtonConfig=function(){return{buttonId:T,buttonImgUrl:v.getInbannerUnmuteBtneUrl(),buttonClassName:"lbsound",buttonPosition:"bottomright",buttonHpadding:"0px",buttonVpadding:"12px",buttonWidth:"18px",buttonHeight:"18px"}},e.prototype.getMuteButtonConfig=function(){return{buttonId:B,buttonImgUrl:v.getInbannerMuteBtneUrl(),buttonClassName:"mute",
buttonPosition:"bottomright",buttonHpadding:"10px",buttonVpadding:"10px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.getUnmuteButtonConfig=function(){return{buttonId:k,buttonImgUrl:v.getInbannerUnmuteBtneUrl(),buttonClassName:"mute",buttonPosition:"bottomright",buttonHpadding:"10px",buttonVpadding:"10px",buttonWidth:"30px",buttonHeight:"30px"}},e.prototype.getPlayableMedia=function(){return this.player},e.prototype.getOnTimeSubscribable=function(){return this.onTimeSubscribableCallback},e.createMediaPlayer=function(t,i,n,r){var o="zMdPlyr_"+t;i.id=o,i.style.display="none";var a=[{src:v.getBlankMP4(),type:"video/mp4"}],s={type:"auto",width:1,height:1,autoPlay:!1,muteOnLoad:!0,hideControls:!0,sources:a},l=function(e){console.log("Failure im video media creation "+e)},d=new h,c=d.createMedia(o,s,window,l);return new g.Promise(function(t,n){c.configPromise.then(function(o){c.playablePromise.then(function(n){t(new e(i,n,o,r))})["catch"](function(e){console.error(e),n(e)})})})},e.createMediaDiv=function(e,t,i){var n=i.createElement("div");return n.id=e,t.appendChild(n),n},e}();t.exports=E}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/MediaPlayer.ts","/src/video")},{"../config/ConfigHolder":23,"../detector/BrowserType":29,"../detector/OsType":31,"../logging/LogManager":58,"../utility/BrowserUtils":264,"../utility/DOM":266,"../utility/DefferedPromise":267,"../utility/SubscribableCallback":274,"./player/VideoPlayer":287,_process:8,buffer:4,"es6-promise":5,timers:9}],283:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},f=e("./BasePlayerConfigurator"),g=function(e){function t(t){var i=e.call(this,t)||this;return i.zadPlayer=t,i}return h(t,e),t}(f);t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/MediaPlayerConfigurator.ts","/src/video")},{"./BasePlayerConfigurator":280,_process:8,buffer:4,timers:9}],284:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./../logging/LogManager"),f=function(){function e(){this.geckoLogger=h.getLogger("VideoPlayList"),this.playableQueue=[]}return e.prototype.add=function(e){this.geckoLogger.logInfo("Adding media into playlist"),this.playableQueue.push(e)},e.prototype.start=function(){this.currentPlayable=this.playableQueue.pop(),this.geckoLogger.logInfo("client called playNext"),this.currentPlayable&&this.currentPlayable.start()},e.prototype.updateCurrentPlayable=function(e){this.currentPlayable=e},e.prototype.pause=function(){this.currentPlayable&&this.currentPlayable.pause()},e.prototype.play=function(){this.currentPlayable&&this.currentPlayable.play()},e.prototype.seek=function(e){this.currentPlayable&&this.currentPlayable.seek(e)},e.prototype.resize=function(e,t){this.currentPlayable&&this.currentPlayable.resize(e,t)},e.prototype.mute=function(e){this.currentPlayable&&this.currentPlayable.mute(e)},e.prototype.isFullscreen=function(){return!!this.currentPlayable&&this.currentPlayable.isFullscreen()},e.prototype.setVolume=function(e){this.currentPlayable&&this.currentPlayable.setVolume(e)},e.prototype.close=function(){this.currentPlayable&&(this.mute(!0),this.pause(),this.currentPlayable.close())},e}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/VideoPlayList.ts","/src/video")},{"./../logging/LogManager":58,_process:8,buffer:4,timers:9}],285:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../config/ConfigHolder"),f=e("../../utility/Utility"),g=function(){function e(){}return e.generateParallelConfig=function(e,t,i,n,r){var o={orderedVasts:[]},a=[],s=[],l="";if(i){for(var d=0,c=e.length;d<c;d++)if(e[d]){var u=e[d];if(u.behaviour){var p=u.behaviour,g=1!==p.SoundOnload,m=0===p.ClicksOnlyOnAd&&0===p.fullscreenIcon||!!p.onclickFullscreen&&p.onclickFullscreen;(0===p.ClicksOnlyOnAd&&1===p.fullscreenIcon||0===p.ClicksOnlyOnAd&&2===p.fullscreenIcon||1===p.ClicksOnlyOnAd)&&(m=!1);var y=!!p.landingPageOnClick&&p.landingPageOnClick,b=0===p.ClicksOnlyOnAd,v=0===p.ClicksOnlyOnAd,P=void 0;P={type:p.type,width:n,height:r,playAdOnReady:!1,landingPageOnClick:y,onclickFullscreen:m,landingPageOnEsc:v,muteOnLoad:g,viewability:!!p.viewability&&p.viewability,landingPageOnExit:b,preLoadMedia:!!p.preLoadMedia&&p.preLoadMedia,hideControls:!0};var w={adtag:u.adTag?u.adTag:"",config:P};s.push(w),u.noOfTagsInitlizedAfterErr&&(o.noOfTagsInitlizedAfterErr=u.noOfTagsInitlizedAfterErr),u.maxParallelismtriggered&&(o.maxParallelism=u.maxParallelismtriggered),u.dtimeout&&(o.demandPartnerTimeout=u.dtimeout),u.ptimeout&&(o.selectionDelayMs=u.ptimeout)}}return o.orderedVasts=s,o}var S=e[0];if(f.isNullOrUndefined(f.getTopWindowReferrerUrl())&&(l=f.getTopWindowReferrerUrl()),this.isSecure?S.adExpressUrl="https://"+S.adExpressUrl:S.adExpressUrl="http://"+S.adExpressUrl,S.maxParallelCalls>h.getParallelTagCallsGeneratorLimit()&&(S.maxParallelCalls=h.getParallelTagCallsGeneratorLimit()),S.parallelism&&S.maxParallelCalls>0){for(var d=1;d<=S.maxParallelCalls;d++){var C=void 0;C=S.adExpressUrl+"?n="+S.nid+"&c="+S.chanid+"&d="+S.dimid+"&s="+S.pubid+"&v=vast2&pu="+t+"&ru="+l,f.isNullOrUndefined(S.thirdPartyClickURL)&&(C+="&l="+S.thirdPartyClickURL),f.isNullOrUndefined(S.thirdPartyImprURL)&&(C+="&it="+S.thirdPartyImprURL),C+="&ct=xp:p"+d+"&z="+Math.random(),a.push(C)}o.orderedVasts=a}return S.noOfTagsInitlizedAfterErr&&(o.noOfTagsInitlizedAfterErr=S.noOfTagsInitlizedAfterErr),S.maxParallelismtriggered&&(o.maxParallelism=S.maxParallelismtriggered),S.dtimeout&&(o.demandPartnerTimeout=S.dtimeout),S.ptimeout&&(o.selectionDelayMs=S.ptimeout),o},e}();g.isSecure=f.getTopWindowProtocol(),t.exports=g}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/player/ParallelTagGenerator.ts","/src/video/player")},{"../../config/ConfigHolder":23,"../../utility/Utility":275,_process:8,buffer:4,timers:9}],286:[function(e,t,i){(function(e,i,n,r,o,a,s,l,d,c,u){"use strict";var p;!function(e){e.CALLBACKS={ON_AD_IMPRESSION:"onAdImpression",ON_AD_READY:"onAdReady",ON_MUTE_CHANGE:"onMuteChange",ON_FULLSCREEN:"onFullscreen",ON_AD_COMPLETE:"onAdComplete",ON_AD_CLICK:"onAdClick",ON_PAUSE:"onPause",ON_PLAY:"onPlay",ON_AD_CLOSED:"onAdClosed",ON_AD_STOPPED:"onAdStopped",ON_AD_ERROR:"onAdError",ON_ERROR:"onError",ON_RESIZE:"onResize",ON_AD_TIME:"onAdTime",ON_PARALLEL_INIT:"onParallelInitialized",ON_AD_SKIPPED:"onAdSkipped"},e.ADTYPE={VAST:"vast",VPAID:"vpaid"},e.PLAYERTYPE={HTML5:"html5",FLASH:"flash"};var t;!function(e){e[e.HTML5=0]="HTML5",e[e.FLASH=1]="FLASH",e[e.AUTO=2]="AUTO"}(t||(t={}));var i;!function(e){e[e.PLAYING=0]="PLAYING",e[e.BUFFERING=1]="BUFFERING",e[e.PAUSED=2]="PAUSED",e[e.IDLE=3]="IDLE"}(i=e.State||(e.State={}))}(p||(p={})),t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/player/Player.ts","/src/video/player")},{_process:8,buffer:4,timers:9}],287:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("es6-promise"),f=e("../../../src/utility/Utility"),g=e("../../config/ConfigHolder"),m=e("../../logging/LogManager"),y=e("../../video/AdPlayer"),b=e("../../utility/DefferedPromise"),v=e("../../video/AdPlayerConfigurator"),P=e("../../video/MediaPlayerConfigurator"),w=e("../../video/BasePlayer"),S=e("../../utility/SubscribableCallback"),C=function(){function e(){this.configPromise=new b,this.playablePromise=new b,this.adDetailsCallback=new S,this.configMediaPromise=new b,this.playableMediaPromise=new b,this.geckoLogger=m.getLogger("VideoPlayer")}return e.prototype.createAd=function(e,t,i,n,r,o){var a=this;return t.callback=function(e){e.onParallelInitialized=function(){r.resolve()},e.onAdError=function(e,t,i){n(e,t,i),o.notify(e)}},this.getInstance(e,t,i).then(function(e){e.onReady=function(){e.loadContent()},e.onAdReady=function(){var t=new v(e,n,o);a.configPromise.resolve(t);var i=new y(e);i&&a.playablePromise.resolve(i)},e.onParallelInitialized=function(){r.resolve()},e.onAdError=function(e,t,i){n(e,t,i),o.notify(e)},e.onSelected=function(e){a.adDetailsCallback.notify(e)}})["catch"](function(e){a.geckoLogger.logDebug(e),n(e)}),{configPromise:this.configPromise.getPromise(),playablePromise:this.playablePromise.getPromise(),adDetailsCallback:this.adDetailsCallback}},e.prototype.createMedia=function(e,t,i,n){var r=this;return this.getInstance(e,t,i).then(function(e){e.onReady=function(){var t=new P(e);r.configMediaPromise.resolve(t);var i=new w(e);i&&r.playableMediaPromise.resolve(i)},e.onPlay=function(){},e.onError=function(){n()}})["catch"](function(e){n(e)}),{configPromise:this.configMediaPromise.getPromise(),playablePromise:this.playableMediaPromise.getPromise()}},e.prototype.getInstance=function(t,i,n){var r=this,o=n,a=o.document;return f.getTopWindowProtocol()&&(e.videoUrl=g.getVideoPlayerSecureURL()),o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]="undefined"==typeof o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]?e.FILESTATUS.START:o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS],new h.Promise(function(n,s){if(r.geckoLogger.logDebug("Wrapper load status "+o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]+" "),o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]===e.FILESTATUS.START)o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]=e.FILESTATUS.LOADING,r.geckoLogger.logDebug("Wrapper file loading "),f.loadFile(e.videoUrl,a).then(function(){r.geckoLogger.logDebug("Wrapper file loaded "),o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]=e.FILESTATUS.LOADED,n(e.createPlayerObj(t,i,o))})["catch"](function(){r.geckoLogger.logError("Failed to load video url"),s(Error("Failed to load video url"))});else if(o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]===e.FILESTATUS.LOADING){r.geckoLogger.logDebug("Wrapper file is still loading, waiting to load...");var l=setInterval(function(){o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]===e.FILESTATUS.LOADED&&(n(e.createPlayerObj(t,i,o)),clearInterval(l))},g.getVideoLoaderInterval())}else o[e.WINDOWFLAGS.ZVPWRAPPERLOADSTATUS]===e.FILESTATUS.LOADED&&(r.geckoLogger.logDebug("Wrapper file already loaded"),n(e.createPlayerObj(t,i,o)))})},e.createPlayerObj=function(e,t,i){var n=m.getLogger("VideoPlayer");n.logDebug(" Creating player object id : "+e);var r=i,o=new r.zzAdPlayer(e,t);return o},e}();C.videoUrl=g.getVideoPlayerURL(),C.WINDOWFLAGS={ZVPWRAPPERLOADSTATUS:"ZVPWRAPPERLOADSTATUS"},C.FILESTATUS={START:"START",LOADING:"LOADING",LOADED:" LOADED"},t.exports=C}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/player/VideoPlayer.ts","/src/video/player")},{"../../../src/utility/Utility":275,"../../config/ConfigHolder":23,"../../logging/LogManager":58,"../../utility/DefferedPromise":267,"../../utility/SubscribableCallback":274,"../../video/AdPlayer":277,"../../video/AdPlayerConfigurator":278,"../../video/BasePlayer":279,"../../video/MediaPlayerConfigurator":283,_process:8,buffer:4,"es6-promise":5,timers:9}],288:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("../../utility/Utility"),f="AdProperties",g="ADMETA_IA_PREROLL",m=function(){function e(){}return e.getMedia=function(e,t){var i,n=h.parseXML(e),r=h.getNodeElementValues(n,f,g);if(r&&r.length>0){var o=JSON.parse(r[0]);if(o.ContentVideoArray&&o.ContentVideoArray.length>0){var a=Math.floor(Math.random()*o.ContentVideoArray.length),s=o.ContentVideoArray[a];return i={videoContentURL:s.contentVideoURl,videoTitle:s.videoTitle,thumbnail:s.thumbnail,sponsoredBy:s.sponsoredBy,containerTitle:s.containerTitle,mediaType:s.mediaType,key:String(a),props:t}}}},e.getMediaArray=function(e,t,i,n,r){var o=[],a=h.parseXML(e),s=h.getNodeElementValues(a,f,g);if(s&&s.length>0){var l=JSON.parse(s[0]);if(l.ContentVideoArray&&l.ContentVideoArray.length>0){for(var d=0,c=l.ContentVideoArray.length;d<c;d++){var u=l.ContentVideoArray[d],p={videoContentURL:h.isNullOrUndefined(n)&&""!==n?n:u.contentVideoURl,videoTitle:u.videoTitle,thumbnail:u.thumbnail,sponsoredBy:u.sponsoredBy,containerTitle:u.containerTitle,mediaType:h.isNullOrUndefined(r)&&""!==r?r:u.mediaType,duration:i,key:String(d),props:t};o.push(p)}return o}}},e}();t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/video/position/VideoAdPositioningHelper.ts","/src/video/position")},{"../../utility/Utility":275,_process:8,buffer:4,timers:9}],ZdGTag:[function(e,t,i){(function(i,n,r,o,a,s,l,d,c,u,p){"use strict";var h=e("./GeckoController"),f=e("../placement/PlacementBuilder"),g=e("../prerequestinfo/PreRequestInfoManager"),m=e("../eventtracker/EventTrackerFactory"),y=e("../utility/BrowserUtils"),b=function(){function e(e,t,i,n,r,o,a,s,l,d,c,u,p){this.superId=e,this.network=t,this.tmy=i,this.geo=n,this.charset=r,this.userDebugToken=o,this.errorCallback=a,this.preInfo=s,this.geoDetails=u,this.placementBuildable=[],this.isGeckoLoggerOn=!1,this.adreqpath="adserver",s&&y.setResponseDetails(s.browserName,s.browserVersion,s.osName,s.osVersion,s.deviceCategory,s.manufacturer,s.modelVersion),this.isHBEnabled=p,this.preRequestInfoManager=new g(s,this.isHBEnabled,t),this.eventTrackerFactory=new m(JSON.parse(l),JSON.parse(d),o,c,u)}return e.prototype.addPlacement=function(e,t,i,n,r,o){var a=new f(this,e,this.network,n,r,o,t,i,this.preInfo.clientIP);return this.placementBuildable.push(a),a},e.prototype.setGeckoLogger=function(){this.isGeckoLoggerOn=!0},e.prototype.setAmp=function(){this.isAMP=!0},e.prototype.setAdReqPath=function(e){this.adreqpath=e},e.prototype.loadAds=function(){try{for(var e=[],t=0,i=this.placementBuildable;t<i.length;t++){var n=i[t];e.push(n.build())}this.geckoController=new h(this.superId,this.network,e,this.tmy,this.geo,this.charset,this.isAMP,this.preRequestInfoManager,this.eventTrackerFactory,this.userDebugToken,this.isGeckoLoggerOn,this.geoDetails,this.adreqpath,this.isHBEnabled),this.geckoController.loadAds()}catch(r){void 0!==r&&this.errorCallback&&this.errorCallback(r.message)}},e.prototype.reloadAds=function(e){this.geckoController&&this.geckoController.reloadAds(e)},e.prototype.placementReady=function(e){this.geckoController.placementReady(e)},e}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate,e("timers").clearImmediate,"/src/core/GeckoTag.ts","/src/core")},{"../eventtracker/EventTrackerFactory":44,"../placement/PlacementBuilder":63,"../prerequestinfo/PreRequestInfoManager":66,"../utility/BrowserUtils":264,"./GeckoController":25,_process:8,buffer:4,timers:9}]},{},["ZdGTag"])("ZdGTag")})}();